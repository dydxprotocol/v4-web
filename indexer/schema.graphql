type Price @entity {
  id: ID!
  asset: String! @index
  timestamp: Int! @index
  price: BigInt!
}

type Liquidity @entity {
  id: ID!
  provider: String! @index
  stable: BigInt!
  lpAmount: BigInt!
  timestamp: Int!
  latest: Boolean!
}

type TotalLiquidity @entity {
  id: ID!
  stable: BigInt!
  lpAmount: BigInt!
  lastTimestamp: Int!
}

type PositionKey @entity {
  id: ID!
  account: String! @index
  indexAssetId: String! @index
  isLong: Boolean!
}

enum PositionChange {
  INCREASE
  DECREASE
  CLOSE
  LIQUIDATE
}

type Position @entity {
  id: ID!
  positionKey: PositionKey!
  collateralAmount: BigInt!
  size: BigInt!
  timestamp: Int!
  latest: Boolean!
  change: PositionChange!
  collateralTransferred: BigInt!
  positionFee: BigInt!
  fundingRate: BigInt!
  pnlDelta: BigInt!
  realizedFundingRate: BigInt!
  realizedPnl: BigInt!
}

type TotalPosition @entity {
  id: ID!
  indexAssetId: String! @index
  isLong: Boolean!
  collateralAmount: BigInt!
  size: BigInt!
  lastTimestamp: Int!
}
