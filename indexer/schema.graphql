type Price @entity @index(fields: ["asset", "timestamp"]) {
  id: ID!
  asset: String!
  timestamp: Int!
  price: BigInt!
}

type Liquidity @entity {
  id: ID!
  timestamp: Int!
  latest: Boolean!
  lpAssetBalance: BigInt!
  account: String! @index
  baseAsset: BigInt!
  liquidity: BigInt!
  lpAsset: BigInt!
  fee: BigInt!
}

type PositionKey @entity {
  id: ID!
  account: String! @index
  indexAssetId: String! @index
  isLong: Boolean!
}

enum PositionChange {
  INCREASE
  DECREASE
  CLOSE
  LIQUIDATE
}

type Position @entity {
  id: ID!
  positionKey: PositionKey!
  change: PositionChange!
  timestamp: Int!
  latest: Boolean!
  collateral: BigInt!
  size: BigInt!
  price: BigInt!
  outAveragePrice: BigInt!
  realizedFundingRate: BigInt!
  realizedPnl: BigInt!
  collateralDelta: BigInt!
  sizeDelta: BigInt!
  outLiquidityFee: BigInt!
  outProtocolFee: BigInt!
  outLiquidationFee: BigInt!
  fundingRate: BigInt!
  outFundingRate: BigInt!
  pnlDelta: BigInt!
  outPnlDelta: BigInt!
  outAmount: BigInt!
}
