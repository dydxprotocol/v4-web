(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[6112],{69496:e=>{"use strict";function t(e){return"function"==typeof e?e():e}function n(){var e={};return e.promise=new Promise((function(t,n){e.resolve=t,e.reject=n})),e}e.exports=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=void 0,s=void 0,i=void 0,l=[];return function(){var c=t(r),m=(new Date).getTime(),d=!o||m-o>c;o=m;for(var g=arguments.length,v=Array(g),p=0;p<g;p++)v[p]=arguments[p];if(d&&a.leading)return a.accumulate?Promise.resolve(e.call(this,[v])).then((function(e){return e[0]})):Promise.resolve(e.call.apply(e,[this].concat(v)));if(s?clearTimeout(i):s=n(),l.push(v),i=setTimeout(u.bind(this),c),a.accumulate){var f=l.length-1;return s.promise.then((function(e){return e[f]}))}return s.promise};function u(){var t=s;clearTimeout(i),Promise.resolve(a.accumulate?e.call(this,l):e.apply(this,l[l.length-1])).then(t.resolve,t.reject),l=[],s=null}}},80314:e=>{e.exports={tag:"tag-3vwCgpev",disabled:"disabled-3vwCgpev",animated:"animated-3vwCgpev"}},5508:e=>{e.exports={tags:"tags-3KU1SHws",tag:"tag-3KU1SHws",tagBuy:"tagBuy-3KU1SHws",tagSell:"tagSell-3KU1SHws"}},72340:e=>{e.exports={"tablet-small-breakpoint":"screen and (max-width: 428px)",scrollable:"scrollable-3BguwoO-",content:"content-3BguwoO-",title:"title-3BguwoO-",label:"label-3BguwoO-",buttonsWrapper:"buttonsWrapper-3BguwoO-",button:"button-3BguwoO-",previewMessage:"previewMessage-3BguwoO-",warnings:"warnings-3BguwoO-",leverageInput:"leverageInput-3BguwoO-"}},73509:e=>{e.exports={label:"label-2vz0U6kF"}},3631:(e,t,n)=>{"use strict";n.d(t,{CreateConfirmDialog:()=>s});var r=n(67294),a=n(9187);const o=r.lazy(async()=>({default:(await Promise.all([n.e(8193),n.e(706),n.e(4078),n.e(83),n.e(2273),n.e(9602),n.e(4882),n.e(1274),n.e(5514),n.e(268),n.e(4956),n.e(6848),n.e(3566)]).then(n.bind(n,44956))).AdaptiveConfirmDialog})),s=(0,a.withDialogLazyLoad)(o)},61010:(e,t,n)=>{"use strict";n.r(t),n.d(t,{LeverageDialog:()=>D});var r=n(74245),a=n(67294),o=n(93302),s=n.n(o),i=n(89865),l=n(69496),u=n.n(l),c=n(94184),m=n.n(c),d=n(15300),g=n(54056),v=n(73509);function p(e){const{htmlFor:t,children:n,className:r,id:o,...s}=e;return a.createElement(g.BeforeSlot,{...s,className:m()(v.label,r)},a.createElement("label",{id:o,htmlFor:t},n))}var f=n(91436),b=n(3631),w=n(61572),h=n(80314),S=n.n(h);function y(e){const{className:t,...n}=e;return a.createElement("span",{...n,className:c(t,S().tag,S().disabled)})}var x=n(5508);const C={1:(0,w.t)("Limit"),2:(0,w.t)("Market",{context:"trading"}),3:(0,w.t)("Stop",{context:"trading"}),4:(0,w.t)("StopLimit")};function E(e){const{side:t,orderType:n,customFields:r}=e,o=[{text:1===t?(0,w.t)("Buy"):(0,w.t)("Sell"),className:1===t?x.tagBuy:x.tagSell},{text:C[n]}];return void 0!==r&&Object.values(r).filter(e=>"string"==typeof e).map(e=>o.push({text:e})),a.createElement("div",{className:x.tags},o.map(e=>a.createElement(y,{key:e.text,className:m()(x.tag,e.className)},e.text)))}var N=n(40160)
;function B(e,t){return s()(e).div(t).round(0,s().roundDown).mul(t)}function O(e,t,n){const r=B(e,5);if(r.gt(0)&&r.minus(t).mod(n).eq(0))return r}function k(e,t,n){const r=t.eq(n),a=r?0:t;return B(r?e:e.minus(t),n).plus(a)}function M(e,t,n){return e.plus(s()(n).mul(t))}function T(e){if(e.min>=e.max)return[];const t=new(s())(e.min),n=new(s())(e.max),r=new(s())(e.step),a=function(e,t){return e.gt(1)||t.lt(1)?e:s()(1)}(t,n),o=function(e,t,n){const r=t.minus(e).div(n);return r.gte(4)?3:r.round(0,s().roundDown).minus(1).toNumber()}(t,n,r),i=function(e,t,n){return t.minus(e).div(n+1)}(t,n,o),l=[a.toNumber()];for(let e=1;e<=o;e++){const o=M(a,i,e);let s=O(o,t,r);if((void 0===s||s.eq(l[e-1]))&&(s=k(o,t,r)),!s.eq(l[e-1])){if(s.gte(n))break;l.push(s.toNumber())}}return l.push(e.max),l}var L=n(72340);function D(e){const{isOpen:t,onClose:n,leverage:s,title:l,symbol:c,displaySymbol:g,brokerName:v,min:w,max:h,step:S,side:y,orderType:x,infos:C,warnings:B,errors:O,customFields:k,onLeverageSet:M,onLeveragePreview:D,onSetLeverageValueInOrderWidget:I}=e,j=(0,a.useCallback)(u()(function(){let e;return async t=>{let n;const r=e=D(Y(t));try{n=await r}catch(e){n={errors:[(0,N.getErrorMessage)(e)]}}e===r&&J.current&&G(n)}}(),300),[]),[P,U]=(0,a.useState)(s),[q,H]=(0,a.useState)(!1),[A,K]=(0,a.useState)(!1),[W,z]=(0,a.useState)(),[V,$]=(0,a.useState)(),[R,G]=(0,a.useState)({infos:C,warnings:B,errors:O}),J=(0,i.useIsMounted)();(0,a.useEffect)(()=>{let e;const t=new o.Big(P).minus(w).mod(S);void 0!==R.errors&&R.errors.length>0?e=R.errors.join(". "):q?e=void 0:t.eq(0)||(e=(0,r.t)("The specified value is not a multiple of {step}",{replace:{step:String(S)}})),K(F(R.errors)||q||void 0!==e),z(e),$(void 0)},[q,P,S,w,R]),(0,a.useEffect)(()=>{j(P)},[P,j]),(0,a.useEffect)(()=>{U(s)},[s]);const Q=(0,a.useMemo)(()=>l.charAt(0).toUpperCase()+l.substring(1).toLocaleLowerCase(),[l]),X=(0,a.useMemo)(()=>T({min:w,max:h,step:S}),[h,w,S]);return a.createElement(b.CreateConfirmDialog,{isOpen:t,isOpened:t,submitButtonDisabled:A,render:function(){var e,t;return a.createElement(d.TouchScrollContainer,null,a.createElement("div",{className:L.content},a.createElement("div",{className:L.title},`${g}, ${v}`),a.createElement(E,{side:y,orderType:x,customFields:k}),a.createElement(p,{htmlFor:"leverageInput",className:L.label},(0,r.t)("Leverage")),a.createElement(f.NumberInput,{id:"leverageInput",value:P,min:w,max:h,step:S,roundByStep:!1,error:A||Boolean(V),errorMessage:W||V,boundariesErrorMessages:{greaterThanMax:(0,r.t)("Specified value is greater than the leverage maximum of {max}",{replace:{max:String(h)}}),lessThanMin:(0,r.t)("Specified value is less than the leverage minimum of {min}",{replace:{min:String(w)}})},errorHandler:_,onValueChange:Z,stretch:!0,className:L.leverageInput}),a.createElement("div",{className:L.buttonsWrapper},X.map(e=>a.createElement("button",{type:"button",className:L.button,key:e,onClick:()=>{Z(e)}},"x"+e))),F(R.infos)&&a.createElement("div",{className:L.previewMessage
},null===(e=R.infos)||void 0===e?void 0:e.join(". ")),F(R.warnings)&&a.createElement("div",{className:m()(L.previewMessage,L.warnings)},null===(t=R.warnings)||void 0===t?void 0:t.join(". "))))},title:Q,dataName:"trading-leverage-dialog",submitButtonText:(0,r.t)("Confirm"),cancelButtonText:(0,r.t)("Cancel"),onSubmit:async function(){try{await M(Y(P)),I(P),n()}catch(e){$((0,N.getErrorMessage)(e))}},onCancel:()=>{},onClose:n,defaultActionOnClose:"cancel",onClickOutside:n});function Y(e){return{side:y,symbol:c,leverage:e,customFields:k,orderType:x}}function Z(e){U(e)}function _(e){H(e)}}function F(e){return void 0!==e&&e.length>0}},15300:(e,t,n)=>{"use strict";n.d(t,{TouchScrollContainer:()=>i});var r=n(67294),a=n(67891),o=n(16282),s=n(85452);function i(e){const{reference:t,children:n,...o}=e,i=(0,r.useRef)(null),u=(0,r.useCallback)(e=>{t&&(t.current=e),s.CheckMobile.iOS()&&(null!==i.current&&(0,a.enableBodyScroll)(i.current),i.current=e,null!==i.current&&(0,a.disableBodyScroll)(i.current,{allowTouchMove:l(i)}))},[t]);return r.createElement("div",{ref:u,...o},n)}function l(e){return t=>{const n=(0,o.ensureNotNull)(e.current),r=document.activeElement;return!n.contains(t)||null!==r&&n.contains(r)&&r.contains(t)}}}}]);