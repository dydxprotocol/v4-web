(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[6112],{839391:e=>{"use strict";e.exports=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=void 0,a=void 0,o=void 0,s=[];return function(){var i=function(e){return"function"==typeof e?e():e}(t),u=(new Date).getTime(),c=!r||u-r>i;r=u;for(var m=arguments.length,d=Array(m),g=0;g<m;g++)d[g]=arguments[g];if(c&&n.leading)return n.accumulate?Promise.resolve(e.call(this,[d])).then((function(e){return e[0]})):Promise.resolve(e.call.apply(e,[this].concat(d)));if(a?clearTimeout(o):a=function(){var e={};return e.promise=new Promise((function(t,n){e.resolve=t,e.reject=n})),e}(),s.push(d),o=setTimeout(l.bind(this),i),n.accumulate){var p=s.length-1;return a.promise.then((function(e){return e[p]}))}return a.promise};function l(){var t=a;clearTimeout(o),Promise.resolve(n.accumulate?e.call(this,s):e.apply(this,s[s.length-1])).then(t.resolve,t.reject),s=[],a=null}}},127235:e=>{e.exports={tag:"tag-E35yqcCX",disabled:"disabled-E35yqcCX",animated:"animated-E35yqcCX"}},15922:e=>{e.exports={tags:"tags-nNSIFYl1",tag:"tag-nNSIFYl1",tagBuy:"tagBuy-nNSIFYl1",tagSell:"tagSell-nNSIFYl1"}},11395:e=>{e.exports={"tablet-small-breakpoint":"(max-width: 440px)",scrollable:"scrollable-NakQh3ob",content:"content-NakQh3ob",title:"title-NakQh3ob",label:"label-NakQh3ob",buttonsWrapper:"buttonsWrapper-NakQh3ob",button:"button-NakQh3ob",previewMessage:"previewMessage-NakQh3ob",warnings:"warnings-NakQh3ob",leverageInput:"leverageInput-NakQh3ob"}},621317:(e,t,n)=>{"use strict";n.d(t,{CreateConfirmDialog:()=>s});var r=n(50959),a=n(649719);const o=r.lazy((async()=>({default:(await Promise.all([n.e(7172),n.e(5480),n.e(9766),n.e(8222),n.e(5375),n.e(601),n.e(1389),n.e(6828),n.e(6605),n.e(2371),n.e(7819),n.e(4952),n.e(5789),n.e(3905),n.e(3566)]).then(n.bind(n,976669))).AdaptiveConfirmDialog}))),s=(0,a.withDialogLazyLoad)(o)},322642:(e,t,n)=>{"use strict";n.r(t),n.d(t,{LeverageDialog:()=>D});var r=n(609838),a=n(50959),o=n(960521),s=n.n(o),l=n(252130),i=n(839391),u=n.n(i),c=n(497754),m=n.n(c),d=n(742554),g=n(463039),p=n(587125),v=n(621317),f=n(127235),b=n.n(f);function h(e){const{className:t,...n}=e;return a.createElement("span",{...n,className:c(t,b().tag,b().disabled)})}var N=n(15922);const w={1:r.t(null,void 0,n(790258)),2:r.t(null,{context:"trading"},n(105593)),3:r.t(null,{context:"trading"},n(920902)),4:r.t(null,void 0,n(264073))};function y(e){const{side:t,orderType:o,customFields:s}=e,l=[{text:1===t?r.t(null,void 0,n(169961)):r.t(null,void 0,n(168222)),className:1===t?N.tagBuy:N.tagSell},{text:w[o]}];return void 0!==s&&Object.values(s).filter((e=>"string"==typeof e)).map((e=>l.push({text:e}))),a.createElement("div",{className:N.tags},l.map((e=>a.createElement(h,{key:e.text,className:m()(N.tag,e.className)},e.text))))}var x=n(404357);function E(e,t){return s()(e).div(t).round(0,s().roundDown).mul(t)}function S(e,t,n){const r=E(e,5);if(r.gt(0)&&r.minus(t).mod(n).eq(0))return r}function C(e,t,n){
const r=t.eq(n),a=r?0:t;return E(r?e:e.minus(t),n).plus(a)}function k(e,t,n){return e.plus(s()(n).mul(t))}function M(e){if(e.min>=e.max)return[];const t=new(s())(e.min),n=new(s())(e.max),r=new(s())(e.step),a=function(e,t){return e.gt(1)||t.lt(1)?e:s()(1)}(t,n),o=function(e,t,n){const r=t.minus(e).div(n);return r.gte(4)?3:r.round(0,s().roundDown).minus(1).toNumber()}(t,n,r),l=function(e,t,n){return t.minus(e).div(n+1)}(t,n,o),i=[a.toNumber()];for(let e=1;e<=o;e++){const o=k(a,l,e);let s=S(o,t,r);if((void 0===s||s.eq(i[e-1]))&&(s=C(o,t,r)),!s.eq(i[e-1])){if(s.gte(n))break;i.push(s.toNumber())}}return i.push(e.max),i}var T=n(172912),F=n(209595),I=n(11395);function D(e){const{isOpen:t,onClose:s,leverage:i,title:c,symbol:f,displaySymbol:b,brokerName:h,min:N,max:w,step:E,side:S,orderType:C,infos:k,warnings:D,errors:B,customFields:O,onLeverageSet:Q,onLeveragePreview:q,onSetLeverageValueInOrderWidget:P}=e,j=(0,a.useCallback)(u()(function(){let e;return async t=>{let n;const r=e=q(te(t));try{n=await r}catch(e){n={errors:[(0,x.getErrorMessage)(e)]}}e===r&&R.current&&K(n)}}(),300),[]),[A,W]=(0,a.useState)(i),[Y,V]=(0,a.useState)(!1),[X,$]=(0,a.useState)(!1),[z,H]=(0,a.useState)(),[U,G]=(0,a.useState)(),[J,K]=(0,a.useState)({infos:k,warnings:D,errors:B}),R=(0,l.useIsMounted)();(0,a.useEffect)((()=>{let e;const t=new o.Big(A).minus(N).mod(E);void 0!==J.errors&&J.errors.length>0?e=J.errors.join(". "):Y?e=void 0:t.eq(0)||(e=r.t(null,{replace:{step:String(E)}},n(568556))),$(L(J.errors)||Y||void 0!==e),H(e),G(void 0)}),[Y,A,E,N,J]),(0,a.useEffect)((()=>{j(A)}),[A,j]),(0,a.useEffect)((()=>{W(i)}),[i]);const Z=(0,a.useMemo)((()=>c.charAt(0).toUpperCase()+c.substring(1).toLocaleLowerCase()),[c]),_=(0,a.useMemo)((()=>M({min:N,max:w,step:E})),[w,N,E]),ee=(0,a.useMemo)((()=>new T.PriceFormatter({priceScale:Math.pow(10,(0,F.numOfDecimalPlaces)(E)),ignoreLocaleNumberFormat:!0})),[E]);return a.createElement(v.CreateConfirmDialog,{isOpen:t,isOpened:t,submitButtonDisabled:X,render:function(){return a.createElement(d.TouchScrollContainer,null,a.createElement("div",{className:I.content},a.createElement("div",{className:I.title},`${b}, ${h}`),a.createElement(y,{side:S,orderType:C,customFields:O}),a.createElement(g.Label,{htmlFor:"leverageInput",className:I.label},r.t(null,void 0,n(824813))),a.createElement(p.NumberInput,{id:"leverageInput",value:A,min:N,max:w,step:E,roundByStep:!1,error:X||Boolean(U),errorMessage:z||U,boundariesErrorMessages:{greaterThanMax:r.t(null,{replace:{max:String(w)}},n(402517)),lessThanMin:r.t(null,{replace:{min:String(N)}},n(432381))},errorHandler:re,onValueChange:ne,stretch:!0,className:I.leverageInput,formatter:ee,shouldApplyValueOnFormatterChange:!0}),a.createElement("div",{className:I.buttonsWrapper},_.map((e=>a.createElement("button",{type:"button",className:I.button,key:e,onClick:()=>{ne(e)}},`x${e}`)))),L(J.infos)&&a.createElement("div",{className:I.previewMessage},J.infos?.join(". ")),L(J.warnings)&&a.createElement("div",{className:m()(I.previewMessage,I.warnings)},J.warnings?.join(". "))))},title:Z,
dataName:"trading-leverage-dialog",submitButtonText:r.t(null,void 0,n(874115)),cancelButtonText:r.t(null,void 0,n(904543)),onSubmit:async function(){try{await Q(te(A)),P(A),s()}catch(e){G((0,x.getErrorMessage)(e))}},onCancel:()=>{},onClose:s,defaultActionOnClose:"cancel",onClickOutside:s});function te(e){return{side:S,symbol:f,leverage:e,customFields:O,orderType:C}}function ne(e){W(e)}function re(e){V(e)}}function L(e){return void 0!==e&&e.length>0}}}]);