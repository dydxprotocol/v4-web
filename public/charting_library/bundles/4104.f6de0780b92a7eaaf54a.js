(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[4104],{409790:e=>{e.exports={menuWrap:"menuWrap-biWYdsXC",isMeasuring:"isMeasuring-biWYdsXC",scrollWrap:"scrollWrap-biWYdsXC",momentumBased:"momentumBased-biWYdsXC",menuBox:"menuBox-biWYdsXC",isHidden:"isHidden-biWYdsXC"}},230553:(e,t,o)=>{"use strict";o.d(t,{MenuContext:()=>n});const n=o(50959).createContext(null)},510618:(e,t,o)=>{"use strict";o.d(t,{DEFAULT_MENU_THEME:()=>g,Menu:()=>v});var n=o(50959),i=o(497754),r=o.n(i),l=o(650151),s=o(218954),a=o(260845),c=o(753327),u=o(370981),h=o(763212),d=o(411589),p=o(694488),m=o(230553),f=o(409790);const g=f;class v extends n.PureComponent{constructor(e){super(e),this._containerRef=null,this._scrollWrapRef=null,this._raf=null,this._scrollRaf=null,this._scrollTimeout=void 0,this._manager=new h.OverlapManager,this._hotkeys=null,this._scroll=0,this._handleContainerRef=e=>{this._containerRef=e,this.props.reference&&("function"==typeof this.props.reference&&this.props.reference(e),"object"==typeof this.props.reference&&(this.props.reference.current=e))},this._handleScrollWrapRef=e=>{this._scrollWrapRef=e,"function"==typeof this.props.scrollWrapReference&&this.props.scrollWrapReference(e),"object"==typeof this.props.scrollWrapReference&&(this.props.scrollWrapReference.current=e)},this._handleMeasure=({callback:e,forceRecalcPosition:t}={})=>{var o,n,i,r,a,c,u,h,d,p,m,f;if(this.state.isMeasureValid&&!t)return;const{position:g}=this.props,v=(0,l.ensureNotNull)(this._containerRef);let _=v.getBoundingClientRect();const C=document.documentElement.clientHeight,b=document.documentElement.clientWidth,M=null!==(o=this.props.closeOnScrollOutsideOffset)&&void 0!==o?o:0;let R=C-0-M;const W=_.height>R;if(W){(0,l.ensureNotNull)(this._scrollWrapRef).style.overflowY="scroll",_=v.getBoundingClientRect()}const{width:S,height:T}=_,y="function"==typeof g?g(S,T,C):g,E=null!==(i=null===(n=null==y?void 0:y.indentFromWindow)||void 0===n?void 0:n.left)&&void 0!==i?i:0,x=b-(null!==(r=y.overrideWidth)&&void 0!==r?r:S)-(null!==(c=null===(a=null==y?void 0:y.indentFromWindow)||void 0===a?void 0:a.right)&&void 0!==c?c:0),D=(0,s.clamp)(y.x,E,Math.max(E,x)),O=(null!==(h=null===(u=null==y?void 0:y.indentFromWindow)||void 0===u?void 0:u.top)&&void 0!==h?h:0)+M,N=C-(null!==(d=y.overrideHeight)&&void 0!==d?d:T)-(null!==(m=null===(p=null==y?void 0:y.indentFromWindow)||void 0===p?void 0:p.bottom)&&void 0!==m?m:0);let w=(0,s.clamp)(y.y,O,Math.max(O,N));if(y.forbidCorrectYCoord&&w<y.y&&(R-=y.y-w,w=y.y),t&&void 0!==this.props.closeOnScrollOutsideOffset&&y.y<=this.props.closeOnScrollOutsideOffset)return void this._handleGlobalClose(!0);const F=null!==(f=y.overrideHeight)&&void 0!==f?f:W?R:void 0;this.setState({appearingMenuHeight:t?this.state.appearingMenuHeight:F,appearingMenuWidth:t?this.state.appearingMenuWidth:y.overrideWidth,appearingPosition:{x:D,y:w},isMeasureValid:!0},(()=>{this._restoreScrollPosition(),e&&e()}))},this._restoreScrollPosition=()=>{const e=document.activeElement,t=(0,l.ensureNotNull)(this._containerRef)
;if(null!==e&&t.contains(e))try{e.scrollIntoView()}catch(e){}else(0,l.ensureNotNull)(this._scrollWrapRef).scrollTop=this._scroll},this._resizeForced=()=>{this.setState({appearingMenuHeight:void 0,appearingMenuWidth:void 0,appearingPosition:void 0,isMeasureValid:void 0})},this._resize=()=>{null===this._raf&&(this._raf=requestAnimationFrame((()=>{this.setState({appearingMenuHeight:void 0,appearingMenuWidth:void 0,appearingPosition:void 0,isMeasureValid:void 0}),this._raf=null})))},this._handleGlobalClose=e=>{this.props.onClose(e)},this._handleSlot=e=>{this._manager.setContainer(e)},this._handleScroll=()=>{this._scroll=(0,l.ensureNotNull)(this._scrollWrapRef).scrollTop},this._handleScrollOutsideEnd=()=>{clearTimeout(this._scrollTimeout),this._scrollTimeout=setTimeout((()=>{this._handleMeasure({forceRecalcPosition:!0})}),80)},this._handleScrollOutside=e=>{e.target!==this._scrollWrapRef&&(this._handleScrollOutsideEnd(),null===this._scrollRaf&&(this._scrollRaf=requestAnimationFrame((()=>{this._handleMeasure({forceRecalcPosition:!0}),this._scrollRaf=null}))))},this.state={}}componentDidMount(){this._handleMeasure({callback:this.props.onOpen});const{customCloseDelegate:e=u.globalCloseDelegate}=this.props;e.subscribe(this,this._handleGlobalClose),window.addEventListener("resize",this._resize);const t=null!==this.context;this._hotkeys||t||(this._hotkeys=d.createGroup({desc:"Popup menu"}),this._hotkeys.add({desc:"Close",hotkey:27,handler:()=>{this.props.onKeyboardClose&&this.props.onKeyboardClose(),this._handleGlobalClose()}})),this.props.repositionOnScroll&&window.addEventListener("scroll",this._handleScrollOutside,{capture:!0})}componentDidUpdate(){this._handleMeasure()}componentWillUnmount(){const{customCloseDelegate:e=u.globalCloseDelegate}=this.props;e.unsubscribe(this,this._handleGlobalClose),window.removeEventListener("resize",this._resize),window.removeEventListener("scroll",this._handleScrollOutside,{capture:!0}),this._hotkeys&&(this._hotkeys.destroy(),this._hotkeys=null),null!==this._raf&&(cancelAnimationFrame(this._raf),this._raf=null),null!==this._scrollRaf&&(cancelAnimationFrame(this._scrollRaf),this._scrollRaf=null),this._scrollTimeout&&clearTimeout(this._scrollTimeout)}render(){const{id:e,role:t,"aria-label":o,"aria-labelledby":i,"aria-activedescendant":l,"aria-hidden":s,children:u,minWidth:h,theme:d=f,className:g,maxHeight:v,onMouseOver:C,onMouseOut:b,onKeyDown:M,onFocus:R,onBlur:W}=this.props,{appearingMenuHeight:S,appearingMenuWidth:T,appearingPosition:y,isMeasureValid:E}=this.state;return n.createElement(m.MenuContext.Provider,{value:this},n.createElement(p.SubmenuHandler,null,n.createElement(c.SlotContext.Provider,{value:this._manager},n.createElement("div",{id:e,role:t,"aria-label":o,"aria-labelledby":i,"aria-activedescendant":l,"aria-hidden":s,className:r()(g,d.menuWrap,!E&&d.isMeasuring),style:{height:S,left:y&&y.x,minWidth:h,position:"fixed",top:y&&y.y,width:T},"data-name":this.props["data-name"],ref:this._handleContainerRef,onScrollCapture:this.props.onScroll,
onContextMenu:a.preventDefaultForContextMenu,tabIndex:this.props.tabIndex,onMouseOver:C,onMouseOut:b,onKeyDown:M,onFocus:R,onBlur:W},n.createElement("div",{className:r()(d.scrollWrap,!this.props.noMomentumBasedScroll&&d.momentumBased),style:{overflowY:void 0!==S?"scroll":"auto",maxHeight:v},onScrollCapture:this._handleScroll,ref:this._handleScrollWrapRef},n.createElement(_,{className:d.menuBox},u)))),n.createElement(c.Slot,{reference:this._handleSlot})))}update(e){e?this._resizeForced():this._resize()}}function _(e){const t=(0,l.ensureNotNull)((0,n.useContext)(p.SubmenuContext)),o=n.useRef(null);return n.createElement("div",{ref:o,className:e.className,onMouseOver:function(e){if(!(null!==t.current&&e.target instanceof Node&&(n=e.target,null===(i=o.current)||void 0===i?void 0:i.contains(n))))return;var n,i;t.isSubmenuNode(e.target)||t.setCurrent(null)},"data-name":"menu-inner"},e.children)}v.contextType=p.SubmenuContext},28466:(e,t,o)=>{"use strict";o.d(t,{CloseDelegateContext:()=>r});var n=o(50959),i=o(370981);const r=n.createContext(i.globalCloseDelegate)},544377:(e,t,o)=>{"use strict";o.d(t,{PopupMenu:()=>u});var n=o(50959),i=o(500962),r=o(162942),l=o(8361),s=o(510618),a=o(28466),c=o(961174);function u(e){const{controller:t,children:o,isOpened:u,closeOnClickOutside:h=!0,doNotCloseOn:d,onClickOutside:p,onClose:m,onKeyboardClose:f,"data-name":g="popup-menu-container",...v}=e,_=(0,n.useContext)(a.CloseDelegateContext),C=(0,c.useOutsideEvent)({handler:function(e){p&&p(e);if(!h)return;const t=(0,r.default)(d)?d():d;if(t&&e.target instanceof Node){const o=i.findDOMNode(t);if(o instanceof Node&&o.contains(e.target))return}m()},mouseDown:!0,touchStart:!0});return u?n.createElement(l.Portal,{top:"0",left:"0",right:"0",bottom:"0",pointerEvents:"none"},n.createElement("span",{ref:C,style:{pointerEvents:"auto"}},n.createElement(s.Menu,{...v,onClose:m,onKeyboardClose:f,onScroll:function(t){const{onScroll:o}=e;o&&o(t)},customCloseDelegate:_,ref:t,"data-name":g},o))):null}},694488:(e,t,o)=>{"use strict";o.d(t,{SubmenuContext:()=>i,SubmenuHandler:()=>r});var n=o(50959);const i=n.createContext(null);function r(e){const[t,o]=(0,n.useState)(null),r=(0,n.useRef)(null),l=(0,n.useRef)(new Map);return(0,n.useEffect)((()=>()=>{null!==r.current&&clearTimeout(r.current)}),[]),n.createElement(i.Provider,{value:{current:t,setCurrent:function(e){null!==r.current&&(clearTimeout(r.current),r.current=null);null===t?o(e):r.current=setTimeout((()=>{r.current=null,o(e)}),100)},registerSubmenu:function(e,t){return l.current.set(e,t),()=>{l.current.delete(e)}},isSubmenuNode:function(e){return Array.from(l.current.values()).some((t=>t(e)))}}},e.children)}},838683:(e,t,o)=>{"use strict";o.d(t,{VerticalAttachEdge:()=>n,HorizontalAttachEdge:()=>i,VerticalDropDirection:()=>r,HorizontalDropDirection:()=>l,getPopupPositioner:()=>c});var n,i,r,l,s=o(650151);!function(e){e[e.Top=0]="Top",e[e.Bottom=1]="Bottom"}(n||(n={})),function(e){e[e.Left=0]="Left",e[e.Right=1]="Right"}(i||(i={})),function(e){e[e.FromTopToBottom=0]="FromTopToBottom",
e[e.FromBottomToTop=1]="FromBottomToTop"}(r||(r={})),function(e){e[e.FromLeftToRight=0]="FromLeftToRight",e[e.FromRightToLeft=1]="FromRightToLeft"}(l||(l={}));const a={verticalAttachEdge:n.Bottom,horizontalAttachEdge:i.Left,verticalDropDirection:r.FromTopToBottom,horizontalDropDirection:l.FromLeftToRight,verticalMargin:0,horizontalMargin:0,matchButtonAndListboxWidths:!1};function c(e,t){return(o,c)=>{const u=(0,s.ensureNotNull)(e).getBoundingClientRect(),{verticalAttachEdge:h=a.verticalAttachEdge,verticalDropDirection:d=a.verticalDropDirection,horizontalAttachEdge:p=a.horizontalAttachEdge,horizontalDropDirection:m=a.horizontalDropDirection,horizontalMargin:f=a.horizontalMargin,verticalMargin:g=a.verticalMargin,matchButtonAndListboxWidths:v=a.matchButtonAndListboxWidths}=t,_=h===n.Top?-1*g:g,C=p===i.Right?u.right:u.left,b=h===n.Top?u.top:u.bottom,M={x:C-(m===l.FromRightToLeft?o:0)+f,y:b-(d===r.FromBottomToTop?c:0)+_};return v&&(M.overrideWidth=u.width),M}}}}]);