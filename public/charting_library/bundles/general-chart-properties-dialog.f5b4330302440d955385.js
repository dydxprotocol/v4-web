(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[7078],{50105:e=>{e.exports={innerLabel:"innerLabel-21h1g6jU"}},76535:e=>{e.exports={controlWrapper:"controlWrapper-7ApHzdB4",hidden:"hidden-7ApHzdB4",control:"control-7ApHzdB4",controlIncrease:"controlIncrease-7ApHzdB4",controlDecrease:"controlDecrease-7ApHzdB4",controlIcon:"controlIcon-7ApHzdB4",title:"title-7ApHzdB4"}},97326:e=>{e.exports={backButton:"backButton-ukxmTk5_"}},93484:e=>{e.exports={wrapper:"wrapper-DggvOZTm",container:"container-DggvOZTm",tab:"tab-DggvOZTm",active:"active-DggvOZTm",title:"title-DggvOZTm",icon:"icon-DggvOZTm",titleText:"titleText-DggvOZTm",nested:"nested-DggvOZTm",isTablet:"isTablet-DggvOZTm",isMobile:"isMobile-DggvOZTm"}},91263:e=>{e.exports={"tablet-normal-breakpoint":"screen and (max-width: 768px)","tablet-small-breakpoint":"screen and (max-width: 428px)",withSidebar:"withSidebar-1e-cIUlp",content:"content-1e-cIUlp",tabContent:"tabContent-1e-cIUlp",applyToAllButton:"applyToAllButton-1e-cIUlp"}},62358:e=>{e.exports={themesButtonText:"themesButtonText-3vn5WLwC",themesButtonIcon:"themesButtonIcon-3vn5WLwC",defaultsButtonText:"defaultsButtonText-3vn5WLwC",defaultsButtonItem:"defaultsButtonItem-3vn5WLwC"}},75604:(e,t,n)=>{"use strict";n.d(t,{InputWithError:()=>u});var l=n(67294),o=n(94184),a=n(72913),i=n(54056),s=n(37467),r=n(17138),c=n(42436),m=n(50105);const h={large:a.InputClasses.FontSizeLarge,medium:a.InputClasses.FontSizeMedium},d={attachment:c.anchors.top.attachment,targetAttachment:c.anchors.top.targetAttachment,attachmentOffsetY:-4};function u(e){const{className:t,inputClassName:n,stretch:a=!0,errorMessage:c,fontSizeStyle:u="large",endSlot:p,button:b,error:g,warning:C,innerLabel:y,inputReference:v,children:S,...T}=e,_=g&&void 0!==c?[c]:void 0,f=C&&void 0!==c?[c]:void 0,k=o(m.inputContainer,h[u],t),A=y?l.createElement(i.StartSlot,{className:m.innerLabel,interactive:!1},y):void 0,E=p||b||S?l.createElement(i.EndSlot,null,p,b,S):void 0;return l.createElement(s.FormInput,{...T,className:k,inputClassName:n,errors:_,warnings:f,hasErrors:g,hasWarnings:C,messagesPosition:r.MessagesPosition.Attached,customErrorsAttachment:d,messagesRoot:"document",inheritMessagesWidthFromTarget:!0,disableMessagesRtlStyles:!0,iconHidden:!0,stretch:a,reference:v,startSlot:A,endSlot:E})}},66361:(e,t,n)=>{"use strict";n.d(t,{NumberInputView:()=>y});var l=n(67294),o=n(89505),a=n(75604),i=n(94184),s=n(74245),r=n(21659),c=n(14897),m=n(76535);function h(e){const t=i(m.control,m.controlIncrease),n=i(m.control,m.controlDecrease);return l.createElement(l.Fragment,null,void 0!==e.title&&l.createElement("div",{className:m.title},e.title),l.createElement("div",{className:m.controlWrapper},(e.defaultButtonsVisible||e.title)&&l.createElement(l.Fragment,null,l.createElement("button",{type:"button",tabIndex:-1,"aria-label":(0,s.t)("Increase"),className:t,onClick:e.increaseValue},l.createElement(r.Icon,{icon:c,className:m.controlIcon})),l.createElement("button",{type:"button",tabIndex:-1,"aria-label":(0,s.t)("Decrease"),className:n,onClick:e.decreaseValue
},l.createElement(r.Icon,{icon:c,className:m.controlIcon})))))}var d=n(51720),u=n(65262),p=n(88812),b=n(69397);const g=[38],C=[40];function y(e){const[t,n]=(0,d.useHover)(),[i,s]=(0,u.useFocus)(),r=(0,p.createSafeMulticastEventHandler)(s.onFocus,e.onFocus),c=(0,p.createSafeMulticastEventHandler)(s.onBlur,e.onBlur),m=(0,l.useCallback)(t=>{!e.disabled&&i&&(t.preventDefault(),t.deltaY<0?e.onValueByStepChange(1):e.onValueByStepChange(-1))},[i,e.disabled,e.onValueByStepChange]);return l.createElement(a.InputWithError,{...n,id:e.id,name:e.name,pattern:e.pattern,borderStyle:e.borderStyle,fontSizeStyle:e.fontSizeStyle,value:e.value,className:e.className,inputClassName:e.inputClassName,button:function(){const{button:n,forceShowControls:a,disabled:s,title:r}=e,c=!s&&!o.mobiletouch&&(a||i||t);return s?void 0:l.createElement(l.Fragment,null,null!=n?n:l.createElement(h,{increaseValue:y,decreaseValue:v,defaultButtonsVisible:c,title:r}))}(),disabled:e.disabled,placeholder:e.placeholder,innerLabel:e.innerLabel,endSlot:e.endSlot,containerReference:e.containerReference,inputReference:e.inputReference,inputMode:e.inputMode,type:e.type,error:e.error,errorMessage:e.errorMessage,onClick:e.onClick,onFocus:r,onBlur:c,onChange:e.onValueChange,onKeyDown:function(t){if(e.disabled||0!==(0,b.modifiersFromEvent)(t.nativeEvent))return;let n=g,l=C;e.controlDecKeyCodes&&(l=l.concat(e.controlDecKeyCodes));e.controlIncKeyCodes&&(n=n.concat(e.controlIncKeyCodes));(l.includes(t.keyCode)||n.includes(t.keyCode))&&(t.preventDefault(),e.onValueByStepChange(l.includes(t.keyCode)?-1:1));e.onKeyDown&&e.onKeyDown(t)},onWheelNoPassive:m,stretch:e.stretch,intent:e.intent,highlight:e.highlight,highlightRemoveRoundBorder:e.highlightRemoveRoundBorder,autoSelectOnFocus:e.autoSelectOnFocus,"data-property-id":e["data-name"]});function y(){e.disabled||e.onValueByStepChange(1)}function v(){e.disabled||e.onValueByStepChange(-1)}}},65441:(e,t,n)=>{"use strict";n.d(t,{DialogSidebarContainer:()=>m,DialogSidebarWrapper:()=>h,DialogSidebarItem:()=>d});var l=n(67294),o=n(94184),a=n.n(o),i=n(21659),s=n(93067),r=n(93484);function c(e){return{isMobile:"mobile"===e,isTablet:"tablet"===e}}function m(e){const{mode:t,className:n,...o}=e,{isMobile:i,isTablet:s}=c(t),m=a()(r.container,s&&r.isTablet,i&&r.isMobile,n);return l.createElement("div",{...o,className:m,"data-role":"dialog-sidebar"})}function h(e){return l.createElement("div",{className:r.wrapper,...e})}function d(e){const{mode:t,title:n,icon:o,isActive:m,onClick:h,...d}=e,{isMobile:u,isTablet:p}=c(t);return l.createElement("div",{...d,className:a()(r.tab,p&&r.isTablet,u&&r.isMobile,m&&r.active),onClick:h},l.createElement(i.Icon,{className:r.icon,icon:o}),!p&&l.createElement("span",{className:r.title},l.createElement("span",{className:r.titleText},n),u&&l.createElement(i.Icon,{className:r.nested,icon:s})))}},42445:(e,t,n)=>{"use strict";n.r(t),n.d(t,{GeneralChartPropertiesDialogRenderer:()=>Y})
;var l=n(74245),o=n(67294),a=n(73935),i=n(85209),s=n(97372),r=n(44956),c=n(2822),m=n(59086),h=n(69671),d=n.n(h),u=n(72798),p=n(46403),b=n(21659),g=n(82681),C=n(46299),y=n(81839),v=n(81898),S=(n(22190),n(83969));const T=(0,l.t)("Do you really want to delete Color Theme '{name}' ?");var _=n(66189),f=n(37229),k=n(75380),A=n(42254),E=n(51720),B=n(89505),I=n(62358);function w(e){const{themeName:t,chartWidgetCollection:n,onRemove:l,manager:a}=e,[i,s]=(0,E.useHover)(),r=o.useCallback(()=>function(e,t,n){window.is_authenticated&&(0,S.showConfirm)({text:T.format({name:e}),onConfirm:({dialogClose:n})=>{(0,v.removeTheme)(e),t&&t(e),n()}},n)}(t,l,a),[t,l,a]),c=o.useCallback(()=>{(0,v.loadTheme)(t,!1,!1,n).then(()=>{n.readOnly()||window.saver.saveChartSilently(),(0,A.trackEvent)("GUI","Switch to custom theme")})},[t,n]);return o.createElement("div",{...s},o.createElement(C.PopupMenuItem,{className:I.defaultsButtonItem,isActive:!1,label:t,onClick:c,toolbox:o.createElement(k.RemoveButton,{hidden:!B.mobiletouch&&!i,onClick:r})}))}var M=n(63782);const P=(0,l.t)("Template"),D=(0,l.t)("Apply defaults"),N=((0,f.appendEllipsis)((0,l.t)("Save as")),(0,l.t)("Apply to all"));class x extends o.PureComponent{constructor(e){super(e),this._manager=null,this._handleApplyDefaults=()=>{const{model:e,chartWidgetCollection:t}=this.props;e.restorePreferences();const n=(0,v.getCurrentTheme)().name;(0,v.loadTheme)(n,!0,!0,t,void 0,void 0,!0)},this._handleSaveAs=()=>{0},this._handleRemoveTheme=e=>{this.setState({themes:this.state.themes.filter(t=>t!==e)})},this._syncThemeList=()=>{0},this.state={themes:[]},this._syncThemeList()}render(){return o.createElement(_.SlotContext.Consumer,null,e=>(this._manager=e,o.createElement(p.MatchMedia,{rule:"screen and (max-width: 768px)"},e=>o.createElement(g.DisclosureMenu,{id:"series-theme-manager",className:!e&&I.themesButtonText,hideArrowButton:e,"data-name":"theme-select",buttonChildren:this._getPlaceHolderItem(e)},this._getThemeItems(e)))))}_getPlaceHolderItem(e){return e?o.createElement(b.Icon,{className:I.themesButtonIcon,icon:M}):P}_getThemeItems(e){const{isApplyToAllVisible:t,chartWidgetCollection:n,applyToAllCallback:l}=this.props,{themes:a}=this.state;return o.createElement(o.Fragment,null,e&&t&&o.createElement(C.PopupMenuItem,{className:I.defaultsButtonItem,isActive:!1,label:N,onClick:l}),o.createElement(C.PopupMenuItem,{className:I.defaultsButtonItem,isActive:!1,label:D,onClick:this._handleApplyDefaults}),!1,a.length>0&&o.createElement(o.Fragment,null,o.createElement(y.PopupMenuSeparator,{key:"separator"}),a.map(e=>o.createElement(w,{key:e,themeName:e,onRemove:this._handleRemoveTheme,chartWidgetCollection:n,manager:this._manager}))))}}var z=n(32011),L=n(10993),W=n(4311),V=n(65441),R=n(15300);const F={areaSymbolMinTick:"normal",areaSymbolTimezone:"normal",barSymbolMinTick:"normal",barSymbolTimezone:"normal",baselineSymbolMinTick:"normal",baselineSymbolTimezone:"normal",candleSymbolMinTick:"normal",candleSymbolTimezone:"normal",dateFormat:"normal",haSymbolMinTick:"normal",haSymbolTimezone:"normal",
hiloSymbolMinTick:"normal",hiloSymbolTimezone:"normal",hollowCandleSymbolMinTick:"normal",hollowCandleSymbolTimezone:"normal",kagiAtrLength:"normal",kagiReversalAmount:"normal",kagiStyle:"normal",kagiSymbolMinTick:"normal",kagiSymbolTimezone:"normal",lineSymbolMinTick:"normal",lineSymbolTimezone:"normal",sessionId:"normal",lockScale:"normal",mainSeriesSymbolAreaPriceSource:"normal",mainSeriesSymbolBaseLevelPercentage:"normal",mainSeriesSymbolBaseLinePriceSource:"normal",mainSeriesSymbolLinePriceSource:"normal",mainSeriesSymbolStyleType:"normal",navButtons:"big",paneButtons:"big",pbLb:"normal",pbSymbolMinTick:"normal",pbSymbolTimezone:"normal",pnfAtrLength:"normal",pnfBoxSize:"normal",pnfReversalAmount:"normal",pnfSources:"normal",pnfStyle:"normal",pnfSymbolMinTick:"normal",pnfSymbolTimezone:"normal",rangeSymbolMinTick:"normal",rangeSymbolTimezone:"normal",renkoAtrLength:"normal",renkoBoxSize:"normal",renkoStyle:"normal",renkoSymbolMinTick:"normal",renkoSymbolTimezone:"normal",scalesPlacement:"normal",symbolLastValueLabel:"big",symbolTextSource:"normal"};var O=n(97326),H=n(29982);function K(e){return o.createElement(b.Icon,{className:O.backButton,icon:H,onClick:e.onClick})}var Z=n(91263);class U extends o.PureComponent{constructor(e){super(e),this._renderChildren=({requestResize:e,isSmallWidth:t})=>(this._requestResize=e,o.createElement("div",{className:Z.content},this._renderTabs(t),this._renderTabContent(t))),this._renderApplyToAllButton=()=>o.createElement(p.MatchMedia,{rule:W.DialogBreakpoints.TabletNormal},e=>this._renderApplyToAll(e)),this._renderFooterLeft=()=>{const{model:e,chartWidgetCollection:t}=this.props,{isApplyToAllVisible:n}=this.state;return o.createElement(x,{model:e,isApplyToAllVisible:n,applyToAllCallback:this._handleApplyToAll,chartWidgetCollection:t})},this._createTabClickHandler=e=>()=>this._selectPage(e),this._selectPage=e=>{const{activePage:t}=this.state;e!==t&&(t&&t.definitions.unsubscribe(this._onChangeActivePageDefinitions),d().setValue("properties_dialog.last_page_id",e.id),e.definitions.subscribe(this._onChangeActivePageDefinitions),this.setState({activePage:e,tableKey:Date.now()},()=>{this._requestResize&&this._requestResize()}))},this._onChangeActivePageDefinitions=()=>{L.logger.logNormal("Definition collection was updated"),this.setState({tableKey:Date.now()},()=>{this._requestResize&&this._requestResize()})},this._handleCancel=()=>{this.props.onCancel(),this.props.onClose()},this._handleSubmit=()=>{this.props.onSubmit(),this.props.onClose()},this._handleScroll=()=>{z.globalCloseDelegate.fire()},this._handleApplyToAll=()=>{const{chartWidgetCollection:e,model:t}=this.props,{isApplyToAllVisible:n}=this.state;n&&e.applyPreferencesToAllCharts(t)},this._syncApplyToAllVisibility=()=>{const{chartWidgetCollection:e}=this.props;this.setState({isApplyToAllVisible:(0,u.isMultipleLayout)(e.layout.value())})},this._handleBackClick=()=>{const{activePage:e}=this.state;e&&e.definitions.unsubscribe(this._onChangeActivePageDefinitions),this.setState({activePage:null})};const{pages:t,activePageId:n}=e
;let l=t.find(e=>e.id===n);if(!l){const e=d().getValue("properties_dialog.last_page_id"),n=t.find(t=>t.id===e);l=n||t[0]}this.state={activePage:l,isApplyToAllVisible:(0,u.isMultipleLayout)(e.chartWidgetCollection.layout.value()),tableKey:Date.now()}}componentDidMount(){const{chartWidgetCollection:e}=this.props,{activePage:t}=this.state;e.layout.subscribe(this._syncApplyToAllVisibility),t&&t.definitions.subscribe(this._onChangeActivePageDefinitions)}componentWillUnmount(){const{chartWidgetCollection:e}=this.props,{activePage:t}=this.state;t&&t.definitions.unsubscribe(this._onChangeActivePageDefinitions),e.layout.unsubscribe(this._syncApplyToAllVisibility)}render(){const{isOpened:e,onClose:t}=this.props,{activePage:n}=this.state;return o.createElement(p.MatchMedia,{rule:W.DialogBreakpoints.TabletSmall},a=>o.createElement(r.AdaptiveConfirmDialog,{className:Z.withSidebar,dataName:"series-properties-dialog",onClose:t,isOpened:e,title:null!==n&&a?n.title:(0,l.t)("Chart settings"),footerLeftRenderer:this._renderFooterLeft,additionalButtons:this._renderApplyToAllButton(),additionalHeaderElement:null!==n&&a?o.createElement(K,{onClick:this._handleBackClick}):void 0,onSubmit:this._handleSubmit,onCancel:this._handleCancel,render:this._renderChildren,submitOnEnterKey:!1}))}_renderTabContent(e){const{pages:t}=this.props,n=this._getCurrentPage(e);if(n){const e=t.find(e=>e.id===n.id),l=e?e.definitions.value():[];return o.createElement(R.TouchScrollContainer,{className:Z.tabContent,onScroll:this._handleScroll},o.createElement(c.ControlCustomWidthContext.Provider,{value:F},o.createElement(m.PropertyTable,{key:this.state.tableKey},l.map(e=>o.createElement(s.Section,{key:e.id,definition:e})))))}return null}_renderTabs(e){const{pages:t}=this.props,{activePage:n}=this.state;if(n&&e)return null;const l=this._getCurrentPage(e);return o.createElement(p.MatchMedia,{rule:W.DialogBreakpoints.TabletNormal},e=>o.createElement(p.MatchMedia,{rule:W.DialogBreakpoints.TabletSmall},n=>{const a=n?"mobile":e?"tablet":void 0;return o.createElement(V.DialogSidebarContainer,{mode:a,onScroll:this._handleScroll},t.map(e=>o.createElement(V.DialogSidebarItem,{key:e.id,mode:a,"data-name":e.id,title:e.title,icon:e.icon,onClick:this._createTabClickHandler(e),isActive:l?e.id===l.id:void 0})))}))}_renderApplyToAll(e){const{isApplyToAllVisible:t}=this.state;return!e&&t&&o.createElement("span",{className:Z.applyToAllButton},o.createElement(i.Button,{appearance:"stroke",onClick:this._handleApplyToAll},(0,l.t)("Apply to all")))}_getCurrentPage(e){const{pages:t}=this.props,{activePage:n}=this.state;let l=null;return n?l=n:!e&&t.length&&(l=t[0]),l}}var q=n(41695),j=n(8361);const G=(0,l.t)("Chart settings");class Y extends j.DialogRenderer{constructor(e){super(),this._handleClose=()=>{a.unmountComponentAtNode(this._container),this._setVisibility(!1),this._onClose&&this._onClose()},this._handleSubmit=()=>{},this._handleCancel=()=>{this._model.undoToCheckpoint(this._checkpoint)},this._propertyPages=e.propertyPages,this._model=e.model,this._activePageId=e.activePageId,
this._onClose=e.onClose,this._chartWidgetCollection=e.chartWidgetCollection,this._checkpoint=this._ensureCheckpoint(e.undoCheckPoint)}hide(e){e?this._handleCancel():this._handleSubmit(),this._handleClose()}isVisible(){return this.visible().value()}show(){a.render(o.createElement(U,{title:G,isOpened:!0,onSubmit:this._handleSubmit,onClose:this._handleClose,onCancel:this._handleCancel,pages:this._propertyPages,model:this._model,activePageId:this._activePageId,chartWidgetCollection:this._chartWidgetCollection}),this._container),this._setVisibility(!0),q.emit("edit_object_dialog",{objectType:"mainSeries",scriptTitle:this._model.mainSeries().title()})}_ensureCheckpoint(e){return void 0===e&&(e=this._model.createUndoCheckpoint()),e}}},93067:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28" fill="none"><path stroke="currentcolor" stroke-width="1.3" d="M12 9l5 5-5 5"/></svg>'},53797:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18"><path fill="currentColor" d="M9.707 9l4.647-4.646-.707-.708L9 8.293 4.354 3.646l-.708.708L8.293 9l-4.647 4.646.708.708L9 9.707l4.646 4.647.708-.707L9.707 9z"/></svg>'}}]);