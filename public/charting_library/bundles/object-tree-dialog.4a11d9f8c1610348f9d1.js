(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[4862,3285,9937],{108255:e=>{e.exports={removeButton:"removeButton-BadjY5sX",favoriteButton:"favoriteButton-BadjY5sX",itemRow:"itemRow-BadjY5sX",focused:"focused-BadjY5sX",active:"active-BadjY5sX",actionButton:"actionButton-BadjY5sX",mobile:"mobile-BadjY5sX",itemInfo:"itemInfo-BadjY5sX",title:"title-BadjY5sX",details:"details-BadjY5sX",itemInfoWithPadding:"itemInfoWithPadding-BadjY5sX",favorite:"favorite-BadjY5sX",showOnFocus:"showOnFocus-BadjY5sX"}},148452:e=>{e.exports={title:"title-QPktCwTY",container:"container-QPktCwTY",mobile:"mobile-QPktCwTY",empty:"empty-QPktCwTY",image:"image-QPktCwTY",spinner:"spinner-QPktCwTY",contentList:"contentList-QPktCwTY",item:"item-QPktCwTY"}},65441:e=>{e.exports={dialog:"dialog-VUnQLSMH",buttons:"buttons-VUnQLSMH",button:"button-VUnQLSMH",disabled:"disabled-VUnQLSMH"}},622413:e=>{e.exports={favorite:"favorite-_FRQhM5Y",hovered:"hovered-_FRQhM5Y",disabled:"disabled-_FRQhM5Y",focused:"focused-_FRQhM5Y",active:"active-_FRQhM5Y",checked:"checked-_FRQhM5Y"}},667797:e=>{e.exports={menuWrap:"menuWrap-Kq3ruQo8",isMeasuring:"isMeasuring-Kq3ruQo8",scrollWrap:"scrollWrap-Kq3ruQo8",momentumBased:"momentumBased-Kq3ruQo8",menuBox:"menuBox-Kq3ruQo8",isHidden:"isHidden-Kq3ruQo8"}},35990:e=>{e.exports={button:"button-iLKiGOdQ",hovered:"hovered-iLKiGOdQ",disabled:"disabled-iLKiGOdQ",focused:"focused-iLKiGOdQ",active:"active-iLKiGOdQ",hidden:"hidden-iLKiGOdQ"}},975228:(e,t,n)=>{"use strict";n.d(t,{hoverMouseEventFilter:()=>i,useAccurateHover:()=>r,useHover:()=>s});var o=n(50959);function s(){const[e,t]=(0,o.useState)(!1);return[e,{onMouseOver:function(e){i(e)&&t(!0)},onMouseOut:function(e){i(e)&&t(!1)}}]}function i(e){return!e.currentTarget.contains(e.relatedTarget)}function r(e){const[t,n]=(0,o.useState)(!1);return(0,o.useEffect)((()=>{const t=t=>{if(null===e.current)return;const o=e.current.contains(t.target);n(o)};return document.addEventListener("mouseover",t),()=>document.removeEventListener("mouseover",t)}),[]),t}},252130:(e,t,n)=>{"use strict";n.d(t,{useIsMounted:()=>s});var o=n(50959);const s=()=>{const e=(0,o.useRef)(!1);return(0,o.useEffect)((()=>(e.current=!0,()=>{e.current=!1})),[]),e}},908783:(e,t,n)=>{"use strict";n.d(t,{useOutsideEvent:()=>r});var o=n(50959),s=n(855393),i=n(778199);function r(e){const{click:t,mouseDown:n,touchEnd:r,touchStart:a,handler:l,reference:c}=e,u=(0,o.useRef)(null),d=(0,o.useRef)("undefined"==typeof window?0:new window.CustomEvent("timestamp").timeStamp);return(0,s.useIsomorphicLayoutEffect)((()=>{const e={click:t,mouseDown:n,touchEnd:r,touchStart:a},o=c?c.current:u.current;return(0,i.addOutsideEventListener)(d.current,o,l,document,e)}),[t,n,r,a,l]),c||u}},823030:(e,t,n)=>{"use strict";n.d(t,{SubmenuContext:()=>s,SubmenuHandler:()=>i});var o=n(50959);const s=o.createContext(null);function i(e){const[t,n]=(0,o.useState)(null),i=(0,o.useRef)(null),r=(0,o.useRef)(new Map);return(0,o.useEffect)((()=>()=>{null!==i.current&&clearTimeout(i.current)}),[]),o.createElement(s.Provider,{value:{current:t,
setCurrent:function(e){null!==i.current&&(clearTimeout(i.current),i.current=null);null===t?n(e):i.current=setTimeout((()=>{i.current=null,n(e)}),100)},registerSubmenu:function(e,t){return r.current.set(e,t),()=>{r.current.delete(e)}},isSubmenuNode:function(e){return Array.from(r.current.values()).some((t=>t(e)))}}},e.children)}},730654:(e,t,n)=>{"use strict";n.d(t,{Portal:()=>c,PortalContext:()=>u});var o=n(50959),s=n(632227),i=n(925931),r=n(801808),a=n(481564),l=n(682925);class c extends o.PureComponent{constructor(){super(...arguments),this._uuid=(0,i.nanoid)()}componentWillUnmount(){this._manager().removeWindow(this._uuid)}render(){const e=this._manager().ensureWindow(this._uuid,this.props.layerOptions);e.style.top=this.props.top||"",e.style.bottom=this.props.bottom||"",e.style.left=this.props.left||"",e.style.right=this.props.right||"",e.style.pointerEvents=this.props.pointerEvents||"";const t=this.props.className;return t&&("string"==typeof t?e.classList.add(t):e.classList.add(...t)),this.props.shouldTrapFocus&&!e.hasAttribute(a.FOCUS_TRAP_DATA_ATTRIBUTE)&&e.setAttribute(a.FOCUS_TRAP_DATA_ATTRIBUTE,"true"),this.props["aria-hidden"]&&e.setAttribute("aria-hidden","true"),s.createPortal(o.createElement(u.Provider,{value:this},this.props.children),e)}moveToTop(){this._manager().moveToTop(this._uuid)}_manager(){return null===this.context?(0,r.getRootOverlapManager)():this.context}}c.contextType=l.SlotContext;const u=o.createContext(null)},682925:(e,t,n)=>{"use strict";n.d(t,{Slot:()=>s,SlotContext:()=>i});var o=n(50959);class s extends o.Component{shouldComponentUpdate(){return!1}render(){return o.createElement("div",{style:{position:"fixed",zIndex:150,left:0,top:0},ref:this.props.reference})}}const i=o.createContext(null)},801808:(e,t,n)=>{"use strict";n.d(t,{OverlapManager:()=>r,getRootOverlapManager:()=>l});var o=n(650151),s=n(481564);class i{constructor(){this._storage=[]}add(e){this._storage.push(e)}remove(e){this._storage=this._storage.filter((t=>e!==t))}has(e){return this._storage.includes(e)}getItems(){return this._storage}}class r{constructor(e=document){this._storage=new i,this._windows=new Map,this._index=0,this._document=e,this._container=e.createDocumentFragment()}setContainer(e){const t=this._container,n=null===e?this._document.createDocumentFragment():e;!function(e,t){Array.from(e.childNodes).forEach((e=>{e.nodeType===Node.ELEMENT_NODE&&t.appendChild(e)}))}(t,n),this._container=n}registerWindow(e){this._storage.has(e)||this._storage.add(e)}ensureWindow(e,t={position:"fixed",direction:"normal"}){const n=this._windows.get(e);if(void 0!==n)return n;this.registerWindow(e);const o=this._document.createElement("div");if(o.style.position=t.position,o.style.zIndex=this._index.toString(),o.dataset.id=e,void 0!==t.index){const e=this._container.childNodes.length;if(t.index>=e)this._container.appendChild(o);else if(t.index<=0)this._container.insertBefore(o,this._container.firstChild);else{const e=this._container.childNodes[t.index];this._container.insertBefore(o,e)}
}else"reverse"===t.direction?this._container.insertBefore(o,this._container.firstChild):this._container.appendChild(o);return this._windows.set(e,o),++this._index,o}unregisterWindow(e){this._storage.remove(e);const t=this._windows.get(e);void 0!==t&&(null!==t.parentElement&&t.parentElement.removeChild(t),this._windows.delete(e))}getZindex(e){const t=this.ensureWindow(e);return parseInt(t.style.zIndex||"0")}moveLastWindowToTop(){const e=this._storage.getItems(),t=e[e.length-1];t&&this.moveToTop(t)}moveToTop(e){if(this.getZindex(e)!==this._index){const t=this.ensureWindow(e);this._windows.forEach(((e,n)=>{e.hasAttribute(s.FOCUS_TRAP_DATA_ATTRIBUTE)&&e.setAttribute(s.FOCUS_TRAP_DATA_ATTRIBUTE,e===t?"true":"false")})),t.style.zIndex=(++this._index).toString()}}removeWindow(e){this.unregisterWindow(e)}}const a=new WeakMap;function l(e=document){const t=e.getElementById("overlap-manager-root");if(null!==t)return(0,o.ensureDefined)(a.get(t));{const t=new r(e),n=function(e){const t=e.createElement("div");return t.style.position="absolute",t.style.zIndex=150..toString(),t.style.top="0px",t.style.left="0px",t.id="overlap-manager-root",t}(e);return a.set(n,t),t.setContainer(n),e.body.appendChild(n),t}}var c;!function(e){e[e.BaseZindex=150]="BaseZindex"}(c||(c={}))},247465:(e,t,n)=>{"use strict";n.d(t,{isCancelled:()=>i,makeCancelable:()=>s});class o extends Error{constructor(){super("CancelToken")}}function s(e){let t=!1;return{promise:new Promise(((n,s)=>{e.then((e=>t?s(new o):n(e))),e.catch((e=>s(t?new o:e)))})),cancel(){t=!0}}}function i(e){return e instanceof o}},285089:(e,t,n)=>{"use strict";n.d(t,{setFixedBodyState:()=>l});var o=n(735922);const s=()=>!window.matchMedia("(min-width: 768px)").matches,i=()=>!window.matchMedia("(min-width: 1280px)").matches;let r=0,a=!1;function l(e){const{body:t}=document,n=t.querySelector(".widgetbar-wrap");if(e&&1==++r){const e=(0,o.getCSSProperty)(t,"overflow"),s=(0,o.getCSSPropertyNumericValue)(t,"padding-right");"hidden"!==e.toLowerCase()&&t.scrollHeight>t.offsetHeight&&((0,o.setStyle)(n,"right",`${(0,o.getScrollbarWidth)()}px`),t.style.paddingRight=`${s+(0,o.getScrollbarWidth)()}px`,a=!0),t.classList.add("i-no-scroll")}else if(!e&&r>0&&0==--r&&(t.classList.remove("i-no-scroll"),a)){(0,o.setStyle)(n,"right","0px");let e=0;e=n?(l=(0,o.getContentWidth)(n),s()?0:i()?45:Math.min(Math.max(l,45),450)):0,t.scrollHeight<=t.clientHeight&&(e-=(0,o.getScrollbarWidth)()),t.style.paddingRight=(e<0?0:e)+"px",a=!1}var l}},73572:(e,t,n)=>{"use strict";n.d(t,{DialogContentItem:()=>h});var o=n(50959),s=n(497754),i=n.n(s),r=n(601227),a=n(577687),l=n(72621);function c(e){const{url:t,...n}=e;return t?o.createElement("a",{...n,href:t}):o.createElement("div",{...n})}var u=n(460925),d=n(108255);function h(e){const{title:t,subtitle:n,removeBtnLabel:s,onClick:h,onClickFavorite:v,onClickRemove:p,isActive:g,isFavorite:f,isFocused:b,isMobile:w=!1,showFavorite:y=!0,focusedActionIndex:E,className:S,tabIndex:C,index:M,focusVisible:_,getElementId:T,...x}=e,O=[y&&v?"favorite":null,"remove"].filter((e=>null!==e)),R={
favorite:O.indexOf("favorite"),remove:O.indexOf("remove")},N=(0,o.useId)();return o.createElement(c,{...x,role:"row",id:T?.(M),className:i()(d.itemRow,g&&d.active,w&&d.mobile,b&&_&&null===E&&d.focused,S),tabIndex:C,onClick:m.bind(null,h),"data-role":"list-item","data-active":g,"aria-labelledby":N},y&&v&&o.createElement(a.FavoriteButton,{id:T?.(M,R.favorite),role:"cell",className:i()(d.favoriteButton,d.actionButton,f&&d.favorite,r.CheckMobile.any()&&d.mobile,b&&E===R.favorite&&d.focused,b&&_&&d.showOnFocus),isActive:g,isFilled:f,onClick:m.bind(null,v),"data-name":"list-item-favorite-button","data-role":"list-item-action","data-favorite":f}),o.createElement("div",{id:N,role:"cell",className:i()(d.itemInfo,!y&&d.itemInfoWithPadding)},o.createElement("div",{className:i()(d.title,g&&d.active,w&&d.mobile),"data-name":"list-item-title"},t),o.createElement("div",{className:i()(d.details,g&&d.active,w&&d.mobile)},n)),o.createElement(l.RemoveButton,{id:T?.(M,R.remove),role:"cell",className:i()(d.removeButton,d.actionButton,b&&E===R.remove&&d.focused,b&&_&&d.showOnFocus),isActive:g,onClick:m.bind(null,p),"data-name":"list-item-remove-button","data-role":"list-item-action",title:s,icon:u}))}function m(e,t){t.defaultPrevented||(t.preventDefault(),e(t))}},227570:(e,t,n)=>{"use strict";n.d(t,{useActiveDescendant:()=>i});var o=n(50959),s=n(718736);function i(e,t=[]){const[n,i]=(0,o.useState)(!1),r=(0,s.useFunctionalRefObject)(e);return(0,o.useLayoutEffect)((()=>{const e=r.current;if(null===e)return;const t=e=>{switch(e.type){case"active-descendant-focus":i(!0);break;case"active-descendant-blur":i(!1)}};return e.addEventListener("active-descendant-focus",t),e.addEventListener("active-descendant-blur",t),()=>{e.removeEventListener("active-descendant-focus",t),e.removeEventListener("active-descendant-blur",t)}}),t),[r,n]}},865266:(e,t,n)=>{"use strict";n.d(t,{useRovingTabindexElement:()=>i});var o=n(50959),s=n(718736);function i(e,t=[]){const[n,i]=(0,o.useState)(!1),r=(0,s.useFunctionalRefObject)(e);return(0,o.useLayoutEffect)((()=>{const e=r.current;if(null===e)return;const t=e=>{switch(e.type){case"roving-tabindex:main-element":i(!0);break;case"roving-tabindex:secondary-element":i(!1)}};return e.addEventListener("roving-tabindex:main-element",t),e.addEventListener("roving-tabindex:secondary-element",t),()=>{e.removeEventListener("roving-tabindex:main-element",t),e.removeEventListener("roving-tabindex:secondary-element",t)}}),t),[r,n?0:-1]}},344955:(e,t,n)=>{"use strict";n.d(t,{showManageDrawingsDialog:()=>s});let o=null;function s(e){return Promise.all([n.e(4166),n.e(8692),n.e(3693),n.e(7159),n.e(1702)]).then(n.bind(n,305624)).then((t=>{const n=new(0,t.ManageDrawingsDialogRenderer)(e);return null!==o&&o.hide(),n.show(),o=n,n}))}},650075:(e,t,n)=>{"use strict";n.d(t,{ManageDrawings:()=>D});var o=n(50959),s=n(920057),i=n(497754),r=n.n(i),a=n(878112),l=n(609838),c=n(272047),u=n(240534),d=n(671945),h=n(128492),m=n(73572),v=n(41899),p=n(132455),g=n(686870)
;const f=l.t(null,void 0,n(592931)),b=l.t(null,void 0,n(241870)),w=l.t(null,void 0,n(780996));function y(e){const{sharingMode:t,onTabClick:n}=e,s=o.useMemo((()=>[{children:f,id:"2"},{children:b,id:"1"},{children:w,id:"0"}]),[]);return o.createElement(g.RoundButtonTabs,{id:"manage-drawings-tabs",isActive:e=>parseInt(e.id)===t,onActivate:function(e){n(parseInt(e.id))},overflowBehaviour:"scroll",items:s})}var E=n(229540),S=n(148452);const C=(0,d.getLogger)("Chart.ManageDrawings"),M=new Map;function _(e){let t=M.get(e);return void 0===t&&(t=new u.WatchedValue([]),M.set(e,t)),t}const T=new c.TranslatedString("remove all line tools for {symbol}",l.t(null,void 0,n(858407))),x=e=>l.t(null,{plural:"{drawingsCount} drawings",count:e},n(290755)).format({drawingsCount:e.toString()}),O=l.t(null,void 0,n(708182)),R=l.t(null,void 0,n(284212));function N(e){const[t,n]=o.useState(null),[i,r]=o.useState(null),[a,l]=o.useState(null),[c,u]=(o.useRef(null),o.useState([]));return o.useEffect((()=>{let t;const o=()=>{t&&r(t.mainSeries().proSymbol())};return e.withModel(null,(()=>{t=e.model(),n(t),o(),t.mainSeries().symbolResolved().subscribe(null,o)})),()=>{t?.mainSeries().symbolResolved().unsubscribe(null,o),n(null)}}),[e]),o.useEffect((()=>{if(null!==t){const e={},n=(0,s.default)(g,250,{leading:!1});return g(),t.model().dataSourceCollectionChanged().subscribe(e,n),()=>{t.model().dataSourceCollectionChanged().unsubscribe(e,n)}}}),[t]),o.useEffect((()=>{if(null!==t){const e=_(t.model().id()).spawn();return u([...e.value()]),e.subscribe((()=>u([...e.value()]))),()=>e?.destroy()}}),[t]),o.useMemo((()=>({currentSymbol:i,symbolDrawingsMaps:a,removeSymbolDrawings:d,changeSymbol:m,hiddenSymbols:c})),[i,a,d,m,c]);async function d(e,n){if(t&&a){const o=a[n].get(e);if(o){const n=Array.from(o).map((e=>t.model().dataSourceForId(e))).filter(v.notNull);n.length>0&&t.removeSources(n,!1,T.format({symbol:e}));const s=_(t.model().id());s.setValue([...s.value(),e]);try{await g()}catch(e){C.logError(`Error removing line tools: ${e}`)}s.setValue(s.value().filter((t=>t!==e)))}}}function m(n){e.setSymbol(n),null!==t&&r(n)}async function p(e){const t=function(e){const t=[new Map,new Map,new Map];return e.forEach((e=>{if((0,h.isLineTool)(e)&&e.showInObjectTree()){const n=e.symbol()??"",o=e.sharingMode().value();t[o].set(n,(t[o].get(n)||new Set).add(e.id()))}})),t}(e),n=await async function(){const e=[new Map,new Map,new Map];return e}();return n.forEach(((e,n)=>{const o=t[n];e.forEach(((e,t)=>{const n=o.get(t)||new Set;e.forEach((e=>n.add(e))),o.set(t,n)}))})),t}async function g(){null!==t&&l(await p(t.dataSources()))}}function D(e){const{isMobile:t,isSmallWidth:n,chartWidget:s,onClose:i,onInitialized:l}=e,{currentSymbol:c,symbolDrawingsMaps:u,removeSymbolDrawings:d,changeSymbol:h,hiddenSymbols:v}=N(s),[g,f]=o.useState(null),[b,w]=o.useMemo((()=>{if(null!==c&&null!==u){const e=[];let t=g;if(null===t)for(t=2;t>0&&!((u[t].get(c)?.size||0)>0);)t--;return u[t].forEach(((t,n)=>{v.includes(n)||e.push({symbol:n,drawingsCount:t.size,onRemove:()=>function(e){d(e,w)}(n),
onClick:()=>function(e){""!==e&&(h(e),i?.())}(n)})})),e.sort(((e,t)=>e.drawingsCount===t.drawingsCount?e.symbol.localeCompare(t.symbol):e.drawingsCount>t.drawingsCount?-1:1)),[e,t]}return[[],0]}),[c,g,u,v]);return o.useEffect((()=>{null!==u&&l?.()}),[u]),o.createElement(o.Fragment,null,o.createElement("div",{className:r()(S.container,(n||t)&&S.mobile)},o.createElement(y,{sharingMode:w,onTabClick:f})),0===b.length?null===u?o.createElement(p.Spinner,{className:S.spinner}):o.createElement("div",{className:S.empty},o.createElement(a.Icon,{className:S.image,icon:E}),o.createElement("span",null,R)):b.map((({symbol:e,drawingsCount:n,onRemove:s,onClick:i},r)=>o.createElement(m.DialogContentItem,{key:e,index:r,title:e,subtitle:x(n),removeBtnLabel:O,isActive:e===c,isMobile:t,onClick:i,onClickRemove:s,showFavorite:!1,className:S.item}))))}},134388:(e,t,n)=>{"use strict";n.r(t),n.d(t,{ObjectTreeDialogRenderer:()=>O});var o=n(50959),s=n(112295),i=n(609838),r=n(497754),a=n(813550),l=n(252130),c=n(759339),u=n(163694),d=n(930052),h=n(533408),m=n(996038),v=n(650075),p=(n(344955),n(993321)),g=n(420779),f=n(535842),b=n(511349),w=n(80465),y=n(65441);function E(e){const{viewModel:t,onClose:s,activeChartWidget:p}=e,[g,f]=(0,o.useState)(!1),[E,C]=(0,o.useState)(!1),[M,_]=(0,o.useState)(!1),T=(0,o.useRef)(null),x=(0,a.useForceUpdate)(),O=((0,l.useIsMounted)(),t.selection()),R=t.canSelectionBeGrouped();return(0,o.useEffect)((()=>{const e=window.matchMedia(m.DialogBreakpoints.TabletSmall);return e.addEventListener("change",N),()=>e.removeEventListener("change",N)}),[]),(0,o.useEffect)((()=>(O.onChange().subscribe(null,(()=>x())),()=>{O.onChange().unsubscribeAll(null)})),[O]),(0,o.useEffect)((()=>{const e=e=>_(e);return t.isContextMenuOpened().subscribe(e),()=>{t.isContextMenuOpened().unsubscribe(e)}}),[t]),o.createElement(o.Fragment,null,o.createElement(d.MatchMedia,{rule:m.DialogBreakpoints.TabletSmall},(e=>o.createElement(h.AdaptivePopupDialog,{additionalElementPos:"after",additionalHeaderElement:o.createElement("div",{className:y.buttons},o.createElement(b.ToolWidgetIconButton,{className:r(y.button,!R&&y.disabled),icon:w,onClick:L,isDisabled:!R,title:i.t(null,void 0,n(183390)),"data-name":"group-button"}),!1),className:y.dialog,dataName:"object-tree-dialog",isOpened:!0,onClickOutside:E||e||M?()=>{}:s,onClose:s,ref:T,render:()=>o.createElement(S,{isSmallTablet:e,viewModel:t}),title:i.t(null,void 0,n(888616)),showSeparator:!0}))),o.createElement(u.DrawerManager,null,g&&o.createElement(c.Drawer,{onClose:D,position:"Bottom"},o.createElement(v.ManageDrawings,{onClose:D,chartWidget:p,isMobile:!0}))));function N(){g&&!window.matchMedia(m.DialogBreakpoints.TabletSmall).matches&&f(!1)}function D(){f(!1)}function L(){t.createGroupFromSelection()}}function S(e){const{isSmallTablet:t,viewModel:n}=e,s=(0,o.useMemo)((()=>({size:t?1:0,smallSizeTreeNodeAction:0})),[t]);return o.createElement(f.SizeContext.Provider,{value:s},o.createElement(p.ObjectTree,{nodeRenderer:g.NodeRenderer,showHeader:!1,viewModel:n,isDialog:!0}))}
var C=n(33290),M=n(311804),_=n(69649),T=n(995553),x=n(651674);class O extends T.DialogRenderer{constructor(){super(),this._handleClose=()=>{this._rootInstance?.unmount(),this._setVisibility(!1),null!==this._viewModel&&(this._viewModel.destroy(),this._viewModel=null)};const e=(0,C.service)(M.CHART_WIDGET_COLLECTION_SERVICE);this._activeChartWidget=e.activeChartWidget.value(),this._viewModel=new _.ObjectTree(e.activeChartWidget)}hide(){this._handleClose()}isVisible(){return this.visible().value()}show(){this.isVisible()||(0,s.loadAllSourcesIcons)().then((()=>{null!==this._viewModel&&(this._rootInstance=(0,x.createReactRoot)(o.createElement(E,{onClose:this._handleClose,viewModel:this._viewModel,activeChartWidget:this._activeChartWidget}),this._container),this._setVisibility(!0))}))}}},598448:(e,t,n)=>{"use strict";n.d(t,{RemoveTitleType:()=>o,removeTitlesMap:()=>i});var o,s=n(609838);!function(e){e.Add="add",e.Remove="remove"}(o||(o={}));const i={[o.Add]:s.t(null,void 0,n(869207)),[o.Remove]:s.t(null,void 0,n(685106))}},577687:(e,t,n)=>{"use strict";n.d(t,{FavoriteButton:()=>h});var o=n(50959),s=n(497754),i=n.n(s),r=n(878112),a=n(598448),l=n(227570),c=n(239146),u=n(648010),d=n(622413);function h(e){const{className:t,isFilled:n,isActive:s,onClick:h,title:m,...v}=e,[p,g]=(0,l.useActiveDescendant)(null),f=m??(n?a.removeTitlesMap[a.RemoveTitleType.Remove]:a.removeTitlesMap[a.RemoveTitleType.Add]);return(0,o.useLayoutEffect)((()=>{const e=p.current;e instanceof HTMLElement&&f&&e.dispatchEvent(new CustomEvent("common-tooltip-update"))}),[f,p]),o.createElement(r.Icon,{...v,className:i()(d.favorite,"apply-common-tooltip",n&&d.checked,s&&d.active,g&&d.focused,t),onClick:h,icon:n?c:u,title:f,ariaLabel:f,ref:p})}},522224:(e,t,n)=>{"use strict";n.d(t,{hoverMouseEventFilter:()=>o.hoverMouseEventFilter,useAccurateHover:()=>o.useAccurateHover,useHover:()=>o.useHover});var o=n(975228)},930052:(e,t,n)=>{"use strict";n.d(t,{MatchMedia:()=>s});var o=n(50959);class s extends o.PureComponent{constructor(e){super(e),this._handleChange=()=>{this.forceUpdate()},this.state={query:window.matchMedia(this.props.rule)}}componentDidMount(){this._subscribe(this.state.query)}componentDidUpdate(e,t){this.state.query!==t.query&&(this._unsubscribe(t.query),this._subscribe(this.state.query))}componentWillUnmount(){this._unsubscribe(this.state.query)}render(){return this.props.children(this.state.query.matches)}static getDerivedStateFromProps(e,t){return e.rule!==t.query.media?{query:window.matchMedia(e.rule)}:null}_subscribe(e){e.addEventListener("change",this._handleChange)}_unsubscribe(e){e.removeEventListener("change",this._handleChange)}}},230553:(e,t,n)=>{"use strict";n.d(t,{MenuContext:()=>o});const o=n(50959).createContext(null)},510618:(e,t,n)=>{"use strict";n.d(t,{DEFAULT_MENU_THEME:()=>g,Menu:()=>b});var o=n(50959),s=n(497754),i=n.n(s),r=n(650151),a=n(822960),l=n(409174),c=n(753327),u=n(370981),d=n(801808),h=n(926032),m=n(823030),v=n(230553),p=n(667797);const g=p;var f;!function(e){e[e.IndentFromWindow=0]="IndentFromWindow"}(f||(f={}))
;class b extends o.PureComponent{constructor(e){super(e),this._containerRef=null,this._scrollWrapRef=null,this._raf=null,this._scrollRaf=null,this._scrollTimeout=void 0,this._manager=new d.OverlapManager,this._hotkeys=null,this._scroll=0,this._handleContainerRef=e=>{this._containerRef=e,this.props.reference&&("function"==typeof this.props.reference&&this.props.reference(e),"object"==typeof this.props.reference&&(this.props.reference.current=e))},this._handleScrollWrapRef=e=>{this._scrollWrapRef=e,"function"==typeof this.props.scrollWrapReference&&this.props.scrollWrapReference(e),"object"==typeof this.props.scrollWrapReference&&(this.props.scrollWrapReference.current=e)},this._handleCustomRemeasureDelegate=()=>{this._resizeForced(),this._handleMeasure()},this._handleMeasure=({callback:e,forceRecalcPosition:t}={})=>{if(this.state.isMeasureValid&&!t)return;const{position:n}=this.props,o=(0,r.ensureNotNull)(this._containerRef);let s=o.getBoundingClientRect();const i=document.documentElement.clientHeight,l=document.documentElement.clientWidth,c=this.props.closeOnScrollOutsideOffset??0;let u=i-0-c;const d=s.height>u;if(d){(0,r.ensureNotNull)(this._scrollWrapRef).style.overflowY="scroll",s=o.getBoundingClientRect()}const{width:h,height:m}=s,v="function"==typeof n?n({contentWidth:h,contentHeight:m,availableWidth:l,availableHeight:i}):n,p=v?.indentFromWindow?.left??0,g=l-(v.overrideWidth??h)-(v?.indentFromWindow?.right??0),f=(0,a.clamp)(v.x,p,Math.max(p,g)),b=(v?.indentFromWindow?.top??0)+c,w=i-(v.overrideHeight??m)-(v?.indentFromWindow?.bottom??0);let y=(0,a.clamp)(v.y,b,Math.max(b,w));if(v.forbidCorrectYCoord&&y<v.y&&(u-=v.y-y,y=v.y),t&&void 0!==this.props.closeOnScrollOutsideOffset&&v.y<=this.props.closeOnScrollOutsideOffset)return void this._handleGlobalClose(!0);const E=v.overrideHeight??(d?u:void 0);this.setState({appearingMenuHeight:t?this.state.appearingMenuHeight:E,appearingMenuWidth:t?this.state.appearingMenuWidth:v.overrideWidth,appearingPosition:{x:f,y},isMeasureValid:!0},(()=>{this.props.doNotRestorePosition||this._restoreScrollPosition(),e&&e()}))},this._restoreScrollPosition=()=>{const e=document.activeElement,t=(0,r.ensureNotNull)(this._containerRef);if(null!==e&&t.contains(e))try{e.scrollIntoView()}catch(e){}else(0,r.ensureNotNull)(this._scrollWrapRef).scrollTop=this._scroll},this._resizeForced=()=>{this.setState({appearingMenuHeight:void 0,appearingMenuWidth:void 0,appearingPosition:void 0,isMeasureValid:void 0})},this._resize=()=>{null===this._raf&&(this._raf=requestAnimationFrame((()=>{this.setState({appearingMenuHeight:void 0,appearingMenuWidth:void 0,appearingPosition:void 0,isMeasureValid:void 0}),this._raf=null})))},this._handleGlobalClose=e=>{this.props.onClose(e)},this._handleSlot=e=>{this._manager.setContainer(e)},this._handleScroll=()=>{this._scroll=(0,r.ensureNotNull)(this._scrollWrapRef).scrollTop},this._handleScrollOutsideEnd=()=>{clearTimeout(this._scrollTimeout),this._scrollTimeout=setTimeout((()=>{this._handleMeasure({forceRecalcPosition:!0})}),80)},this._handleScrollOutside=e=>{
e.target!==this._scrollWrapRef&&(this._handleScrollOutsideEnd(),null===this._scrollRaf&&(this._scrollRaf=requestAnimationFrame((()=>{this._handleMeasure({forceRecalcPosition:!0}),this._scrollRaf=null}))))},this.state={}}componentDidMount(){this._handleMeasure({callback:this.props.onOpen});const{customCloseDelegate:e=u.globalCloseDelegate,customRemeasureDelegate:t}=this.props;e.subscribe(this,this._handleGlobalClose),t?.subscribe(null,this._handleCustomRemeasureDelegate),window.addEventListener("resize",this._resize);const n=null!==this.context;this._hotkeys||n||(this._hotkeys=h.createGroup({desc:"Popup menu"}),this._hotkeys.add({desc:"Close",hotkey:27,handler:()=>{this.props.onKeyboardClose&&this.props.onKeyboardClose(),this._handleGlobalClose()}})),this.props.repositionOnScroll&&window.addEventListener("scroll",this._handleScrollOutside,{capture:!0})}componentDidUpdate(){this._handleMeasure()}componentWillUnmount(){const{customCloseDelegate:e=u.globalCloseDelegate,customRemeasureDelegate:t}=this.props;e.unsubscribe(this,this._handleGlobalClose),t?.unsubscribe(null,this._handleCustomRemeasureDelegate),window.removeEventListener("resize",this._resize),window.removeEventListener("scroll",this._handleScrollOutside,{capture:!0}),this._hotkeys&&(this._hotkeys.destroy(),this._hotkeys=null),null!==this._raf&&(cancelAnimationFrame(this._raf),this._raf=null),null!==this._scrollRaf&&(cancelAnimationFrame(this._scrollRaf),this._scrollRaf=null),this._scrollTimeout&&clearTimeout(this._scrollTimeout)}render(){const{id:e,role:t,"aria-label":n,"aria-labelledby":s,"aria-activedescendant":r,"aria-hidden":a,"aria-describedby":u,"aria-invalid":d,children:h,minWidth:g,theme:f=p,className:b,maxHeight:y,onMouseOver:E,onMouseOut:S,onKeyDown:C,onFocus:M,onBlur:_}=this.props,{appearingMenuHeight:T,appearingMenuWidth:x,appearingPosition:O,isMeasureValid:R}=this.state,N={"--ui-kit-menu-max-width":`${O&&O.x}px`,maxWidth:"calc(100vw - var(--ui-kit-menu-max-width) - 6px)"};return o.createElement(v.MenuContext.Provider,{value:this},o.createElement(m.SubmenuHandler,null,o.createElement(c.SlotContext.Provider,{value:this._manager},o.createElement("div",{id:e,role:t,"aria-label":n,"aria-labelledby":s,"aria-activedescendant":r,"aria-hidden":a,"aria-describedby":u,"aria-invalid":d,className:i()(b,f.menuWrap,!R&&f.isMeasuring),style:{height:T,left:O&&O.x,minWidth:g,position:"fixed",top:O&&O.y,width:x,...this.props.limitMaxWidth&&N},"data-name":this.props["data-name"],"data-tooltip-show-on-focus":this.props["data-tooltip-show-on-focus"],ref:this._handleContainerRef,onScrollCapture:this.props.onScroll,onContextMenu:l.preventDefaultForContextMenu,tabIndex:this.props.tabIndex,onMouseOver:E,onMouseOut:S,onKeyDown:C,onFocus:M,onBlur:_},o.createElement("div",{className:i()(f.scrollWrap,!this.props.noMomentumBasedScroll&&f.momentumBased),style:{overflowY:void 0!==T?"scroll":"auto",maxHeight:y},onScrollCapture:this._handleScroll,ref:this._handleScrollWrapRef},o.createElement(w,{className:f.menuBox},h)))),o.createElement(c.Slot,{reference:this._handleSlot})))}
update(e){e?this._resizeForced():this._resize()}focus(e){this._containerRef?.focus(e)}blur(){this._containerRef?.blur()}}function w(e){const t=(0,r.ensureNotNull)((0,o.useContext)(m.SubmenuContext)),n=o.useRef(null);return o.createElement("div",{ref:n,className:e.className,onMouseOver:function(e){if(!(null!==t.current&&e.target instanceof Node&&(o=e.target,n.current?.contains(o))))return;var o;t.isSubmenuNode(e.target)||t.setCurrent(null)},"data-name":"menu-inner"},e.children)}b.contextType=m.SubmenuContext},28466:(e,t,n)=>{"use strict";n.d(t,{CloseDelegateContext:()=>i});var o=n(50959),s=n(370981);const i=o.createContext(s.globalCloseDelegate)},8361:(e,t,n)=>{"use strict";n.d(t,{Portal:()=>o.Portal,PortalContext:()=>o.PortalContext});var o=n(730654)},72621:(e,t,n)=>{"use strict";n.d(t,{RemoveButton:()=>d});var o=n(609838),s=n(50959),i=n(497754),r=n.n(i),a=n(878112),l=n(227570),c=n(333765),u=n(35990);function d(e){const{className:t,isActive:i,onClick:d,onMouseDown:h,title:m,hidden:v,"data-name":p="remove-button",icon:g,...f}=e,[b,w]=(0,l.useActiveDescendant)(null);return s.createElement(a.Icon,{...f,"data-name":p,className:r()(u.button,"apply-common-tooltip",i&&u.active,v&&u.hidden,w&&u.focused,t),icon:g||c,onClick:d,onMouseDown:h,title:m??o.t(null,void 0,n(767410)),ariaLabel:m??o.t(null,void 0,n(767410)),ref:b})}},753327:(e,t,n)=>{"use strict";n.d(t,{Slot:()=>o.Slot,SlotContext:()=>o.SlotContext});var o=n(682925)},377145:(e,t,n)=>{"use strict";function o(e,t){return e===t}n.d(t,{createSelector:()=>s});var s=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return function(){for(var t=arguments.length,o=Array(t),s=0;s<t;s++)o[s]=arguments[s];var i=0,r=o.pop(),a=function(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every((function(e){return"function"==typeof e}))){var n=t.map((function(e){return typeof e})).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, instead received the following types: ["+n+"]")}return t}(o),l=e.apply(void 0,[function(){return i++,r.apply(null,arguments)}].concat(n)),c=e((function(){for(var e=[],t=a.length,n=0;n<t;n++)e.push(a[n].apply(null,arguments));return l.apply(null,e)}));return c.resultFunc=r,c.dependencies=a,c.recomputations=function(){return i},c.resetRecomputations=function(){return i=0},c}}((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o,n=null,s=null;return function(){return function(e,t,n){if(null===t||null===n||t.length!==n.length)return!1;for(var o=t.length,s=0;s<o;s++)if(!e(t[s],n[s]))return!1;return!0}(t,n,arguments)||(s=e.apply(null,arguments)),n=arguments,s}}))},333086:(e,t,n)=>{"use strict";var o;function s(e){e.dispatchEvent(new CustomEvent("roving-tabindex:main-element"))}function i(e){e.dispatchEvent(new CustomEvent("roving-tabindex:secondary-element"))}n.d(t,{becomeMainElement:()=>s,becomeSecondaryElement:()=>i}),function(e){e.MainElement="roving-tabindex:main-element",e.SecondaryElement="roving-tabindex:secondary-element"}(o||(o={}))},602069:(e,t,n)=>{"use strict"
;n.d(t,{Toolbar:()=>d});var o=n(50959),s=n(650151),i=n(269842),r=n(930202),a=n(442092),l=n(333086),c=n(718736),u=n(74336);const d=(0,o.forwardRef)((function(e,t){const{onKeyDown:n,orientation:d,blurOnEscKeydown:h=!0,blurOnClick:m=!0,...v}=e,p=(0,c.useFunctionalRefObject)(t);return(0,o.useLayoutEffect)((()=>{const e=(0,s.ensureNotNull)(p.current),t=()=>{const t=(0,a.queryTabbableElements)(e).sort(a.navigationOrderComparator);if(0===t.length){const[t]=(0,a.queryFocusableElements)(e).sort(a.navigationOrderComparator);if(void 0===t)return;(0,l.becomeMainElement)(t)}if(t.length>1){const[,...e]=t;for(const t of e)(0,l.becomeSecondaryElement)(t)}};return window.addEventListener("keyboard-navigation-activation",t),()=>window.removeEventListener("keyboard-navigation-activation",t)}),[]),o.createElement("div",{...u.MouseClickAutoBlurHandler.attributes(m),...v,role:"toolbar","aria-orientation":d,ref:p,onKeyDown:(0,i.createSafeMulticastEventHandler)((function(e){if(e.defaultPrevented)return;if(!(document.activeElement instanceof HTMLElement))return;const t=(0,r.hashFromEvent)(e);if(h&&27===t)return e.preventDefault(),void document.activeElement.blur();if("vertical"!==d&&37!==t&&39!==t)return;if("vertical"===d&&38!==t&&40!==t)return;const n=e.currentTarget,o=(0,a.queryFocusableElements)(n).sort(a.navigationOrderComparator);if(0===o.length)return;const s=o.indexOf(document.activeElement);if(-1===s)return;e.preventDefault();const i=()=>{const e=(s+o.length-1)%o.length;(0,l.becomeSecondaryElement)(o[s]),(0,l.becomeMainElement)(o[e]),o[e].focus()},c=()=>{const e=(s+o.length+1)%o.length;(0,l.becomeSecondaryElement)(o[s]),(0,l.becomeMainElement)(o[e]),o[e].focus()};switch((0,a.mapKeyCodeToDirection)(t)){case"inlinePrev":"vertical"!==d&&i();break;case"inlineNext":"vertical"!==d&&c();break;case"blockPrev":"vertical"===d&&i();break;case"blockNext":"vertical"===d&&c()}}),n),"data-tooltip-show-on-focus":"true"})}))},112295:(e,t,n)=>{"use strict";async function o(e,t,n){let o;for(let s=0;s<t;++s)try{return await e(o)}catch(e){o=e,await n(s)}throw o}async function s(e,t){return o(e,t,(()=>Promise.resolve()))}n.d(t,{getAllSourcesIcons:()=>d,loadAllSourcesIcons:()=>u});const i=(0,n(671945).getLogger)("DataSourcesIcons");let r=null;function a(){const e=n.c[89935];return e?Promise.resolve(e.exports.lineToolsIcons):n.e(1890).then(n.bind(n,89935)).then((e=>e.lineToolsIcons))}function l(){const e=n.c[50296];return e?Promise.resolve(e.exports.SERIES_ICONS):n.e(9685).then(n.bind(n,50296)).then((e=>e.SERIES_ICONS))}let c=null;function u(){return null===c&&(c=function(){const e=s(a,2).then((e=>e)).catch((e=>(i.logWarn(e),{}))),t=s(l,2).then((e=>e)).catch((e=>(i.logWarn(e),{})));return Promise.all([e,t])}()),c.then((e=>(r={linetool:e[0],series:e[1]},r)))}function d(){return r}},333765:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18"><path fill="currentColor" d="M9.707 9l4.647-4.646-.707-.708L9 8.293 4.354 3.646l-.708.708L8.293 9l-4.647 4.646.708.708L9 9.707l4.646 4.647.708-.707L9.707 9z"/></svg>'},229540:e=>{
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 72 72" width="72" height="72"><path fill="currentColor" d="M15 24a21 21 0 1 1 42 0v7.41l8.97 5.01 1.08.6-.82.94-7.77 8.82 2.34 2.53-1.47 1.36L57 48.15V69H46v-7h-6v5h-9V56h-6v13H15V48.15l-2.33 2.52-1.47-1.36 2.35-2.53-7.78-8.82-.82-.93 1.08-.6L15 31.4V24Zm0 9.7-6.9 3.87L15 45.4V33.7Zm42 11.7 6.91-7.83-6.9-3.87v11.7ZM36 5a19 19 0 0 0-19 19v43h6V54h10v11h5v-5h10v7h7V24A19 19 0 0 0 36 5Zm-5 19.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0ZM42.5 26a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z"/></svg>'},239146:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18" fill="none"><path fill="currentColor" d="M9 1l2.35 4.76 5.26.77-3.8 3.7.9 5.24L9 13l-4.7 2.47.9-5.23-3.8-3.71 5.25-.77L9 1z"/></svg>'},648010:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18" fill="none"><path stroke="currentColor" d="M9 2.13l1.903 3.855.116.236.26.038 4.255.618-3.079 3.001-.188.184.044.259.727 4.237-3.805-2L9 12.434l-.233.122-3.805 2.001.727-4.237.044-.26-.188-.183-3.079-3.001 4.255-.618.26-.038.116-.236L9 2.13z"/></svg>'},207809:(e,t,n)=>{"use strict";n.d(t,{TouchBackend:()=>v});var o,s=n(6346);!function(e){e.mouse="mouse",e.touch="touch",e.keyboard="keyboard"}(o||(o={}));class i{get delay(){var e;return null!==(e=this.args.delay)&&void 0!==e?e:0}get scrollAngleRanges(){return this.args.scrollAngleRanges}get getDropTargetElementsAtPoint(){return this.args.getDropTargetElementsAtPoint}get ignoreContextMenu(){var e;return null!==(e=this.args.ignoreContextMenu)&&void 0!==e&&e}get enableHoverOutsideTarget(){var e;return null!==(e=this.args.enableHoverOutsideTarget)&&void 0!==e&&e}get enableKeyboardEvents(){var e;return null!==(e=this.args.enableKeyboardEvents)&&void 0!==e&&e}get enableMouseEvents(){var e;return null!==(e=this.args.enableMouseEvents)&&void 0!==e&&e}get enableTouchEvents(){var e;return null===(e=this.args.enableTouchEvents)||void 0===e||e}get touchSlop(){return this.args.touchSlop||0}get delayTouchStart(){var e,t,n,o;return null!==(o=null!==(n=null===(e=this.args)||void 0===e?void 0:e.delayTouchStart)&&void 0!==n?n:null===(t=this.args)||void 0===t?void 0:t.delay)&&void 0!==o?o:0}get delayMouseStart(){var e,t,n,o;return null!==(o=null!==(n=null===(e=this.args)||void 0===e?void 0:e.delayMouseStart)&&void 0!==n?n:null===(t=this.args)||void 0===t?void 0:t.delay)&&void 0!==o?o:0}get window(){return this.context&&this.context.window?this.context.window:"undefined"!=typeof window?window:void 0}get document(){var e;return(null===(e=this.context)||void 0===e?void 0:e.document)?this.context.document:this.window?this.window.document:void 0}get rootElement(){var e;return(null===(e=this.args)||void 0===e?void 0:e.rootElement)||this.document}constructor(e,t){this.args=e,this.context=t}}const r=1,a=0;function l(e){return void 0===e.button||e.button===a}function c(e){return!!e.targetTouches}function u(e,t){return c(e)?function(e,t){
return 1===e.targetTouches.length?u(e.targetTouches[0]):t&&1===e.touches.length&&e.touches[0].target===t.target?u(e.touches[0]):void 0}(e,t):{x:e.clientX,y:e.clientY}}const d=(()=>{let e=!1;try{addEventListener("test",(()=>{}),Object.defineProperty({},"passive",{get:()=>(e=!0,!0)}))}catch(e){}return e})(),h={[o.mouse]:{start:"mousedown",move:"mousemove",end:"mouseup",contextmenu:"contextmenu"},[o.touch]:{start:"touchstart",move:"touchmove",end:"touchend"},[o.keyboard]:{keydown:"keydown"}};class m{profile(){var e;return{sourceNodes:this.sourceNodes.size,sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,targetNodes:this.targetNodes.size,dragOverTargetIds:(null===(e=this.dragOverTargetIds)||void 0===e?void 0:e.length)||0}}get document(){return this.options.document}setup(){const e=this.options.rootElement;e&&((0,s.invariant)(!m.isSetUp,"Cannot have two Touch backends at the same time."),m.isSetUp=!0,this.addEventListener(e,"start",this.getTopMoveStartHandler()),this.addEventListener(e,"start",this.handleTopMoveStartCapture,!0),this.addEventListener(e,"move",this.handleTopMove),this.addEventListener(e,"move",this.handleTopMoveCapture,!0),this.addEventListener(e,"end",this.handleTopMoveEndCapture,!0),this.options.enableMouseEvents&&!this.options.ignoreContextMenu&&this.addEventListener(e,"contextmenu",this.handleTopMoveEndCapture),this.options.enableKeyboardEvents&&this.addEventListener(e,"keydown",this.handleCancelOnEscape,!0))}teardown(){const e=this.options.rootElement;e&&(m.isSetUp=!1,this._mouseClientOffset={},this.removeEventListener(e,"start",this.handleTopMoveStartCapture,!0),this.removeEventListener(e,"start",this.handleTopMoveStart),this.removeEventListener(e,"move",this.handleTopMoveCapture,!0),this.removeEventListener(e,"move",this.handleTopMove),this.removeEventListener(e,"end",this.handleTopMoveEndCapture,!0),this.options.enableMouseEvents&&!this.options.ignoreContextMenu&&this.removeEventListener(e,"contextmenu",this.handleTopMoveEndCapture),this.options.enableKeyboardEvents&&this.removeEventListener(e,"keydown",this.handleCancelOnEscape,!0),this.uninstallSourceNodeRemovalObserver())}addEventListener(e,t,n,o=!1){const s=d?{capture:o,passive:!1}:o;this.listenerTypes.forEach((function(o){const i=h[o][t];i&&e.addEventListener(i,n,s)}))}removeEventListener(e,t,n,o=!1){const s=d?{capture:o,passive:!1}:o;this.listenerTypes.forEach((function(o){const i=h[o][t];i&&e.removeEventListener(i,n,s)}))}connectDragSource(e,t){const n=this.handleMoveStart.bind(this,e);return this.sourceNodes.set(e,t),this.addEventListener(t,"start",n),()=>{this.sourceNodes.delete(e),this.removeEventListener(t,"start",n)}}connectDragPreview(e,t,n){return this.sourcePreviewNodeOptions.set(e,n),this.sourcePreviewNodes.set(e,t),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDropTarget(e,t){const n=this.options.rootElement;if(!this.document||!n)return()=>{};const o=o=>{if(!this.document||!n||!this.monitor.isDragging())return;let s;switch(o.type){
case h.mouse.move:s={x:o.clientX,y:o.clientY};break;case h.touch.move:var i,r;s={x:(null===(i=o.touches[0])||void 0===i?void 0:i.clientX)||0,y:(null===(r=o.touches[0])||void 0===r?void 0:r.clientY)||0}}const a=null!=s?this.document.elementFromPoint(s.x,s.y):void 0,l=a&&t.contains(a);return a===t||l?this.handleMove(o,e):void 0};return this.addEventListener(this.document.body,"move",o),this.targetNodes.set(e,t),()=>{this.document&&(this.targetNodes.delete(e),this.removeEventListener(this.document.body,"move",o))}}getTopMoveStartHandler(){return this.options.delayTouchStart||this.options.delayMouseStart?this.handleTopMoveStartDelay:this.handleTopMoveStart}installSourceNodeRemovalObserver(e){this.uninstallSourceNodeRemovalObserver(),this.draggedSourceNode=e,this.draggedSourceNodeRemovalObserver=new MutationObserver((()=>{e&&!e.parentElement&&(this.resurrectSourceNode(),this.uninstallSourceNodeRemovalObserver())})),e&&e.parentElement&&this.draggedSourceNodeRemovalObserver.observe(e.parentElement,{childList:!0})}resurrectSourceNode(){this.document&&this.draggedSourceNode&&(this.draggedSourceNode.style.display="none",this.draggedSourceNode.removeAttribute("data-reactid"),this.document.body.appendChild(this.draggedSourceNode))}uninstallSourceNodeRemovalObserver(){this.draggedSourceNodeRemovalObserver&&this.draggedSourceNodeRemovalObserver.disconnect(),this.draggedSourceNodeRemovalObserver=void 0,this.draggedSourceNode=void 0}constructor(e,t,n){this.getSourceClientOffset=e=>{const t=this.sourceNodes.get(e);return t&&function(e){const t=1===e.nodeType?e:e.parentElement;if(!t)return;const{top:n,left:o}=t.getBoundingClientRect();return{x:o,y:n}}(t)},this.handleTopMoveStartCapture=e=>{l(e)&&(this.moveStartSourceIds=[])},this.handleMoveStart=e=>{Array.isArray(this.moveStartSourceIds)&&this.moveStartSourceIds.unshift(e)},this.handleTopMoveStart=e=>{if(!l(e))return;const t=u(e);t&&(c(e)&&(this.lastTargetTouchFallback=e.targetTouches[0]),this._mouseClientOffset=t),this.waitingForDelay=!1},this.handleTopMoveStartDelay=e=>{if(!l(e))return;const t=e.type===h.touch.start?this.options.delayTouchStart:this.options.delayMouseStart;this.timeout=setTimeout(this.handleTopMoveStart.bind(this,e),t),this.waitingForDelay=!0},this.handleTopMoveCapture=()=>{this.dragOverTargetIds=[]},this.handleMove=(e,t)=>{this.dragOverTargetIds&&this.dragOverTargetIds.unshift(t)},this.handleTopMove=e=>{if(this.timeout&&clearTimeout(this.timeout),!this.document||this.waitingForDelay)return;const{moveStartSourceIds:t,dragOverTargetIds:n}=this,o=this.options.enableHoverOutsideTarget,s=u(e,this.lastTargetTouchFallback);if(!s)return;if(this._isScrolling||!this.monitor.isDragging()&&function(e,t,n,o,s){if(!s)return!1;const i=180*Math.atan2(o-t,n-e)/Math.PI+180;for(let e=0;e<s.length;++e){const t=s[e];if(t&&(null==t.start||i>=t.start)&&(null==t.end||i<=t.end))return!0}return!1}(this._mouseClientOffset.x||0,this._mouseClientOffset.y||0,s.x,s.y,this.options.scrollAngleRanges))return void(this._isScrolling=!0);var i,r,a,l
;if(!this.monitor.isDragging()&&this._mouseClientOffset.hasOwnProperty("x")&&t&&(i=this._mouseClientOffset.x||0,r=this._mouseClientOffset.y||0,a=s.x,l=s.y,Math.sqrt(Math.pow(Math.abs(a-i),2)+Math.pow(Math.abs(l-r),2))>(this.options.touchSlop?this.options.touchSlop:0))&&(this.moveStartSourceIds=void 0,this.actions.beginDrag(t,{clientOffset:this._mouseClientOffset,getSourceClientOffset:this.getSourceClientOffset,publishSource:!1})),!this.monitor.isDragging())return;const c=this.sourceNodes.get(this.monitor.getSourceId());this.installSourceNodeRemovalObserver(c),this.actions.publishDragSource(),e.cancelable&&e.preventDefault();const d=(n||[]).map((e=>this.targetNodes.get(e))).filter((e=>!!e)),h=this.options.getDropTargetElementsAtPoint?this.options.getDropTargetElementsAtPoint(s.x,s.y,d):this.document.elementsFromPoint(s.x,s.y),m=[];for(const e in h){if(!h.hasOwnProperty(e))continue;let t=h[e];for(null!=t&&m.push(t);t;)t=t.parentElement,t&&-1===m.indexOf(t)&&m.push(t)}const v=m.filter((e=>d.indexOf(e)>-1)).map((e=>this._getDropTargetId(e))).filter((e=>!!e)).filter(((e,t,n)=>n.indexOf(e)===t));if(o)for(const e in this.targetNodes){const t=this.targetNodes.get(e);if(c&&t&&t.contains(c)&&-1===v.indexOf(e)){v.unshift(e);break}}v.reverse(),this.actions.hover(v,{clientOffset:s})},this._getDropTargetId=e=>{const t=this.targetNodes.keys();let n=t.next();for(;!1===n.done;){const o=n.value;if(e===this.targetNodes.get(o))return o;n=t.next()}},this.handleTopMoveEndCapture=e=>{this._isScrolling=!1,this.lastTargetTouchFallback=void 0,function(e){return void 0===e.buttons||!(e.buttons&r)}(e)&&(this.monitor.isDragging()&&!this.monitor.didDrop()?(e.cancelable&&e.preventDefault(),this._mouseClientOffset={},this.uninstallSourceNodeRemovalObserver(),this.actions.drop(),this.actions.endDrag()):this.moveStartSourceIds=void 0)},this.handleCancelOnEscape=e=>{"Escape"===e.key&&this.monitor.isDragging()&&(this._mouseClientOffset={},this.uninstallSourceNodeRemovalObserver(),this.actions.endDrag())},this.options=new i(n,t),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.sourceNodes=new Map,this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.targetNodes=new Map,this.listenerTypes=[],this._mouseClientOffset={},this._isScrolling=!1,this.options.enableMouseEvents&&this.listenerTypes.push(o.mouse),this.options.enableTouchEvents&&this.listenerTypes.push(o.touch),this.options.enableKeyboardEvents&&this.listenerTypes.push(o.keyboard)}}const v=function(e,t={},n={}){return new m(e,t,n)}},365982:(e,t,n)=>{"use strict";n.d(t,{useDragLayer:()=>r});var o=n(50959),s=n(971690),i=n(868788);function r(e){const t=(0,i.useDragDropManager)().getMonitor(),[n,r]=(0,s.useCollector)(t,e);return(0,o.useEffect)((()=>t.subscribeToOffsetChange(r))),(0,o.useEffect)((()=>t.subscribeToStateChange(r))),n}}}]);