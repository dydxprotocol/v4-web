"use strict";(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[7076],{6867:(e,t,n)=>{n.d(t,{splitThousands:()=>i});var r=n(75496);function i(e,t="&nbsp;"){let n=e+"";-1!==n.indexOf("e")&&(n=function(e){return(0,r.fixComputationError)(e).toFixed(10).replace(/\.?0+$/,"")}(Number(e)));const i=n.split(".");return i[0].replace(/\B(?=(\d{3})+(?!\d))/g,t)+(i[1]?"."+i[1]:"")}},33375:(e,t,n)=>{var r;n.d(t,{StopType:()=>r}),function(e){e[e.StopLoss=0]="StopLoss",e[e.TrailingStop=1]="TrailingStop"}(r||(r={}))},35838:(e,t,n)=>{n.d(t,{DisconnectError:()=>s,extractDisconnectionInfoAndConnectionStatus:()=>c});var r=n(37560),i=n(40160),o=n(18898);class s extends o.UserFriendlyError{constructor({disconnectInfo:e,...t}){super(t),this.name="DisconnectError",this.disconnectInfo=e}}function c(e){const t=function(e){const t={message:(0,i.getErrorMessage)(e)};e instanceof s&&(t.disconnectType=e.disconnectInfo.disconnectType);return t}(e);let n=4;return void 0!==t.disconnectType&&[r.DisconnectType.CancelAuthorization,r.DisconnectType.TimeOutForAuthorization].includes(t.disconnectType)&&(n=3),{disconnectionInfo:t,connectionStatus:n}}},18898:(e,t,n)=>{n.d(t,{UserFriendlyError:()=>r});class r extends Error{constructor({detailedErrorMessage:e,userFriendlyMessage:t}){super(t),this.name="UserFriendlyError",this.detailedErrorMessage=e}}},40160:(e,t,n)=>{n.d(t,{orderStatusToText:()=>x,sideToText:()=>E,orderTypeToText:()=>S,findArraysDifferences:()=>_,formatNumber:()=>b,isOrderOrPositionMessageType:()=>v,roundToStepByPriceTypeAndSide:()=>w,TasksWithTermination:()=>M,numOfDecimalPlaces:()=>O,roundDownToPowerOf10:()=>D,isFinalOrderStatus:()=>L,positionSideToText:()=>U,makeNonTradableSymbolText:()=>I,getErrorMessage:()=>C,getLoggerMessage:()=>N});var r=n(74245),i=n(93302),o=n(37560),s=n(6867),c=n(90592),d=n(14071),a=n(60874),u=n(18898),l=n(35838);const f={2:{},1:{}},h={},p={},g={};let m=!1;const T=(0,d.getLogger)("Trading.Utils");function x(e){return y(),g[e]}function y(){m||(m=!0,f[2][2]=(0,r.t)("Mkt",{context:"Market order"}),f[2][1]=(0,r.t)("Lmt",{context:"Limit order"}),f[2][3]=(0,r.t)("Stp",{context:"order"}),f[2][4]=(0,r.t)("Stp lmt",{context:"Stop limit order"}),f[1][2]=(0,r.t)("Market"),f[1][1]=(0,r.t)("Limit"),f[1][3]=(0,r.t)("Stop",{context:"order"}),f[1][4]=(0,r.t)("StopLimit"),h[1]=(0,r.t)("Buy",{context:"trading"}),h[-1]=(0,r.t)("Sell",{context:"trading"}),p[1]=(0,r.t)("Long",{context:"trading"}),p[-1]=(0,r.t)("Short",{context:"trading"}),g[2]=(0,r.t)("filled"),g[1]=(0,r.t)("cancelled"),g[6]=(0,r.t)("working"),g[3]=(0,r.t)("inactive"),g[4]=(0,r.t)("placing"),g[5]=(0,r.t)("rejected"))}function E(e,t){y();const n=h[e];return t?n.toUpperCase():n}function S(e,t,n){y();const r=n?2:1;return t?f[r][e].toUpperCase():f[r][e]}function _(e,t,n,r,i){const o={added:[],modified:[],removed:[]},s=e.slice(0);return t.forEach(t=>{const d=e.findIndex(e=>e[n]===t[n]);if(-1===d)return void o.added.push(t);s[d]=null;const a=e[d];for(const e of r){let n=!0;if(null===a[e]||"object"!=typeof a[e]?n=a[e]===t[e]:i&&(n=(0,
c.deepEquals)(a[e],t[e])[0]),!n)return void o.modified.push(t)}}),s.forEach(e=>{e&&o.removed.push(e)}),o}function b(e){return Math.abs(e||0)<.001?"0.00":(0,s.splitThousands)((e||0).toFixed(2))}function v(e){return-1!==Object.keys(o.OrderOrPositionMessageType).map(e=>o.OrderOrPositionMessageType[e]).indexOf(e)}function w(e,t,n,r){const o=(0,i.Big)(e).div(t);return 1===n&&1===r||2===n&&-1===r?o.round(0,0).mul(t).toNumber():1===n&&-1===r||2===n&&1===r?o.round(0,3).mul(t).toNumber():0}const F=(0,r.t)("Failed to login");class M{constructor(e){this._isFinished=!1,this._isTerminated=!1,this._tasks=e}execute(){return this._isTerminated=!1,this._isExecuted()&&!this._isFinished?this.terminate().then(()=>this._execution=this._execute()):this._execution=this._execute()}async terminate(){if(this._isExecuted()&&!this._isFinished){this._isTerminated=!0;try{await this._execution}catch(e){return void T.logWarn(e)}}}_isExecuted(){return!!this._execution}async _execute(){for(const e of this._tasks){if(this._isTerminated)throw new Error("Login tasks are terminated");try{await e()}catch(e){this._isFinished=!0;const t={detailedErrorMessage:`${F}${k(N(e))}`,userFriendlyMessage:`${F}${k(C(e))}`};throw e instanceof l.DisconnectError?new l.DisconnectError({...t,disconnectInfo:e.disconnectInfo}):new u.UserFriendlyError(t)}}this._isFinished=!0}}function k(e){return void 0===e||""===e?"":": "+e}function O(e){return(new i.Big(e).toFixed().split(".")[1]||"").length}function D(e){return(0,i.Big)(10).pow(Math.floor(Math.log10(e))).toNumber()}function L(e){return-1!==[2,1,5].indexOf(e)}function U(e){return y(),p[e]}function I(e,t){return(0,r.t)("You can't trade the symbol {symbol} at TradingView via {broker}.").replace("{symbol}",e).replace("{broker}",t)}function C(e){if(void 0===e)return(0,r.t)("Unknown error");let t;return t=e instanceof Error?e.message:"object"==typeof e?JSON.stringify(e):e.toString(),(0,a.removeTags)(t)}function N(e){return e instanceof u.UserFriendlyError?(0,a.removeTags)(e.detailedErrorMessage):C(e)}}}]);