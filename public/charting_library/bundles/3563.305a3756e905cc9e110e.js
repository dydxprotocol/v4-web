(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[3563],{871425:e=>{e.exports={body:"body-XooS0VBr"}},505943:e=>{e.exports={header:"header-_UwzQmBd",close:"close-_UwzQmBd"}},523455:e=>{e.exports={message:"message-iqdHKcH8",error:"error-iqdHKcH8"}},166613:e=>{e.exports={container:"container-uzBKh7Dy",top:"top-uzBKh7Dy"}},123059:e=>{e.exports={wrap:"wrap-Un5MtNUE",list:"list-Un5MtNUE",item:"item-Un5MtNUE",selected:"selected-Un5MtNUE",bluishItem:"bluishItem-Un5MtNUE",noPadding:"noPadding-Un5MtNUE"}},782536:e=>{e.exports={list:"list-oxiBYNWm",item:"item-oxiBYNWm"}},782211:e=>{e.exports={group:"group-NGVKpq85"}},625650:e=>{e.exports={loader:"loader-UL6iwcBa",static:"static-UL6iwcBa",item:"item-UL6iwcBa","tv-button-loader":"tv-button-loader-UL6iwcBa",medium:"medium-UL6iwcBa",small:"small-UL6iwcBa",black:"black-UL6iwcBa",white:"white-UL6iwcBa",gray:"gray-UL6iwcBa",primary:"primary-UL6iwcBa","loader-initial":"loader-initial-UL6iwcBa","loader-appear":"loader-appear-UL6iwcBa"}},651109:e=>{e.exports={labels:"labels-Llv4yjs6",rewardRisk:"rewardRisk-Llv4yjs6",rewardRiskText:"rewardRiskText-Llv4yjs6",bracketControl:"bracketControl-Llv4yjs6",control:"control-Llv4yjs6",wait:"wait-Llv4yjs6",checkboxLabel:"checkboxLabel-Llv4yjs6",clickableTextColor:"clickableTextColor-Llv4yjs6",checkboxWrapper:"checkboxWrapper-Llv4yjs6",slCheckboxWrapper:"slCheckboxWrapper-Llv4yjs6",checkboxLabelWrapper:"checkboxLabelWrapper-Llv4yjs6",checkbox:"checkbox-Llv4yjs6",inputGroup:"inputGroup-Llv4yjs6",rightBlock:"rightBlock-Llv4yjs6",label:"label-Llv4yjs6",bracketInCurrency:"bracketInCurrency-Llv4yjs6",bracketInPercent:"bracketInPercent-Llv4yjs6",bracketInPips:"bracketInPips-Llv4yjs6",bracketInPrice:"bracketInPrice-Llv4yjs6"}},114891:e=>{e.exports={title:"title-DPlbqdw3",input:"input-DPlbqdw3",wait:"wait-DPlbqdw3",checkboxWrapper:"checkboxWrapper-DPlbqdw3",checkboxLabel:"checkboxLabel-DPlbqdw3"}},223302:e=>{e.exports={customField:"customField-64DiJaqR"}},816146:e=>{e.exports={pinLabel:"pinLabel-zEKQLeyM"}},191547:e=>{e.exports={wrapper:"wrapper-kb0OuE9E",row:"row-kb0OuE9E",header:"header-kb0OuE9E",cell:"cell-kb0OuE9E",cellTitle:"cellTitle-kb0OuE9E",cellValue:"cellValue-kb0OuE9E",cellRightAligned:"cellRightAligned-kb0OuE9E",cellSideBuy:"cellSideBuy-kb0OuE9E",cellSideSell:"cellSideSell-kb0OuE9E",marker:"marker-kb0OuE9E",disabled:"disabled-kb0OuE9E"}},74704:e=>{e.exports={button:"button-pP_E6i3F"}},885004:e=>{e.exports={clickableText:"clickableText-RTuybJqa",clickableTextColor:"clickableTextColor-RTuybJqa"}},17817:e=>{e.exports={footer:"footer-fSCU20uC"}},92910:e=>{e.exports={separator:"separator-QjUlCDId",small:"small-QjUlCDId",normal:"normal-QjUlCDId",large:"large-QjUlCDId"}},493455:(e,t,s)=>{"use strict";s.d(t,{ControlGroup:()=>c});var r=s(50959),o=s(497754),n=s(380327),l=s(782211),a=s.n(l);function i(e,t,s){return{isTop:e<t,isRight:e%t==t-1,isBottom:e>=t*(s-1),isLeft:e%t==0}}function c(e){const{children:t,rows:s,cols:l,disablePositionAdjustment:c,className:p,...u}=e,h=r.Children.count(t),d=null!=l?l:h,m=null!=s?s:function(e,t){
return Math.ceil(e/t)}(h,d),b=(0,r.useMemo)((()=>{const e=[];for(let t=0;t<h;t++)e.push({isGrouped:!0,cellState:i(t,d,m),disablePositionAdjustment:c});return e}),[h,d,m,c]),k=r.Children.map(t,((e,t)=>r.createElement(n.ControlGroupContext.Provider,{value:b[t]},e))),v={"--ui-lib-control-group-cols":d.toString(10),"--ui-lib-control-group-rows":m.toString(10)};return r.createElement("span",{className:o(a().group,p),style:v,...u},k)}},718736:(e,t,s)=>{"use strict";s.d(t,{useFunctionalRefObject:()=>n});var r=s(50959),o=s(855393);function n(e){const t=(0,r.useMemo)((()=>function(e){const t=s=>{e(s),t.current=s};return t.current=null,t}((e=>{a.current(e)}))),[]),s=(0,r.useRef)(null),n=t=>{if(null===t)return l(s.current,t),void(s.current=null);s.current!==e&&(s.current=e,l(s.current,t))},a=(0,r.useRef)(n);return a.current=n,(0,o.useIsomorphicLayoutEffect)((()=>{if(null!==t.current)return a.current(t.current),()=>a.current(null)}),[e]),t}function l(e,t){null!==e&&("function"==typeof e?e(t):e.current=t)}},855393:(e,t,s)=>{"use strict";s.d(t,{useIsomorphicLayoutEffect:()=>o});var r=s(50959);function o(e,t){("undefined"==typeof window?r.useEffect:r.useLayoutEffect)(e,t)}},664332:(e,t,s)=>{"use strict";s.d(t,{useResizeObserver:()=>a});var r=s(50959),o=s(159255),n=s(855393),l=s(718736);function a(e,t=[]){const{callback:s,ref:a=null}=function(e){return"function"==typeof e?{callback:e}:e}(e),i=(0,r.useRef)(null),c=(0,r.useRef)(s);c.current=s;const p=(0,l.useFunctionalRefObject)(a),u=(0,r.useCallback)((e=>{p(e),null!==i.current&&(i.current.disconnect(),null!==e&&i.current.observe(e))}),[p,i]);return(0,n.useIsomorphicLayoutEffect)((()=>(i.current=new o.default(((e,t)=>{c.current(e,t)})),p.current&&u(p.current),()=>{var e;null===(e=i.current)||void 0===e||e.disconnect()})),[p,...t]),u}},234404:(e,t,s)=>{"use strict";s.d(t,{Loader:()=>c});var r,o=s(50959),n=s(497754),l=s(549423),a=s(625650),i=s.n(a);!function(e){e[e.Initial=0]="Initial",e[e.Appear=1]="Appear",e[e.Active=2]="Active"}(r||(r={}));class c extends o.PureComponent{constructor(e){super(e),this._stateChangeTimeout=null,this.state={state:r.Initial}}render(){const{className:e,color:t="black",size:s="medium",staticPosition:r}=this.props,l=n(i().item,i()[t],i()[s]);return o.createElement("span",{className:n(i().loader,r&&i().static,this._getStateClass(),e)},o.createElement("span",{className:l}),o.createElement("span",{className:l}),o.createElement("span",{className:l}))}componentDidMount(){this.setState({state:r.Appear}),this._stateChangeTimeout=setTimeout((()=>{this.setState({state:r.Active})}),2*l.dur)}componentWillUnmount(){this._stateChangeTimeout&&(clearTimeout(this._stateChangeTimeout),this._stateChangeTimeout=null)}_getStateClass(){switch(this.state.state){case r.Initial:return i()["loader-initial"];case r.Appear:return i()["loader-appear"];default:return""}}}},788865:(e,t,s)=>{"use strict";s.d(t,{BracketControlGroup:()=>E});var r=s(50959),o=s(497754),n=s(509806),l=s(661851),a=s(972535),i=s(656846),c=s(493455),p=s(302946),u=s(363111),h=s(587125);function d(e){
const{inputMode:t,control:s,className:o,error:n,errorMessage:a,errorHandler:i,onFocus:c,inputReference:p,intent:u,highlight:d,highlightRemoveRoundBorder:m,disabled:b,fontSizeStyle:k}=e,v=(0,l.useObservable)(s.value$,s.getValue());return r.createElement(h.NumberInput,{inputMode:t,intent:u,highlight:d,highlightRemoveRoundBorder:m,value:v,onValueChange:e=>{var t;null==c||c(),s.setValue(e),null===(t=s.onModifiedCallback)||void 0===t||t.call(s)},formatter:s.formatter,className:o,step:s.step,error:n,errorMessage:a,errorHandler:i,onFocus:c,inputReference:p,disabled:b,fontSizeStyle:k})}var m=s(895318),b=s(885004);function k(e){const{theme:t=b}=e;return r.createElement("span",{className:o(b.clickableText,t.clickableTextColor,e.className),ref:e.reference,tabIndex:e.tabIndex,onClick:e.onClick,onKeyDown:e.onKeyDown},e.text)}var v=s(101614),C=s(923235),g=s(651109);const f={[i.BracketType.StopLoss]:n.t(null,void 0,s(241648)),[i.BracketType.TakeProfit]:n.t(null,void 0,s(129266)),[i.BracketType.TrailingStop]:n.t(null,void 0,s(86430))},y=n.t(null,void 0,s(782806));class w extends r.PureComponent{constructor(e){super(e),this._slTypeElement=null,this._slTypeDropdown=null,this._setSLTypeElement=e=>{this._slTypeElement=e},this._setSlTypeDropdownRef=e=>{this._slTypeDropdown=e},this._typeToggle=()=>{this.setState((e=>({isSLTypeOpened:!e.isSLTypeOpened}))),this.props.enabled||this.props.onToggleEnabled()},this._onSLTypeSelect=e=>{this.props.setBracketType(this.props.stopLossTypes[e]),this.setState({isSLTypeOpened:!1})},this._onClickOutside=e=>{this._slTypeDropdown&&this._slTypeDropdown.contains(e.target)||this.setState({isSLTypeOpened:!1})},this._focusHandler=e=>()=>this.props.onFocus(e),this.state={isSLTypeOpened:!1}}render(){const{inputDisabled:e,labelDisabled:t,checkboxDisabled:s}=this.props.controlState,n=this.props.type!==i.BracketType.TakeProfit,l=f[this.props.type],a=n&&this.context.supportTrailingStop;let u;u=a&&!t?r.createElement(C.OutsideEvent,{click:!0,mouseDown:!0,touchStart:!0,handler:this._onClickOutside},(e=>r.createElement("span",{className:g.checkboxLabelWrapper,ref:e},r.createElement(k,{className:g.checkboxLabel,text:l,tabIndex:-1,onClick:this._typeToggle,reference:this._setSLTypeElement,theme:g.clickableTextColor}),r.createElement(v.DropdownList,{root:"document",isOpened:this.state.isSLTypeOpened,items:this._mapSLTypesNames(),target:this._slTypeElement||void 0,inheritWidthFromTarget:!1,onSelect:this._onSLTypeSelect,reference:this._setSlTypeDropdownRef})))):r.createElement("span",{className:g.checkboxLabel},l);const h=r.createElement("div",{className:o(a?g.slCheckboxWrapper:g.checkboxWrapper,"apply-common-tooltip"),title:a?y:l},r.createElement(p.Checkbox,{className:g.checkbox,checked:this.props.enabled,label:a?void 0:u,tabIndex:-1,onChange:this.props.onToggleEnabled,disabled:s
}),a&&u),b=Boolean(this.props.error&&this.props.error.res),w=this.props.error&&this.props.error.msg,_=this.props.isCryptoBracket?"showCryptoBracketsInCurrency":"showBracketsInCurrency",E=this.props.isCryptoBracket?"showCryptoBracketsInPercent":"showBracketsInPercent";return r.createElement(m.SettingsContext.Consumer,null,(t=>r.createElement("div",{className:o(g.bracketControl,n&&g.rightBlock)},h,r.createElement(c.ControlGroup,{cols:1,className:g.inputGroup},!this.props.isPipsControlHidden&&r.createElement(d,{...this._generateControlProps(0),control:this.props.pips,className:this._generateClassName(0),onFocus:this._focusHandler(0),errorHandler:this.props.errorHandler,error:b&&this._isSelectedControl(0),errorMessage:w,inputReference:this.props.handlePipsInputRef,disabled:e,fontSizeStyle:this.props.fontSizeStyle}),r.createElement(d,{...this._generateControlProps(1),control:this.props.price,className:this._generateClassName(1),onFocus:this._focusHandler(1),errorHandler:this.props.errorHandler,error:b&&this._isSelectedControl(1),errorMessage:w,inputReference:this.props.handlePriceInputRef,disabled:e,fontSizeStyle:this.props.fontSizeStyle,inputMode:"text"}),this.props.showRiskControls&&t.value[_]&&r.createElement(d,{...this._generateControlProps(2),control:this.props.riskInCurrency,className:this._generateClassName(2),onFocus:this._focusHandler(2),errorHandler:this.props.errorHandler,error:b&&this._isSelectedControl(2),errorMessage:w,disabled:e,fontSizeStyle:this.props.fontSizeStyle}),this.props.showRiskControls&&t.value[E]&&r.createElement(d,{...this._generateControlProps(3),control:this.props.riskInPercent,className:this._generateClassName(3),onFocus:this._focusHandler(3),errorHandler:this.props.errorHandler,error:b&&this._isSelectedControl(3),errorMessage:w,disabled:e,fontSizeStyle:this.props.fontSizeStyle})))))}_mapSLTypesNames(){return this.props.stopLossTypes.map((e=>({index:e,elem:r.createElement("span",null,f[e])})))}_isSelectedControl(e){return this.props.enabled&&this.props.focusedControl===e}_generateClassName(e){return o(g.control,!this.props.enabled&&g.wait,0===e&&g.bracketInPips,1===e&&g.bracketInPrice,2===e&&g.bracketInCurrency,3===e&&g.bracketInPercent)}_generateControlProps(e){const t={highlightRemoveRoundBorder:0};return this._isSelectedControl(e)&&(t.highlight=!0),Boolean(this.props.error&&this.props.error.res)&&this._isSelectedControl(e)&&(t.intent="danger"),t}}function _(e){const{model:t,isCryptoBracket:s,showRiskControls:o,orderTicketFocus:n}=e,{enabled$:c,error$:p,focusedControl$:u,bracketType$:h,stopLossTypes:d,pips:m,price:b,riskInCurrency:k,riskInPercent:v,roundToStopLimitPriceStepRequired:C,isValuesInitialized:g,controlState:f,onControlFocused:y,getFocusedControl:_,getEnabled:E,getBracketType:x,getError:T,setFocusedControl:S,setEnabled:N,setBracketType:P,setControlError:M}=t,L=(0,l.useObservable)(u,_()),B=(0,l.useObservable)(h,x()),I=(0,l.useObservable)(c,E()),D=(0,l.useObservable)(p,T()),R=(0,r.useRef)(null),O=(0,r.useRef)(null);return(0,r.useEffect)((()=>{if(a.mobiletouch||!I)return
;const e=e=>{null!==e&&g&&(e.focus(),e.setSelectionRange(e.value.length,e.value.length))};(B===i.BracketType.TakeProfit&&3===n||B===i.BracketType.StopLoss&&4===n)&&e(O.current),B===i.BracketType.TrailingStop&&4===n&&e(R.current)}),[g]),r.createElement(w,{type:B,enabled:I,error:D,stopLossTypes:d,pips:m,price:b,riskInCurrency:k,riskInPercent:v,focusedControl:L,onFocus:function(e){I||N(!0);L!==e&&S(e);y.fire()},onToggleEnabled:function(){N(!I),y.fire()},errorHandler:function(e){M(e)},handlePipsInputRef:e=>R.current=e,handlePriceInputRef:e=>O.current=e,setBracketType:P,isPipsControlHidden:C,controlState:f,isCryptoBracket:s,showRiskControls:o,fontSizeStyle:"medium"})}w.contextType=u.Context;class E extends r.PureComponent{constructor(e){super(e),this._updateMode=e=>{this.setState({mode:e})},this.state={mode:e.model.mode.value()},this._callback=()=>this.forceUpdate()}componentDidMount(){this._subscribeToModel(this.props.model)}componentWillUnmount(){this._unsubscribeFromModel(this.props.model)}render(){const e=this.props.model,t=e.takeProfitModel&&e.takeProfitModel.roundToStopLimitPriceStepRequired||e.stopLossModel&&e.stopLossModel.roundToStopLimitPriceStepRequired,l="supportCryptoBrackets"in e&&!0===e.supportCryptoBrackets,a=l?"showCryptoBracketsInCurrency":"showBracketsInCurrency",i=l?"showCryptoBracketsInPercent":"showBracketsInPercent",c=e.showRiskControls,p=e.rewardRisk.value();return r.createElement(m.SettingsContext.Consumer,null,(u=>r.createElement(r.Fragment,null,e.takeProfitModel&&r.createElement(_,{model:e.takeProfitModel,orderTicketFocus:this.props.focus,isCryptoBracket:l,showRiskControls:c}),e.takeProfitModel&&e.stopLossModel&&r.createElement("div",{className:g.labels},r.createElement("div",{className:o(g.rewardRisk,p&&"apply-common-tooltip"),title:p?n.t(null,void 0,s(214078)):void 0},r.createElement("span",{className:g.rewardRiskText},p)),!t&&r.createElement("span",null,"forex"===e.symbolType?n.t(null,void 0,s(778621)):n.t(null,void 0,s(130973))),r.createElement("span",null,n.t(null,void 0,s(25684))),c&&u.value[a]&&r.createElement("span",null,e.takeProfitModel?e.takeProfitModel.currency:""),c&&u.value[i]&&r.createElement("span",{className:o("apply-common-tooltip"),title:n.t(null,void 0,s(852997))},"%")),e.stopLossModel&&r.createElement(_,{model:e.stopLossModel,orderTicketFocus:this.props.focus,isCryptoBracket:l,showRiskControls:c}))))}_subscribeToModel(e){e.rewardRisk.subscribe(this._callback),e.mode.subscribe(this._updateMode)}_unsubscribeFromModel(e){e.rewardRisk.unsubscribe(this._callback),e.mode.unsubscribe(this._updateMode)}}},40176:(e,t,s)=>{"use strict";s.d(t,{CustomFields:()=>m});var r=s(50959),o=s(297265),n=s(363111),l=s(794087),a=s(302946),i=s(114891);function c(e){const t=r.createElement("span",{className:i.checkboxLabel},e.checkboxTitle);return r.createElement("div",null,e.title&&e.title.length>0&&r.createElement("div",{className:i.title},e.title),r.createElement(l.InputWithError,{className:e.className,inputClassName:i.input,type:e.inputType,value:e.text,placeholder:e.placeholder,
onChange:e.onInputChange,onClick:e.onClick,error:void 0!==e.errorMessage,errorMessage:e.errorMessage}),r.createElement("div",{className:i.checkboxWrapper},r.createElement(a.Checkbox,{checked:e.checked,label:t,onChange:e.onCheckboxToggle})))}class p extends r.PureComponent{constructor(e){super(e),this._onClick=()=>{this.props.onControlFocused.fire()},this._onInputChange=e=>{this.setState({text:e.currentTarget.value},(()=>{this.props.text.setValue(this.state.text)}))},this._onCheckboxToggle=()=>{this.setState({checked:!this.state.checked},(()=>{this.props.checked.setValue(this.state.checked)})),this.props.onControlFocused.fire()},this._updateText=e=>{this.setState({text:e})},this._updateCheckboxValue=e=>{this.setState({checked:e})},this._updateStatus=e=>{this.setState({status:e})},this._updateErrorMessage=e=>{this.setState({errorMessage:e})},this.state={text:this.props.text.value(),checked:this.props.checked.value(),status:this.props.status.value(),errorMessage:this.props.errorMessage.value()}}componentDidMount(){this.props.text.subscribe(this._updateText),this.props.checked.subscribe(this._updateCheckboxValue),this.props.status.subscribe(this._updateStatus),this.props.errorMessage.subscribe(this._updateErrorMessage)}componentDidUpdate(e){e.text!==this.props.text&&(e.text.unsubscribe(this._updateText),this.props.text.subscribe(this._updateText)),e.checked!==this.props.checked&&(e.checked.unsubscribe(this._updateCheckboxValue),this.props.checked.subscribe(this._updateCheckboxValue)),e.errorMessage!==this.props.errorMessage&&(e.errorMessage.unsubscribe(this._updateErrorMessage),this.props.errorMessage.subscribe(this._updateErrorMessage))}componentWillUnmount(){this.props.text.unsubscribe(this._updateText),this.props.checked.unsubscribe(this._updateCheckboxValue),this.props.status.unsubscribe(this._updateStatus),this.props.errorMessage.unsubscribe(this._updateErrorMessage)}render(){return r.createElement("div",{className:i.customFieldWithCheckboxContainer},r.createElement(c,{className:this.state.status===n.OrderPanelStatus.Wait&&i.wait,inputType:this.props.inputType,text:this.state.text,checked:this.state.checked,title:this.props.title,checkboxTitle:this.props.checkboxTitle,placeholder:this.props.placeholder,status:this.state.status,onInputChange:this._onInputChange,onCheckboxToggle:this._onCheckboxToggle,onClick:this._onClick,errorMessage:this.state.errorMessage}))}}var u=s(587374),h=s(613977),d=s(223302);function m(e){const{customFieldModels:t,status:s,alwaysShowAttachedErrors:l,onClose:a}=e,i=(0,o.useWatchedValueReadonly)({watchedValue:s}),c=(0,o.useWatchedValueReadonly)({watchedValue:l});return r.createElement(r.Fragment,null,t.map((e=>r.createElement("div",{key:e.id,className:d.customField},"TextWithCheckBox"===e.type&&r.createElement(p,{inputType:e.inputType,text:e.text,placeholder:e.placeholder,checked:e.checked,title:e.title,checkboxTitle:e.checkboxTitle,status:s,onControlFocused:e.onControlFocused,errorMessage:e.errorMessage}),"Checkbox"===e.type&&r.createElement(h.CheckboxCustomField,{title:e.title,help:e.help,
checked:e.checked,disabled:e.disabled,onControlFocused:e.onControlFocused}),"ComboBox"===e.type&&r.createElement(u.CustomComboboxContainer,{title:e.title,items:e.items,selectedItem:e.selectedItem,onControlFocused:e.onControlFocused,onClose:a,disabled:e.items.length<=1,forceUserToSelectValue:i===n.OrderPanelStatus.Active,alwaysShowAttachedErrors:c})))))}},274837:(e,t,s)=>{"use strict";s.d(t,{useCommonDialogHandlers:()=>i});var r=s(50959),o=s(660538),n=s(559410),l=s(206594),a=s(996038);function i(e){const{isOpened:t,onOpen:s,onClose:i}=e;(0,r.useEffect)((()=>{const e=()=>{null==i||i()};n.subscribe(l.CLOSE_POPUPS_AND_DIALOGS_COMMAND,e,null);const r=window.matchMedia(a.DialogBreakpoints.TabletSmall),c=window.matchMedia("(orientation: portrait)"),p=()=>{t?null==s||s(r.matches):null==i||i()};return p(),(0,o.mediaQueryAddEventListener)(c,p),()=>{n.unsubscribe(l.CLOSE_POPUPS_AND_DIALOGS_COMMAND,e,null),(0,o.mediaQueryRemoveEventListener)(c,p)}}),[t,i,s])}},74752:(e,t,s)=>{"use strict";s.d(t,{HeaderContainer:()=>T});var r=s(50959),o=s(509806),n=s(32133),l=s(72571),a=s(389793),i=s(156963),c=s(379266),p=s(917850),u=s(192063),h=s(895318),d=s(363111),m=s(73359),b=s(350146),k=s(816146);const v=o.t(null,void 0,s(555198)),C=o.t(null,void 0,s(377562)),g=o.t(null,void 0,s(511327)),f=o.t(null,void 0,s(878506)),y=o.t(null,void 0,s(9540)),w=o.t(null,void 0,s(622105)),_=o.t(null,void 0,s(980280)),E=o.t(null,void 0,s(515632)),x=i.enabled("order_panel_undock");class T extends r.PureComponent{constructor(e){super(e),this._close=()=>{(0,n.trackEvent)("GUI","Close Order Panel from panel"),e.model.close()},this._cancel=()=>{(0,n.trackEvent)("GUI","Reset Order Panel"),e.model.cancel()},this._callback=()=>this.forceUpdate(),this._back=e.model.back.bind(e.model),this._pin=e.model.pin.bind(e.model)}componentDidMount(){this.props.model.status.subscribe(this._callback),this.props.model.hasBackButton.subscribe(this._callback),this.props.model.hasCloseButton.subscribe(this._callback),this.props.model.hasCancelButton.subscribe(this._callback),this.props.model.hasDelayedWarning.subscribe(this._callback)}componentWillUnmount(){this.props.model.status.unsubscribe(this._callback),this.props.model.hasBackButton.unsubscribe(this._callback),this.props.model.hasCloseButton.unsubscribe(this._callback),this.props.model.hasCancelButton.unsubscribe(this._callback),this.props.model.hasDelayedWarning.subscribe(this._callback)}render(){const e=this.props.mode===d.OrderEditorDisplayMode.Panel,t=this.props.model,s=this.props.showQuantityInsteadOfAmount?v:C,o=[];t.status.value()!==d.OrderPanelStatus.Preview&&t.isTradable&&(x&&t.isUndockAllowed&&o.push(r.createElement(u.PopupMenuItem,{onClick:this._pin,label:r.createElement("div",{className:k.pinLabel,"data-name":"dock-undock-order-panel-button"},r.createElement(l.Icon,{icon:e?m:b}),r.createElement("span",null,e?E:_))})),this.props.showRelativePriceControl&&o.push(r.createElement(c.PopupMenuItemToggle,{label:y,isChecked:!!this.context.value.showRelativePriceControl,
onClick:this._createClickHandler("showRelativePriceControl")})),this.props.showRiskControls&&(o.push(r.createElement(r.Fragment,null,r.createElement(c.PopupMenuItemToggle,{label:s.format({units:this.props.currency||"Money"}),isChecked:!!this.context.value.showCurrencyRiskInQty,onClick:this._createClickHandler("showCurrencyRiskInQty")}),r.createElement(c.PopupMenuItemToggle,{label:s.format({units:"%"}),isChecked:!!this.context.value.showPercentRiskInQty,onClick:this._createClickHandler("showPercentRiskInQty")}))),this.props.supportBrackets&&o.push(r.createElement(r.Fragment,null,r.createElement(c.PopupMenuItemToggle,{label:g.format({units:this.props.currency||"Money"}),isChecked:!!this.context.value.showBracketsInCurrency,onClick:this._createClickHandler("showBracketsInCurrency")}),r.createElement(c.PopupMenuItemToggle,{label:g.format({units:"%"}),isChecked:!!this.context.value.showBracketsInPercent,onClick:this._createClickHandler("showBracketsInPercent")})))),this.props.supportOrderPreview&&o.push(r.createElement(c.PopupMenuItemToggle,{label:f,isChecked:!!this.context.value.showOrderPreview,onClick:this._createClickHandler("showOrderPreview")})));const n=o.map(((e,t,s)=>r.createElement(r.Fragment,{key:t},e,s[t+1]&&r.createElement(p.PopupMenuSeparator,null)))),i=[d.OrderPanelStatus.Active,d.OrderPanelStatus.Wait].includes(t.status.value())?t.informerMessage$:void 0;return r.createElement(a.Header,{title:t.title,description:t.description,symbol:t.symbol,settingsItems:n,delayedWarningMessage:w,className:this.props.className,hasBackButton:t.hasBackButton.value(),hasCloseButton:t.hasCloseButton.value(),hasCancelButton:t.hasCancelButton.value(),hasDelayedWarning:t.hasDelayedWarning.value(),hasBatsQuotes:t.hasBatsQuotes,isTradable:t.isTradable,informerMessage$:i,back:this._back,close:this._close,cancel:this._cancel})}_createClickHandler(e){const t=this.context.value;return()=>this.context.setValue({...t,[e]:!t[e]})}}T.contextType=h.SettingsContext},564245:(e,t,s)=>{"use strict";s.d(t,{InfoTable:()=>l});var r=s(50959),o=s(497754),n=s(191547);function l(e){const t=e.rows.map(((t,s)=>r.createElement("div",{key:s,className:o(n.row,e.disabled&&n.disabled),"data-name":"info-table-row"},r.createElement("div",{className:o(n.cell,n.cellTitle,t.listMarker&&n.marker),"data-name":"info-table-cell-title"},t.title),void 0!==t.value&&r.createElement("div",{className:o(n.cell,n.cellValue,e.rightAlignedValues&&n.cellRightAligned,void 0!==t.type&&a(t.type)),"data-name":"info-table-cell-value"},t.value))));return r.createElement("div",{className:n.wrapper},e.header&&r.createElement("div",{className:n.header},e.header),t)}function a(e){switch(e){case 0:return n.cellSideBuy;case 1:return n.cellSideSell;default:return}}},447538:(e,t,s)=>{"use strict";s.d(t,{PlaceAndModifyButton:()=>p});var r=s(50959),o=s(423869),n=s(234404),l=s(171529),a=s(901317);var i=s(661851),c=s(74704);function p(e){const{model:t,reference:s,buttonModel:p}=e,u=t.hasOwnProperty("sideModel")&&"sideModel"in t?t.sideModel.value$:o.EMPTY,[h]=(e=>{const[t,s]=(0,
r.useState)(e.value());return(0,r.useLayoutEffect)((()=>{const t=e=>s(e);return e.subscribe(t),()=>e.unsubscribe(t)}),[e]),[t,t=>e.setValue(t)]})(t.disabled),[d]=(0,a.useWatchedValue)(t.loading),m=(0,i.useObservable)(p.value$,p.getValue()),b=1===(0,i.useObservable)(u,t.side())?"brand":"red";return d?r.createElement(l.SquareButton,{reference:s,className:c.button,size:"xlarge",disabled:!0,"data-name":"place-and-modify-button"},r.createElement(n.Loader,null)):r.createElement(l.SquareButton,{...m,reference:s,className:c.button,size:"xlarge",color:b,disabled:h,onClick:()=>t.doneButtonClick(),"data-name":"place-and-modify-button"},void 0===m.secondaryText?m.primaryText:null)}},438980:(e,t,s)=>{"use strict";s.d(t,{Measure:()=>o});var r=s(664332);function o(e){const{children:t,onResize:s}=e;return t((0,r.useResizeObserver)(s||(()=>{}),[null===s]))}},930894:(e,t,s)=>{"use strict";s.d(t,{Body:()=>p,Header:()=>i});var r=s(50959),o=s(497754),n=s(505943),l=s(608636),a=s(72571);function i(e){const t=e.hideIcon?null:r.createElement(a.Icon,{className:n.close,icon:l,onClick:e.onClose});return r.createElement("div",{className:o(n.header,e.className),"data-dragg-area":!0,ref:e.reference},e.children,t)}s(17817);var c=s(871425);function p(e){return r.createElement("div",{className:o(c.body,e.className),ref:e.reference},e.children)}s(908783),s(523455)},101614:(e,t,s)=>{"use strict";s.d(t,{DropdownList:()=>x});var r=s(50959),o=s(123059),n=s(497754),l=s(500962),a=s(273388),i=s(782536);class c extends r.PureComponent{constructor(e){super(e)}render(){return r.createElement("div",{className:this.props.className,onClick:this.props.onClick,ref:this.props.reference},this.props.children)}}var p=s(438980);class u extends r.PureComponent{constructor(e){super(e),this._handleResize=([e])=>{var t,s;null===(s=(t=this.props).onMeasure)||void 0===s||s.call(t,e.target.getBoundingClientRect())}}render(){const{theme:e=i}=this.props,t=n(e.list,{[this.props.className]:Boolean(this.props.className)}),{fontSize:s=13}=this.props,o={bottom:this.props.bottom,fontSize:s,left:this.props.left,height:this.props.height||"auto",right:this.props.right,top:this.props.top,width:this.props.width,zIndex:this.props.zIndex};return r.createElement(p.Measure,{onResize:Boolean(this.props.onMeasure)?this._handleResize:null},(e=>r.createElement("div",{className:t,style:o,ref:(0,a.mergeRefs)([this.props.reference,e])},this._wrapItems(this.props.items,this.props.selected))))}componentDidMount(){if(this._el=l.findDOMNode(this),void 0!==this.props.selected&&this.props.shouldScrollIfNotVisible){const e=this._items[this.props.selected];e&&this._scrollIfNotVisible(e)}}componentDidUpdate(){if(void 0!==this.props.selected&&this.props.shouldScrollIfNotVisible){const e=this._items[this.props.selected];e&&this._scrollIfNotVisible(e)}}_wrapItems(e=[],t){this._items=[];const{itemWrap:s=c,theme:o=i}=this.props,l=s;return e.map(((e,s)=>{const a=n(o.item,{[this.props.itemsClassName]:Boolean(this.props.itemsClassName),[this.props.selectedClassName]:t===s});return r.createElement(l,{reference:t=>{
t&&this._items.push({elem:t,index:s,value:e})},key:s,onClick:()=>this._onSelect(s),className:a},e.elem)}))}_onSelect(e){this.props.onSelect&&this.props.onSelect(e,this._items[e].value)}_scrollIfNotVisible(e){const t=this._el.scrollTop,s=this._el.scrollTop+this._el.clientHeight,r=e.elem.offsetTop,o=r+e.elem.clientHeight;r<=t?e.elem.scrollIntoView(!0):o>=s&&e.elem.scrollIntoView(!1)}}u.defaultProps={shouldScrollIfNotVisible:!0};var h=s(841037),d=s(874485);class m extends r.PureComponent{render(){const e={position:"absolute",top:this.props.top,width:this.props.width,height:this.props.height,bottom:this.props.bottom,right:this.props.right,left:this.props.left,zIndex:this.props.zIndex};return r.createElement("div",{className:this.props.className,style:e,ref:this.props.reference},this.props.children)}}m.displayName="Dropdown Container";const b=(0,d.makeOverlapable)((0,h.makeAttachable)(m));var k=s(166613),v=s(650151);class C extends r.PureComponent{constructor(){super(...arguments),this._container=null,this._setContainerRef=e=>{"function"==typeof this.props.reference&&this.props.reference(e),"object"==typeof this.props.reference&&(this.props.reference.current=e),this._container=e}}componentDidMount(){this.props.onDropdownWheelNoPassive&&this._addPassiveListenerOnWheel(this.props.onDropdownWheelNoPassive)}componentDidUpdate(e){this.props.onDropdownWheelNoPassive!==e.onDropdownWheelNoPassive&&this._updatePassiveListenerOnWheel(e.onDropdownWheelNoPassive)}componentWillUnmount(){this.props.onDropdownWheelNoPassive&&this._removePassiveListenerOnWheel(this.props.onDropdownWheelNoPassive)}render(){const{shadow:e="bottom",children:t,className:s}=this.props,o=n(k.container,k[e],s),l={maxHeight:this.props.maxHeight};return r.createElement("div",{ref:this._setContainerRef,style:l,className:o,onTouchStart:this.props.onDropdownTouchStart,onTouchMove:this.props.onDropdownTouchMove,onTouchEnd:this.props.onDropdownTouchEnd,onWheel:this.props.onDropdownWheel},t)}_updatePassiveListenerOnWheel(e){e&&this._removePassiveListenerOnWheel(e),this.props.onDropdownWheelNoPassive&&this._addPassiveListenerOnWheel(this.props.onDropdownWheelNoPassive)}_addPassiveListenerOnWheel(e){(0,v.ensureNotNull)(this._container).addEventListener("wheel",e,{passive:!1})}_removePassiveListenerOnWheel(e){(0,v.ensureNotNull)(this._container).removeEventListener("wheel",e)}}var g=s(579184);const f=(y=u,(w=class extends r.PureComponent{constructor(e){super(e),this._items=this.props.items}componentDidUpdate(e){if(e.command!==this.props.command&&this.props.command)switch(this.props.command.name){case"next":this._next();break;case"prev":this._prev()}e.items!==this.props.items&&(this._items=this.props.items)}render(){return r.createElement(y,{...this.props},this.props.children)}_next(){const{selected:e=-1}=this.props,t=e+1;this._items.length-1>=t?this._navigateTo(t):this._navigateTo(0)}_prev(){const{selected:e=-1}=this.props,t=e-1,s=this._items.length-1;0<=t?this._navigateTo(t):this._navigateTo(s)}_navigateTo(e){this.props.onNavigate&&this.props.onNavigate(e,this._items[e])
}}).displayName="Navigateable Component",w);var y,w;const _=(0,g.makeAnchorable)(b),E={top:"top",bottom:"bottom",topRight:"top"};class x extends r.PureComponent{render(){const{anchor:e="bottom",fontSize:t=14,root:s="parent"}=this.props,l=n(o.list,o[e]),{dropdownClassName:a,height:i,...c}=this.props;return r.createElement(_,{...c,className:a,root:s},r.createElement(C,{className:this.props.dropdownContainerClassName,shadow:E[e],maxHeight:this.props.maxHeight,onDropdownTouchStart:this.props.onDropdownTouchStart?this.props.onDropdownTouchStart:void 0,onDropdownTouchMove:this.props.onDropdownTouchMove?this.props.onDropdownTouchMove:void 0,onDropdownTouchEnd:this.props.onDropdownTouchEnd?this.props.onDropdownTouchEnd:void 0,onDropdownWheelNoPassive:this.props.onDropdownWheelNoPassive?this.props.onDropdownWheelNoPassive:void 0},r.createElement(f,{...c,width:this.props.width,height:i,className:this.props.className||l,itemsClassName:this.props.itemsClassName||o.item,selectedClassName:this.props.selectedClassName||o.selected,fontSize:t,reference:this.props.reference})))}}},917850:(e,t,s)=>{"use strict";s.d(t,{PopupMenuSeparator:()=>a});var r=s(50959),o=s(497754),n=s.n(o),l=s(92910);function a(e){const{size:t="normal",className:s,ariaHidden:o=!1}=e;return r.createElement("div",{className:n()(l.separator,"small"===t&&l.small,"normal"===t&&l.normal,"large"===t&&l.large,s),role:"separator","aria-hidden":o})}},73359:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="none"><path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd" d="M9 6h11v.5c0 1.115-.442 2.004-1.273 2.593-.7.498-1.637.755-2.727.814v2.267c2.867.677 5 3.252 5 6.326v.5h-6v4h-1v-4H8v-.5a6.502 6.502 0 0 1 5-6.326V9.907c-1.09-.059-2.027-.316-2.727-.814C9.443 8.503 9 7.615 9 6.5V6zm1.043 1c.102.56.383.976.809 1.278.57.405 1.452.642 2.648.642h.5V13.006l-.417.07A5.503 5.503 0 0 0 9.023 18h10.955a5.503 5.503 0 0 0-4.56-4.924l-.418-.07V8.92h.5c1.196 0 2.078-.237 2.648-.642A1.93 1.93 0 0 0 18.958 7h-8.915z"/></svg>'},350146:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="none"><path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd" d="M16.621 4.6l.354.354 7.07 7.071.354.354-.353.353c-.789.789-1.73 1.104-2.734.934-.847-.144-1.691-.624-2.504-1.353l-1.603 1.603a6.502 6.502 0 0 1-.937 8.008l-.354.354-.354-.354-3.889-3.889-2.828 2.829-.707-.707 2.828-2.829-3.889-3.889-.353-.353.353-.354a6.502 6.502 0 0 1 8.009-.937l1.603-1.604c-.73-.812-1.21-1.656-1.353-2.503-.17-1.005.145-1.945.934-2.734l.353-.354zm.03 1.445a1.93 1.93 0 0 0-.331 1.476c.117.689.573 1.48 1.418 2.326l.354.354-.354.353-2.236 2.237-.3.299-.344-.246a5.503 5.503 0 0 0-6.706.258l3.873 3.873 3.873 3.873a5.503 5.503 0 0 0 .257-6.706l-.245-.345.299-.3 2.236-2.236.354-.353.354.353c.845.846 1.637 1.302 2.326 1.419a1.93 1.93 0 0 0 1.476-.332l-6.303-6.303z"/></svg>'},608636:e=>{
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 13 13" width="13" height="13"><path fill="currentColor" d="M5.18 6.6L1.3 2.7.6 2 2 .59l.7.7 3.9 3.9 3.89-3.9.7-.7L12.61 2l-.71.7L8 6.6l3.89 3.89.7.7-1.4 1.42-.71-.71L6.58 8 2.72 11.9l-.71.7-1.41-1.4.7-.71 3.9-3.9z"/></svg>'}}]);