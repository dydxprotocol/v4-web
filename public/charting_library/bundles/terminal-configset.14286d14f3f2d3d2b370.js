(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[8179],{98470:e=>{e.exports={container:"container-1z0p8Gw0",active:"active-1z0p8Gw0",title:"title-1z0p8Gw0",inactive:"inactive-1z0p8Gw0",titleText:"titleText-1z0p8Gw0",indicator:"indicator-1z0p8Gw0",disconnected:"disconnected-1z0p8Gw0",failed:"failed-1z0p8Gw0",connecting:"connecting-1z0p8Gw0",connected:"connected-1z0p8Gw0",loginTooltip:"loginTooltip-1z0p8Gw0"}},92658:e=>{e.exports={wrapper:"wrapper-2i2vljmZ",text:"text-2i2vljmZ"}},708:(e,t,n)=>{"use strict";n.d(t,{makeCancelable:()=>r,isCancelled:()=>a});class i{}function r(e){let t=!1;return{promise:new Promise((n,r)=>{e.then(e=>t?r(new i):n(e)),e.catch(e=>r(t?new i:e))}),cancel(){t=!0}}}function a(e){return e instanceof i}},78626:(e,t,n)=>{"use strict";n.r(t),n.d(t,{getTerminalConfigSet:()=>k});var i=n(74245);const r={paper_trading:{name:"paper_trading",title:(0,i.t)("Trading Panel"),buttonOpenTooltip:(0,i.t)("Open Trading Panel"),buttonCloseTooltip:(0,i.t)("Close Trading Panel"),ctor:null,_gaEvent:"Trading Panel"},scripteditor:{name:"scripteditor",title:(0,i.t)("Pine Editor"),buttonOpenTooltip:(0,i.t)("Open Pine Script Editor"),buttonCloseTooltip:(0,i.t)("Close Pine Script Editor"),ctor:null,_gaEvent:"Pine Editor"},backtesting:{name:"backtesting",title:(0,i.t)("Strategy Tester"),buttonOpenTooltip:(0,i.t)("Open Strategy Tester"),buttonCloseTooltip:(0,i.t)("Close Strategy Tester"),ctor:null,_gaEvent:"Strategy Tester"},screener:{name:"screener",title:(0,i.t)("Screener"),buttonOpenTooltip:(0,i.t)("Open Screener"),buttonCloseTooltip:(0,i.t)("Close Screener"),ctor:null,_gaEvent:"Screener"},text_notes:{name:"text_notes",title:(0,i.t)("Text Notes"),buttonOpenTooltip:(0,i.t)("Open Text Notes Panel"),buttonCloseTooltip:(0,i.t)("Close Text Notes Panel"),ctor:null,_gaEvent:"Text Notes"}};var a=n(76774),o=(n(37560),n(19160)),s=n.n(o),c=n(26057),l=n(16282);class d{constructor(e){this._contentRenderer=Promise.resolve(),this._spinnerContainer=document.createElement("div"),this._offlineScreenContainer=document.createElement("div"),this._renderer=Promise.resolve(),this._filter=new(s())(!0),this._bridge=e,(0,a.waitTradingService)().then(e=>{this._trading=e,this.onStatusChange(e.connectStatus()),this._trading.onConnectionStatusChange.subscribe(this,this.onStatusChange)}),n.e(7102).then(n.bind(n,66244)).then(e=>{e.render(this._spinnerContainer)}),(0,c.renderOfflineScreen)((0,l.ensureDefined)(this._offlineScreenContainer))}activate(){this._contentRenderer.then(()=>{this._content&&this._content.drawAttention&&this._content.drawAttention()})}onStatusChange(e,t){this._connectStatus!==e&&(this._connectStatus=this._trading.connectStatus(),window.navigator.onLine?(this._contentRenderer=Promise.resolve(),this._content&&this._content.remove(),2===e&&this._renderSpinner(),3!==e&&4!==e?1===e&&this._renderAccountManager(this._trading.activeBroker()):this._renderSpinner()):this._renderOfflineScreen())}_renderSpinner(){this._bridge.container.innerText="",this._content=this._bridge.container.appendChild(this._spinnerContainer)}
_renderOfflineScreen(){this._bridge.container.innerText="",this._content=this._bridge.container.appendChild(this._offlineScreenContainer)}_renderAccountManager(e){this._renderer=this._contentRenderer=Promise.all([n.e(3876),n.e(7610),n.e(9448),n.e(3894),n.e(3996),n.e(7936),n.e(706),n.e(83),n.e(9843),n.e(3972),n.e(8986),n.e(3684),n.e(446),n.e(6002),n.e(5514),n.e(9253),n.e(1529),n.e(3668),n.e(8354)]).then(n.bind(n,40953)).then(t=>{this._contentRenderer===this._renderer&&(this._content&&this._content.remove(),this._content=new t.AccountManager(e,this._bridge,1))})}_renderBrokerSelectScreen(){0}}var u=n(67294),p=n(94184),h=n(7424),g=n(708),_=n(87915),m=n(98470);const b=(0,i.t)("Trading Panel"),f=(0,i.t)("Account Manager"),v={4:"failed",2:"connecting",1:"connected",3:"disconnected"},T={4:(0,i.t)("Failed"),2:(0,i.t)("Connecting"),1:(0,i.t)("Connected"),3:(0,i.t)("Disconnected")};class S extends u.PureComponent{constructor(e){super(e),this._trading=null,this._tradingServiceCancelable=null,this._titleClick=()=>{const{onClick:e}=this.props;e&&e()},this.state={status:3,hasActiveBroker:!1,title:h.enabled("trading_terminal")?f:b}}componentDidMount(){if(h.enabled("trading_terminal"))return;const e=(0,a.tradingService)();null===e?(this._tradingServiceCancelable=(0,g.makeCancelable)((0,a.waitTradingService)()),this._tradingServiceCancelable.promise.then(this._onTradingService.bind(this))):this._onTradingService(e)}componentWillUnmount(){h.enabled("trading_terminal")||(this._cancelWaitingTrading(),null!==this._trading&&(this._trading.onBrokerChange.unsubscribe(this,this._update),this._trading.onConnectionStatusChange.unsubscribe(this,this._update)))}render(){const{status:e,hasActiveBroker:t,title:n}=this.state;return u.createElement("div",{className:p(_.bottomTradingTabClassName,m.container,m[v[e]],{[m.active]:this.props.isActive,[m.inactive]:!t}),onClick:this._titleClick,"data-name":this.props.dataName,"data-active":this.props.isActive},u.createElement("span",{className:m.title},u.createElement("span",{className:m.titleText},n)),u.createElement("div",{className:p(m.indicator,"apply-common-tooltip"),title:T[e]}))}_onTradingService(e){this._cancelWaitingTrading(),this._trading=e,e.onBrokerChange.subscribe(this,this._update),e.onConnectionStatusChange.subscribe(this,this._update),this._update()}_update(){const e=this._trading,t=e&&e.activeBroker(),n=e?e.connectStatus():3;window.is_authenticated&&!h.enabled("trading_terminal")&&e&&t&&1===n?this.setState({status:n,hasActiveBroker:!0,title:t.accountManagerInfo().accountTitle}):this.setState({status:n,hasActiveBroker:!1,title:b})}_cancelWaitingTrading(){null!==this._tradingServiceCancelable&&(this._tradingServiceCancelable.cancel(),this._tradingServiceCancelable=null)}}var C=n(90592);function k(){const e={paper_trading:{ctor:d,customTitleComponent:S}};return(0,C.merge)((0,C.clone)(r),e)}},26057:(e,t,n)=>{"use strict";n.d(t,{OfflineScreen:()=>s,renderOfflineScreen:()=>c});var i=n(67294),r=n(73935),a=n(74245),o=n(92658);function s(){return i.createElement("div",{className:o.wrapper
},i.createElement("p",{className:o.text},(0,a.t)("Lost internet connection")))}function c(e){r.render(i.createElement(s,null),e)}},87915:(e,t,n)=>{"use strict";n.d(t,{bottomTradingTabClassName:()=>l,orderStatusToText:()=>c.orderStatusToText,brokersListFromPlans:()=>p,isOAuthAuthType:()=>g,executionText:()=>_,convertActionDescriptionsToActions:()=>m,isOrderActive:()=>b,makeBrokerSideMaintananceFeatureToggleName:()=>f,makeMaintananceFeatureToggleName:()=>v,getCurrency:()=>T,isModifyOrderSupported:()=>C,isMoveOrderSupported:()=>k,isBatsQuotes:()=>w,isDefined:()=>x,alignToStep:()=>P});var i=n(93302),r=n.n(i),a=n(16282),o=n(33375),s=n(5251),c=n(40160);const l="js-bottom-trading-tab";const d=["Paper"];function u(e){return e.findIndex(e=>e.brokerPlan&&!e.brokerPlan.hidden&&e.brokerPlan.flags&&e.brokerPlan.flags.includes("featured"))}function p(e,t){const n=e.map(e=>e.id),i=t.map(e=>e.slug_name),r=t.filter(e=>n.includes(e.slug_name)).map(t=>({metainfo:h(e,t.slug_name),brokerPlan:t})),a=e.filter(e=>!i.includes(e.id)&&!d.includes(e.id)).map(e=>({metainfo:e})),o=u(r),s=d.map(t=>({metainfo:h(e,t)}));return s.length>0&&r.splice(o+1,0,...s),[...r,...a]}function h(e,t){return(0,a.ensureDefined)(e.find(e=>e.id.toLowerCase()===t.toLowerCase()))}function g(e){return void 0!==e&&["oauth","oauth2-implicit-flow","oauth2-code-flow"].includes(e)}function _(e,t){const n=(0,c.sideToText)(e.side)+" "+e.qty+" @ "+t.format(e.price);return n.substring(0,1).toUpperCase()+n.substring(1).toLowerCase()}function m(e){return e?e.map(e=>"-"===e.text||e.separator?new s.Separator:new s.Action({actionId:"Trading.CustomActionId",name:e.name,checkable:e.checkable,checked:e.checked,disabled:void 0!==e.enabled&&!e.enabled,label:e.text,statName:e.statName,icon:e.icon,onExecute:t=>{const n=t.getState();e.action({checkable:n.checkable,checked:n.checked,enabled:!n.disabled,text:n.label})}})):[]}function b(e){return 6===e||3===e}function f(e){return(e+"-brokers-side-maintenance").toLowerCase()}function v(e){return(e+"-maintenance").toLowerCase()}function T(e,t){return!t&&e.currencySign||e.currency||""}function S(e,t){return Boolean(void 0!==e.parentId&&t.supportModifyBrackets&&(t.supportTrailingStop&&t.supportModifyTrailingStop||e.stopType!==o.StopType.TrailingStop))}function C(e,t){const n=void 0===e.parentId&&(t.supportModifyOrderPrice||t.supportEditAmount||t.supportModifyBrackets),i=S(e,t);return Boolean(n||i)}function k(e,t){const n=void 0===e.parentId&&t.supportModifyOrderPrice,i=S(e,t);return Boolean(n||i)}function w(e){var t;return"BATS"===(null===(t=e.originalName)||void 0===t?void 0:t.split(":")[0])}function x(e){return null!=e}function P(e,t){return r()(e).div(t).round(0,1).mul(t).toNumber()}}}]);