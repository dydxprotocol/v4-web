(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[7502],{284316:e=>{e.exports={badge:"badge-PlSmolIm",content:"content-PlSmolIm","size-xsmall":"size-xsmall-PlSmolIm","size-small":"size-small-PlSmolIm","size-medium":"size-medium-PlSmolIm","size-large":"size-large-PlSmolIm","size-xlarge":"size-xlarge-PlSmolIm"}},422191:e=>{e.exports={label:"label-oHMFhnC8"}},493266:e=>{e.exports={priceLabel:"priceLabel-mpa2WWtU",list:"list-mpa2WWtU",item:"item-mpa2WWtU",selected:"selected-mpa2WWtU",input:"input-mpa2WWtU",wait:"wait-mpa2WWtU"}},556644:e=>{e.exports={absolutePriceDropdownItem:"absolutePriceDropdownItem-QDwbzjCO",price:"price-QDwbzjCO",labelsGroup:"labelsGroup-QDwbzjCO"}},693676:e=>{e.exports={wrapper:"wrapper-RoaZjf69",select:"select-RoaZjf69",selectMenu:"selectMenu-RoaZjf69",title:"title-RoaZjf69"}},972404:e=>{e.exports={dateTimeWrapper:"dateTimeWrapper-Dg2Jb5Mv",containerDatePicker:"containerDatePicker-Dg2Jb5Mv",dateInputContainer:"dateInputContainer-Dg2Jb5Mv",dateInput:"dateInput-Dg2Jb5Mv",dateInputIcon:"dateInputIcon-Dg2Jb5Mv"}},647253:e=>{e.exports={container:"container-JQC67cD9",leverageButton:"leverageButton-JQC67cD9",disabledLeverageButton:"disabledLeverageButton-JQC67cD9"}},408178:e=>{e.exports={dialog:"dialog-mAVKt9Z3",dialogBody:"dialogBody-mAVKt9Z3"}},849071:e=>{e.exports={orderInfo:"orderInfo-ZCVq_FIR",title:"title-ZCVq_FIR",contentWrapper:"contentWrapper-ZCVq_FIR",right:"right-ZCVq_FIR"}},601235:e=>{e.exports={panelContainer:"panelContainer-qPQHH_hi",orderPanel:"orderPanel-qPQHH_hi"}},15425:e=>{e.exports={scrollWrapper:"scrollWrapper-XYi0nst9",content:"content-XYi0nst9",separator:"separator-XYi0nst9",controls:"controls-XYi0nst9",button:"button-XYi0nst9",warning:"warning-XYi0nst9",warning__icon:"warning__icon-XYi0nst9",error:"error-XYi0nst9"}},472804:e=>{e.exports={controlGroup:"controlGroup-HcMnXcBP",absolutePriceControl:"absolutePriceControl-HcMnXcBP",withRelative:"withRelative-HcMnXcBP",relativePriceControl:"relativePriceControl-HcMnXcBP"}},338043:e=>{e.exports={orderWidget:"orderWidget-F15FKlrH",header:"header-F15FKlrH",side:"side-F15FKlrH",doneButton:"doneButton-F15FKlrH",customField:"customField-F15FKlrH",duration:"duration-F15FKlrH",customFieldsWrapper:"customFieldsWrapper-F15FKlrH",separator:"separator-F15FKlrH",notice:"notice-F15FKlrH",resizeHandler:"resizeHandler-F15FKlrH",orderTicket:"orderTicket-F15FKlrH",orderInfoAndSeparator:"orderInfoAndSeparator-F15FKlrH",topWrapper:"topWrapper-F15FKlrH",centerBlock:"centerBlock-F15FKlrH","brackets-wrapper":"brackets-wrapper-F15FKlrH",brackets:"brackets-F15FKlrH",quantityWrapper:"quantityWrapper-F15FKlrH",title:"title-F15FKlrH",leverage:"leverage-F15FKlrH",screenWithKeyholeIcon:"screenWithKeyholeIcon-F15FKlrH",sadScreenIcon:"sadScreenIcon-F15FKlrH",emptyStateBlockWrapper:"emptyStateBlockWrapper-F15FKlrH",scrollWrapper:"scrollWrapper-F15FKlrH"}},48486:e=>{e.exports={priceLabel:"priceLabel-s5LgTmXf",ask:"ask-s5LgTmXf",bid:"bid-s5LgTmXf",last:"last-s5LgTmXf"}},954568:e=>{e.exports={progressBarContainer:"progressBarContainer-Zcxs1Uvi",
marginsContainer:"marginsContainer-Zcxs1Uvi",margin:"margin-Zcxs1Uvi",title:"title-Zcxs1Uvi",price:"price-Zcxs1Uvi",usedMargin:"usedMargin-Zcxs1Uvi",progressBar:"progressBar-Zcxs1Uvi",track:"track-Zcxs1Uvi",progress:"progress-Zcxs1Uvi",fullFilled:"fullFilled-Zcxs1Uvi",marginOverflow:"marginOverflow-Zcxs1Uvi",wait:"wait-Zcxs1Uvi"}},115356:e=>{e.exports={calculator:"calculator-vLRZh3q9",calculatorWithInput:"calculatorWithInput-vLRZh3q9",input:"input-vLRZh3q9",buttonsWrapper:"buttonsWrapper-vLRZh3q9",buttonWithOperation:"buttonWithOperation-vLRZh3q9",buttonIcon:"buttonIcon-vLRZh3q9"}},368173:e=>{e.exports={menuBox:"menuBox-rm7KgfIT"}},460337:e=>{e.exports={wrapper:"wrapper-IWgXIGoE",label:"label-IWgXIGoE",wait:"wait-IWgXIGoE",title:"title-IWgXIGoE",popupMenuItem:"popupMenuItem-IWgXIGoE",value:"value-IWgXIGoE"}},433199:e=>{e.exports={wrapper:"wrapper-Gt0vOpyz",control:"control-Gt0vOpyz",label:"label-Gt0vOpyz",units:"units-Gt0vOpyz",single:"single-Gt0vOpyz",calculatorIcon:"calculatorIcon-Gt0vOpyz",isOpened:"isOpened-Gt0vOpyz",risk:"risk-Gt0vOpyz",wait:"wait-Gt0vOpyz"}},78007:e=>{e.exports={pipsLabel:"pipsLabel-oAJwOoJe",openButton:"openButton-oAJwOoJe",iconWrapper:"iconWrapper-oAJwOoJe",openIcon:"openIcon-oAJwOoJe",wait:"wait-oAJwOoJe",opened:"opened-oAJwOoJe",list:"list-oAJwOoJe",item:"item-oAJwOoJe",selected:"selected-oAJwOoJe",input:"input-oAJwOoJe"}},968625:e=>{e.exports={relativePriceDropdownItem:"relativePriceDropdownItem-L1mdgTgI",price:"price-L1mdgTgI"}},698368:e=>{e.exports={restrictions:"restrictions-kbYnGQgu",restriction:"restriction-kbYnGQgu",hardToBorrow:"hardToBorrow-kbYnGQgu",halted:"halted-kbYnGQgu"}},120693:e=>{e.exports={restrictions:"restrictions-B5GOsH7j",smallPaddings:"smallPaddings-B5GOsH7j",sideControl:"sideControl-B5GOsH7j",section:"section-B5GOsH7j",active:"active-B5GOsH7j",sell:"sell-B5GOsH7j",buy:"buy-B5GOsH7j",title:"title-B5GOsH7j",typeSide:"typeSide-B5GOsH7j",value:"value-B5GOsH7j",valueNoData:"valueNoData-B5GOsH7j",spread:"spread-B5GOsH7j",isLongValue:"isLongValue-B5GOsH7j",disable:"disable-B5GOsH7j"}},672273:e=>{e.exports={tabsContainer:"tabsContainer-zC5M0yfs"}},860015:e=>{e.exports={wrap:"wrap-ne5qGlZh",icon:"icon-ne5qGlZh",text:"text-ne5qGlZh",disabled:"disabled-ne5qGlZh"}},982434:e=>{e.exports={scrollWrap:"scrollWrap-FaOvTD2r"}},252693:e=>{e.exports={container:"container-Tv7LSjUz",overlayScrollWrap:"overlayScrollWrap-Tv7LSjUz",wrapper:"wrapper-Tv7LSjUz"}},977253:e=>{e.exports={wrap:"wrap-vSb6C0Bj","wrap--horizontal":"wrap--horizontal-vSb6C0Bj",bar:"bar-vSb6C0Bj",barInner:"barInner-vSb6C0Bj","barInner--horizontal":"barInner--horizontal-vSb6C0Bj","bar--horizontal":"bar--horizontal-vSb6C0Bj"}},782430:e=>{e.exports={container:"container-yrIMi47q",title:"title-yrIMi47q",title_normal:"title_normal-yrIMi47q",icon:"icon-yrIMi47q",text:"text-yrIMi47q",text_large:"text_large-yrIMi47q",action:"action-yrIMi47q"}},805184:(e,t,r)=>{"use strict";r.d(t,{Button:()=>c});var s=r(50959),o=r(171529);function n(e="default"){switch(e){case"default":return"primary";case"stroke":return"secondary"}}
function i(e="primary"){switch(e){case"primary":return"brand";case"success":return"green";case"default":return"gray";case"danger":return"red"}}function a(e="m"){switch(e){case"s":return"xsmall";case"m":return"small";case"l":return"large"}}function l(e){const{intent:t,size:r,appearance:s,useFullWidth:o,icon:l,...c}=e;return{...c,color:i(t),size:a(r),variant:n(s),stretch:o,startIcon:l}}function c(e){return s.createElement(o.SquareButton,{...l(e)})}},463039:(e,t,r)=>{"use strict";r.d(t,{Label:()=>l});var s=r(50959),o=r(497754),n=r.n(o),i=r(102691),a=r(422191);function l(e){const{htmlFor:t,children:r,className:o,id:l,...c}=e;return s.createElement(i.BeforeSlot,{...c,className:n()(a.label,o)},s.createElement("label",{id:l,htmlFor:t},r))}},252130:(e,t,r)=>{"use strict";r.d(t,{useIsMounted:()=>o});var s=r(50959);const o=()=>{const e=(0,s.useRef)(!1);return(0,s.useEffect)((()=>(e.current=!0,()=>{e.current=!1})),[]),e}},657947:(e,t,r)=>{"use strict";r.d(t,{DurationControl:()=>w});var s=r(509806),o=r(50959),n=r(481330),i=r(466052),a=r(529631),l=r(192063),c=r(518799),u=r(930052),d=r(996038),p=r(350324),h=r(493173),m=r(44807),v=r(508550),g=r(614793),f=r(972404);const b=new Date((new Date).setHours(0,0,0,0));const _=(0,h.mergeThemes)(p.DEFAULT_INPUT_DATE_THEME,{container:f.dateInputContainer,date:f.dateInput,icon:f.dateInputIcon});function C(e){return o.createElement(p.DateInput,{...e,theme:_})}function y(e){const{initDateTime:t,onDateSelect:r,onTimeSelect:s,onControlFocused:n,hasDatePicker:i,hasTimePicker:a}=e;if(!i&&!a)return o.createElement(o.Fragment,null);const l=()=>{null==n||n()};return o.createElement("div",{className:f.dateTimeWrapper},i&&o.createElement(g.DatePicker,{containerClassName:f.containerDatePicker,minDate:b,initial:t,onPick:e=>{null!==e&&r(e)},onFocus:l,InputComponent:C}),a&&o.createElement(m.TimeInput,{value:(c=t,(0,v.twoDigitsFormat)(c.getHours())+":"+(0,v.twoDigitsFormat)(c.getMinutes())),onChange:e=>{s(function(e){const[t,r]=e.split(":"),s=new Date;return s.setHours(Number(t),Number(r)),s}(e))},onFocus:l}));var c}var E=r(693676);const S=new i.Delegate;function k(e,t){return Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),t.getUTCHours(),t.getUTCMinutes())}function w(e){const{currentDuration:t,durationMetaInfoList:i,onDurationChanged:l,onControlFocused:p}=e,h=(0,n.findDurationMetaInfo)(i,t.type);if(void 0===h)return null;const m=(0,o.useMemo)((()=>void 0!==t.datetime?new Date(t.datetime):["GTT","GTD"].includes(t.type)?(0,n.makeDatePlus24UTCHours)():new Date),[t.datetime,t.type]),v=(0,o.useMemo)((()=>i.map((e=>({content:e.name,value:e.value})))),[i]),g=v.length<2;function f(e){return o.createElement(a.Select,{onClick:p,className:E.select,menuClassName:e?E.selectMenu:void 0,value:null==h?void 0:h.value,items:v,"data-name":"duration-type-selector",disabled:g,hideArrowButton:g,onChange:b,stretch:!0,matchButtonAndListboxWidths:!0})}return o.createElement(u.MatchMedia,{rule:d.DialogBreakpoints.TabletSmall},(e=>o.createElement("div",{className:E.wrapper},o.createElement("span",{className:E.title
},s.t(null,void 0,r(768877))),e?o.createElement(c.ToolWidgetMenu,{className:E.menuButton,content:f(e),arrow:!1,children:o.createElement(P,{menuItems:v,onTypeSelect:b}),isDrawer:!0,isDisabled:g,closeOnClickOutside:!0}):f(e),o.createElement(y,{initDateTime:m,hasDatePicker:h.hasDatePicker,hasTimePicker:h.hasTimePicker,onControlFocused:p,onDateSelect:C,onTimeSelect:_}))));function b(r){const s={type:r},o=(0,n.findDurationMetaInfo)(i,r);void 0!==o&&(o.hasDatePicker||o.hasTimePicker)&&(s.datetime=t.datetime||(0,n.getTimestamp)((0,n.makeDatePlus24UTCHours)())),l(s),function(){void 0!==e.onClose&&e.onClose();S.fire()}()}function _(t){const r=k(m,t);e.onDurationChanged({type:e.currentDuration.type,datetime:r})}function C(t){const r=k(t,m);e.onDurationChanged({type:e.currentDuration.type,datetime:r})}}function P(e){const{menuItems:t,onTypeSelect:r}=e;return o.createElement(o.Fragment,null,Object.values(t).map((e=>{var t;return o.createElement(l.PopupMenuItem,{key:e.value,label:null!==(t=e.content)&&void 0!==t?t:e.value,onClick:r,onClickArg:e.value})})))}},129018:(e,t,r)=>{"use strict";r.d(t,{QuantityCalculator:()=>O});var s=r(50959),o=r(960521),n=r(624216),i=r(510618),a=r(493173),l=r(529719),c=r(497754),u=r.n(c),d=r(509806),p=r(180185),h=r(72571),m=r(463039),v=r(380327),g=r(99708),f=r(587125),b=r(600297),_=r(218666),C=r(96634),y=r(115589),E=r(672197),S=r(115356);const k={isGrouped:!1,cellState:{isTop:!1,isRight:!1,isBottom:!1,isLeft:!1}};function w(e){const{min:t,max:o,step:n,uiStep:i,reference:a,withInput:l,valueInput:c,onChangeValueInput:w,onClick:P,onClose:M,onInputClick:O}=e,[N,B]=(0,s.useState)(!1),[I,D]=(0,s.useState)(void 0),[T,x]=(0,s.useState)(!1),F=(0,s.useRef)(null),H=(0,s.useCallback)((e=>{const r={min:t,max:o,step:n},s=(0,g.checkQtyError)(r,e,!0),i=T||s.res,a=T?undefined:s.msg;B(i),D(a)}),[T,t,o,n]);function L(e,t){var r;null===(r=F.current)||void 0===r||r.blur(),P(e,t)}return(0,s.useEffect)((()=>{H(c)}),[H,c]),s.createElement("div",{className:u()(S.calculator,l&&S.calculatorWithInput),tabIndex:-1,ref:a,onKeyDown:e=>{c&&!N&&13===(0,p.hashFromEvent)(e)&&M()}},l&&s.createElement(s.Fragment,null,s.createElement(m.Label,{htmlFor:"calculator-input"},d.t(null,void 0,r(766596))),s.createElement(f.NumberInput,{id:"calculator-input",inputReference:e=>F.current=e,className:S.input,value:c,max:o,min:t,step:n,uiStep:i,mode:"float",error:N,errorMessage:I,errorHandler:function(e){x(e)},onValueChange:w,onClick:O,alwaysUpdateValueFromProps:!0})),s.createElement(v.ControlGroupContext.Provider,{value:k},s.createElement("div",{className:S.buttonsWrapper},s.createElement(b.Button,{value:-n,buttonType:b.ButtonType.IncDec,icon:s.createElement(h.Icon,{className:S.buttonIcon,icon:C}),onClick:L,className:S.buttonWithOperation}),s.createElement(b.Button,{value:n,buttonType:b.ButtonType.IncDec,icon:s.createElement(h.Icon,{className:S.buttonIcon,icon:_}),onClick:L,className:S.buttonWithOperation}),s.createElement(b.Button,{value:1,buttonType:b.ButtonType.PlusValue,onClick:L}),s.createElement(b.Button,{value:5,
buttonType:b.ButtonType.PlusValue,onClick:L}),s.createElement(b.Button,{value:25,buttonType:b.ButtonType.PlusValue,onClick:L}),s.createElement(b.Button,{value:100,buttonType:b.ButtonType.PlusValue,onClick:L}),s.createElement(b.Button,{value:500,buttonType:b.ButtonType.PlusValue,onClick:L}),s.createElement(b.Button,{value:1e3,buttonType:b.ButtonType.PlusValue,onClick:L}),s.createElement(b.Button,{value:0,buttonType:b.ButtonType.Clear,icon:s.createElement(h.Icon,{className:S.buttonIcon,icon:y}),onClick:L}),s.createElement(b.Button,{value:t||n,buttonType:b.ButtonType.Default,icon:s.createElement(h.Icon,{className:S.buttonIcon,icon:E}),onClick:L}))))}var P=r(368173);const M=(0,a.mergeThemes)(i.DEFAULT_MENU_THEME,{menuBox:P.menuBox});class O extends s.PureComponent{constructor(e){super(e),this._setCalcRef=e=>{this.props.calcReference&&this.props.calcReference(e)},this._calculatorStepHandler=(e,t)=>{const{min:r,max:s,uiStep:n,trackEventTarget:i,trackEvent:a}=this.props;if(void 0!==a&&void 0!==i&&a(i,"Calculator Button",(0,l.prepareCalculatorEventText)(e,t)),t===b.ButtonType.Clear||t===b.ButtonType.Default)return this._updateValueByCalc(e);const c=this.props.valueGetter();if(null===c)return;let u=Number((0,o.Big)(c).plus(e));if((u<r||s<u)&&t!==b.ButtonType.IncDec)return this._updateValueByCalc(c);if(t===b.ButtonType.IncDec){if(u=this._calcByStep(c,e,r,n),s<u)return this._updateValueByCalc(s);if(u<r)return this._updateValueByCalc(r)}return this._updateValueByCalc(u)},this._updateValueByCalc=e=>{var t,r;this._handlerValueInput(e),this.props.onValueChange(e,!0),void 0!==this.props.errorHandler&&this.props.errorHandler(!1),this.props.calculatorUsedStat&&this.props.calculatorUsedStat(),null===(r=(t=this.props).onFocus)||void 0===r||r.call(t)},this._onInputClick=()=>{const{trackEventTarget:e,trackEvent:t}=this.props;void 0!==t&&void 0!==e&&t(e,"Calculator Input","Quantity input field")},this.state={valueInput:e.valueGetter()},this._handlerValueInput=this._handlerValueInput.bind(this)}render(){const{min:e,max:t,step:r,uiStep:o,withInput:i,targetEl:a,position:l,onClose:c,onClickOutside:u,onKeyboardClose:d}=this.props;return s.createElement(n.PopupMenu,{isOpened:!0,onClose:c,onClickOutside:u,onKeyboardClose:d,position:l,doNotCloseOn:a,theme:M},s.createElement(w,{min:e,max:t,step:r,uiStep:o,withInput:i,reference:this._setCalcRef,valueInput:this.state.valueInput,onChangeValueInput:this._updateValueByCalc,onClick:this._calculatorStepHandler,onClose:c,onInputClick:this._onInputClick}))}_calcByStep(e,t,r,s){const n=Math.sign(t),i=Math.abs(null!=s?s:t),a=new o.Big(e),l=a.minus(r).mod(t);let c=a.plus(n*i);return l.eq(0)||(c=c.plus((n>0?0:1)*i).minus(l)),c.toNumber()}_handlerValueInput(e){this.setState({valueInput:e})}}},27950:(e,t,r)=>{"use strict";r.d(t,{EditButton:()=>l});var s=r(50959),o=r(497754),n=r(72571),i=r(93929),a=r(860015);function l(e){const{value:t,onClick:r,className:l,startSlot:c,disabled:u=!1}=e;return s.createElement("div",{className:o(a.wrap,u&&a.disabled,l),onClick:r,"data-name":"edit-button"},s.createElement("div",{
className:o(a.text,"apply-overflow-tooltip")},void 0!==c&&c,s.createElement("span",null,t)),s.createElement(n.Icon,{icon:i,className:a.icon}))}},73288:(e,t,r)=>{"use strict";r.d(t,{OverlayScrollContainer:()=>v});var s=r(50959),o=r(497754),n=r.n(o),i=r(710263),a=r(650151),l=r(44681);const c=r(977253),u={0:{isHorizontal:!1,isNegative:!1,sizePropName:"height",minSizePropName:"minHeight",startPointPropName:"top",currentMousePointPropName:"clientY",progressBarTransform:"translateY"},1:{isHorizontal:!0,isNegative:!1,sizePropName:"width",minSizePropName:"minWidth",startPointPropName:"left",currentMousePointPropName:"clientX",progressBarTransform:"translateX"},2:{isHorizontal:!0,isNegative:!0,sizePropName:"width",minSizePropName:"minWidth",startPointPropName:"right",currentMousePointPropName:"clientX",progressBarTransform:"translateX"}},d=40;function p(e){const{size:t,scrollSize:r,clientSize:o,scrollProgress:i,onScrollProgressChange:p,scrollMode:h,theme:m=c,onDragStart:v,onDragEnd:g,minBarSize:f=d}=e,b=(0,s.useRef)(null),_=(0,s.useRef)(null),[C,y]=(0,s.useState)(!1),E=(0,s.useRef)(0),{isHorizontal:S,isNegative:k,sizePropName:w,minSizePropName:P,startPointPropName:M,currentMousePointPropName:O,progressBarTransform:N}=u[h];(0,s.useEffect)((()=>{const e=(0,a.ensureNotNull)(b.current).ownerDocument;return C?(v&&v(),e&&(e.addEventListener("mousemove",W),e.addEventListener("mouseup",R))):g&&g(),()=>{e&&(e.removeEventListener("mousemove",W),e.removeEventListener("mouseup",R))}}),[C]);const B=t/r||0,I=o*B||0,D=Math.max(I,f),T=(t-D)/(t-I),x=r-t,F=k?-x:0,H=k?0:x,L=V((0,l.clamp)(i,F,H))||0;return s.createElement("div",{ref:b,className:n()(m.wrap,S&&m["wrap--horizontal"]),style:{[w]:t},onMouseDown:function(e){if(e.isDefaultPrevented())return;e.preventDefault();const t=z(e.nativeEvent,(0,a.ensureNotNull)(b.current)),r=Math.sign(t),s=(0,a.ensureNotNull)(_.current).getBoundingClientRect();E.current=r*s[w]/2;let o=Math.abs(t)-Math.abs(E.current);const n=V(x);o<0?(o=0,E.current=t):o>n&&(o=n,E.current=t-r*n);p(A(r*o)),y(!0)}},s.createElement("div",{ref:_,className:n()(m.bar,S&&m["bar--horizontal"]),style:{[P]:f,[w]:D,transform:`${N}(${L}px)`},onMouseDown:function(e){e.preventDefault(),E.current=z(e.nativeEvent,(0,a.ensureNotNull)(_.current)),y(!0)}},s.createElement("div",{className:n()(m.barInner,S&&m["barInner--horizontal"])})));function W(e){const t=z(e,(0,a.ensureNotNull)(b.current))-E.current;p(A(t))}function R(){y(!1)}function z(e,t){const r=t.getBoundingClientRect()[M];return e[O]-r}function V(e){return e*B*T}function A(e){return e/B/T}}var h=r(921258),m=r(982434);function v(e){const{reference:t,className:r,containerHeight:n=0,containerWidth:a=0,contentHeight:l=0,contentWidth:c=0,scrollPosTop:u=0,scrollPosLeft:d=0,onVerticalChange:v,onHorizontalChange:g,visible:f}=e,[b,_]=(0,h.useHover)(),[C,y]=(0,s.useState)(!1),E=n<l,S=a<c,k=E&&S?8:0;return s.createElement("div",{..._,ref:t,className:o(r,m.scrollWrap),style:{visibility:f||b||C?"visible":"hidden"}},E&&s.createElement(p,{size:n-k,scrollSize:l-k,clientSize:n-k,scrollProgress:u,
onScrollProgressChange:function(e){v&&v(e)},onDragStart:w,onDragEnd:P,scrollMode:0}),S&&s.createElement(p,{size:a-k,scrollSize:c-k,clientSize:a-k,scrollProgress:d,onScrollProgressChange:function(e){g&&g(e)},onDragStart:w,onDragEnd:P,scrollMode:(0,i.isRtl)()?2:1}));function w(){y(!0)}function P(){y(!1)}}},109955:(e,t,r)=>{"use strict";r.d(t,{OverlayScrollWrapper:()=>c});var s=r(50959),o=r(497754),n=r.n(o),i=r(73288),a=r(139043),l=r(252693);function c(e){const{children:t,className:r,reference:o,hasCustomTouchScrollAnimation:c,scrollContainerRef:u,...d}=e,[p,h,m,v]=(0,a.useOverlayScroll)(u,c);return(0,s.useImperativeHandle)(o,(()=>({updateScrollState:v}))),s.createElement("div",{...d,...h,className:n()(l.container,r)},s.createElement(i.OverlayScrollContainer,{...p,className:l.overlayScrollWrap}),s.createElement("div",{className:l.wrapper,ref:function(e){m.current=e},onScroll:v},t))}},662941:(e,t,r)=>{"use strict";r.d(t,{EmptyStateBlock:()=>l});var s=r(50959),o=r(497754),n=r.n(o),i=r(782430);function a(e){const{title:t,tagName:r,titleSize:o}=e,a=r||"strong";return s.createElement(a,{className:n()(i.title,i[`title_${o}`])},t)}function l(e){return s.createElement("div",{className:o(i.container,e.className)},s.createElement("div",{className:o(i.icon,e.iconClass)}),e.title&&s.createElement(a,{title:e.title,titleSize:e.titleSize,tagName:e.titleTagName}),e.text&&s.createElement("div",{className:o(i.text,"large"===e.textSize&&i.text_large)},e.text),e.action&&s.createElement("div",{className:i.action},e.action))}},703011:(e,t,r)=>{"use strict";r.d(t,{useForceUpdate:()=>o});var s=r(50959);const o=()=>{const[,e]=(0,s.useReducer)((e=>e+1),0);return e}},139043:(e,t,r)=>{"use strict";r.d(t,{useOverlayScroll:()=>l});var s=r(50959),o=r(650151),n=r(921258),i=r(601227);const a={onMouseOver:()=>{},onMouseOut:()=>{}};function l(e,t=i.CheckMobile.any()){const r=(0,s.useRef)(null),l=e||(0,s.useRef)(null),[c,u]=(0,n.useHover)(),[d,p]=(0,s.useState)({reference:r,containerHeight:0,containerWidth:0,contentHeight:0,contentWidth:0,scrollPosTop:0,scrollPosLeft:0,onVerticalChange:function(e){p((t=>({...t,scrollPosTop:e}))),(0,o.ensureNotNull)(l.current).scrollTop=e},onHorizontalChange:function(e){p((t=>({...t,scrollPosLeft:e}))),(0,o.ensureNotNull)(l.current).scrollLeft=e},visible:c}),h=(0,s.useCallback)((()=>{if(!l.current)return;const{clientHeight:e,scrollHeight:t,scrollTop:s,clientWidth:o,scrollWidth:n,scrollLeft:i}=l.current,a=r.current?r.current.offsetTop:0;p((r=>({...r,containerHeight:e-a,contentHeight:t-a,scrollPosTop:s,containerWidth:o,contentWidth:n,scrollPosLeft:i})))}),[]);function m(){p((e=>({...e,scrollPosTop:(0,o.ensureNotNull)(l.current).scrollTop,scrollPosLeft:(0,o.ensureNotNull)(l.current).scrollLeft})))}return(0,s.useEffect)((()=>{c&&h(),p((e=>({...e,visible:c})))}),[c]),(0,s.useEffect)((()=>{const e=l.current;return e&&e.addEventListener("scroll",m),()=>{e&&e.removeEventListener("scroll",m)}}),[l]),[d,t?a:u,l,h]}},327871:(e,t,r)=>{"use strict";r.d(t,{KeyCode:()=>s,makeKeyboardListener:()=>i});var s,o=r(50959);!function(e){
e[e.Enter=13]="Enter",e[e.Space=32]="Space",e[e.Backspace=8]="Backspace",e[e.DownArrow=40]="DownArrow",e[e.UpArrow=38]="UpArrow",e[e.RightArrow=39]="RightArrow",e[e.LeftArrow=37]="LeftArrow",e[e.Escape=27]="Escape",e[e.Tab=9]="Tab"}(s||(s={}));class n{constructor(){this._handlers=new Map}registerHandlers(e){Object.keys(e).forEach((t=>{const r=parseInt(t);let s=e[r];if(Array.isArray(s)||(s=[s]),this._handlers.has(r)){const e=this._handlers.get(r);e&&s.forEach((t=>e.add(t)))}else this._handlers.set(r,new Set(s))}))}unregisterHandlers(e){Object.keys(e).forEach((t=>{const r=parseInt(t);let s=e[r];if(Array.isArray(s)||(s=[s]),this._handlers.has(r)){const e=this._handlers.get(r);e&&s.forEach((t=>e.delete(t)))}}))}deleteAllHandlers(){this._handlers=new Map}registerHandler(e,t){if(this._handlers.has(e)){const r=this._handlers.get(e);r&&r.add(t)}else this._handlers.set(e,new Set([t]))}unregisterHandler(e,t){if(this._handlers.has(e)){const r=this._handlers.get(e);r&&r.delete(t)}}listen(e){if(this._handlers.has(e.keyCode)){const t=this._handlers.get(e.keyCode);t&&t.forEach((t=>t(e)))}}}function i(e){var t,r,s;return(s=class extends o.PureComponent{constructor(e){super(e),this._keyboardListener=new n,this._listener=this._keyboardListener.listen.bind(this._keyboardListener)}componentDidMount(){this._registerHandlers(this.props.keyboardEventHandlers)}componentDidUpdate(e){e.keyboardEventHandlers!==this.props.keyboardEventHandlers&&this._registerHandlers(this.props.keyboardEventHandlers)}render(){const{keyboardEventHandlers:t,...r}=this.props;return o.createElement(e,{...r,onKeyDown:this._listener})}_registerHandlers(e){e&&(this._keyboardListener.deleteAllHandlers(),this._keyboardListener.registerHandlers(e))}}).displayName=`KeyboardListener(${null!==(r=null!==(t=e.displayName)&&void 0!==t?t:e.name)&&void 0!==r?r:"Component"})`,s}},493173:(e,t,r)=>{"use strict";function s(e,t,r={}){return Object.assign({},e,function(e,t,r={}){const s=Object.assign({},t);for(const o of Object.keys(t)){const n=r[o]||o;n in e&&(s[o]=[e[n],t[o]].join(" "))}return s}(e,t,r))}r.d(t,{mergeThemes:()=>s})},95294:(e,t,r)=>{"use strict";r.r(t),r.d(t,{closeOrderDialog:()=>Kt,mountOrderPanel:()=>Ut,showOrderDialog:()=>At,unmountOrderPanel:()=>Gt});var s,o=r(50959),n=r(500962),i=r(497754),a=r.n(i),l=r(870122),c=r(601227),u=r(171529),d=r(650151),p=r(662941),h=r(180185),m=r(509806),v=r(363111),g=r(156963),f=r(6835),b=r(322625),_=r(661851),C=r(901317);!function(e){e.XSmall="xsmall",e.Small="small",e.Medium="medium",e.Large="large",e.XLarge="xlarge"}(s||(s={}));var y=r(284316),E=r.n(y);function S(e){const{size:t=s.Medium,className:r,isPaidBadge:o}=e;return a()(!o&&E().badge,t&&E()[`size-${t}`],r)}function k(e){const{children:t,contentClassName:r}=e;return o.createElement("span",{className:a()(E().content,r)},t)}function w(e){const{size:t=s.Medium,children:r,className:n,contentClassName:i,...a}=e;return o.createElement("span",{...a,className:S({size:t,className:n})},o.createElement(k,{contentClassName:i},r))}var P=r(656846),M=r(698368);function O(e){
return e===P.RestrictionType.HardToBorrow?M.hardToBorrow:e===P.RestrictionType.Halted?M.halted:null}function N(e){return o.createElement("div",{className:M.restrictions},e.restrictionTypes.map(((e,t)=>o.createElement(w,{key:t,size:s.XSmall,className:a()(M.restriction,O(e))},e))))}var B=r(120693);const I=m.t(null,void 0,r(392553)),D=m.t(null,void 0,r(618156)),T=m.t(null,void 0,r(93875));class x extends o.PureComponent{constructor(e){super(e),this._isLongValue=!1,this._maxDigitsNumber=7,this._createClickHandler=e=>()=>this.props.onSideChanged(e),this._isLongValue=Boolean(this.props.quotes.spread&&this.props.quotes.spread.toString().length>this._maxDigitsNumber||this.props.quotes.ask&&this.props.quotes.ask.toString().length>this._maxDigitsNumber)}render(){const e=i(B.sideControl,[v.OrderPanelStatus.Editing,v.OrderPanelStatus.Preview].includes(this.props.status)&&B.disable),t=i(B.section,B.sell,this.props.status!==v.OrderPanelStatus.Wait&&-1===this.props.side&&B.active),r=i(B.section,B.buy,this.props.status!==v.OrderPanelStatus.Wait&&1===this.props.side&&B.active),s=this.props.quotes.bid?o.createElement("div",null,this.props.quotes.bid):o.createElement("div",{className:B.valueNoData},T),n=this.props.quotes.ask?o.createElement("div",null,this.props.quotes.ask):o.createElement("div",{className:B.valueNoData},T);return o.createElement(o.Fragment,null,0!==this.props.restrictionTypes.length&&o.createElement("div",{className:i(B.restrictions,false)},o.createElement(N,{restrictionTypes:this.props.restrictionTypes})),o.createElement("div",{className:e},o.createElement("div",{className:t,onClick:this._createClickHandler(-1),tabIndex:-1,"data-name":"side-control-sell"},o.createElement("div",{className:B.title},o.createElement("span",{className:this.props.currencyForCrypto&&B.typeSide},I),this.props.currencyForCrypto&&o.createElement("span",null,this.props.currencyForCrypto)),o.createElement("div",{className:B.value},s)),o.createElement("div",{className:r,onClick:this._createClickHandler(1),tabIndex:-1,"data-name":"side-control-buy"},o.createElement("div",{className:B.title},o.createElement("span",{className:this.props.currencyForCrypto&&B.typeSide},D),this.props.currencyForCrypto&&o.createElement("span",{className:B.typeSide},this.props.currencyForCrypto)),o.createElement("div",{className:B.value},n)),this.props.quotes.spread&&o.createElement("div",{className:i(B.spread,this._isLongValue&&B.isLongValue),"data-name":"side-control-spread"},this.props.quotes.spread)))}}function F(e){const{model:t,disabled:r}=e,s=(0,_.useObservable)(t.value$,t.getValue()),n=(0,_.useObservable)(t.formattedQuotes$,t.getFormattedQuotes()),i=(0,_.useObservable)(t.restrictionTypes$,t.getRestrictionTypes()),[a]=(0,C.useWatchedValue)(t.status);return o.createElement(x,{quotes:n,side:s,status:a,restrictionTypes:i,currencyForCrypto:t.baseCurrency,onSideChanged:e=>{r||(t.setValue(e),t.onControlFocused.fire())}})}var H=r(805184),L=r(703011),W=r(72571),R=r(564245),z=r(109955),V=r(15425),A=r(364366);const K={cancel:m.t(null,void 0,r(620036)),
sendOrder:m.t(null,void 0,r(493472))};function Z(e){const t=(0,o.useRef)(null),r=(0,L.useForceUpdate)();(0,o.useEffect)((()=>{const s=()=>r();return(0,d.ensureNotNull)(t.current).focus(),e.loading.subscribe(s),e.model.infoTableQuotesData().subscribe(s),()=>{e.loading.unsubscribe(s),e.model.infoTableQuotesData().unsubscribe(s)}}));const s=o.createElement(R.InfoTable,{rows:e.model.infoTableQuotesData().value().rows,header:e.model.infoTableQuotesData().value().header}),n=o.createElement(R.InfoTable,{rows:e.model.infoTableOrderData().rows,header:e.model.infoTableOrderData().header}),i=e.model.infoTableCustomData().map(((e,t)=>o.createElement(R.InfoTable,{key:`custom-${t}`,rows:e.rows,header:e.header}))),a=0!==e.model.warnings.length&&o.createElement("div",{className:V.warning},o.createElement(W.Icon,{className:V.warning__icon,icon:A}),o.createElement("div",null,e.model.warnings.map((e=>o.createElement("div",{key:e},e))))),l=0!==e.model.errors.length,c=l&&o.createElement("div",{className:V.error},e.model.errors.map((e=>o.createElement("div",{key:e},e))));return o.createElement(o.Fragment,null,o.createElement(z.OverlayScrollWrapper,{className:V.scrollWrapper},o.createElement("div",{className:V.content},s,o.createElement("div",{className:V.separator}),n,0!==i.length&&o.createElement("div",{className:V.separator}),i,c,a)),o.createElement("div",{className:V.controls},o.createElement("div",{className:V.button},o.createElement(H.Button,{useFullWidth:!0,size:"l",intent:-1===e.side?"danger":"primary",onClick:e.model.onPlaceClick,reference:t,disabled:l||e.loading.value()},K.sendOrder)),o.createElement("div",{className:V.button},o.createElement(H.Button,{useFullWidth:!0,size:"l",intent:"default",appearance:"stroke",onClick:e.model.onCancelClick},K.cancel))))}var U=r(949781),G=r(672273);const q=m.t(null,void 0,r(359758)),j=m.t(null,void 0,r(398157)),$=m.t(null,void 0,r(905023)),Q=m.t(null,void 0,r(802654)),X={Market:2,Limit:1,Stop:3,StopLimit:4};function Y(e){const{orderType:t,disabled:r,supportMarketOrders:s,supportLimitOrders:n,supportStopOrders:i,supportStopLimitOrders:a}=e,l=(0,o.useMemo)((()=>function(e){const{supportMarketOrders:t,supportLimitOrders:r,supportStopOrders:s,supportStopLimitOrders:o}=e,n=[];return t&&n.push({id:"Market",label:q}),r&&n.push({id:"Limit",label:j}),s&&n.push({id:"Stop",label:$}),o&&n.push({id:"StopLimit",label:Q}),n}({supportMarketOrders:s,supportLimitOrders:n,supportStopOrders:i,supportStopLimitOrders:a})),[s,n,i,a]),[c,u]=(0,C.useWatchedValue)(t),d=(0,o.useCallback)((e=>X[e.id]===c),[c]);return o.createElement("div",{className:G.tabsContainer,tabIndex:-1},o.createElement(U.UnderlineButtonTabs,{id:"order-type-tabs",items:l,isActive:d,onActivate:e=>u(X[e.id]),size:"xsmall",disabled:r,overflowBehaviour:"none",stretchTabs:!0}))}var J=r(788865),ee=r(380327),te=r(587125),re=r(476853),se=r(923235),oe=r(129018),ne=r(972535),ie=r(914987),ae=r(433199);class le extends o.PureComponent{constructor(e){super(e),this._control=null,this._input=null,this._calc=null,this._getCurrentValue=()=>this.props.value||0,
this._getDropdownPosition=()=>(0,re.getPopupPositioner)(this._control,{horizontalAttachEdge:re.HorizontalAttachEdge.Right,horizontalDropDirection:re.HorizontalDropDirection.FromRightToLeft}),this._handleCalculatorFocus=()=>{ne.mobiletouch||null===this._input||this._input.focus()},this._setRef=e=>{this._control=e},this._setCalcRef=e=>{this._calc=e},this._setInputRef=e=>{this._input=e},this._onKeyDown=e=>{!this.state.isOpened||13!==e.keyCode&&27!==e.keyCode||(e.stopPropagation(),this.setState({isOpened:!1})),Object.values(v.CalculatorDecKeyCodes).includes(e.keyCode)||Object.values(v.CalculatorIncKeyCodes).includes(e.keyCode)||this.setState({isOpened:!1}),this.props.onKeyDown&&this.props.onKeyDown(e)},this._onClickOutside=e=>{this._calc&&!this._calc.contains(e.target)&&this.setState({isOpened:!1})},this._updateValue=e=>{this.props.onValueChange(e)},this._toggle=()=>{this.setState((e=>({isOpened:!e.isOpened})))},this._setInputFocus=e=>{null!==e&&(e.focus(),e.setSelectionRange(e.value.length,e.value.length))},this.state={isOpened:!1}}componentDidMount(){5===this.props.focus&&this._setInputFocus(this._input)}render(){const{min:e,max:t,step:r,uiStep:s,error:n,errorMessage:a,className:l,errorHandler:c,highlight:u,highlightRemoveRoundBorder:d,intent:p,fontSizeStyle:h,...m}=this.props,g=o.createElement(W.Icon,{icon:ie,className:i(ae.calculatorIcon,this.state.isOpened&&ae.isOpened),onClick:this._toggle});return o.createElement(se.OutsideEvent,{click:!0,mouseDown:!0,touchStart:!0,handler:this._onClickOutside},(i=>o.createElement("span",{ref:i},o.createElement(te.NumberInput,{value:this.props.value||0,alwaysUpdateValueFromProps:!0,shouldApplyValueOnBlur:!1,formatter:this.props.formatter,className:l,containerReference:this._setRef,inputReference:this._setInputRef,button:g,onValueChange:this._updateValue,onFocus:this.props.onFocus,onBlur:this.props.onBlur,onKeyDown:this._onKeyDown,error:n,errorMessage:a,errorHandler:c,min:e,max:t,step:r,uiStep:s,controlDecKeyCodes:this.state.isOpened?[v.CalculatorDecKeyCodes.Minus,v.CalculatorDecKeyCodes.NumMinus,v.CalculatorDecKeyCodes.FirefoxMinus]:void 0,controlIncKeyCodes:this.state.isOpened?[v.CalculatorIncKeyCodes.Plus,v.CalculatorIncKeyCodes.NumPlus,v.CalculatorIncKeyCodes.FirefoxPlus]:void 0,highlight:u,highlightRemoveRoundBorder:d,intent:p,fontSizeStyle:h}),this.state.isOpened&&o.createElement(oe.QuantityCalculator,{...m,min:e,max:t,step:r,uiStep:s,valueGetter:this._getCurrentValue,position:this._getDropdownPosition(),targetEl:this._control,calcReference:this._setCalcRef,onClose:this._toggle,onFocus:this._handleCalculatorFocus,errorHandler:c,trackEventTarget:"Order Ticket"}))))}}function ce(e){const{control:t,focus:r,min:s,max:n,step:a,uiStep:l,type:c,error:u,errorMessage:d,errorHandler:p,label:h,formatter:m,className:g,status:f,trackEvent:b,highlight:C,highlightRemoveRoundBorder:y,intent:E,fontSizeStyle:S}=e,k=(0,_.useObservable)(t.value$,t.getValue()),w=()=>{e.onFocus&&e.onFocus(c)},P={value:k||0,step:a,uiStep:l,className:i(ae.input,f===v.OrderPanelStatus.Wait&&ae.wait),error:u,
errorMessage:d,errorHandler:p,onFocus:w,formatter:m,onValueChange:e=>{w(),t.setValue(e),t.onModifiedCallback()},calculatorUsedStat:()=>t.calculatorUsedStat(),highlight:C,highlightRemoveRoundBorder:y,intent:E,fontSizeStyle:S},M=n||9e15,O=0===c?o.createElement(le,{...P,focus:r,min:s||a,max:M,trackEvent:b}):o.createElement(te.NumberInput,{...P,step:.01,min:s,max:M});return o.createElement("div",{className:i(g,ae.control)},o.createElement("div",{className:ae.label}," ",h," "),O)}var ue=r(895318);const de=m.t(null,void 0,r(563833)),pe=m.t(null,void 0,r(125933)),he=m.t(null,void 0,r(357653));class me extends o.PureComponent{constructor(e){super(e),this._subscriptions=[],this._onFocus=e=>{e!==this.props.model.getFocusedControl()&&this.props.model.setFocusedControl(e),this.props.model.onControlFocused.fire()},this._errorHandler=e=>{this.props.model.setControlError(e)},this._callback=()=>this.forceUpdate()}componentDidMount(){this._subscribeToModel(this.props.model)}componentWillUnmount(){this._unsubscribeFromModel()}render(){var e;const t=this.context.value,{model:r,symbolHasLotSize:s,status:n,trackEvent:a,focus:l}=this.props,c=r.getError(),u={errorHandler:this._errorHandler,error:c,status:n,onFocus:this._onFocus,trackEvent:a,fontSizeStyle:"medium"},d=Boolean(c&&c.res),p=c&&c.msg,h=r.showRiskControls&&r.isRiskAvailable()&&(t.showPercentRiskInQty||t.showCurrencyRiskInQty);return o.createElement(o.Fragment,null,o.createElement(ee.ControlGroupContext.Provider,{value:this._getGroupContextValue(!0,!h)},o.createElement(ce,{...u,...this._generateHighlightProps(0),control:r.quantity,min:r.qty.min,max:r.qty.max,step:r.qty.step,uiStep:r.qty.uiStep,type:0,formatter:r.formatter,label:null!==(e=r.units)&&void 0!==e?e:s?he:pe,className:i(!h&&ae.single,ae.units),focus:l,error:d&&this._isSelectedControl(0),errorMessage:p})),h&&o.createElement("div",{className:ae.risk},t.showCurrencyRiskInQty&&o.createElement(ee.ControlGroupContext.Provider,{value:this._getGroupContextValue(!1,!t.showPercentRiskInQty)},o.createElement(ce,{...u,...this._generateHighlightProps(1),control:r.riskInCurrency,step:r.riskStep,type:1,formatter:r.riskInCurrencyFormatter,label:r.currency+" "+de,error:d&&this._isSelectedControl(1),errorMessage:p})),t.showPercentRiskInQty&&o.createElement(ee.ControlGroupContext.Provider,{value:this._getGroupContextValue(!1,!0)},o.createElement(ce,{...u,...this._generateHighlightProps(2),control:r.riskInPercent,step:r.riskStep,type:2,formatter:r.riskInPercentFormatter,label:"% "+de,error:d&&this._isSelectedControl(2),errorMessage:p}))))}_generateHighlightProps(e){const t=this.props.model.getError(),r=this.props.model.isRiskAvailable()?this._isSelectedControl(e):void 0;return{highlight:(this.context.value.showCurrencyRiskInQty||this.context.value.showPercentRiskInQty)&&(0===e?r:this._isSelectedControl(e)),highlightRemoveRoundBorder:0,intent:Boolean(t&&t.res)&&this._isSelectedControl(e)?"danger":void 0}}_isSelectedControl(e){return this.props.status!==v.OrderPanelStatus.Wait&&this.props.model.getFocusedControl()===e}_subscribeToModel(e){
this._subscriptions=[e.focusedControl$.subscribe(this._callback),e.isRiskAvailable$.subscribe(this._callback),e.error$.subscribe(this._callback)]}_unsubscribeFromModel(){this._subscriptions.forEach((e=>e.unsubscribe()))}_getGroupContextValue(e,t){return{isGrouped:!0,disablePositionAdjustment:!0,cellState:{isTop:!0,isRight:t,isBottom:!0,isLeft:e}}}}me.contextType=ue.SettingsContext;var ve=r(493455),ge=r(960521),fe=r(624216),be=r(192063),_e=r(364228),Ce=r(460337);const ye=[1,5,10,25,50,75,100];function Ee(e){const{control:t,controlType:r,error:s,side:n,focusedControl:a,setFocusedControl:l}=e,c=(0,o.useRef)(null),u=(0,o.useRef)(null),p=(0,_.useObservable)(t.value$,t.getValue()),m=(0,_.useObservable)(e.balanceValue$,null),[g,f]=(0,o.useState)(!1),[b,C]=(0,o.useState)(0),y=Boolean(s&&s.res),E=s&&s.msg;return(0,o.useEffect)((()=>{var t;5===e.initialFocus&&null!==(t=u.current)&&(t.focus(),t.setSelectionRange(t.value.length,t.value.length))}),[]),o.createElement(o.Fragment,null,o.createElement(te.NumberInput,{...function(e){const t={highlightRemoveRoundBorder:0};w(e)&&(t.highlight=!0);Boolean(s&&s.res)&&w(e)&&(t.intent="danger");return t}(r),value:p,onBlur:e.forceRoundByStep?function(){if(null!==p&&void 0!==e.step){const t=new ge.Big(p),r=t.mod(e.step);if(!r.eq(0)){S(t.minus(r).toNumber())}}}:void 0,onValueChange:S,min:e.min,step:e.step,formatter:e.formatter,errorMessage:E,errorHandler:e.setControlError,error:y&&w(r),inputReference:function(e){u.current=e},innerLabel:g?void 0:o.createElement("span",{className:Ce.label},e.label),onFocus:()=>(l(r),void e.onControlFocused.fire()),className:i(Ce.input,e.status===v.OrderPanelStatus.Wait&&Ce.wait),button:k()?o.createElement(_e.CaretButton,{isDropped:g,onClick:function(){f(!g)}}):o.createElement(o.Fragment,null),containerReference:function(e){c.current=e},alwaysUpdateValueFromProps:e.forceRoundByStep,fontSizeStyle:e.fontSizeStyle}),k()&&null!==m&&o.createElement(fe.PopupMenu,{position:function(){const e=(0,d.ensureNotNull)(c.current).getBoundingClientRect();return C(e.width),{x:e.left,y:e.top+e.height+1}},onClose:P,isOpened:g,doNotCloseOn:c.current,onKeyDown:function(e){if(27===(0,h.hashFromEvent)(e))g&&(e.preventDefault(),P())},minWidth:b},ye.map((r=>{const s=function(e){return(0,ge.Big)((0,d.ensureNotNull)(m)).mul(.01).mul(e).toNumber()}(r),n=o.createElement(o.Fragment,null,r+"%  ",o.createElement("span",{className:Ce.value},"("+e.formatter.format(s)+" "+e.label+")"));return o.createElement(be.PopupMenuItem,{key:r.toString(),className:Ce.popupMenuItem,label:n,onClick:()=>t.setValue(s)})}))));function S(r){t.setValue(r),e.onModifiedCallback()}function k(){return null!==m&&m>0&&(-1===n?3===r:4===r)}function w(t){return e.status!==v.OrderPanelStatus.Wait&&a===t}function P(){f(!1),(0,d.ensureNotNull)(c.current).focus()}}function Se(e){const{model:t,className:s,status:n}=e,a=(0,_.useObservable)(t.quoteCurrencyUiParams$),l=(0,_.useObservable)(t.error$,t.getError()),c=(0,_.useObservable)(t.focusedControl$,t.getFocusedControl()),u={side:(0,_.useObservable)(t.side$,t.getSide()),status:n,
formatter:t.formatter,error:l,focusedControl:c,setFocusedControl:t.setFocusedControl,onControlFocused:t.onControlFocused,setControlError:t.setControlError,fontSizeStyle:"medium"};return o.createElement(o.Fragment,null,o.createElement("div",{className:Ce.title},m.t(null,void 0,r(125933))),o.createElement(ve.ControlGroup,{cols:1,rows:2,className:i(s,Ce.wrapper)},o.createElement(Ee,{...u,control:t.quantity,onModifiedCallback:t.quantity.onModifiedCallback,label:t.info.baseCurrency,controlType:3,balanceValue$:t.baseCurrencyCryptoBalanceValue$,initialFocus:e.focus,forceRoundByStep:!0,step:t.info.qty.step,min:t.info.qty.min}),o.createElement(Ee,{...u,control:t.quoteCurrencyQuantity,onModifiedCallback:t.quoteCurrencyQuantity.onModifiedCallback,label:t.info.quoteCurrency,controlType:4,balanceValue$:t.quoteCurrencyCryptoBalanceValue$,step:null==a?void 0:a.step,min:null==a?void 0:a.min})))}var ke=r(481330),we=r(327871),Pe=r(101614),Me=r(48486);function Oe(e){const t=i(Me.priceLabel,Me[e.modifier.toLowerCase()]);return o.createElement("span",{className:i(t)},e.modifier)}var Ne=r(556644);function Be(e){const t=e.price===e.ask,r=e.price===e.bid,s=e.price===e.last,n=(t||r)&&e.ask===e.bid;let i,a;return e.displayPriceLabel&&(n&&1===e.side?i=o.createElement(Oe,{modifier:"Ask"}):n&&-1===e.side?i=o.createElement(Oe,{modifier:"Bid"}):t?i=o.createElement(Oe,{modifier:"Ask"}):r&&(i=o.createElement(Oe,{modifier:"Bid"})),a=o.createElement("div",{className:Ne.labelsGroup},i,s&&o.createElement(Oe,{modifier:"Last"}))),o.createElement("div",{className:Ne.absolutePriceDropdownItem},o.createElement("div",{className:Ne.price},e.price),a)}var Ie=r(794087),De=r(958198);function Te(e,t){return e.findIndex((e=>e.priceIndex===t))}function xe(e,t,r){const s=function(){0;return"phone"!==De.mediaState.device&&"phone-vertical"!==De.mediaState.device?6:4}(),o=[Fe(e,t,r)];for(let n=1;n<=s;n++)o.push(Fe(e-n,t,r)),o.unshift(Fe(e+n,t,r));return o}function Fe(e,t,r){return{priceIndex:e,displayPrice:t.format(r(e))}}var He=r(493266);const Le=(0,we.makeKeyboardListener)(Ie.InputWithError);class We extends o.PureComponent{constructor(e){super(e),this._priceControl=null,this._priceInput=null,this._dropdown=null,this._setDropdownRef=e=>{this._dropdown=e},this._setInitialFocus=()=>{!ne.mobiletouch&&this._priceInput&&(1===this.props.priceType&&1===this.props.focus||2===this.props.priceType&&2===this.props.focus)&&(this._priceInput.setSelectionRange(this.props.displayPrice.length,this.props.displayPrice.length),this._priceInput.focus())},this._onCaretButtonFocus=()=>{var e;null===(e=this._priceInput)||void 0===e||e.focus()},this._onFocus=e=>{this.props.onControlFocused&&this.props.onControlFocused(0)},this._onOutsideClick=e=>{if(document.activeElement===this._priceInput&&this.props.status!==v.OrderPanelStatus.Wait&&!this.props.error){const e=this.props.priceFormatter.parse(this.props.displayPrice);if(e.res){const t=this.props.priceFormatter.format(e.value>=0?e.value:Math.abs(e.value));this._onPriceSelected(t)}}
this.state.isOpened&&this._dropdown&&!this._dropdown.contains(e.target)&&this._closeDropdown()},this._onInputChange=e=>{const t=e.target.value;this._onModifiedCallback(),this._onPriceSelected(t)},this._onTouchStart=e=>{e.stopPropagation(),this._swipeState.y=e.touches[0].clientY},this._onTouchMove=e=>{if(e.preventDefault(),e.stopPropagation(),e.changedTouches&&e.changedTouches.length&&null!==this._swipeState.y){const t=e.changedTouches[0].clientY-this._swipeState.y;if(Math.abs(t)<10)return;this._swipeState.direction=t>0?"up":"down","up"===this._swipeState.direction?this._prependPriceOnDropdown():"down"===this._swipeState.direction&&this._appendPriceOnDropdown()}},this._onTouchEnd=e=>{e.stopPropagation(),this._resetSwipeState()},this._onDropdownWheelNoPassive=e=>{e.preventDefault(),e.stopPropagation(),e.deltaY<0?this._prependPriceOnDropdown():this._appendPriceOnDropdown()},this._onInputMouseWheel=e=>{e.preventDefault(),e.stopPropagation(),this.props.isSelected&&(this._onModifiedCallback(),e.deltaY<0?this._changeValueByStep(1):this._changeValueByStep(-1))},this._onSelect=(e,t)=>{this.setState({selected:e},(()=>{this._onModifiedCallback(),this._closeDropdown(),this._onPriceSelected(t.displayPrice)}))},this._onNavigate=()=>{const e=this.state.command&&"prev"===this.state.command.name,t=this.state.command&&"next"===this.state.command.name;e?this._changeValueByStep(1):t&&this._changeValueByStep(-1)},this._onMouseOver=()=>{this.setState({mouseOver:!0})},this._onMouseOut=()=>{this.setState({mouseOver:!1})},this._onCaretButtonClick=e=>{var t;e.stopPropagation(),this.state.isOpened?this._closeDropdown():(this._openDropdown(),ne.mobiletouch||null===(t=this._priceInput)||void 0===t||t.setSelectionRange(this.props.displayPrice.length,this.props.displayPrice.length))},this._setPriceInput=e=>{this._priceInput=e},this._setPriceControl=e=>{this._priceControl=e},this._scrollPriceByArrow=e=>{e.preventDefault(),this._onModifiedCallback();const t=e.keyCode===we.KeyCode.UpArrow?1:-1;this._changeValueByStep(t)},this._selectPrev=e=>{e.preventDefault(),this._onModifiedCallback(),this.setState({command:{name:"prev"}})},this._selectNext=e=>{e.preventDefault(),this._onModifiedCallback(),this.setState({command:{name:"next"}})},this._openDropdown=()=>{this.setState({isOpened:!0,keyboardEventHandlers:this._getKeyboardEventHandlers("open")})},this._closeDropdownWithStopPropagation=e=>{e&&(e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()),this._closeDropdown()},this._closeDropdown=()=>{const e=xe(this.props.priceIndex,this.props.priceFormatter,this.props.indexToPrice);this.setState({isOpened:!1,keyboardEventHandlers:this._getKeyboardEventHandlers("close"),priceList:e,selected:Te(e,this.props.priceIndex)})};const t=xe(e.priceIndex,e.priceFormatter,e.indexToPrice);this.state={priceList:t,selected:Te(t,e.priceIndex),isOpened:!1,mouseOver:!1,keyboardEventHandlers:this._getKeyboardEventHandlers("close")},this._resetSwipeState()}componentDidMount(){this._setInitialFocus()}render(){
const e=i(He.absolutePriceControl,this.props.className),t=o.createElement("span",{className:He.priceLabel},this.props.priceLabel),r=o.createElement(_e.CaretButton,{isDropped:this.state.isOpened,onFocus:this._onCaretButtonFocus,onClick:this._onCaretButtonClick});return o.createElement(se.OutsideEvent,{mouseDown:!0,touchStart:!0,handler:this._onOutsideClick},(s=>o.createElement("span",{className:e,ref:s},t,o.createElement(Le,{className:i(He.input,this.props.status===v.OrderPanelStatus.Wait&&He.wait),containerReference:this._setPriceControl,inputReference:this._setPriceInput,keyboardEventHandlers:this.state.keyboardEventHandlers,value:this.props.displayPrice,warning:this.props.warning,error:this.props.error,errorMessage:this.props.errorMessage,onChange:this._onInputChange,onFocus:this._onFocus,onBlur:this.props.onBlur,onMouseOver:this._onMouseOver,onMouseOut:this._onMouseOut,onWheelNoPassive:this._onInputMouseWheel,highlight:this.props.highlight,highlightRemoveRoundBorder:this.props.highlightRemoveRoundBorder,fontSizeStyle:this.props.fontSizeStyle,button:r,intent:this.props.intent}),o.createElement(Pe.DropdownList,{anchor:"bottom",root:"document",reference:this._setDropdownRef,className:He.list,command:this.state.command,isOpened:this.state.isOpened,items:this._makeListItems(),itemsClassName:He.item,width:this._getDropdownWidth(),selected:this.state.selected,selectedClassName:He.selected,target:null!==this._priceControl?this._priceControl:void 0,attachmentOffsetY:3,inheritWidthFromTarget:!1,shouldScrollIfNotVisible:!1,onSelect:this._onSelect,onNavigate:this._onNavigate,onDropdownTouchStart:this._onTouchStart,onDropdownTouchMove:this._onTouchMove,onDropdownTouchEnd:this._onTouchEnd,onDropdownWheelNoPassive:this._onDropdownWheelNoPassive}))))}componentDidUpdate(e,t){if(this.props.priceIndex===e.priceIndex)return;const r=xe(this.props.priceIndex,this.props.priceFormatter,this.props.indexToPrice);this.setState({priceList:r,selected:Te(r,this.props.priceIndex)})}_onPriceSelected(e){const t=this.props.priceFormatter.parse(e);t.res?this.props.errorHandler(!1):this.props.errorHandler(!0,t.error),this.props.onPriceSelected(e)}_resetSwipeState(){this._swipeState={direction:null,y:null}}_getKeyboardEventHandlers(e){return"close"===e?{[we.KeyCode.UpArrow]:this._scrollPriceByArrow,[we.KeyCode.DownArrow]:this._scrollPriceByArrow}:{[we.KeyCode.Enter]:this._closeDropdownWithStopPropagation,[we.KeyCode.Escape]:this._closeDropdownWithStopPropagation,[we.KeyCode.UpArrow]:this._selectPrev,[we.KeyCode.DownArrow]:this._selectNext}}_makeListItems(){return this.state.priceList.map((e=>({...e,elem:o.createElement(Be,{price:e.displayPrice,ask:this.props.priceFormatter.format(this.props.ask),bid:this.props.priceFormatter.format(this.props.bid),last:this.props.priceFormatter.format(this.props.last),side:this.props.side,displayPriceLabel:!0})})))}_prependPriceOnDropdown(){const e=[Fe(this.state.priceList[0].priceIndex+1,this.props.priceFormatter,this.props.indexToPrice)].concat(this.state.priceList.slice(0,-1));this.setState({priceList:e,
selected:Te(e,this.props.priceIndex)})}_appendPriceOnDropdown(){const e=this.state.priceList.length-1,t=Fe(this.state.priceList[e].priceIndex-1,this.props.priceFormatter,this.props.indexToPrice),r=this.state.priceList.slice(1).concat(t);this.setState({priceList:r,selected:Te(r,this.props.priceIndex)})}_changeValueByStep(e){const t=this.props.priceIndex+e,r=this.props.indexToPrice(t);var s,o;this._onPriceSelected((s=r,o=this.props.priceFormatter,null!==s?o.format(s):""))}_getDropdownWidth(){if(this.state.isOpened&&null!==this._priceControl&&(this.context.mode===v.OrderEditorDisplayMode.Popup||this.state.priceList[0].displayPrice.length<=7)){return parseFloat(window.getComputedStyle(this._priceControl,null).getPropertyValue("width"))+2}}_onModifiedCallback(){this.props.onModifiedCallback&&this.props.onModifiedCallback()}}We.contextType=v.Context,We.defaultProps={className:"",inputClassName:""};var Re=r(761248);function ze(e,t){return e.findIndex((e=>e.displayValue===t))}const Ve=/^[-+]?[0-9]*\.?[0-9]+$/;function Ae(e,t){const r=(0,Re.capitalizeFirstLetter)(e);return t>0?`${r} + ${Math.abs(t)}`:t<0?`${r} - ${Math.abs(t)}`:`${r}`}function Ke(e){return String(e)}function Ze(e,t){const r=e.offset;return s=e.base,o=function(e,t){return(Math.abs(e)>=1?e:0)+(1===t?1:-1)}(r,t),{displayValue:Ae(s,o),base:s,offset:o};var s,o}function Ue(e,t,r){const s=[],o=[],n={displayValue:Ae(t,e),base:t,offset:e};for(let e=0;e<r;e++)s.unshift(Ze(0===e?n:s[0],1)),o.push(Ze(0===e?n:o[e-1],-1));return[...s,n,...o]}function Ge(){return"phone"!==De.mediaState.device&&"phone-vertical"!==De.mediaState.device?6:4}var qe=r(968625);function je(e){return o.createElement("div",{className:qe.relativePriceDropdownItem},o.createElement("div",{className:qe.price},e.price))}var $e=r(78007);const Qe=(0,we.makeKeyboardListener)(Ie.InputWithError),Xe=m.t(null,{context:"price"},r(172639)),Ye=m.t(null,void 0,r(332061));class Je extends o.PureComponent{constructor(e){super(e),this._priceInput=null,this._priceControl=null,this._dropdown=null,this._setDropdownRef=e=>{this._dropdown=e},this._onMouseOver=e=>{this.setState({mouseOver:!0})},this._onMouseOut=()=>{this.setState({mouseOver:!1})},this._onOutsideClick=e=>{var t;this.state.isOpened&&this._dropdown&&!this._dropdown.contains(e.target)&&(this._closeDropdown(),null===(t=this._priceInput)||void 0===t||t.blur())},this._onCaretButtonFocus=()=>{var e;null===(e=this._priceInput)||void 0===e||e.focus()},this._onFocus=()=>{this.setState({isEditing:!0,displayValue:this.state.displayValue===Ae(this.props.base,this.props.offset)?Ke(this.props.offset):this.state.displayValue},(()=>{var e,t;ne.mobiletouch||null===this._priceInput||(e=this._priceInput,t=this.state.displayValue.length,e.setSelectionRange&&(e.focus(),e.setSelectionRange(0,t),e.select()))})),this.props.onControlFocused&&this.props.onControlFocused(1)},this._onBlur=()=>{this.props.error||this.setState({isEditing:!1,displayValue:Ae(this.props.base,this.props.offset)},(()=>{this._trackExitEditingModeEvent(this.props.offset)}))},this._onInputChange=e=>{
this._onModifiedCallback();const t=e.currentTarget.value;var r;r=t,Ve.test(r)?this.setState({displayValue:t},(()=>{this._onPriceOffsetSelected(Number(t))})):(this.setState({displayValue:t}),this.props.errorHandler(!0,Ye))},this._onTouchStart=e=>{e.stopPropagation(),this._swipeState.y=e.touches[0].clientY},this._onTouchMove=e=>{if(e.preventDefault(),e.stopPropagation(),e.changedTouches&&e.changedTouches.length&&null!==this._swipeState.y){const t=e.changedTouches[0].clientY-this._swipeState.y;if(Math.abs(t)<10)return;this._swipeState.direction=t>0?"up":"down","up"===this._swipeState.direction?this._prependPriceOnTouchMove():"down"===this._swipeState.direction&&this._appendPriceOnTouchMove()}},this._onTouchEnd=e=>{e.stopPropagation(),this._resetSwipeState()},this._onDropdownWheelNoPassive=e=>{e.preventDefault(),e.stopPropagation(),e.deltaY<0?this._prependPriceOnWheel():this._appendPriceOnWheel()},this._onInputMouseWheel=e=>{e.preventDefault(),e.stopPropagation(),this.props.isSelected&&(this._onModifiedCallback(),e.deltaY<0?this._changeValueByStep(1):this._changeValueByStep(-1))},this._onSelect=(e,t)=>{this.setState({displayValue:t.text,selected:e},(()=>{this._onModifiedCallback(),this._closeDropdown(),this._onPriceOffsetSelected()}))},this._onNavigate=(e,t)=>{const r=this.state.command&&"prev"===this.state.command.name,s=this.state.command&&"next"===this.state.command.name;r?this._changeValueByStep(1):s&&this._changeValueByStep(-1)},this._onCaretButtonClick=e=>{e.preventDefault(),e.stopPropagation(),this.state.isOpened?this._closeDropdown():(this._openDropdown(),!ne.mobiletouch&&this._priceInput&&this._priceInput.setSelectionRange(this.state.displayValue.length,this.state.displayValue.length))},this._switchEditingMode=e=>{var t;e.preventDefault();const r=Number(this.state.displayValue);if(Number.isInteger(r)||this.props.error)null===(t=this._priceInput)||void 0===t||t.blur();else{const e=Math.round(r),t=Ue(e,this.props.base,Ge()),s=ze(t,Ae(this.props.base,e));this.setState({displayValue:String(e),prices:t,selected:s,isEditing:!1},(()=>{var e;this._onPriceOffsetSelected(),null===(e=this._priceInput)||void 0===e||e.blur()}))}},this._setPriceInput=e=>{this._priceInput=e},this._setPriceControl=e=>{this._priceControl=e},this._scrollPriceByArrow=e=>{e.preventDefault(),this._onModifiedCallback();const t=e.keyCode===we.KeyCode.UpArrow?1:-1;this._changeValueByStep(t)},this._selectPrev=e=>{e.preventDefault(),this._onModifiedCallback(),this.setState({command:{name:"prev"}})},this._selectNext=e=>{e.preventDefault(),this._onModifiedCallback(),this.setState({command:{name:"next"}})},this._openDropdown=()=>{this.setState({isOpened:!0,keyboardEventHandlers:this._getKeyboardEventHandlers("open")})},this._closeDropdownOnKeyDown=e=>{var t;e.preventDefault(),this._closeDropdown(),null===(t=this._priceInput)||void 0===t||t.blur()},this._closeDropdown=()=>{const e=Ae(this.props.base,this.props.offset),t=Ue(this.props.offset,this.props.base,Ge()),r=ze(t,e);this.setState({isOpened:!1,
keyboardEventHandlers:this._getKeyboardEventHandlers("close"),prices:t,selected:r})},this._trackExitEditingModeEvent=e=>{this.props.trackEvent&&this.props.trackEvent("Order Ticket","Relative Price - Exit Editing Mode",String(e))};const t=Ae(e.base,e.offset),r=Ue(e.offset,e.base,Ge()),s=ze(r,t);this.state={displayValue:t,prices:r,selected:s,isOpened:!1,isEditing:!1,mouseOver:!1,keyboardEventHandlers:this._getKeyboardEventHandlers("close")},this._resetSwipeState()}render(){const e=o.createElement(_e.CaretButton,{isDropped:this.state.isOpened,onFocus:this._onCaretButtonFocus,onClick:this._onCaretButtonClick});return o.createElement(se.OutsideEvent,{mouseDown:!0,touchStart:!0,handler:this._onOutsideClick},(t=>o.createElement("span",{className:this.props.className,ref:t},o.createElement("span",{className:$e.pipsLabel},Xe),o.createElement(Qe,{className:i($e.input,this.props.status===v.OrderPanelStatus.Wait&&$e.wait),keyboardEventHandlers:this.state.keyboardEventHandlers,value:this.state.displayValue,error:this.props.error,errorMessage:this.props.errorMessage,button:e,containerReference:this._setPriceControl,inputReference:this._setPriceInput,onFocus:this._onFocus,onBlur:this._onBlur,onChange:this._onInputChange,onWheelNoPassive:this._onInputMouseWheel,onMouseOver:this._onMouseOver,onMouseOut:this._onMouseOut,noReadonlyStyles:!0,highlight:this.props.highlight,highlightRemoveRoundBorder:this.props.highlightRemoveRoundBorder,fontSizeStyle:this.props.fontSizeStyle,intent:this.props.intent}),o.createElement(Pe.DropdownList,{anchor:"bottom",root:"document",reference:this._setDropdownRef,className:$e.list,command:this.state.command,isOpened:this.state.isOpened,items:this._makeListItems(),itemsClassName:$e.item,selected:this.state.selected,selectedClassName:$e.selected,target:null!==this._priceControl?this._priceControl:void 0,attachmentOffsetY:3,inheritWidthFromTarget:!0,shouldScrollIfNotVisible:!1,onSelect:this._onSelect,onNavigate:this._onNavigate,onDropdownTouchStart:this._onTouchStart,onDropdownTouchMove:this._onTouchMove,onDropdownTouchEnd:this._onTouchEnd,onDropdownWheelNoPassive:this._onDropdownWheelNoPassive}))))}componentDidUpdate(e){if(this.props.offset!==e.offset||this.props.base!==e.base){const e=Ae(this.props.base,this.props.offset),t=Ue(this.props.offset,this.props.base,Ge()),r=ze(t,e);this.setState({prices:t,selected:r})}this.state.isEditing&&this.props.isSelected||this.props.offset===e.offset&&this.props.base===e.base&&this.props.error===e.error||this.setState({displayValue:Ae(this.props.base,this.props.offset),isEditing:!1})}_onPriceOffsetSelected(e){const t=void 0!==e?e:this.state.prices[this.state.selected].offset;this.props.errorHandler(!1),this.props.onPriceOffsetSelected(t)}_onModifiedCallback(){this.props.onModifiedCallback&&this.props.onModifiedCallback()}_resetSwipeState(){this._swipeState={direction:null,y:null}}_getKeyboardEventHandlers(e){return"close"===e?{[we.KeyCode.UpArrow]:this._scrollPriceByArrow,[we.KeyCode.DownArrow]:this._scrollPriceByArrow,[we.KeyCode.Enter]:this._switchEditingMode}:{
[we.KeyCode.Enter]:this._closeDropdownOnKeyDown,[we.KeyCode.Escape]:this._closeDropdownOnKeyDown,[we.KeyCode.UpArrow]:this._selectPrev,[we.KeyCode.DownArrow]:this._selectNext}}_makeListItems(){return this.state.prices.map(((e,t)=>({base:e.base,offset:e.offset,text:e.displayValue,elem:o.createElement(je,{price:e.displayValue})})))}_prependPriceOnWheel(){const e=Ze(this.state.prices[0],1);this.setState((t=>({prices:[e].concat(t.prices.slice(0,-1)),selected:0===t.selected?1:t.selected+1})))}_appendPriceOnWheel(){const e=this.state.prices.length-1,t=Ze(this.state.prices[e],-1);this.setState((r=>({prices:r.prices.slice(1).concat(t),selected:r.selected===e?e-1:r.selected-1})))}_prependPriceOnTouchMove(){const e=this.state.prices[0],t=[];t.unshift(Ze(e,1)),this.setState((e=>({prices:t.concat(e.prices.slice(0,this.state.prices.length-1)),selected:0===e.selected?1:e.selected+1})))}_appendPriceOnTouchMove(){const e=this.state.prices.length-1,t=this.state.prices[e],r=[];r.push(Ze(t,-1)),this.setState((t=>({prices:t.prices.slice(1).concat(r),selected:t.selected===e?e-1:t.selected-1})))}_changeValueByStep(e){const t=this.props.offset+e,r=this.state.isEditing?Ke(t):Ae(this.props.base,t);this.setState({displayValue:r},(()=>{this._onPriceOffsetSelected(t)}))}}var et=r(472804);function tt(e){const{model:t,priceType:r,focus:s,priceLabel:n,trackEvent:a}=e,l=o.useContext(ue.SettingsContext),c=(0,_.useObservable)(t.priceControlData$,t.getPriceControlData()),u=(0,_.useObservable)(t.focusedControl$,t.getFocusedControl()),d=(0,_.useObservable)(t.error$,t.getError()),p=(0,_.useObservable)(t.quotes$,{ask:0,bid:0,trade:0}),h=(0,_.useObservable)(t.side$),m=(0,_.useObservable)(t.status$,v.OrderPanelStatus.Wait),g="medium",f=l.value.showRelativePriceControl&&!t.isRelativePriceControlHidden,b=d.msg,C=m!==v.OrderPanelStatus.Wait&&d.res&&"warning"===d.severity,y=S(0),E=S(1);return o.createElement(ve.ControlGroup,{cols:f?2:1,rows:1,className:et.controlGroup},o.createElement(We,{...k(0),className:i(et.absolutePriceControl,f&&et.withRelative),priceType:r,isSelected:y,status:m,priceIndex:c?c.index:0,displayPrice:c?c.absolutePrice:"",ask:(0,ke.getAsk)(p),bid:(0,ke.getBid)(p),last:(0,ke.getLast)(p),side:h,priceFormatter:t.formatter,warning:C,error:d.res&&"error"===d.severity&&y,errorMessage:b,errorHandler:w,onControlFocused:P,onPriceSelected:t.setAbsolutePrice,trackEvent:a,onModifiedCallback:t.modifiedAbsolutePriceControlStat,focus:s,fontSizeStyle:g,priceLabel:n,indexToPrice:t.indexToPrice}),f&&o.createElement(Je,{...k(1),isSelected:E,offset:c?c.offset:0,base:c?c.base:"",className:et.relativePriceControl,status:m,error:d.res&&"error"===d.severity&&E,errorMessage:b,errorHandler:w,fontSizeStyle:g,onControlFocused:P,onPriceOffsetSelected:t.setPriceOffset,trackEvent:a,onModifiedCallback:t.modifiedRelativePriceControlStat}));function S(e){return m!==v.OrderPanelStatus.Wait&&u===e}function k(e){const t={highlightRemoveRoundBorder:0};return S(e)&&(t.highlight=!0),d.res&&"error"===d.severity&&S(e)&&(t.intent="danger"),t}function w(e,r){t.setControlError(e,r)}
function P(e){e!==t.getFocusedControl()&&(t.setFocusedControl(e),t.setControlError(!1)),t.onControlFocused.fire()}}function rt(e){const{model:t,trackEvent:s,focus:n}=e,[i]=(0,C.useWatchedValue)(t.orderType),a=4===i;return o.createElement(o.Fragment,null,3===i||a?o.createElement(tt,{key:t.stopPriceModel.id,model:t.stopPriceModel,priceType:t.stopPriceModel.priceType,trackEvent:s,focus:n,priceLabel:a?m.t(null,void 0,r(722028)):m.t(null,void 0,r(25684))}):null,1===i||a?o.createElement(tt,{key:t.limitPriceModel.id,model:t.limitPriceModel,priceType:t.limitPriceModel.priceType,trackEvent:s,focus:n,priceLabel:a?m.t(null,void 0,r(627262)):m.t(null,void 0,r(25684))}):null)}var st=r(447538),ot=r(657947);class nt extends o.PureComponent{constructor(e){super(e),this.onDurationChanged=e=>{this.props.model.currentDuration.setValue(e),this.props.model.onModifiedCallback()},this._onControlFocused=()=>{this.props.model.onControlFocused.fire()},this._callback=()=>this.forceUpdate()}componentDidMount(){this.props.model.currentDuration.subscribe(this._callback),this.props.model.orderType.subscribe(this._callback)}componentWillUnmount(){this.props.model.currentDuration.unsubscribe(this._callback),this.props.model.orderType.unsubscribe(this._callback)}render(){const e=this.props.model.currentDuration.value();return null===e?null:o.createElement(ot.DurationControl,{currentDuration:e,durationMetaInfoList:this._getDurationMetaInfoList(),onDurationChanged:this.onDurationChanged,onClose:this.props.onClose,onControlFocused:this._onControlFocused})}_getDurationMetaInfoList(){const e=this.props.model.orderType.value(),t=this.props.model.durationMetaInfoList;return(0,ke.filterDurationsByOrderType)(t,e)}}var it=r(973044);const at=o.lazy((async()=>({default:(await Promise.all([r.e(3426),r.e(6112)]).then(r.bind(r,958006))).LeverageDialog}))),lt=(0,it.withDialogLazyLoad)(at);var ct=r(27950),ut=r(647253);function dt(e){const{leverage:t,onClick:s,onControlFocused:n,blocked:i,forceDisabled:l=!1,onBlockedClick:c}=e,u=void 0===t;let d=m.t(null,{replace:{value:String(t)}},r(304389));return u&&(d=m.t(null,void 0,r(65124))),i&&(d=m.t(null,void 0,r(405849))),o.createElement("div",{className:ut.container,onClick:function(){if(i)return n.fire(),void c()}},o.createElement(ct.EditButton,{disabled:u||l||i,value:d,startSlot:u||i?void 0:"x",onClick:function(){s(),n.fire()},className:a()(ut.leverageButton,l&&ut.disabledLeverageButton)}))}function pt(e){const{model:t}=e,r=(0,_.useObservable)(t.leverageInfo$,t.leverageInfo()),s=(0,_.useObservable)(t.blocked$,t.getBlocked()),n=t.leveragePreviewResult(),[i,a]=(0,o.useState)(!1),[l,c]=(0,o.useState)(null==r?void 0:r.leverage);return(0,o.useEffect)((()=>{c(null==r?void 0:r.leverage)}),[r]),o.createElement(o.Fragment,null,o.createElement(dt,{onClick:u,leverage:l,forceDisabled:i,blocked:s,onControlFocused:t.onControlFocused,onBlockedClick:t.onBlockedClick}),null!==r&&i&&void 0!==l&&o.createElement(lt,{symbol:t.symbol,displaySymbol:t.displaySymbol,leverage:l,brokerName:t.brokerName,orderType:t.orderType,side:t.side,isOpen:i,
onClose:u,onLeverageSet:t.setLeverage,onLeveragePreview:t.previewLeverage,title:r.title,min:r.min,max:r.max,step:r.step,customFields:t.customFields,infos:null==n?void 0:n.infos,warnings:null==n?void 0:n.warnings,errors:null==n?void 0:n.errors,onSetLeverageValueInOrderWidget:function(e){c(e)}}));function u(){i||t.getLeverageInfo({symbol:t.symbol,orderType:t.orderType,side:t.side,customFields:t.customFields}),a((e=>!e))}}var ht=r(529719),mt=r(954568);class vt extends o.PureComponent{constructor(e){super(e),this._callback=()=>this.forceUpdate()}componentDidMount(){this.context.resizerWidth&&this.context.resizerWidth.subscribe(this._callback)}componentWillUnmount(){this.context.resizerWidth&&this.context.resizerWidth.unsubscribe(this._callback)}render(){const e={width:`${this.props.progress}%`},t=i(mt.progress,100===this.props.progress&&mt.fullFilled,this.props.usedMargin>this.props.availableMargin&&mt.marginOverflow);return o.createElement("div",{className:i(mt.progressBarContainer,this.props.wait&&mt.wait)},o.createElement("div",{className:mt.marginsContainer},o.createElement("div",{className:i(mt.margin,mt.usedMargin)},o.createElement("div",{className:mt.title},m.t(null,void 0,r(969992))),o.createElement("span",{className:mt.price},(0,ht.formatInfoValue)(this.props.usedMargin))),o.createElement("div",{className:i(mt.margin),"data-name":"availableMargin"},o.createElement("span",{className:mt.price},(0,ht.formatInfoValue)(this.props.availableMargin)))),o.createElement("div",{className:mt.progressBar},o.createElement("div",{className:mt.track},o.createElement("div",{className:t,style:e}))))}}vt.contextType=v.Context;var gt=r(849071);function ft(e){const{model:t,status:r}=e,s=(0,_.useObservable)(t.infoTableData(),{rows:[]}),n=(0,_.useObservable)(t.usedMargin(),0),i=(0,_.useObservable)(t.availableMargin(),0),a=t.hasMarginMeter()?o.createElement(vt,{usedMargin:n,availableMargin:i,progress:(0,ht.calculatedMarginRatio)(n,i),wait:e.status===v.OrderPanelStatus.Wait}):void 0;return o.createElement("div",{className:gt.orderInfo},o.createElement("div",{className:gt.title},t.title()),o.createElement("div",{className:gt.contentWrapper},a,o.createElement(R.InfoTable,{rows:s.rows,header:s.header,disabled:r===v.OrderPanelStatus.Wait,rightAlignedValues:!0})))}var bt=r(372605),_t=r(40176),Ct=r(795820),yt=r(338043);const Et=(0,f.getLogger)("Trading.OrderPanel"),St=m.t(null,void 0,r(69208)),kt=m.t(null,void 0,r(184568)),wt=m.t(null,void 0,r(708169)),Pt=m.t(null,void 0,r(312690)),Mt=m.t(null,void 0,r(200890)),Ot=m.t(null,void 0,r(436598));class Nt extends o.PureComponent{constructor(e,t){super(e,t),this._orderWidgetBlock=null,this._orderTicketBlock=null,this._button=null,this._resizeHandler=null,this._subscriptions=[],this._renderWidgetBody=e=>this._isOrderPreviewShown()?o.createElement(Z,{model:(0,d.ensureNotNull)(this.props.model.orderPreviewModel),side:this.props.model.side(),loading:this.props.model.loading}):e,this._focusBlock=()=>{null!==this._orderWidgetBlock&&this._orderWidgetBlock.focus()},this._onLayoutResizeHandleMousedown=e=>{
if(e.defaultPrevented||!e.cancelable)return;e.preventDefault();const t=Math.max(this._orderTicketBlock?this._orderTicketBlock.clientHeight:0,0);let r;r="touches"in e?e.touches[0].clientY:e.clientY;const s=e=>{let s;e.preventDefault(),s="touches"in e?e.touches[0].clientY:e.clientY;let o=t+(s-r);o<445&&(o=445),this._setOrderTicketHeight(o)},o=()=>{const{orderTicketHeight:e}=this.state;document.removeEventListener("mousemove",s),document.removeEventListener("touchmove",s),document.removeEventListener("mouseup",o),document.removeEventListener("touchend",o),void 0!==e&&0!==e&&(0,bt.isInteger)(e)&&l.setValue(b.settingsKeys.PANEL_HEIGHT,e)};document.addEventListener("mousemove",s),document.addEventListener("touchmove",s,{passive:!1}),document.addEventListener("mouseup",o),document.addEventListener("touchend",o,{passive:!1})},this._setOrderWidgetRef=e=>{this._orderWidgetBlock=e},this._setOrderTicketRef=e=>{this._orderTicketBlock=e},this._setButtonRef=e=>{this._button=e},this._setResizeHandlerRef=e=>{this._resizeHandler=e,null!==this._resizeHandler&&(this._resizeHandler.addEventListener("mousedown",this._onLayoutResizeHandleMousedown,{passive:!1}),this._resizeHandler.addEventListener("touchstart",this._onLayoutResizeHandleMousedown,{passive:!1}))},this._forceUpdateAndReCalculateBounds=()=>{this.forceUpdate((()=>this.props.popupController&&this.props.popupController.recalculateBounds()))},this._onStatusChange=e=>{var t;e===v.OrderPanelStatus.Wait&&(null===(t=this._orderWidgetBlock)||void 0===t?void 0:t.contains(document.activeElement))&&this._blur(),this._callback()},this._onKeyDown=e=>{const t=(0,h.hashFromEvent)(e);if(!(13!==t&&t!==h.hashShiftPlusEnter||this.props.model.disabled.value()||null===this._button)){if(c.CheckMobile.any())return this._blur();this._button.focus(),e.defaultPrevented||this._button.click()}},this._blur=()=>{document.activeElement instanceof HTMLElement?document.activeElement.blur():Et.logWarn("Failed to deselect: active element is not HTMLElement")},this._handleClickSignIn=()=>{showSignModal({source:"Trading panel",sourceMeta:"Chart"})},this._selectBroker=()=>{this.props.model.noBroker&&this.props.model.selectBroker()},this._callback=()=>{this.forceUpdate()};const r=this._isOrderInfoShown()?parseInt(l.getValue(b.settingsKeys.PANEL_HEIGHT,"")):NaN;this.state={orderTicketHeight:isNaN(r)?void 0:r,orderInfoAndSeparatorHeight:void 0}}componentDidMount(){this._subscribeToModel(this.props.model),this.props.settings.subscribe(this._forceUpdateAndReCalculateBounds)}componentDidUpdate(){var e,t;const{orderTicketHeight:r,orderInfoAndSeparatorHeight:s}=this.state,o=null===(e=this._orderWidgetBlock)||void 0===e?void 0:e.clientHeight;if(void 0!==o&&void 0!==r&&r!==o&&this._isOrderPreviewShown()&&(this._setOrderInfoAndSeparatorHeight(o-r),l.setValue(b.settingsKeys.PANEL_HEIGHT,o),this._setOrderTicketHeight(o)),void 0!==o&&void 0!==r&&r===o&&this._isOrderInfoShown()&&void 0!==s){const e=o-s;this._setOrderTicketHeight(e),l.setValue(b.settingsKeys.PANEL_HEIGHT,e)}
this.context.mode===v.OrderEditorDisplayMode.Popup&&this._isOrderPreviewShown()&&(null===(t=this.props.popupController)||void 0===t||t.centerAndFit())}componentWillUnmount(){var e;const{orderTicketHeight:t,orderInfoAndSeparatorHeight:r}=this.state,s=null===(e=this._orderWidgetBlock)||void 0===e?void 0:e.clientHeight;void 0!==s&&void 0!==t&&t===s&&void 0!==r&&l.setValue(b.settingsKeys.PANEL_HEIGHT,s-r),this._unsubscribeFromModel(this.props.model),this.props.settings.unsubscribe(this._forceUpdateAndReCalculateBounds),null!==this._resizeHandler&&(this._resizeHandler.removeEventListener("mousedown",this._onLayoutResizeHandleMousedown),this._resizeHandler.removeEventListener("touchstart",this._onLayoutResizeHandleMousedown))}render(){const{model:e,settings:t,trackEvent:r}=this.props,{orderTicketHeight:s}=this.state,n=this.context.mode,a=e.status.value(),l=a===v.OrderPanelStatus.Wait||c.CheckMobile.any()?void 0:this.props.focus,u=this._isOrderPriceSupported(e),p=this._isBracketsSupported(e)||this._isCryptoBracketsSupported(e),h=this._isDurationSupported(e),m=this._isLeverageButtonSupported(e),g=u||e.supportModifyQuantity||m,f=u||e.supportModifyQuantity||m||p,b={value:t.value(),setValue:t.setValue.bind(t)},_={};(e.needSignIn||e.noBroker||e.notTradableText)&&(_.flexGrow=1),n===v.OrderEditorDisplayMode.Panel&&null!==e.orderInfoModel&&void 0!==s&&0!==s&&(_.height=s);const C=o.createElement(o.Fragment,null,e.sideModel&&o.createElement("div",{className:yt.side},o.createElement(F,{model:e.sideModel,disabled:e.existingOrder})),e.limitPriceModel&&e.stopPriceModel&&o.createElement(Y,{orderType:e.orderType,disabled:e.existingOrder&&!e.supportModifyOrderType,supportMarketOrders:e.supportMarketOrders,supportLimitOrders:e.supportLimitOrders,supportStopOrders:e.supportStopOrders,supportStopLimitOrders:e.supportStopLimitOrders}),o.createElement(z.OverlayScrollWrapper,{className:yt.scrollWrapper},e.limitPriceModel&&e.stopPriceModel&&e.quantityModel&&o.createElement("div",{className:i(yt.centerBlock)},u&&o.createElement(rt,{model:e,trackEvent:r,focus:l}),e.supportModifyQuantity&&o.createElement("div",{className:yt.quantityWrapper},e.supportCryptoExchangeOrderTicket()?o.createElement(Se,{model:e.quantityModel,status:a,focus:l}):o.createElement(me,{model:e.quantityModel,symbolHasLotSize:e.symbolHasLotSize,status:a,trackEvent:r,focus:l})),p&&o.createElement("div",{className:yt["brackets-wrapper"]},g&&o.createElement("div",{className:yt.separator}),o.createElement("div",{className:yt.brackets},o.createElement(J.BracketControlGroup,{model:e,focus:l}))),h&&o.createElement("div",{className:yt.duration},o.createElement(nt,{onClose:this._focusBlock,model:(0,d.ensureDefined)(e.durationModel)})),Array.isArray(e.customFieldModels.value())&&e.customFieldModels.value().length>0&&o.createElement("div",{className:yt.customFieldsWrapper},f&&o.createElement("div",{className:yt.separator}),o.createElement(_t.CustomFields,{customFieldModels:e.customFieldModels.value(),status:e.status,onClose:this._focusBlock,
alwaysShowAttachedErrors:e.isEmptyRequiredCustomFieldsHighlighted})),m&&o.createElement("div",{className:yt.leverage},o.createElement(pt,{model:(0,d.ensureDefined)(e.leverageModel)})))),void 0!==e.buttonModel&&o.createElement("div",{className:yt.doneButton},o.createElement(st.PlaceAndModifyButton,{model:e,reference:this._setButtonRef,buttonModel:e.buttonModel})),!1,!1);return o.createElement(ue.SettingsContext.Provider,{value:b},o.createElement("div",{className:i(yt.orderWidget),onKeyDown:this._onKeyDown,tabIndex:-1,ref:this._setOrderWidgetRef},o.createElement("div",{ref:this._setOrderTicketRef,className:yt.orderTicket,style:_},e.mode.value()===v.OrderEditorDisplayMode.Popup&&o.createElement(Ct.HeaderContainer,{...this.props.model.headerStateValue}),!1,!1,e.notTradableText&&this._renderNotTradableBlock(e),!e.needSignIn&&!e.noBroker&&!e.notTradableText&&this._renderWidgetBody(C)),this._isOrderInfoShown()&&o.createElement("div",{className:yt.orderInfoAndSeparator},o.createElement("div",{className:yt.separator}),o.createElement("div",{className:yt.resizeHandler,ref:this._setResizeHandlerRef}),o.createElement(ft,{"data-name":"order-info",model:(0,d.ensureNotNull)(e.orderInfoModel),status:a}))))}_setOrderTicketHeight(e){null!==this._orderTicketBlock&&this.setState({orderTicketHeight:e})}_setOrderInfoAndSeparatorHeight(e){this.setState({orderInfoAndSeparatorHeight:e})}_subscribeToModel(e){e.orderType.subscribe(this._forceUpdateAndReCalculateBounds),e.status.subscribe(this._onStatusChange),e.customFieldModels.subscribe(this._callback),e.isNoQuotes.subscribe(this._callback),e.mode.subscribe(this._callback),null!==e.orderInfoModel&&this._subscriptions.push(e.orderInfoModel.infoTableData().subscribe(this._callback))}_unsubscribeFromModel(e){e.orderType.unsubscribe(this._forceUpdateAndReCalculateBounds),e.status.unsubscribe(this._onStatusChange),e.customFieldModels.unsubscribe(this._callback),e.isNoQuotes.unsubscribe(this._callback),e.mode.unsubscribe(this._callback),this._subscriptions.forEach((e=>e.unsubscribe()))}_isOrderPriceSupported(e){return Boolean(2!==e.orderType.value()&&(!e.existingOrder||e.existingOrder&&e.supportModifyOrderPrice))}_isBracketsSupported(e){const t=2!==this.props.model.orderType.value()||e.supportMarketBrackets;return Boolean(e.supportBrackets&&t)}_isDurationSupported(e){return Boolean(e.durationModel&&(!e.existingOrder||e.existingOrder&&e.supportModifyDuration)&&e.durationModel.isDurationsAvailable())}_isCryptoBracketsSupported(e){return Boolean(e.supportCryptoBrackets)}_isLeverageButtonSupported(e){return Boolean(e.supportLeverageButton)}_isOrderPreviewShown(){const{model:e}=this.props;return e.status.value()===v.OrderPanelStatus.Preview&&null!==e.orderPreviewModel}_isOrderInfoShown(){var e;const{model:t}=this.props,r=t.status.value(),s=(null===(e=t.orderInfoModel)||void 0===e?void 0:e.getOrderInfoTableRowsCount())||0;return!t.needSignIn&&!t.noBroker&&!t.notTradableText&&this.context.mode===v.OrderEditorDisplayMode.Panel&&s>0&&r!==v.OrderPanelStatus.Preview&&g.enabled("order_info")}
_renderSignInBlock(){return o.createElement("div",{className:yt.emptyStateBlockWrapper},o.createElement(p.EmptyStateBlock,{iconClass:yt.screenWithKeyholeIcon,title:kt,titleSize:"normal",text:Pt,textSize:"normal",action:o.createElement(u.SquareButton,{onClick:this._handleClickSignIn,size:"small"},kt)}))}_renderNoBrokerBlock(){return o.createElement("div",{className:yt.emptyStateBlockWrapper},o.createElement(p.EmptyStateBlock,{iconClass:yt.screenWithKeyholeIcon,title:wt,titleSize:"normal",text:Mt,textSize:"normal",action:o.createElement(u.SquareButton,{onClick:this._selectBroker,size:"small"},Ot)}))}_renderNotTradableBlock(e){const t=e.tradableSolution?o.createElement(u.SquareButton,{onClick:e.tradableSolution.apply,size:"small"},e.tradableSolution.title):void 0;return o.createElement("div",{className:yt.emptyStateBlockWrapper},o.createElement(p.EmptyStateBlock,{iconClass:yt.sadScreenIcon,title:St,titleSize:"normal",text:(0,d.ensureDefined)(e.notTradableText),action:t}))}}Nt.contextType=v.Context;var Bt=r(601235);class It extends o.PureComponent{constructor(e){super(e),this._onKeyDown=e=>{27===e.keyCode&&this.props.onCancel&&this.props.onCancel()}}render(){return o.createElement("div",{"data-name":"order-panel",className:Bt.orderPanel,onKeyDown:this._onKeyDown},o.createElement(Nt,{model:this.props.model,settings:this.props.settings,key:this.props.model.id,trackEvent:this.props.trackEvent,focus:this.props.focus}))}}var Dt=r(930894),Tt=r(40766),xt=r(930052),Ft=r(910549),Ht=r(996038),Lt=r(274837),Wt=r(408178);const Rt=o.memo((e=>{const{model:t,isOpened:r,settings:s,onClose:n,trackEvent:i,focus:a,onOpen:l}=e;return(0,Lt.useCommonDialogHandlers)({isOpened:r,onOpen:l,onClose:n}),o.createElement(xt.MatchMedia,{rule:Ht.DialogBreakpoints.TabletSmall},(e=>o.createElement(Tt.PopupDialog,{className:Wt.dialog,isOpened:r,onKeyDown:u,fullscreen:e,rounded:!e,"data-name":"order-dialog-popup"},o.createElement(Dt.Body,{className:Wt.dialogBody},t&&s&&o.createElement(Ft.PopupContext.Consumer,null,c)))));function c(e){return o.createElement(Nt,{settings:(0,d.ensureDefined)(s),model:(0,d.ensureNotNull)(t),key:(0,d.ensureNotNull)(t).id,trackEvent:i,focus:a,popupController:e})}function u(e){27===e.keyCode&&n&&n()}}));let zt=null,Vt=!1;function At(e){const{viewModel:t,settings:r,onClose:s,onOpen:o,focus:i,trackEvent:a}=e;Kt();const l={model:t,settings:r,isOpened:!0,onOpen:o,onClose:()=>{Kt(s),void 0!==l.onClose&&(t.headerModel.pinButtonClicked().unsubscribe(null,l.onClose),t.headerModel.closeButtonClicked().unsubscribe(null,l.onClose)),zt&&(n.unmountComponentAtNode(zt),Vt=!1)},trackEvent:a,focus:i||qt(t.orderType.value())};Zt(l),Vt=!0,void 0!==l.onClose&&(t.headerModel.pinButtonClicked().subscribe(null,l.onClose),t.headerModel.closeButtonClicked().subscribe(null,l.onClose))}function Kt(e){Vt&&(Zt({model:null,isOpened:!1}),null==e||e())}function Zt(e){null===zt&&(zt=document.createElement("div"),document.body.appendChild(zt));const t=o.createElement(v.Context.Provider,{value:{mode:e.model&&e.model.mode.value()||v.OrderEditorDisplayMode.Panel,
supportTrailingStop:Boolean(e.model&&e.model.supportTrailingStop)}},o.createElement(Rt,{...e}));n.render(t,zt)}function Ut(e,t,r,s,i,a){Gt(r);const l={model:e,settings:t,onClose:()=>{Gt(r),l.model.headerModel&&(l.model.headerModel.pinButtonClicked().unsubscribe(null,l.onClose),l.model.headerModel.closeButtonClicked().unsubscribe(null,l.onClose))},onCancel:()=>{l.model.headerModel&&l.model.headerModel.cancel()},trackEvent:a,focus:i||qt(e.orderType.value())};l.model.headerModel&&(l.model.headerModel.pinButtonClicked().subscribe(null,l.onClose),l.model.headerModel.closeButtonClicked().subscribe(null,l.onClose)),function(e,t,r){const s=o.createElement(v.Context.Provider,{value:{resizerWidth:r||null,mode:e.model.mode.value(),supportTrailingStop:Boolean(e.model.supportTrailingStop)}},o.createElement(It,{...e}));n.render(s,t)}(l,r,s)}function Gt(e){n.unmountComponentAtNode(e)}function qt(e){let t;switch(e){case 2:t=5;break;case 1:case 4:t=1;break;case 3:t=2;break;default:t=void 0}return t}},973044:(e,t,r)=>{"use strict";r.d(t,{withDialogLazyLoad:()=>n});var s=r(50959),o=r(252130);function n(e){return t=>{const r=(0,o.useIsMounted)();return((e=>{const[t,r]=(0,s.useState)(!1);return(0,s.useEffect)((()=>{!t&&e&&r(!0)}),[e]),t})(t.isOpen)||t.isOpen)&&r?s.createElement(s.Suspense,{fallback:null},s.createElement(e,{...t})):null}}},761248:(e,t,r)=>{"use strict";function s(e){return e.charAt(0).toUpperCase()+e.substring(1)}r.d(t,{capitalizeFirstLetter:()=>s})},115589:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" d="M9.36 5a4.44 4.44 0 0 0-4.39 4.5c0 2.49 1.97 4.5 4.39 4.5 1.62 0 3.04-.9 3.8-2.25l.84.5A5.33 5.33 0 0 1 9.36 15 5.43 5.43 0 0 1 4 9.5C4 6.46 6.4 4 9.36 4c1.98 0 3.71 1.1 4.64 2.75l-.84.5A4.36 4.36 0 0 0 9.36 5Z"/></svg>'},96634:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" d="M5 9h9v1H5V9Z"/></svg>'},218666:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" d="M9.5 4.5h-1v4h-4v1h4v4h1v-4h4v-1h-4v-4Z"/></svg>'},672197:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" d="M10 6.13V8L6 5.5 10 3v2.1A5 5 0 1 1 4 10a.5.5 0 0 1 1 0 4 4 0 1 0 5-3.87Z"/></svg>'},914987:e=>{
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><mask width="17" height="20" fill="#000" x="6" y="4" maskUnits="userSpaceOnUse" id="aayofezey"><path fill="#fff" d="M6 4h17v20H6z"/><path fill-rule="evenodd" d="M9 5a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2H9Zm1 2a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1V8a1 1 0 0 0-1-1h-9Zm2 8.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Zm2.5 1.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Zm5.5-1.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0ZM10.5 21a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Zm5.5-1.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Zm2.5 1.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z"/></mask><path fill="currentcolor" d="M8 7a1 1 0 0 1 1-1V4a3 3 0 0 0-3 3h2Zm0 14V7H6v14h2Zm1 1a1 1 0 0 1-1-1H6a3 3 0 0 0 3 3v-2Zm11 0H9v2h11v-2Zm1-1a1 1 0 0 1-1 1v2a3 3 0 0 0 3-3h-2Zm0-14v14h2V7h-2Zm-1-1a1 1 0 0 1 1 1h2a3 3 0 0 0-3-3v2ZM9 6h11V4H9v2Zm1 2V6a2 2 0 0 0-2 2h2Zm0 2V8H8v2h2Zm0 0H8c0 1.1.9 2 2 2v-2Zm9 0h-9v2h9v-2Zm0 0v2a2 2 0 0 0 2-2h-2Zm0-2v2h2V8h-2Zm0 0h2a2 2 0 0 0-2-2v2Zm-9 0h9V6h-9v2Zm.5 10a2.5 2.5 0 0 0 2.5-2.5h-2a.5.5 0 0 1-.5.5v2ZM8 15.5a2.5 2.5 0 0 0 2.5 2.5v-2a.5.5 0 0 1-.5-.5H8Zm2.5-2.5A2.5 2.5 0 0 0 8 15.5h2c0-.28.22-.5.5-.5v-2Zm2.5 2.5a2.5 2.5 0 0 0-2.5-2.5v2c.28 0 .5.22.5.5h2Zm2 0a.5.5 0 0 1-.5.5v2a2.5 2.5 0 0 0 2.5-2.5h-2Zm-.5-.5c.28 0 .5.22.5.5h2a2.5 2.5 0 0 0-2.5-2.5v2Zm-.5.5c0-.28.22-.5.5-.5v-2a2.5 2.5 0 0 0-2.5 2.5h2Zm.5.5a.5.5 0 0 1-.5-.5h-2a2.5 2.5 0 0 0 2.5 2.5v-2Zm4 2a2.5 2.5 0 0 0 2.5-2.5h-2a.5.5 0 0 1-.5.5v2ZM16 15.5a2.5 2.5 0 0 0 2.5 2.5v-2a.5.5 0 0 1-.5-.5h-2Zm2.5-2.5a2.5 2.5 0 0 0-2.5 2.5h2c0-.28.22-.5.5-.5v-2Zm2.5 2.5a2.5 2.5 0 0 0-2.5-2.5v2c.28 0 .5.22.5.5h2Zm-10 4a.5.5 0 0 1-.5.5v2a2.5 2.5 0 0 0 2.5-2.5h-2Zm-.5-.5c.28 0 .5.22.5.5h2a2.5 2.5 0 0 0-2.5-2.5v2Zm-.5.5c0-.28.22-.5.5-.5v-2A2.5 2.5 0 0 0 8 19.5h2Zm.5.5a.5.5 0 0 1-.5-.5H8a2.5 2.5 0 0 0 2.5 2.5v-2Zm4 2a2.5 2.5 0 0 0 2.5-2.5h-2a.5.5 0 0 1-.5.5v2ZM12 19.5a2.5 2.5 0 0 0 2.5 2.5v-2a.5.5 0 0 1-.5-.5h-2Zm2.5-2.5a2.5 2.5 0 0 0-2.5 2.5h2c0-.28.22-.5.5-.5v-2Zm2.5 2.5a2.5 2.5 0 0 0-2.5-2.5v2c.28 0 .5.22.5.5h2Zm2 0a.5.5 0 0 1-.5.5v2a2.5 2.5 0 0 0 2.5-2.5h-2Zm-.5-.5c.28 0 .5.22.5.5h2a2.5 2.5 0 0 0-2.5-2.5v2Zm-.5.5c0-.28.22-.5.5-.5v-2a2.5 2.5 0 0 0-2.5 2.5h2Zm.5.5a.5.5 0 0 1-.5-.5h-2a2.5 2.5 0 0 0 2.5 2.5v-2Z" mask="url(#aayofezey)"/></svg>'},93929:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18" fill="none"><path stroke="currentColor" d="M13.5 7l1.65-1.65a.5.5 0 0 0 0-.7l-1.8-1.8a.5.5 0 0 0-.7 0L11 4.5M13.5 7L11 4.5M13.5 7l-8.35 8.35a.5.5 0 0 1-.36.15H2.5v-2.3a.5.5 0 0 1 .15-.35L11 4.5"/></svg>'},364366:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18" fill="none"><path fill="#FB8C00" d="M0 9a9 9 0 1 1 18 0A9 9 0 0 1 0 9z"/><path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd" d="M9 4c-.79 0-1.38.7-1.25 1.48l.67 4.03a.59.59 0 0 0 1.16 0l.67-4.03A1.27 1.27 0 0 0 9 4zm0 8a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"/></svg>'}}]);