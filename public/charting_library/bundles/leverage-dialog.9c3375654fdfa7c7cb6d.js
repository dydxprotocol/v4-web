(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[6112],{39391:e=>{"use strict";function t(e){return"function"==typeof e?e():e}function n(){var e={};return e.promise=new Promise((function(t,n){e.resolve=t,e.reject=n})),e}e.exports=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=void 0,s=void 0,i=void 0,l=[];return function(){var c=t(r),m=(new Date).getTime(),d=!o||m-o>c;o=m;for(var v=arguments.length,g=Array(v),f=0;f<v;f++)g[f]=arguments[f];if(d&&a.leading)return a.accumulate?Promise.resolve(e.call(this,[g])).then((function(e){return e[0]})):Promise.resolve(e.call.apply(e,[this].concat(g)));if(s?clearTimeout(i):s=n(),l.push(g),i=setTimeout(u.bind(this),c),a.accumulate){var p=l.length-1;return s.promise.then((function(e){return e[p]}))}return s.promise};function u(){var t=s;clearTimeout(i),Promise.resolve(a.accumulate?e.call(this,l):e.apply(this,l[l.length-1])).then(t.resolve,t.reject),l=[],s=null}}},36179:e=>{e.exports={tag:"tag-dvwS9evJ",disabled:"disabled-dvwS9evJ",animated:"animated-dvwS9evJ"}},6416:e=>{e.exports={tags:"tags-BNkUAwZE",tag:"tag-BNkUAwZE",tagBuy:"tagBuy-BNkUAwZE",tagSell:"tagSell-BNkUAwZE"}},47930:e=>{e.exports={"tablet-small-breakpoint":"screen and (max-width: 428px)",scrollable:"scrollable-YGxfWneG",content:"content-YGxfWneG",title:"title-YGxfWneG",label:"label-YGxfWneG",buttonsWrapper:"buttonsWrapper-YGxfWneG",button:"button-YGxfWneG",previewMessage:"previewMessage-YGxfWneG",warnings:"warnings-YGxfWneG",leverageInput:"leverageInput-YGxfWneG"}},28335:e=>{e.exports={label:"label-UvIfeuIB"}},40798:(e,t,n)=>{"use strict";n.d(t,{CreateConfirmDialog:()=>s});var r=n(59496),a=n(27886);const o=r.lazy(async()=>({default:(await Promise.all([n.e(5514),n.e(9289),n.e(7427),n.e(8463),n.e(7552),n.e(5998),n.e(7345),n.e(9309),n.e(7819),n.e(994),n.e(3566)]).then(n.bind(n,76669))).AdaptiveConfirmDialog})),s=(0,a.withDialogLazyLoad)(o)},15136:(e,t,n)=>{"use strict";n.r(t),n.d(t,{LeverageDialog:()=>L});var r=n(25177),a=n(59496),o=n(60521),s=n.n(o),i=n(52130),l=n(39391),u=n.n(l),c=n(97754),m=n.n(c),d=n(42554),v=n(2691),g=n(28335);function f(e){const{htmlFor:t,children:n,className:r,id:o,...s}=e;return a.createElement(v.BeforeSlot,{...s,className:m()(g.label,r)},a.createElement("label",{id:o,htmlFor:t},n))}var p=n(87125),b=n(40798),h=n(97645),w=n(36179),x=n.n(w);function S(e){const{className:t,...n}=e;return a.createElement("span",{...n,className:c(t,x().tag,x().disabled)})}var y=n(6416);const E={1:(0,h.t)("Limit"),2:(0,h.t)("Market",{context:"trading"}),3:(0,h.t)("Stop",{context:"trading"}),4:(0,h.t)("StopLimit")};function N(e){const{side:t,orderType:n,customFields:r}=e,o=[{text:1===t?(0,h.t)("Buy"):(0,h.t)("Sell"),className:1===t?y.tagBuy:y.tagSell},{text:E[n]}];return void 0!==r&&Object.values(r).filter(e=>"string"==typeof e).map(e=>o.push({text:e})),a.createElement("div",{className:y.tags},o.map(e=>a.createElement(S,{key:e.text,className:m()(y.tag,e.className)},e.text)))}var C=n(50317);function k(e,t){
return s()(e).div(t).round(0,s().roundDown).mul(t)}function B(e,t,n){const r=k(e,5);if(r.gt(0)&&r.minus(t).mod(n).eq(0))return r}function G(e,t,n){const r=t.eq(n),a=r?0:t;return k(r?e:e.minus(t),n).plus(a)}function M(e,t,n){return e.plus(s()(n).mul(t))}function T(e){if(e.min>=e.max)return[];const t=new(s())(e.min),n=new(s())(e.max),r=new(s())(e.step),a=function(e,t){return e.gt(1)||t.lt(1)?e:s()(1)}(t,n),o=function(e,t,n){const r=t.minus(e).div(n);return r.gte(4)?3:r.round(0,s().roundDown).minus(1).toNumber()}(t,n,r),i=function(e,t,n){return t.minus(e).div(n+1)}(t,n,o),l=[a.toNumber()];for(let e=1;e<=o;e++){const o=M(a,i,e);let s=B(o,t,r);if((void 0===s||s.eq(l[e-1]))&&(s=G(o,t,r)),!s.eq(l[e-1])){if(s.gte(n))break;l.push(s.toNumber())}}return l.push(e.max),l}var W=n(47930);function L(e){const{isOpen:t,onClose:n,leverage:s,title:l,symbol:c,displaySymbol:v,brokerName:g,min:h,max:w,step:x,side:S,orderType:y,infos:E,warnings:k,errors:B,customFields:G,onLeverageSet:M,onLeveragePreview:L,onSetLeverageValueInOrderWidget:D}=e,Y=(0,a.useCallback)(u()(function(){let e;return async t=>{let n;const r=e=L(Q(t));try{n=await r}catch(e){n={errors:[(0,C.getErrorMessage)(e)]}}e===r&&H.current&&$(n)}}(),300),[]),[A,O]=(0,a.useState)(s),[F,j]=(0,a.useState)(!1),[P,U]=(0,a.useState)(!1),[q,Z]=(0,a.useState)(),[J,z]=(0,a.useState)(),[V,$]=(0,a.useState)({infos:E,warnings:k,errors:B}),H=(0,i.useIsMounted)();(0,a.useEffect)(()=>{let e;const t=new o.Big(A).minus(h).mod(x);void 0!==V.errors&&V.errors.length>0?e=V.errors.join(". "):F?e=void 0:t.eq(0)||(e=(0,r.t)("The specified value is not a multiple of {step}",{replace:{step:String(x)}})),U(I(V.errors)||F||void 0!==e),Z(e),z(void 0)},[F,A,x,h,V]),(0,a.useEffect)(()=>{Y(A)},[A,Y]),(0,a.useEffect)(()=>{O(s)},[s]);const R=(0,a.useMemo)(()=>l.charAt(0).toUpperCase()+l.substring(1).toLocaleLowerCase(),[l]),K=(0,a.useMemo)(()=>T({min:h,max:w,step:x}),[w,h,x]);return a.createElement(b.CreateConfirmDialog,{isOpen:t,isOpened:t,submitButtonDisabled:P,render:function(){var e,t;return a.createElement(d.TouchScrollContainer,null,a.createElement("div",{className:W.content},a.createElement("div",{className:W.title},`${v}, ${g}`),a.createElement(N,{side:S,orderType:y,customFields:G}),a.createElement(f,{htmlFor:"leverageInput",className:W.label},(0,r.t)("Leverage")),a.createElement(p.NumberInput,{id:"leverageInput",value:A,min:h,max:w,step:x,roundByStep:!1,error:P||Boolean(J),errorMessage:q||J,boundariesErrorMessages:{greaterThanMax:(0,r.t)("Specified value is greater than the leverage maximum of {max}",{replace:{max:String(w)}}),lessThanMin:(0,r.t)("Specified value is less than the leverage minimum of {min}",{replace:{min:String(h)}})},errorHandler:_,onValueChange:X,stretch:!0,className:W.leverageInput}),a.createElement("div",{className:W.buttonsWrapper},K.map(e=>a.createElement("button",{type:"button",className:W.button,key:e,onClick:()=>{X(e)}},"x"+e))),I(V.infos)&&a.createElement("div",{className:W.previewMessage},null===(e=V.infos)||void 0===e?void 0:e.join(". ")),I(V.warnings)&&a.createElement("div",{
className:m()(W.previewMessage,W.warnings)},null===(t=V.warnings)||void 0===t?void 0:t.join(". "))))},title:R,dataName:"trading-leverage-dialog",submitButtonText:(0,r.t)("Confirm"),cancelButtonText:(0,r.t)("Cancel"),onSubmit:async function(){try{await M(Q(A)),D(A),n()}catch(e){z((0,C.getErrorMessage)(e))}},onCancel:()=>{},onClose:n,defaultActionOnClose:"cancel",onClickOutside:n});function Q(e){return{side:S,symbol:c,leverage:e,customFields:G,orderType:y}}function X(e){O(e)}function _(e){j(e)}}function I(e){return void 0!==e&&e.length>0}},42554:(e,t,n)=>{"use strict";n.d(t,{TouchScrollContainer:()=>i});var r=n(59496),a=n(59142),o=n(88537),s=n(1227);function i(e){const{reference:t,children:n,...o}=e,i=(0,r.useRef)(null),u=(0,r.useCallback)(e=>{t&&(t.current=e),s.CheckMobile.iOS()&&(null!==i.current&&(0,a.enableBodyScroll)(i.current),i.current=e,null!==i.current&&(0,a.disableBodyScroll)(i.current,{allowTouchMove:l(i)}))},[t]);return r.createElement("div",{ref:u,...o},n)}function l(e){return t=>{const n=(0,o.ensureNotNull)(e.current),r=document.activeElement;return!n.contains(t)||null!==r&&n.contains(r)&&r.contains(t)}}}}]);