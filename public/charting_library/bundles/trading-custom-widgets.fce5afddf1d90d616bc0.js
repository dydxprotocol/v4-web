(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[3809],{747553:e=>{e.exports={label:"label-oHMFhnC8"}},583221:e=>{e.exports={hiddenLabel:"hiddenLabel-XFowpoet"}},283879:e=>{e.exports={calculator:"calculator-vLRZh3q9",calculatorWithInput:"calculatorWithInput-vLRZh3q9",input:"input-vLRZh3q9",buttonsWrapper:"buttonsWrapper-vLRZh3q9",buttonWithOperation:"buttonWithOperation-vLRZh3q9",buttonIcon:"buttonIcon-vLRZh3q9"}},183927:e=>{e.exports={menuBox:"menuBox-rm7KgfIT"}},463039:(e,t,n)=>{"use strict";n.d(t,{Label:()=>s});var r=n(50959),o=n(497754),a=n.n(o),u=n(102691),l=n(747553);function s(e){const{htmlFor:t,children:n,className:o,id:s,...c}=e;return r.createElement(u.BeforeSlot,{...c,className:a()(l.label,o)},r.createElement("label",{id:s,htmlFor:t},n))}},729354:(e,t,n)=>{"use strict";n.d(t,{QuantityInput:()=>d});var r=n(50959),o=n(609838),a=n(463039),u=n(499665);var l=n(587125),s=n(341086),c=n(50771),i=n(848062),p=n(863582),h=n(391431),m=n(583221);function d(e){const{id:t,qty:d,quantityMetainfo:v,onValueChange:C,className:g,customTitle:y,hasLotSize:b,onClick:E,inputReference:f,hideLabel:B,button:I,customErrorsAttachment:T}=e,{error:w,errorMessage:k,setError:x,setErrorMessage:V,handleInputError:N}=function(e,t){const[n,o]=(0,r.useState)(!1),[a,l]=(0,r.useState)(void 0),[s,c]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{const{res:n,msg:r}=(0,u.checkQtyError)(t,e,!0),a=s?void 0:r;o(s||n),l(a)}),[e,t,s]),{error:n,errorMessage:a,setError:o,setErrorMessage:l,handleInputError:e=>{c(e)}}}(d,v),S=(0,r.useMemo)((()=>(0,s.numberFormattersParsersChain)({chain:[(0,c.prohibitNanOnParseStep)(),(0,i.decimalNumberMagnitudeStep)({standardNotationOnly:!0}),(0,p.signumStep)({negativeSign:p.longMinusSign})]},{ignoreLocaleNumberFormat:!0})),[v]),_=y??(b?o.t(null,void 0,n(833526)):o.t(null,void 0,n(715432)));return r.createElement(r.Fragment,null,r.createElement(a.Label,{className:B&&m.hiddenLabel,htmlFor:t},_),r.createElement(l.NumberInput,{...v,button:I,id:t,className:g,value:(0,h.applyRounding)(d,S),onValueChange:e=>{const{res:t,msg:n}=(0,u.checkQtyError)(v,e,!0);t||C(e),x(t),V(n)},error:w,errorMessage:k,errorHandler:N,onBlur:()=>{x(!1),V(void 0)},onClick:E,inputReference:f,useFormatter:!1,mode:"float",customErrorsAttachment:T}))}},713191:(e,t,n)=>{"use strict";n.r(t),n.d(t,{render:()=>l});var r=n(50959),o=n(632227),a=n(650151),u=n(129018);function l(e,t,n){e?o.render(r.createElement(u.QuantityCalculator,{...(0,a.ensureDefined)(n)}),t):o.unmountComponentAtNode(t)}},129018:(e,t,n)=>{"use strict";n.d(t,{QuantityCalculator:()=>x});var r=n(50959),o=n(960521),a=n(624216),u=n(510618),l=n(493173),s=n(567704),c=n(609838),i=n(497754),p=n.n(i),h=n(926032),m=n(180185),d=n(878112),v=n(380327),C=n(729354),g=n(600297),y=n(218666),b=n(96634),E=n(115589),f=n(672197),B=n(283879);const I={isGrouped:!1,cellState:{isTop:!1,isRight:!1,isBottom:!1,isLeft:!1}};function T(e){const{min:t,max:o,step:a,uiStep:u,reference:l,withInput:s,valueInput:i,onChangeValueInput:T,onClick:w,onClose:k,onInputClick:x}=e,V=(0,r.useRef)(null),N=(0,
r.useRef)(null),S={min:t,max:o,step:a,uiStep:u};function _(e,t){V.current?.blur(),w(e,t)}return(0,r.useEffect)((()=>{const e=setTimeout((()=>{V.current&&(V.current.focus(),V.current.selectionStart=V.current.value.length)}),0);return N.current=(0,h.createGroup)({desc:"Qty calculator"}),N.current?.add({desc:"Press Enter in qty calculator",hotkey:13,handler:k}),()=>{clearTimeout(e),N.current?.destroy(),N.current=null}}),[]),r.createElement("div",{className:p()(B.calculator,s&&B.calculatorWithInput),tabIndex:-1,ref:l,onKeyDown:e=>{13===(0,m.hashFromEvent)(e)&&k()}},s&&r.createElement(C.QuantityInput,{id:"calculator-input",qty:i,quantityMetainfo:S,className:B.input,customTitle:c.t(null,void 0,n(598721)),onValueChange:T,onClick:x,inputReference:e=>V.current=e}),r.createElement(v.ControlGroupContext.Provider,{value:I},r.createElement("div",{className:B.buttonsWrapper},r.createElement(g.Button,{value:-a,buttonType:g.ButtonType.IncDec,icon:r.createElement(d.Icon,{className:B.buttonIcon,icon:b}),onClick:_,className:B.buttonWithOperation}),r.createElement(g.Button,{value:a,buttonType:g.ButtonType.IncDec,icon:r.createElement(d.Icon,{className:B.buttonIcon,icon:y}),onClick:_,className:B.buttonWithOperation}),r.createElement(g.Button,{value:1,buttonType:g.ButtonType.PlusValue,onClick:_}),r.createElement(g.Button,{value:5,buttonType:g.ButtonType.PlusValue,onClick:_}),r.createElement(g.Button,{value:25,buttonType:g.ButtonType.PlusValue,onClick:_}),r.createElement(g.Button,{value:100,buttonType:g.ButtonType.PlusValue,onClick:_}),r.createElement(g.Button,{value:500,buttonType:g.ButtonType.PlusValue,onClick:_}),r.createElement(g.Button,{value:1e3,buttonType:g.ButtonType.PlusValue,onClick:_}),r.createElement(g.Button,{value:0,buttonType:g.ButtonType.Clear,icon:r.createElement(d.Icon,{className:B.buttonIcon,icon:E}),onClick:_}),r.createElement(g.Button,{value:t||a,buttonType:g.ButtonType.Default,icon:r.createElement(d.Icon,{className:B.buttonIcon,icon:f}),onClick:_}))))}var w=n(183927);const k=(0,l.mergeThemes)(u.DEFAULT_MENU_THEME,{menuBox:w.menuBox});class x extends r.PureComponent{constructor(e){super(e),this._setCalcRef=e=>{this.props.calcReference&&this.props.calcReference(e)},this._calculatorStepHandler=(e,t)=>{const{min:n,max:r,uiStep:a,trackEventTarget:u,trackEvent:l}=this.props;if(void 0!==l&&void 0!==u&&l(u,"Calculator Button",(0,s.prepareCalculatorEventText)(e,t)),t===g.ButtonType.Clear||t===g.ButtonType.Default)return this._updateValueByCalc(e);const c=this.props.valueGetter();if(null===c)return;let i=Number((0,o.Big)(c).plus(e));if((i<n||r<i)&&t!==g.ButtonType.IncDec)return this._updateValueByCalc(c);if(t===g.ButtonType.IncDec){if(i=this._calcByStep(c,e,n,a),r<i)return this._updateValueByCalc(r);if(i<n)return this._updateValueByCalc(n)}return this._updateValueByCalc(i)},this._updateValueByCalc=e=>{this._handlerValueInput(e),this.props.onValueChange(e,!0),void 0!==this.props.errorHandler&&this.props.errorHandler(!1),this.props.calculatorUsedStat&&this.props.calculatorUsedStat(),this.props.onFocus?.()},this._onInputClick=()=>{
const{trackEventTarget:e,trackEvent:t}=this.props;void 0!==t&&void 0!==e&&t(e,"Calculator Input","Quantity input field")},this.state={valueInput:e.valueGetter()},this._handlerValueInput=this._handlerValueInput.bind(this)}render(){const{min:e,max:t,step:n,uiStep:o,withInput:u,targetEl:l,position:s,onClose:c,onClickOutside:i,onKeyboardClose:p}=this.props;return r.createElement(a.PopupMenu,{isOpened:!0,onClose:c,onClickOutside:i,onKeyboardClose:p,position:s,doNotCloseOn:l,theme:k},r.createElement(T,{min:e,max:t,step:n,uiStep:o,withInput:u,reference:this._setCalcRef,valueInput:this.state.valueInput,onChangeValueInput:this._updateValueByCalc,onClick:this._calculatorStepHandler,onClose:c,onInputClick:this._onInputClick}))}_calcByStep(e,t,n,r){const a=Math.sign(t),u=Math.abs(r??t),l=new o.Big(e),s=l.minus(n).mod(t);let c=l.plus(a*u);return s.eq(0)||(c=c.plus((a>0?0:1)*u).minus(s)),c.toNumber()}_handlerValueInput(e){this.setState({valueInput:e})}}},493173:(e,t,n)=>{"use strict";function r(e,t,n={}){return Object.assign({},e,function(e,t,n={}){const r=Object.assign({},t);for(const o of Object.keys(t)){const a=n[o]||o;a in e&&(r[o]=[e[a],t[o]].join(" "))}return r}(e,t,n))}n.d(t,{mergeThemes:()=>r})},115589:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" d="M9.36 5a4.44 4.44 0 0 0-4.39 4.5c0 2.49 1.97 4.5 4.39 4.5 1.62 0 3.04-.9 3.8-2.25l.84.5A5.33 5.33 0 0 1 9.36 15 5.43 5.43 0 0 1 4 9.5C4 6.46 6.4 4 9.36 4c1.98 0 3.71 1.1 4.64 2.75l-.84.5A4.36 4.36 0 0 0 9.36 5Z"/></svg>'},96634:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" d="M5 9h9v1H5V9Z"/></svg>'},218666:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" d="M9.5 4.5h-1v4h-4v1h4v4h1v-4h4v-1h-4v-4Z"/></svg>'},672197:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" d="M10 6.13V8L6 5.5 10 3v2.1A5 5 0 1 1 4 10a.5.5 0 0 1 1 0 4 4 0 1 0 5-3.87Z"/></svg>'}}]);