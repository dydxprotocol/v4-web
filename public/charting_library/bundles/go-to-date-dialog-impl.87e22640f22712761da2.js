(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[1859],{28490:e=>{e.exports={calendar:"calendar-1NjzAl_S"}},13612:e=>{e.exports={row:"row-PABCY1cG",mobileRow:"mobileRow-PABCY1cG"}},80353:e=>{e.exports={dialogWrapper:"dialogWrapper-C-Wab_3K",dialogWrapperSmall:"dialogWrapperSmall-C-Wab_3K",tabs:"tabs-C-Wab_3K",content:"content-C-Wab_3K",contentMobile:"contentMobile-C-Wab_3K",bodyWrapper:"bodyWrapper-C-Wab_3K"}},55241:e=>{e.exports={slider:"slider-3RfwXbxu",inner:"inner-3RfwXbxu"}},34344:e=>{e.exports={scrollWrap:"scrollWrap-1KEqJy8_",tabsWrap:"tabsWrap-1KEqJy8_",tabs:"tabs-1KEqJy8_",withoutBorder:"withoutBorder-1KEqJy8_",tab:"tab-1KEqJy8_",withHover:"withHover-1KEqJy8_",headerBottomSeparator:"headerBottomSeparator-1KEqJy8_",fadeWithoutSlider:"fadeWithoutSlider-1KEqJy8_",withBadge:"withBadge-1KEqJy8_"}},66549:e=>{e.exports={"tablet-small-breakpoint":"screen and (max-width: 428px)",item:"item-2IihgTnv",hovered:"hovered-2IihgTnv",isDisabled:"isDisabled-2IihgTnv",isActive:"isActive-2IihgTnv",shortcut:"shortcut-2IihgTnv",toolbox:"toolbox-2IihgTnv",withIcon:"withIcon-2IihgTnv",icon:"icon-2IihgTnv",labelRow:"labelRow-2IihgTnv",label:"label-2IihgTnv",showOnHover:"showOnHover-2IihgTnv"}},16929:e=>{e.exports={tabs:"tabs-3I2ohC86",tab:"tab-3I2ohC86",noBorder:"noBorder-3I2ohC86",disabled:"disabled-3I2ohC86",active:"active-3I2ohC86",defaultCursor:"defaultCursor-3I2ohC86",slider:"slider-3I2ohC86",content:"content-3I2ohC86"}},31212:(e,t,n)=>{"use strict";n.r(t),n.d(t,{showGoToDateDialog:()=>te});var o=n(67294),a=n(73935),r=n(16282),s=n(79442),i=n(99343),l=n(23193),c=n(67400),u=n.n(c);const d=o.createContext(null);function m(e){const{initialGoToDate:t,children:n}=e,[a,r]=(0,o.useState)(t),s=a.valueOf()<=(0,i.resetToDayEnd)(new Date).valueOf(),l=(0,o.useMemo)(()=>({date:a,setDate:r,isValid:s}),[a,s]);return o.createElement(d.Provider,{value:l},n)}const f=o.createContext(null);function v(e){const{initialRanges:t,children:n}=e,[a,r]=(0,o.useState)(t.from),[s,i]=(0,o.useState)(t.to),l=a.valueOf()<=s.valueOf(),c=(0,o.useMemo)(()=>({dateFrom:a,dateTo:s,setDateFrom:r,setDateTo:i,isValid:l}),[a,s,l]);return o.createElement(f.Provider,{value:c},n)}var h=n(74245),b=n(94184),g=n.n(b),p=n(41695),D=n(69671),E=n.n(D),C=n(30646),T=n(4311),w=n(44956),S=n(13612);function N(e){const{children:t}=e;return o.createElement("div",{className:g()(S.row,q&&S.mobileRow)},t)}var _=n(13493),I=n(29329);const O=o.createContext({isActive:!1,isFocused:!1});function M(e){const{value:t,reference:n,isActive:a,onPick:r,onFocus:s}=e,[i,l]=(0,o.useState)(!1);return o.createElement(O.Provider,{value:{isActive:a,isFocused:i}},o.createElement("div",{onFocus:function(){l(!0),s&&s()},onBlur:function(){l(!1)}},o.createElement(_.DatePicker,{initial:t,inputReference:n,InputComponent:k,withCalendar:!1,onPick:function(e){if(!e)return;r(new Date(e))},revertInvalidData:!0,name:e.name})))}function k(e){const{isActive:t,isFocused:n}=(0,o.useContext)(O);return o.createElement(I.DateInput,{...e,highlight:t||n})}var y=n(37019);function x(e){
const{value:t,isDisabled:n,onPick:a}=e;return o.createElement(y.TimeInput,{value:(r=t,(0,i.twoDigitsFormat)(r.getHours())+":"+(0,i.twoDigitsFormat)(r.getMinutes())),onChange:a,disabled:n});var r}var R=n(16500),P=n(28490);function A(e){return o.createElement(R.Calendar,{...e,className:P.calendar,popupStyle:!1})}function F(e,t){const n=new Date(t);return n.setFullYear(e.getFullYear()),n.setMonth(e.getMonth()),n.setDate(e.getDate()),n}function W(e,t){const n=new Date(t);return n.setHours(e.getHours()),n.setMinutes(e.getMinutes()),n}function B(e){const{dateOnly:t,onCalendarMonthSwitch:n}=e,{date:a,setDate:s}=(0,r.ensureNotNull)((0,o.useContext)(d)),i=(0,o.useRef)(null),l=(0,o.useRef)(null);return(0,o.useEffect)(()=>{q||null===l.current||l.current.focus()},[]),o.createElement("div",{ref:i,tabIndex:-1},o.createElement(N,null,o.createElement(M,{reference:function(e){l.current=e},value:new Date(a),onPick:function(e){const t=F(e,a);s(t)},isActive:!q}),o.createElement(x,{value:new Date(a),isDisabled:t,onPick:function(e){var t;const[n,o]=e.split(":"),r=new Date;r.setHours(Number(n)),r.setMinutes(Number(o));const l=W(r,a);s(l),q||null===(t=i.current)||void 0===t||t.focus({preventScroll:!0})}})),!q&&o.createElement(A,{key:`${a.getFullYear()}-${a.getMonth()}-${a.getDate()}`,selectedDate:new Date(a),onSelect:function(e){var t;const n=F(e,a);s(n),null===(t=i.current)||void 0===t||t.focus({preventScroll:!0})},onMonthSwitch:n,maxDate:new Date}))}function G(e){const{dateOnly:t,onCalendarMonthSwitch:n,onDateInputFocus:a}=e,{dateFrom:s,dateTo:i,setDateFrom:l,setDateTo:c}=(0,r.ensureNotNull)((0,o.useContext)(f)),[u,d]=(0,o.useState)("from"),m=(0,o.useRef)(null),v=(0,o.useRef)(null),h=(0,o.useRef)(null),b=(0,o.useMemo)(()=>"from"===u?new Date(s):new Date(i),[u,i,s]);return(0,o.useEffect)(()=>{q||null===v.current||v.current.focus()},[]),o.createElement("div",{ref:m,tabIndex:-1},o.createElement(N,null,o.createElement(M,{value:s,reference:function(e){v.current=e},isActive:!q&&"from"===u,onPick:function(e){const t=F(e,s);l(t)},onFocus:function(){d("from"),a()},name:"start-date-range"}),o.createElement(x,{value:s,isDisabled:t,onPick:function(e){g(e,s,l)}})),o.createElement(N,null,o.createElement(M,{value:i,reference:function(e){h.current=e},isActive:!q&&"to"===u,onPick:function(e){const t=F(e,i);c(t)},onFocus:function(){d("to"),a()},name:"end-date-range"}),o.createElement(x,{value:i,isDisabled:t,onPick:function(e){g(e,i,c)}})),!q&&o.createElement(A,{key:`${b.getFullYear()}-${b.getMonth()}-${b.getDate()}`,selectedDate:new Date(b),onSelect:function(e){const t=F(e,"from"===u?s:i);({from:()=>{var e;l(t),null===(e=h.current)||void 0===e||e.focus({preventScroll:!0})},to:()=>{var e;c(t),null===(e=m.current)||void 0===e||e.focus({preventScroll:!0})}})[u]()},onMonthSwitch:n,highlightedFrom:new Date(s),highlightedTo:new Date(i),maxDate:"from"===u?new Date(i):void 0,minDate:"to"===u?new Date(s):void 0}));function g(e,t,n){var o;const[a,r]=e.split(":"),s=new Date;s.setHours(Number(a)),s.setMinutes(Number(r));n(W(s,t)),
q||null===(o=m.current)||void 0===o||o.focus({preventScroll:!0})}}var L=n(14711),H=n(46403),K=n(89505),U=n(80353);const q=K.mobiletouch,z=()=>!0,J={byId:{Date:{title:(0,h.t)("Date")},CustomRange:{title:(0,h.t)("Custom range")}},allIds:["Date","CustomRange"]};function V(e){const{dateOnly:t,onClose:n,onGoToDate:a,onGoToRange:s}=e,i=(0,o.useRef)(null),[l,c]=(0,o.useState)(E().getValue("GoToDialog.activeTab","Date")),[u,m]=(0,o.useState)(0),{date:v,isValid:b}=(0,r.ensureNotNull)((0,o.useContext)(d)),{dateFrom:D,dateTo:S,isValid:N}=(0,r.ensureNotNull)((0,o.useContext)(f));return(0,o.useEffect)(()=>(p.subscribe(C.CLOSE_POPUPS_AND_DIALOGS_COMMAND,M,null),()=>{p.unsubscribe(C.CLOSE_POPUPS_AND_DIALOGS_COMMAND,M,null)}),[n]),(0,o.useEffect)(()=>{null!==i.current&&i.current()},[u,l,v,D,S]),o.createElement(H.MatchMedia,{rule:T.DialogBreakpoints.TabletSmall},e=>o.createElement(w.AdaptiveConfirmDialog,{className:g()(U.dialogWrapper,e&&U.dialogWrapperSmall),title:(0,h.t)("Go to"),dataName:"go-to-date-dialog",render:_,defaultActionOnClose:"cancel",onClose:M,onClickOutside:M,onCancel:M,onSubmit:O,submitButtonDisabled:I(),submitButtonText:(0,h.t)("Go to"),forceCloseOnEsc:z,shouldForceFocus:!1,fullScreen:e,isOpened:!0}));function _({requestResize:e}){return i.current=e,o.createElement(o.Fragment,null,o.createElement("div",{className:U.tabs},o.createElement(L.DialogTabs,{activeTabId:l,tabs:J,onSelect:k})),o.createElement("div",{className:g()(U.content,q&&U.contentMobile)},o.createElement("div",{className:U.bodyWrapper},o.createElement($,{onCalendarMonthSwitch:y,onDateInputFocus:y,activeTab:l,dateOnly:t}))))}function I(){return{CustomRange:!N,Date:!b}[l]}function O(){switch(l){case"Date":a(v);break;case"CustomRange":s(D,S)}}function M(){n()}function k(e){c(e),E().setValue("GoToDialog.activeTab",e)}function y(){m(u+1)}}function $(e){const{activeTab:t,dateOnly:n,onCalendarMonthSwitch:a,onDateInputFocus:r}=e;switch(t){case"Date":return o.createElement(B,{dateOnly:n,onCalendarMonthSwitch:a});case"CustomRange":return o.createElement(G,{dateOnly:n,onCalendarMonthSwitch:a,onDateInputFocus:r})}}function j(e){const{dateOnly:t,onClose:n,onGoToDate:a,onGoToRange:r,initialGoToDate:s,initialRanges:i}=e;return o.createElement(m,{initialGoToDate:s},o.createElement(v,{initialRanges:i},o.createElement(V,{dateOnly:t,onClose:n,onGoToDate:a,onGoToRange:r})))}var Y=n(61250),X=n(53700);const Q=new class{constructor(){this._hasError=!1}getItemOrDefault(e,t){return!sessionStorage||this._hasError?t:sessionStorage.getItem(e)}setItem(e,t="true"){try{sessionStorage.setItem(e,t),this._hasError=!1}catch(e){this._hasError=!0}}};var Z=n(57779);const ee=new l.DialogsOpenerManager;function te(e){if(ee.isOpened("goTo"))return;if(!e.hasModel())return;const t=e.model(),n=document.createElement("div"),r=o.createElement(j,{onClose:l,dateOnly:t.model().mainSeries().isDWM(),initialGoToDate:ne(),initialRanges:oe(e),onGoToDate:e=>{!function(e,t){Q.setItem("goToDateTabLastPickedDate",String(t.valueOf()));if(void 0===e.model().timeScale().tickMarks().minIndex)return;const n=(0,
i.addLocalTime)(t).valueOf();e.model().gotoTime(n).then(t=>{const n=e.model().mainSeries();void 0===t?n.clearGotoDateResult():n.setGotoDateResult(t)})}(t,e),l()},onGoToRange:(t,n)=>{!function(e,t,n){const o=(0,Z.getTimezoneName)(e.model());if(!o)return;const a=s.linking.interval.value(),r=a&&(0,Y.normalizeIntervalString)(a),l=u().get_timezone(o),d=e=>(0,c.cal_to_utc)(l,new Date(e)),m=(0,i.addLocalTime)(t).valueOf(),f=(0,i.addLocalTime)(n).valueOf(),v={val:{type:"time-range",from:d(m)/1e3,to:d(f)/1e3},res:r};e.chartWidgetCollection().setTimeFrame(v)}(e,t,n),l()}});function l(){a.unmountComponentAtNode(n),ee.setAsClosed("goTo")}a.render(r,n),ee.setAsOpened("goTo")}function ne(){const e=Q.getItemOrDefault("goToDateTabLastPickedDate",null);return null===e?(0,i.resetToDayStart)(new Date):new Date(Number(e))}function oe(e){const t=function(e){const t=e.model().timeScale(),n=t.visibleBarsStrictRange();if(null===n)return;const o=e.model().mainSeries(),a=o.nearestIndex(n.firstBar(),X.PlotRowSearchMode.NearestRight),s=o.nearestIndex(n.lastBar(),X.PlotRowSearchMode.NearestLeft);if(void 0===a||void 0===s)return;return{from:(0,r.ensureNotNull)(t.indexToUserTime(a)),to:(0,r.ensureNotNull)(t.indexToUserTime(s))}}(e);return t?{from:(0,i.subtractLocalTime)(t.from),to:(0,i.subtractLocalTime)(t.to)}:{from:(0,i.subtractLocalTime)(new Date),to:(0,i.subtractLocalTime)(new Date)}}},57779:(e,t,n)=>{"use strict";n.d(t,{getTimezoneName:()=>o});n(67400);function o(e){const t=e.model().timezone();if("exchange"!==t)return t;const n=e.model().mainSeries().symbolInfo();return null==n?void 0:n.timezone}},23193:(e,t,n)=>{"use strict";n.d(t,{DialogsOpenerManager:()=>o,dialogsOpenerManager:()=>a});class o{constructor(){this._storage=new Map}setAsOpened(e,t){this._storage.set(e,t)}setAsClosed(e){this._storage.delete(e)}isOpened(e){return this._storage.has(e)}getDialogPayload(e){return this._storage.get(e)}}const a=new o},14711:(e,t,n)=>{"use strict";n.d(t,{DialogTabs:()=>v});var o=n(67294),a=n(94184),r=n(50774),s=n(71556),i=n(55241);const l=(0,s.mergeThemes)(r.DEFAULT_SLIDER_THEME,i);var c=n(14933),u=n(89505),d=n(34344);const m=d,f=(0,r.factory)((function(e){return o.createElement("div",{className:l.slider,ref:e.reference},o.createElement("div",{className:l.inner}))}));class v extends o.PureComponent{constructor(){super(...arguments),this._createClickHandler=e=>()=>{this.props.onSelect(e)}}render(){const{theme:e=m,hiddenBottomBorders:t,fadedSlider:n=!0,ScrollComponent:r=c.HorizontalScroll}=this.props,s=this._generateDialogTabs();return o.createElement("div",{className:a(e.scrollWrap)},!t&&o.createElement("div",{className:e.headerBottomSeparator}),o.createElement(r,{isVisibleFade:u.mobiletouch,isVisibleButtons:!u.mobiletouch,isVisibleScrollbar:!1,fadeClassName:a({[e.fadeWithoutSlider]:!n})},o.createElement("div",{className:e.tabsWrap},o.createElement(f,{className:a(e.tabs,t&&e.withoutBorder)},s))))}_generateDialogTabs(){const{activeTabId:e,tabs:t,theme:n=m}=this.props;return t.allIds.map(s=>{const i=e===s,l=t.byId[s].withNotificationsBadge
;return o.createElement(r.SliderItem,{key:s,value:s,className:a(n.tab,!i&&n.withHover,l&&d.withBadge),isActive:i,onClick:this._createClickHandler(s)},t.byId[s].title)})}}},46299:(e,t,n)=>{"use strict";n.d(t,{DEFAULT_POPUP_MENU_ITEM_THEME:()=>c,PopupMenuItem:()=>m});var o=n(67294),a=n(94184),r=n(32011),s=n(42254),i=n(76480),l=n(66549);const c=l;function u(e){const{reference:t,...n}=e,a={...n,ref:t};return o.createElement(e.href?"a":"div",a)}function d(e){e.stopPropagation()}function m(e){const{id:t,role:n,"aria-selected":c,className:m,title:f,labelRowClassName:v,labelClassName:h,shortcut:b,forceShowShortcuts:g,icon:p,isActive:D,isDisabled:E,isHovered:C,appearAsDisabled:T,label:w,link:S,showToolboxOnHover:N,target:_,rel:I,toolbox:O,reference:M,onMouseOut:k,onMouseOver:y,suppressToolboxClick:x=!0,theme:R=l}=e,P=(0,i.filterDataProps)(e),A=(0,o.useRef)(null);return o.createElement(u,{...P,id:t,role:n,"aria-selected":c,className:a(m,R.item,p&&R.withIcon,{[R.isActive]:D,[R.isDisabled]:E||T,[R.hovered]:C}),title:f,href:S,target:_,rel:I,reference:function(e){A.current=e,"function"==typeof M&&M(e);"object"==typeof M&&(M.current=e)},onClick:function(t){const{dontClosePopup:n,onClick:o,onClickArg:a,trackEventObject:i}=e;if(E)return;i&&(0,s.trackEvent)(i.category,i.event,i.label);o&&o(a,t);n||(0,r.globalCloseMenu)()},onContextMenu:function(t){const{trackEventObject:n,trackRightClick:o}=e;n&&o&&(0,s.trackEvent)(n.category,n.event,n.label+"_rightClick")},onMouseUp:function(t){const{trackEventObject:n,trackMouseWheelClick:o}=e;if(1===t.button&&S&&n){let e=n.label;o&&(e+="_mouseWheelClick"),(0,s.trackEvent)(n.category,n.event,e)}},onMouseOver:y,onMouseOut:k},void 0!==p&&o.createElement("div",{className:R.icon,dangerouslySetInnerHTML:{__html:p}}),o.createElement("div",{className:a(R.labelRow,v)},o.createElement("div",{className:a(R.label,h)},w)),(void 0!==b||g)&&o.createElement("div",{className:R.shortcut},(F=b)&&F.split("+").join(" + ")),void 0!==O&&o.createElement("div",{onClick:x?d:void 0,className:a(R.toolbox,{[R.showOnHover]:N})},O));var F}},74971:(e,t,n)=>{"use strict";n.d(t,{PopupMenu:()=>c});var o=n(67294),a=n(73935),r=n(22165),s=n(11026),i=n(84206),l=n(18351);function c(e){const{controller:t,children:n,isOpened:c,closeOnClickOutside:u=!0,doNotCloseOn:d,onClickOutside:m,onClose:f,...v}=e,h=(0,o.useContext)(i.CloseDelegateContext),b=(0,l.useOutsideEvent)({handler:function(e){m&&m(e);if(!u)return;if(d&&e.target instanceof Node){const t=a.findDOMNode(d);if(t instanceof Node&&t.contains(e.target))return}f()},mouseDown:!0,touchStart:!0});return c?o.createElement(r.Portal,{top:"0",left:"0",right:"0",bottom:"0",pointerEvents:"none"},o.createElement("span",{ref:b,style:{pointerEvents:"auto"}},o.createElement(s.Menu,{...v,onClose:f,onScroll:function(t){const{onScroll:n}=e;n&&n(t)},customCloseDelegate:h,ref:t},n))):null}},50774:(e,t,n)=>{"use strict";n.d(t,{DEFAULT_SLIDER_THEME:()=>i,SliderItem:()=>l,factory:()=>c,SliderRow:()=>u});var o=n(67294),a=n(94184),r=n(16282),s=n(16929);const i=s;function l(e){const t=a(e.className,s.tab,{
[s.active]:e.isActive,[s.disabled]:e.isDisabled,[s.defaultCursor]:!!e.shouldUseDefaultCursor,[s.noBorder]:!!e.noBorder});return o.createElement("div",{className:t,onClick:e.onClick,ref:e.reference,"data-type":"tab-item","data-value":e.value,"data-name":"tab-item-"+e.value.toString().toLowerCase()},e.children)}function c(e){return class extends o.PureComponent{constructor(){super(...arguments),this.activeTab={current:null}}componentDidUpdate(){(0,r.ensureNotNull)(this._slider).style.transition="transform 350ms",this._componentDidUpdate()}componentDidMount(){this._componentDidUpdate()}render(){const{className:t}=this.props,n=this._generateTabs();return o.createElement("div",{className:a(t,s.tabs),"data-name":this.props["data-name"]},n,o.createElement(e,{reference:e=>{this._slider=e}}))}_generateTabs(){return this.activeTab.current=null,o.Children.map(this.props.children,e=>{const t=e,n=Boolean(t.props.isActive),a={reference:e=>{n&&(this.activeTab.current=e),t.props.reference&&t.props.reference(e)}};return o.cloneElement(t,a)})}_componentDidUpdate(){const e=(0,r.ensureNotNull)(this._slider).style;if(this.activeTab.current){const t=this.activeTab.current.offsetWidth,n=this.activeTab.current.offsetLeft;e.transform=`translateX(${n}px)`,e.width=t+"px",e.opacity="1"}else e.opacity="0"}}}const u=c((function(e){return o.createElement("div",{className:s.slider,ref:e.reference})}))}}]);