(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[3030],{259142:function(e,t){var n,o,i;o=[t],n=function(e){"use strict";function t(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(e,"__esModule",{value:!0});var n=!1;if("undefined"!=typeof window){var o={get passive(){n=!0}};window.addEventListener("testPassive",null,o),window.removeEventListener("testPassive",null,o)}var i="undefined"!=typeof window&&window.navigator&&window.navigator.platform&&/iP(ad|hone|od)/.test(window.navigator.platform),r=[],l=!1,s=-1,a=void 0,c=void 0,u=function(e){return r.some((function(t){return!(!t.options.allowTouchMove||!t.options.allowTouchMove(e))}))},d=function(e){var t=e||window.event;return!!u(t.target)||1<t.touches.length||(t.preventDefault&&t.preventDefault(),!1)},f=function(){setTimeout((function(){void 0!==c&&(document.body.style.paddingRight=c,c=void 0),void 0!==a&&(document.body.style.overflow=a,a=void 0)}))};e.disableBodyScroll=function(e,o){if(i){if(!e)return void console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.");if(e&&!r.some((function(t){return t.targetElement===e}))){var f={targetElement:e,options:o||{}};r=[].concat(t(r),[f]),e.ontouchstart=function(e){1===e.targetTouches.length&&(s=e.targetTouches[0].clientY)},e.ontouchmove=function(t){var n,o,i,r;1===t.targetTouches.length&&(o=e,r=(n=t).targetTouches[0].clientY-s,!u(n.target)&&(o&&0===o.scrollTop&&0<r||(i=o)&&i.scrollHeight-i.scrollTop<=i.clientHeight&&r<0?d(n):n.stopPropagation()))},l||(document.addEventListener("touchmove",d,n?{passive:!1}:void 0),l=!0)}}else{p=o,setTimeout((function(){if(void 0===c){var e=!!p&&!0===p.reserveScrollBarGap,t=window.innerWidth-document.documentElement.clientWidth;e&&0<t&&(c=document.body.style.paddingRight,document.body.style.paddingRight=t+"px")}void 0===a&&(a=document.body.style.overflow,document.body.style.overflow="hidden")}));var m={targetElement:e,options:o||{}};r=[].concat(t(r),[m])}var p},e.clearAllBodyScrollLocks=function(){i?(r.forEach((function(e){e.targetElement.ontouchstart=null,e.targetElement.ontouchmove=null})),l&&(document.removeEventListener("touchmove",d,n?{passive:!1}:void 0),l=!1),r=[],s=-1):(f(),r=[])},e.enableBodyScroll=function(e){if(i){if(!e)return void console.error("enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.");e.ontouchstart=null,e.ontouchmove=null,r=r.filter((function(t){return t.targetElement!==e})),l&&0===r.length&&(document.removeEventListener("touchmove",d,n?{passive:!1}:void 0),l=!1)}else 1===r.length&&r[0].targetElement===e?(f(),r=[]):r=r.filter((function(t){return t.targetElement!==e}))}},void 0===(i="function"==typeof n?n.apply(t,o):n)||(e.exports=i)},205305:e=>{e.exports={separator:"separator-EI7Qsb2Q",scrollable:"scrollable-EI7Qsb2Q"}},865266:(e,t,n)=>{"use strict";n.d(t,{useRovingTabindexElement:()=>r});var o=n(50959),i=n(718736);function r(e,t=[]){
const[n,r]=(0,o.useState)(!1),l=(0,i.useFunctionalRefObject)(e);return(0,o.useLayoutEffect)((()=>{const e=l.current;if(null===e)return;const t=e=>{switch(e.type){case"roving-tabindex:main-element":r(!0);break;case"roving-tabindex:secondary-element":r(!1)}};return e.addEventListener("roving-tabindex:main-element",t),e.addEventListener("roving-tabindex:secondary-element",t),()=>{e.removeEventListener("roving-tabindex:main-element",t),e.removeEventListener("roving-tabindex:secondary-element",t)}}),t),[l,n?0:-1]}},578601:(e,t,n)=>{"use strict";n.d(t,{useRowsNavigation:()=>u});var o=n(50959),i=n(650151),r=n(442092),l=n(180185),s=n(333086),a=n(32556);const c=[37,39,38,40];function u(e){const t=(0,o.useRef)(null);return(0,o.useLayoutEffect)((()=>{const e=(0,i.ensureNotNull)(t.current),n=()=>{const n=(0,r.queryTabbableElements)(e).sort(r.navigationOrderComparator);if(0===n.length||n[0].parentElement&&!m(n[0].parentElement,(0,i.ensureNotNull)(t.current))){const o=function(e){const n=f(e).sort(r.navigationOrderComparator),o=n.find((e=>m(e,(0,i.ensureNotNull)(t.current))));if(!o)return null;const l=Array.from(o.children);if(!l.length)return null;return l[0]}(e);if(null===o)return;if((0,s.becomeMainElement)(o),n.length>0)for(const e of n)(0,s.becomeSecondaryElement)(e)}};return window.addEventListener("keyboard-navigation-activation",n),n(),()=>window.removeEventListener("keyboard-navigation-activation",n)}),[]),[t,function(t){if(t.defaultPrevented)return;const n=(0,l.hashFromEvent)(t);if(!c.includes(n))return;const o=document.activeElement;if(!(o instanceof HTMLElement))return;const i=t.currentTarget;let s,u;if(e){const e=o.parentElement;s=e?Array.from(e.children):[],u=s.indexOf(o)}else s=(m=i,Array.from(m.querySelectorAll("button:not([disabled]):not([aria-disabled])")).filter((0,a.createScopedVisibleElementFilter)(m))).sort(r.navigationOrderComparator),u=s.indexOf(o);var m;if(0===s.length||-1===u)return;const v=(0,r.mapKeyCodeToDirection)(n);switch(v){case"inlinePrev":if(t.preventDefault(),!e&&0===u)break;p(d(s,u,-1));break;case"inlineNext":if(t.preventDefault(),!e&&u===s.length-1)break;p(d(s,u,1));break;case"blockPrev":case"blockNext":(n=>{if(!document.activeElement)return;const o=f(i),r=document.activeElement.parentElement;if(!r)return;const l=Array.from(r.children).indexOf(document.activeElement);if(-1===l)return;const s=o["blockNext"===n?o.indexOf(r)+1:o.indexOf(r)-1];if(!s)return;t.preventDefault();const a=Array.from(s.children);a.length&&(!e&&l<=a.length-1?p(a[l]):p(a[0]))})(v)}}]}function d(e,t,n){return e[(t+e.length+n)%e.length]}function f(e){return Array.from(e.querySelectorAll('[data-role="row"]')).filter((0,a.createScopedVisibleElementFilter)(e))}function m(e,t){const n=(0,i.ensureNotNull)(e.parentElement).offsetTop,o=n+(0,i.ensureNotNull)(e.parentElement).clientHeight,r=t.scrollTop,l=r+t.clientHeight;return n>=r&&o<=l}function p(e){document.activeElement&&(0,s.becomeSecondaryElement)(document.activeElement),(0,s.becomeMainElement)(e),e.focus()}},876207:(e,t,n)=>{"use strict";n.r(t),n.d(t,{
ConfirmInputsDialogRenderer:()=>v});var o=n(50959),i=n(609838),r=n(976669),l=n(370981),s=n(742554),a=n(80831),c=n(329452),u=n(601227),d=n(205305);function f(e){const{title:t,confirmInputs:f,inputsProperty:m,studyMetaInfo:p,model:v,confirmInputsType:h,onCancel:y,onSubmit:g,onClose:b,onStudyInputChange:E}=e,[w,S]=(0,o.useState)(!0),C=(0,o.useMemo)((function(){const e=new c.Delegate;return{isInputsStudy:!0,symbolsResolved:()=>e,resolvedSymbolInfoBySymbol:()=>null,tempProperties:m}}),[]),I=(0,o.useRef)(null),[_,T]=(0,o.useState)(N());return(0,o.useEffect)((()=>{if(!u.CheckMobile.any()&&w&&"symbol"===h&&I.current){const e=I.current.querySelector("input");e&&e.focus()}}),[w]),o.createElement(r.AdaptiveConfirmDialog,{dataName:"confirm-inputs-dialog",title:t,isOpened:w,onSubmit:function(){g(m.state().inputs),D()},onCancel:y,onClickOutside:D,onClose:D,render:()=>o.createElement(o.Fragment,null,o.createElement("div",{className:d.separator}),o.createElement(s.TouchScrollContainer,{className:d.scrollable,onScroll:x},o.createElement(a.InputsTabContent,{reference:I,property:m,studyMetaInfo:p,model:v,study:C,inputs:f,onStudyInputChange:O}))),defaultActionOnClose:"none",submitButtonText:i.t(null,void 0,n(33391)),submitButtonDisabled:_,submitOnEnterKey:!1});function x(){l.globalCloseDelegate.fire()}function D(){S(!1),b()}function N(){const{inputs:e}=m.state();for(const t of f)if("symbol"===t.type&&!t.optional&&""===e[t.id])return!0;return!1}function O(e,t){E?.(e,t),T(N())}}var m=n(995553),p=n(651674);class v extends m.DialogRenderer{constructor(e,t,n,o,i,r,l,s,a){super(),this._handleClose=()=>{this._rootInstance?.unmount(),this._setVisibility(!1),this._onClose()},this._title=e,this._confirmInputs=t,this._model=r,this._confirmInputsType=o,this._studyMetaInfo=i,this._onSubmit=l,this._onClose=s,this._onStudyInputChange=a,this._inputsProperty=n}show(){this.visible().value()||(this._rootInstance=(0,p.createReactRoot)(o.createElement(f,{title:this._title,confirmInputs:this._confirmInputs,inputsProperty:this._inputsProperty,studyMetaInfo:this._studyMetaInfo,model:this._model,confirmInputsType:this._confirmInputsType,onSubmit:this._onSubmit,onCancel:()=>{},onClose:this._handleClose,onStudyInputChange:this._onStudyInputChange}),this._container),this._setVisibility(!0))}hide(){this._handleClose()}}},759393:(e,t,n)=>{"use strict";n.r(t),n.d(t,{selectInputValuesOnChart:()=>a});var o=n(650151),i=n(926048),r=n(609838),l=n(457540),s=n(651407);i.colorsPalette["color-cold-gray-500"];async function a(e,t,i,a,c){let u,d=null;const f=(0,l.getInputGroups)(t);e.model().model();for await(const e of f)await m(e).catch((e=>{throw new Error(e)}));return{customSourceId:d?.id(),destPane:u};async function m(e){if((0,l.isGroup)(e))if((0,l.isInputInlines)(e)){const t=function(e){if(2!==e.length||e[0].type===e[1].type)return null;return"price"===e[0].type?{price:e[0],time:e[1]}:{price:e[1],time:e[0]}}(e.children);if(t){const{time:o,price:i}=t,l=o.inline?r.t(null,{replace:{inputInline:o.inline,studyShortDescription:a}},n(710679)):r.t(null,{replace:{
studyShortDescription:a}},n(692229)),s=h(e.id);await v(e,"all",s??l,o.id,i.id)}else for await(const t of e.children)await p(t)}else for await(const t of e.children)await m(t);else await p(e)}async function p(e){const t="time"===e.type,o=t?"time":"price",i=function(){if(e.inline){const t=h(e.inline);if(t)return t}if(e.tooltip)return e.tooltip;const o=e.name?r.t(null,{replace:{inputTitle:e.name,studyShortDescription:a}},n(959451)):r.t(null,{replace:{studyShortDescription:a}},n(860935)),i=e.name?r.t(null,{replace:{inputTitle:e.name,studyShortDescription:a}},n(994238)):r.t(null,{replace:{studyShortDescription:a}},n(224404));return t?o:i}(),l=t?e.id:void 0,s=t?void 0:e.id;await v(e,o,i,l,s)}async function v(t,n,r,l,a){const c=await e.requestSelectPoint({pointType:n,pane:u,lineColor:void 0,selectPointMode:s.SelectPointMode.Study},r);void 0===u&&(u=c.pane);const d=i.childs().inputs;d&&(l&&(0,o.ensureDefined)(d.child(l)).setValue(1e3*(c.point.time||0)),a&&(0,o.ensureDefined)(d.child(a)).setValue(c.point.price))}function h(e){let t;return c.filter((t=>t.inline===e)).forEach((e=>{e.tooltip&&(t=e.tooltip)})),t}}},840976:(e,t,n)=>{"use strict";n.d(t,{useEnsuredContext:()=>r});var o=n(50959),i=n(650151);function r(e){return(0,i.ensureNotNull)((0,o.useContext)(e))}},102478:(e,t,n)=>{"use strict";n.d(t,{useResizeObserver:()=>o.useResizeObserver});var o=n(664332)},333086:(e,t,n)=>{"use strict";var o;function i(e){e.dispatchEvent(new CustomEvent("roving-tabindex:main-element"))}function r(e){e.dispatchEvent(new CustomEvent("roving-tabindex:secondary-element"))}n.d(t,{becomeMainElement:()=>i,becomeSecondaryElement:()=>r}),function(e){e.MainElement="roving-tabindex:main-element",e.SecondaryElement="roving-tabindex:secondary-element"}(o||(o={}))},925931:(e,t,n)=>{"use strict";n.d(t,{nanoid:()=>o});let o=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce(((e,t)=>e+=(t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_"),"")}}]);