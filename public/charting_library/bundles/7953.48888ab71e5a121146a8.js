(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[7953],{21866:e=>{e.exports={radio:"radio-ZflVGoxm",input:"input-ZflVGoxm",box:"box-ZflVGoxm",reverse:"reverse-ZflVGoxm",label:"label-ZflVGoxm",wrapper:"wrapper-ZflVGoxm",noOutline:"noOutline-ZflVGoxm"}},84707:e=>{e.exports={titleWrap:"titleWrap-24p2N42k",groupFooter:"groupFooter-24p2N42k"}},84050:e=>{e.exports={inlineRow:"inlineRow-3IOXimxZ"}},92770:e=>{e.exports={icon:"icon-3oPFhRYI"}},38869:e=>{e.exports={input:"input-1zfqRRWX",symbol:"symbol-1zfqRRWX",checkbox:"checkbox-1zfqRRWX",label:"label-1zfqRRWX",dropdownMenu:"dropdownMenu-1zfqRRWX",sessionStart:"sessionStart-1zfqRRWX",sessionEnd:"sessionEnd-1zfqRRWX",sessionInputContainer:"sessionInputContainer-1zfqRRWX",sessionDash:"sessionDash-1zfqRRWX",inputGroup:"inputGroup-1zfqRRWX",textarea:"textarea-1zfqRRWX",inlineGroup:"inlineGroup-1zfqRRWX",hasTooltip:"hasTooltip-1zfqRRWX"}},64412:e=>{e.exports={wrap:"wrap--0fHTrjW",labelWrap:"labelWrap--0fHTrjW",label:"label--0fHTrjW",hasTooltip:"hasTooltip--0fHTrjW"}},6867:(e,t,n)=>{"use strict";n.d(t,{splitThousands:()=>s});var o=n(75496);function s(e,t="&nbsp;"){let n=e+"";-1!==n.indexOf("e")&&(n=function(e){return(0,o.fixComputationError)(e).toFixed(10).replace(/\.?0+$/,"")}(Number(e)));const s=n.split(".");return s[0].replace(/\B(?=(\d{3})+(?!\d))/g,t)+(s[1]?"."+s[1]:"")}},545:(e,t,n)=>{"use strict";n.d(t,{ModelContext:()=>s,bindModel:()=>r});var o=n(67294);const s=o.createContext(null);function r(e,t){return o.createElement(s.Consumer,null,n=>n?o.createElement(e,{...Object.assign({model:n},t)}):null)}},17739:(e,t,n)=>{"use strict";n.d(t,{StylePropertyContext:()=>r,StylePropertyContainer:()=>a,bindPropertyContext:()=>l});var o=n(67294),s=n(545);const r=o.createContext(null);class a extends o.PureComponent{constructor(){super(...arguments),this._setValue=(e,t,n)=>{const{model:o}=this.props;o.setProperty(e,t,n)}}componentDidMount(){const{property:e}=this.props;e.subscribe(this,()=>this.forceUpdate())}componentWillUnmount(){const{property:e}=this.props;e.unsubscribeAll(this)}render(){const e={setValue:this._setValue};return o.createElement(r.Provider,{value:e},this.props.children)}}function l(e,t){return(0,s.bindModel)(({model:n})=>o.createElement(a,{model:n,property:t.property},o.createElement(e,{...t})),t)}},69343:(e,t,n)=>{"use strict";n.d(t,{InputTooltip:()=>h});var o=n(67294),s=n(94184),r=n.n(s),a=n(21659),l=n(54622),i=n(89505),p=n(92770),u=n(98646);function c(){document.removeEventListener("scroll",c),document.removeEventListener("touchstart",c),(0,l.hide)()}function d(e){i.mobiletouch&&((0,l.showOnElement)(e.currentTarget,{tooltipDelay:0}),document.addEventListener("scroll",c),document.addEventListener("touchstart",c))}function h(e){const{className:t,title:n}=e;return o.createElement(a.Icon,{icon:u,className:r()(t,"apply-common-tooltip",p.icon),title:n,onClick:d})}},71347:(e,t,n)=>{"use strict";n.d(t,{isGroup:()=>s,isInputInlines:()=>r,getInputGroups:()=>a});var o=n(16282);function s(e){return e.hasOwnProperty("groupType")}function r(e){
return s(e)&&"inline"===e.groupType}function a(e){const t=[],n=new Map,s=new Map;return s.set(void 0,new Map),e.forEach(e=>{const{group:r,inline:a}=e;if(void 0!==r||void 0!==a)if(void 0!==r)if(void 0!==a)if(n.has(r)){const t=(0,o.ensureDefined)(n.get(r));let i;s.has(t)?i=(0,o.ensureDefined)(s.get(t)):(i=new Map,s.set(t,i)),l(e,"inline",a,i,t.children)}else{const o={id:a,groupType:"inline",children:[e]},l={id:r,groupType:"group",children:[o]},i=new Map;i.set(a,o),s.set(l,i),n.set(r,l),t.push(l)}else l(e,"group",r,n,t);else{const n=(0,o.ensureDefined)(s.get(void 0));l(e,"inline",(0,o.ensureDefined)(a),n,t)}else t.push(e)}),t}function l(e,t,n,s,r){if(s.has(n))(0,o.ensureDefined)(s.get(n)).children.push(e);else{const o={id:n,groupType:t,children:[e]};s.set(n,o),r.push(o)}}},92385:(e,t,n)=>{"use strict";n.d(t,{InputGroup:()=>l});var o=n(67294),s=n(94184),r=n(59086),a=n(38869);function l(e){const{className:t}=e,n=(0,o.useContext)(r.PropertyTable.InlineRowContext);return o.createElement("div",{className:s(a.inputGroup,n&&a.inlineGroup,t)},e.children)}},5677:(e,t,n)=>{"use strict";n.d(t,{InputRow:()=>p});var o=n(74245),s=n(67294),r=n(16282),a=n(31254),l=n(59086),i=n(69343);class p extends s.PureComponent{render(){const{label:e,children:t,input:n,disabled:p,onChange:u,labelAlign:c,grouped:d,tooltip:h,offset:m}=this.props;return s.createElement(l.PropertyTable.Row,null,s.createElement(l.PropertyTable.Cell,{placement:"first",verticalAlign:c,grouped:d,offset:m},void 0!==e?e:(0,o.t)((0,r.ensureDefined)(n).name,{context:"input"})),s.createElement(l.PropertyTable.Cell,{placement:"last",grouped:d},t||s.createElement(a.StudyInput,{input:(0,r.ensureDefined)(n),onChange:u,disabled:p,hasTooltip:Boolean(h)}),h&&s.createElement(i.InputTooltip,{title:h})))}}},46428:(e,t,n)=>{"use strict";n.d(t,{InputsTabContent:()=>z});var o,s=n(67294),r=n(74245),a=n(3428),l=n(59086),i=n(60624),p=n(94184),u=n.n(p),c=n(21866),d=n.n(c);const h=(0,i.makeSwitchGroupItem)(((o=class extends s.PureComponent{constructor(){super(...arguments),this._onChange=()=>{this.props.onChange&&this.props.onChange(this.props.value)}}render(){const e=p(this.props.className,d().radio,{[d().reverse]:Boolean(this.props.labelPositionReverse)}),t=p(d().label,{[d().disabled]:this.props.disabled}),n=p(d().box,{[d().noOutline]:-1===this.props.tabIndex});let o=null;return this.props.label&&(o=s.createElement("span",{className:t},this.props.label)),s.createElement("label",{className:e},s.createElement("span",{className:d().wrapper,title:this.props.title},s.createElement("input",{id:this.props.id,tabIndex:this.props.tabIndex,autoFocus:this.props.autoFocus,role:this.props.role,className:d().input,type:"radio",name:this.props.name,checked:this.props.checked,disabled:this.props.disabled,value:this.props.value,onChange:this._onChange,ref:this.props.reference}),s.createElement("span",{className:n})),o)}}).defaultProps={value:"on"},o));var m=n(16282),g=n(44627),C=n(9477),v=n(69343),b=n(38869);function y(e){const{children:t,input:n,disabled:o,onChange:p,grouped:u,tooltip:c}=e,d=(0,
s.useContext)(a.PropertyContext),{values:y,setValue:f}=(0,m.ensureNotNull)(d),T=y[n.id],[E,x]=(0,s.useState)(T?"another-symbol":"main-symbol"),[_,P]=(0,s.useState)(T);return(0,s.useEffect)(()=>{T&&P(T)},[T]),s.createElement(i.SwitchGroup,{name:"symbol-source-"+n.id,values:[E],onChange:function(e){x(e),"main-symbol"===e?(0,C.setter)(f)("",n.id,n.name):"another-symbol"===e&&_&&(0,C.setter)(f,p)(_,n.id,n.name)}},s.createElement(l.PropertyTable.Row,null,s.createElement(l.PropertyTable.Cell,{colSpan:2,placement:"first",grouped:u},s.createElement(h,{value:"main-symbol",className:b.checkbox,disabled:o,label:s.createElement("span",{className:b.label},(0,r.t)("Main chart symbol",{context:"input"}))}))),s.createElement(l.PropertyTable.Row,null,s.createElement(l.PropertyTable.Cell,{placement:"first",grouped:u},s.createElement(h,{value:"another-symbol",className:b.checkbox,disabled:o,label:s.createElement("span",{className:b.label},(0,r.t)("Another symbol",{context:"input"}))})),s.createElement(l.PropertyTable.Cell,{placement:"last",grouped:u},t||s.createElement(g.SymbolInput,{input:(0,m.ensureDefined)(n),onChange:p,disabled:o||"main-symbol"===E,hasTooltip:Boolean(c)}),c&&s.createElement(v.InputTooltip,{title:c}))))}var f=n(58078);class T extends s.PureComponent{render(){const{label:e,input:t,tooltip:n}=this.props;return s.createElement(l.PropertyTable.Row,null,s.createElement(l.PropertyTable.Cell,{placement:"first",colSpan:2},s.createElement(f.BoolInput,{label:e,input:t,hasTooltip:Boolean(n)}),n&&s.createElement(v.InputTooltip,{title:n})))}}var E=n(5677),x=n(76898),_=n(72913),P=n(72953);class I extends s.PureComponent{constructor(){super(...arguments),this._onChange=e=>{const{input:{id:t,name:n},onChange:o}=this.props;o(e.currentTarget.value,t,n)}}render(){const{input:{defval:e},value:t,disabled:n,onBlur:o,onKeyDown:r}=this.props;return s.createElement(x.Textarea,{className:u()(b.input,b.textarea,_.InputClasses.FontSizeMedium),value:void 0===t?e:t,onChange:this._onChange,onBlur:o,onKeyDown:r,disabled:n})}}const S=(0,P.debounced)(I),w=(0,C.bind)(S);var N=n(64412);function R(e){const{input:t,label:n,tooltip:o}=e;return s.createElement(l.PropertyTable.Row,null,s.createElement(l.PropertyTable.Cell,{placement:"first",colSpan:2,className:N.wrap},s.createElement("div",{className:N.labelWrap},s.createElement("span",{className:u()(N.label,o&&N.hasTooltip)},n),o&&s.createElement(v.InputTooltip,{title:o})),s.createElement(w,{input:t})))}function k(e){const{input:t,tooltip:n}=e;return"symbol"===t.type&&t.optional?s.createElement(y,{input:t,tooltip:n}):"bool"===t.type?s.createElement(T,{label:(0,r.t)(t.name,{context:"input"}),input:t,tooltip:n}):"text_area"===t.type?s.createElement(R,{label:(0,r.t)(t.name,{context:"input"}),input:t,tooltip:n}):s.createElement(E.InputRow,{labelAlign:function(e){switch(e){case"session":return"adaptive";case"time":return"topCenter";default:return}}(t.type),input:t,tooltip:n})}var V=n(47001),W=n(84050);function D(e){const{content:t}=e;let n;return s.createElement(l.PropertyTable.InlineRowContext.Provider,{
value:!0},s.createElement("div",{className:W.inlineRow},t.children.map((e,o)=>(void 0!==e.tooltip&&(n=e.tooltip),s.createElement(k,{key:e.id,input:e,tooltip:o===t.children.length-1?n:void 0})))))}var B=n(71347),G=n(84707);function O(e){const{content:t}=e;return(0,B.isGroup)(t)?(0,B.isInputInlines)(t)?s.createElement(D,{content:t}):s.createElement(s.Fragment,null,s.createElement("div",{className:G.titleWrap},s.createElement(V.GroupTitleSection,{title:(0,r.t)(t.id,{context:"input"}),name:t.id})),t.children.map(e=>(0,B.isGroup)(e)?s.createElement(D,{key:e.id,content:e}):s.createElement(k,{key:e.id,input:e,tooltip:e.tooltip})),s.createElement("div",{className:G.groupFooter})):s.createElement(k,{input:t,tooltip:t.tooltip})}const M={offset:(0,r.t)("Offset")};class z extends s.PureComponent{render(){const{reference:e,inputs:t,property:n,study:o,model:r,onStudyInputChange:a}=this.props,{offset:i,offsets:p}=n;return s.createElement(l.PropertyTable,{reference:e},s.createElement(F,{study:o,model:r,property:n.inputs,inputs:t,onStudyInputChange:a}),i&&this._createOffsetSection(i),p&&p.childNames().map(e=>{const t=p.childs()[e];return this._createOffsetSection(t)}))}_createOffsetSection(e){const t=e.childs();return s.createElement(F,{key:"offset_"+t.title.value(),study:this.props.study,model:this.props.model,inputs:[A(t)],property:e})}}function F(e){const{study:t,model:n,inputs:o,property:r,onStudyInputChange:l}=e,i=(0,s.useMemo)(()=>(0,B.getInputGroups)(o),[o]);return s.createElement(a.PropertyContainer,{property:r,study:t,model:n,onStudyInputChange:l},i.map(e=>s.createElement(O,{key:e.id,content:e})))}function A(e){return{id:"val",name:e.title.value()||M.offset,defval:e.val.value(),type:"integer",min:e.min.value(),max:e.max.value()}}},58078:(e,t,n)=>{"use strict";n.d(t,{BoolInputComponent:()=>p,BoolInput:()=>u});var o=n(67294),s=n(18270),r=n(94184),a=n.n(r),l=n(9477),i=n(38869);class p extends o.PureComponent{constructor(){super(...arguments),this._onChange=()=>{const{input:{id:e,name:t},value:n,onChange:o}=this.props;o(!n,e,t)}}render(){const{input:{defval:e},value:t,disabled:n,label:r,hasTooltip:l}=this.props,p=void 0===t?e:t;return o.createElement(s.Checkbox,{className:a()(i.checkbox,l&&i.hasTooltip),disabled:n,checked:p,onChange:this._onChange,label:o.createElement("span",{className:i.label},r),labelAlignBaseline:!0})}}const u=(0,l.bind)(p)},72953:(e,t,n)=>{"use strict";n.d(t,{debounced:()=>r});var o=n(67294);const s={blur:0,commit:0,change:1/0};function r(e,t=s){return class extends o.PureComponent{constructor(e){super(e),this._onChange=(e,n,o)=>{const s=t.change;s?(clearTimeout(this._timeout),this.setState({value:e},()=>{s!==1/0&&(this._timeout=setTimeout(()=>this._flush(),s))})):this._flush(e)},this._onBlur=()=>{this._debounce(t.blur);const{onBlur:e}=this.props;e&&e()},this._onKeyDown=e=>{13===e.keyCode&&this._debounce(t.commit)},this.state={prevValue:e.value,value:e.value}}componentWillUnmount(){this._flush()}render(){const{value:t}=this.state;return o.createElement(e,{...this.props,value:t,onChange:this._onChange,
onBlur:this._onBlur,onKeyDown:this._onKeyDown})}static getDerivedStateFromProps(e,t){return e.value===t.prevValue?t:{prevValue:e.value,value:e.value}}_debounce(e){e?(clearTimeout(this._timeout),e!==1/0&&(this._timeout=setTimeout(()=>this._flush(),e))):this.setState(e=>{this._flush(e.value)})}_flush(e){const{input:{id:t,name:n},onChange:o}=this.props,{prevValue:s,value:r}=this.state;clearTimeout(this._timeout);const a=void 0!==e?e:r;void 0!==a&&a!==s&&o(a,t,n)}}}},30925:(e,t,n)=>{"use strict";n.d(t,{FloatInputComponent:()=>c,FloatInput:()=>d});var o=n(67294),s=n(94184),r=n.n(s),a=n(47329),l=n(9477),i=n(72953),p=n(38869);class u extends o.PureComponent{render(){const{hasTooltip:e}=this.props;return o.createElement(a.NumericInput,{...this.props,className:r()(p.input,e&&p.hasTooltip),stretch:!1})}}const c=(0,i.debounced)(u,{change:1/0,commit:0,blur:0}),d=(0,l.bind)(c)},97720:(e,t,n)=>{"use strict";n.d(t,{IntegerInputComponent:()=>c,IntegerInput:()=>d});var o=n(67294),s=n(94184),r=n.n(s),a=n(9477),l=n(72953),i=n(47329),p=n(38869);class u extends o.PureComponent{render(){const{hasTooltip:e}=this.props;return o.createElement(i.NumericInput,{...this.props,mode:"integer",className:r()(p.input,e&&p.hasTooltip),stretch:!1})}}const c=(0,l.debounced)(u,{change:1/0,commit:0,blur:0}),d=(0,a.bind)(c)},47329:(e,t,n)=>{"use strict";n.d(t,{NumericInput:()=>a});var o=n(67294),s=n(16282),r=n(91436);class a extends o.PureComponent{constructor(){super(...arguments),this._container=null,this._handleContainerRef=e=>this._container=e,this._onChange=(e,t)=>{const{input:{id:n,name:o},onChange:s,onBlur:r}=this.props;s(e,n,o),"step"===t&&r&&r()},this._onBlur=e=>{const{onBlur:t}=this.props;if(t){const n=(0,s.ensureNotNull)(this._container);n.contains(document.activeElement)||n.contains(e.relatedTarget)||t()}}}render(){const{input:{defval:e,min:t,max:n,step:s},value:a,disabled:l,onKeyDown:i,className:p,mode:u,stretch:c}=this.props;return o.createElement(r.NumberInput,{className:p,value:Number(void 0===a?e:a),min:t,max:n,step:s,mode:u,onBlur:this._onBlur,onValueChange:this._onChange,onKeyDown:i,disabled:l,containerReference:this._handleContainerRef,fontSizeStyle:"medium",roundByStep:!1,stretch:c})}}},56667:(e,t,n)=>{"use strict";n.d(t,{SelectInputComponent:()=>u,SelectInput:()=>c});var o=n(67294),s=n(94184),r=n.n(s),a=n(74245),l=n(81891),i=n(9477),p=n(38869);class u extends o.PureComponent{constructor(){super(...arguments),this._onChange=e=>{const{input:{id:t,name:n},onChange:o}=this.props;o(e,t,n)}}render(){const{input:{id:e,defval:t,options:n,optionsTitles:s},value:i,disabled:u,hasTooltip:c}=this.props,d=n.map(e=>{const t=s&&s[e]?s[e]:e;return{value:e,content:(0,a.t)(t,{context:"input"})}}),h=void 0!==i&&n.includes(i)?i:t;return o.createElement(l.Select,{id:e,className:r()(p.input,c&&p.hasTooltip),menuClassName:p.dropdownMenu,value:h,items:d,onChange:this._onChange,disabled:u})}}const c=(0,i.bind)(u)},31254:(e,t,n)=>{"use strict";n.d(t,{StudyInput:()=>q})
;var o=n(67294),s=n(2957),r=n(97720),a=n(30925),l=n(58078),i=n(94184),p=n.n(i),u=n(50268),c=n(9477),d=n(72953),h=n(38869);class m extends o.PureComponent{constructor(){super(...arguments),this._onChange=e=>{const{input:{id:t,name:n},onChange:o}=this.props;o(e.currentTarget.value,t,n)}}render(){const{input:{defval:e},value:t,disabled:n,onBlur:s,onKeyDown:r,hasTooltip:a}=this.props;return o.createElement(u.InputControl,{className:p()(h.input,a&&h.hasTooltip),value:void 0===t?e:t,onChange:this._onChange,onBlur:s,onKeyDown:r,disabled:n})}}const g=(0,d.debounced)(m),C=(0,c.bind)(g);var v=n(44627),b=n(16282),y=n(92385),f=n(37019);function T(e=""){const[,t="",n="",o="",s=""]=Array.from(e.match(/^(\d\d)(\d\d)-(\d\d)(\d\d)/)||[]);return[`${t}:${n}`,`${o}:${s}`]}class E extends o.PureComponent{constructor(e){super(e),this._onStartPick=e=>{this.setState({startTime:e},this._onChange)},this._onEndPick=e=>{this.setState({endTime:e},this._onChange)},this._onChange=()=>{const{input:{id:e,name:t},onChange:n}=this.props,{startTime:o,endTime:s}=this.state;n(o.replace(":","")+"-"+s.replace(":",""),e,t)};const t=e.value||e.input.defval,[n,o]=T(t);this.state={prevValue:t,startTime:n,endTime:o}}render(){const{startTime:e,endTime:t}=this.state,{hasTooltip:n}=this.props;return o.createElement(y.InputGroup,{className:p()(n&&h.hasTooltip)},o.createElement("div",{className:h.sessionStart},o.createElement(f.TimeInput,{className:p()(h.input,h.sessionInputContainer),name:"start",value:(0,b.ensureDefined)(e),onChange:this._onStartPick}),o.createElement("span",{className:h.sessionDash}," — ")),o.createElement("div",{className:h.sessionEnd},o.createElement(f.TimeInput,{className:p()(h.input,h.sessionInputContainer),name:"end",value:(0,b.ensureDefined)(t),onChange:this._onEndPick})))}static getDerivedStateFromProps(e,t){if(e.value===t.prevValue)return t;const[n,o]=T(e.value);return{prevValue:e.value,startTime:n,endTime:o}}}const x=(0,c.bind)(E);var _=n(74245),P=n(7424),I=n(11753),S=n.n(I),w=n(3428),N=n(56667),R=n(21542);const k={open:(0,_.t)("open"),high:(0,_.t)("high"),low:(0,_.t)("low"),close:(0,_.t)("close"),hl2:(0,_.t)("hl2"),hlc3:(0,_.t)("hlc3"),ohlc4:(0,_.t)("ohlc4"),hlcc4:(0,_.t)("hlcc4")};class V extends o.PureComponent{render(){const{input:e}=this.props,{study:t,model:n}=this.context;let s={...k};delete s.hlcc4;const r=(0,R.createAdapter)(t);if(t&&this._isStudy(t)&&t.isChildStudy()){const t=r.parentSource(),n=t.title(),o=S().getChildSourceInputTitles(e,t.metaInfo(),n);s={...s,...o}}if(P.enabled("study_on_study")&&t&&this._isStudy(t)&&(t.isChildStudy()||S().canBeChild(t.metaInfo()))){const e=[t,...r.getAllChildren()];n.model().allStudies().filter(t=>t.canHaveChildren()&&!e.includes(t)).forEach(e=>{const t=e.title(!0,void 0,!0),n=e.sourceId()||"#"+e.id(),o=e.metaInfo(),r=o.styles,a=o.plots||[];if(1===a.length)s[n+"$0"]=t;else if(a.length>1){const e=a.reduce((e,o,s)=>{if(!S().canPlotBeSourceOfChildStudy(o.type))return e;let a;try{a=(0,b.ensureDefined)((0,b.ensureDefined)(r)[o.id]).title}catch(e){a=o.id}return{...e,[`${n}$${s}`]:`${t}: ${a}`}
},{});s={...s,...e}}})}const a={...e,type:"text",options:Object.keys(s),optionsTitles:s};return o.createElement(N.SelectInput,{...this.props,input:a})}_isStudy(e){return!e.hasOwnProperty("isInputsStudy")}}V.contextType=w.PropertyContext;var W=n(69938),D=n(61250),B=n(81891);const G=void 0,O=["1","3","5","15","30","45","60","120","180","240","1D","1W","1M"];class M extends o.PureComponent{constructor(){super(...arguments),this._onChange=e=>{const{input:{id:t,name:n},onChange:o}=this.props;o(e,t,n)}}render(){const{input:e,value:t,disabled:n,hasTooltip:s}=this.props,r=W.Interval.parse(void 0===t?e.defval:t),a=r.isValid()?r.value():t,l=G?G.get().filter(e=>!W.Interval.parse(e).isRange()):[],i=(0,D.mergeResolutions)(O,l);return i.unshift(""),o.createElement(B.Select,{id:e.id,className:p()(h.input,h.resolution,s&&h.hasTooltip),menuClassName:p()(h.dropdownMenu,h.resolution),items:(u=i,u.map(e=>({value:e,content:""===e?(0,_.t)("Chart"):(0,D.getTranslatedResolutionModel)(e).hint}))),value:a,onChange:this._onChange,disabled:n});var u}}const z=(0,c.bind)(M);var F=n(82774),A=n(17739);class X extends o.PureComponent{render(){return o.createElement(w.PropertyContext.Consumer,null,e=>e?this._getColorInputWithContext(e):null)}_getColorInputWithContext(e){var t;const{input:{id:n},disabled:s,hasTooltip:r}=this.props,{model:a,study:l}=e;if("properties"in l||"tempProperties"in l){const e="properties"in l?l.properties().inputs[n]:null===(t=l.tempProperties)||void 0===t?void 0:t.inputs.child(n);return o.createElement(A.StylePropertyContainer,{model:a,property:e},o.createElement(F.ColorWithThicknessSelect,{className:p()(r&&h.hasTooltip),color:e,disabled:s}))}return null}}class q extends o.PureComponent{render(){const{input:e,disabled:t,onChange:n,tzName:i,hasTooltip:p}=this.props;if((0,s.isStudyInputOptionsInfo)(e))return o.createElement(N.SelectInput,{input:e,disabled:t,onChange:n,hasTooltip:p});switch(e.type){case"integer":return o.createElement(r.IntegerInput,{input:e,disabled:t,onChange:n,hasTooltip:p});case"float":case"price":return o.createElement(a.FloatInput,{input:e,disabled:t,onChange:n,hasTooltip:p});case"bool":return o.createElement(l.BoolInput,{input:e,disabled:t,onChange:n,hasTooltip:p});case"text":return o.createElement(C,{input:e,disabled:t,onChange:n,hasTooltip:p});case"symbol":return o.createElement(v.SymbolInput,{input:e,disabled:t,onChange:n,hasTooltip:p});case"session":return o.createElement(x,{input:e,disabled:t,onChange:n,hasTooltip:p});case"source":return o.createElement(V,{input:e,disabled:t,onChange:n,hasTooltip:p});case"resolution":return o.createElement(z,{input:e,disabled:t,onChange:n,hasTooltip:p});case"time":return null;case"color":return o.createElement(X,{input:e,disabled:t,onChange:n,hasTooltip:p});default:return null}}}},82774:(e,t,n)=>{"use strict";n.d(t,{ColorWithThicknessSelect:()=>C});var o=n(67294),s=n(14563),r=n(74245),a=n(49972),l=n(60084),i=n(17739),p=n(79782),u=n(27235),c=n(42254);const d=new a.TranslatedString("change thickness",(0,
r.t)("change thickness")),h=new a.TranslatedString("change color",(0,r.t)("change color")),m=new a.TranslatedString("change opacity",(0,r.t)("change opacity")),g=[1,2,3,4];class C extends o.PureComponent{constructor(){super(...arguments),this._trackEventLabel=null,this._getTransparencyValue=()=>{const{transparency:e}=this.props;return e?e.value():0},this._getOpacityValue=()=>{const{color:e}=this.props,t=(0,u.getPropertyValue)(e);if(t)return(0,l.isHexColor)(t)?(0,l.transparencyToAlpha)(this._getTransparencyValue()):(0,s.parseRgba)(t)[3]},this._getColorValueInHex=()=>{const{color:e}=this.props,t=(0,u.getPropertyValue)(e);return t?(0,l.isHexColor)(t)?t:(0,s.rgbToHexString)((0,s.parseRgb)(t)):null},this._onThicknessChange=e=>{const{thickness:t}=this.props;void 0!==t&&this._setProperty(t,e,d)},this._onColorChange=e=>{const{color:t,isPaletteColor:n}=this.props,o=(0,u.getPropertyValue)(t);let r=0;o&&(r=(0,l.isHexColor)(o)?this._getTransparencyValue():(0,l.alphaToTransparency)((0,s.parseRgba)(o)[3])),this._setProperty(t,(0,l.generateColor)(String(e),r,!0),h),this._trackEventLabel="Plot color > "+(n?"Palette":"Single")},this._onOpacityChange=e=>{const{color:t}=this.props,n=(0,u.getPropertyValue)(t);this._setProperty(t,(0,l.generateColor)(n,(0,l.alphaToTransparency)(e),!0),m)},this._onPopupClose=()=>{this._trackEventLabel&&((0,c.trackEvent)("GUI","Study settings",this._trackEventLabel),this._trackEventLabel=null)}}componentWillUnmount(){this._onPopupClose()}render(){const{selectOpacity:e=!0,disabled:t,className:n}=this.props;return o.createElement(p.ColorSelect,{className:n,disabled:t,color:this._getColorValueInHex(),selectOpacity:e,opacity:this._getOpacityValue(),thickness:this._getThicknessValue(),thicknessItems:g,onColorChange:this._onColorChange,onOpacityChange:this._onOpacityChange,onThicknessChange:this._onThicknessChange,onPopupClose:this._onPopupClose})}_getThicknessValue(){const{thickness:e}=this.props;return e?(0,u.getPropertyValue)(e):void 0}_setProperty(e,t,n){const{setValue:o}=this.context;(0,u.setPropertyValue)(e,e=>o(e,t,n))}}C.contextType=i.StylePropertyContext},27235:(e,t,n)=>{"use strict";function o(e){return Array.isArray(e)?e[0].value():e.value()}function s(e,t){if(Array.isArray(e))for(const n of e)t(n);else t(e)}n.d(t,{getPropertyValue:()=>o,setPropertyValue:()=>s})},21786:(e,t,n)=>{"use strict";n.d(t,{SplitThousandsFormatter:()=>r});var o=n(6867),s=n(74605);class r{constructor(e=" "){this._divider=e}format(e){const t=(0,o.splitThousands)(e,this._divider);return(0,s.isRtl)()?(0,s.startWithLTR)(t):t}parse(e){const t=(0,s.stripLTRMarks)(e).split(this._divider).join(""),n=Number(t);return isNaN(n)||/e/i.test(t)?{res:!1}:{res:!0,value:n,suggest:this.format(n)}}}},98646:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18" fill="none"><path stroke="currentColor" d="M8 8.5h1.5V14"/><circle fill="currentColor" cx="9" cy="5" r="1"/><path stroke="currentColor" d="M16.5 9a7.5 7.5 0 1 1-15 0 7.5 7.5 0 0 1 15 0z"/></svg>'}}]);