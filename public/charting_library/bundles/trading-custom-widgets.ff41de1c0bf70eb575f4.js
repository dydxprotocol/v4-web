(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[3809],{86785:t=>{t.exports={"css-value-calculator-width":"150px",calculator:"calculator-3AwNSLGC",calculator__inputBorder:"calculator__inputBorder-3AwNSLGC",calculator__input:"calculator__input-3AwNSLGC",calculator__input__innerInput:"calculator__input__innerInput-3AwNSLGC",calculator__btns:"calculator__btns-3AwNSLGC",buttonIcon:"buttonIcon-3AwNSLGC"}},36656:t=>{t.exports={menuBox:"menuBox-2VgDDAqn"}},14442:(t,e,n)=>{"use strict";n.r(e),n.d(e,{render:()=>r});var o=n(67294),a=n(73935),l=n(67933);function r(t,e,n){t?a.render(o.createElement(l.QuantityCalculator,{...n}),e):a.unmountComponentAtNode(e)}},67933:(t,e,n)=>{"use strict";n.d(e,{QuantityCalculator:()=>y});var o=n(67294),a=n(93302),l=n(12781),r=n(74971),u=n(11026),s=n(71556),c=n(21659),i=n(79410),p=n(91436),h=n(72989),d=n(69397),m=n(42662),v=n(47532),C=n(33796),g=n(89720),w=n(86785);function _(t){const{min:e,max:n,step:a,uiStep:l,reference:r,withInput:u,valueInput:s,onChangeValueInput:_,onClick:B,onClose:f,onFocus:y}=t,[E,x]=(0,o.useState)(!1),[I,k]=(0,o.useState)(void 0),[N,S]=(0,o.useState)(!1),b=o.createElement(c.Icon,{className:w.buttonIcon,icon:v}),T=o.createElement(c.Icon,{className:w.buttonIcon,icon:m}),V=o.createElement(c.Icon,{className:w.buttonIcon,icon:C}),M=o.createElement(c.Icon,{className:w.buttonIcon,icon:g}),D=(0,o.useCallback)(t=>{const o={min:e,max:n,step:a},l=(0,h.checkQtyError)(o,t,!0),r=N||l.res,u=N?void 0:l.msg;x(r),k(u)},[N,e,n,a]);return(0,o.useEffect)(()=>{D(s)},[D,s]),o.createElement("div",{className:w.calculator,tabIndex:-1,ref:r,onFocus:y,onKeyDown:t=>{s&&!E&&13===(0,d.hashFromEvent)(t)&&f()}},u&&o.createElement("div",{className:w.calculator__inputBorder},o.createElement(p.NumberInput,{className:w.calculator__input,inputClassName:w.calculator__innerInput,borderStyle:"none",value:s,max:n,min:e,step:a,uiStep:l,mode:"float",error:E,errorMessage:I,errorHandler:function(t){S(t)},onValueChange:_})),o.createElement("div",{className:w.calculator__btns},o.createElement(i.Button,{value:-a,type:i.ButtonType.IncDec,icon:b,onClick:B}),o.createElement(i.Button,{value:a,type:i.ButtonType.IncDec,icon:T,onClick:B}),o.createElement(i.Button,{value:1,type:i.ButtonType.PlusValue,onClick:B}),o.createElement(i.Button,{value:5,type:i.ButtonType.PlusValue,onClick:B}),o.createElement(i.Button,{value:25,type:i.ButtonType.PlusValue,onClick:B}),o.createElement(i.Button,{value:100,type:i.ButtonType.PlusValue,onClick:B}),o.createElement(i.Button,{value:500,type:i.ButtonType.PlusValue,onClick:B}),o.createElement(i.Button,{value:1e3,type:i.ButtonType.PlusValue,onClick:B}),o.createElement(i.Button,{value:0,type:i.ButtonType.Clear,icon:V,onClick:B}),o.createElement(i.Button,{value:e||a,type:i.ButtonType.Default,icon:M,onClick:B})))}var B=n(36656);const f=(0,s.mergeThemes)(u.DEFAULT_MENU_THEME,{menuBox:B.menuBox});class y extends o.PureComponent{constructor(t){super(t),this._setCalcRef=t=>{this.props.calcReference&&this.props.calcReference(t)},this._calculatorStepHandler=(t,e)=>{
const{min:n,max:o,uiStep:r,trackEventTarget:u,trackEvent:s}=this.props;if(void 0!==s&&void 0!==u&&s(u,"Calculator Button",(0,l.prepareCalculatorEventText)(t,e)),e===i.ButtonType.Clear||e===i.ButtonType.Default)return this._updateValueByCalc(t);const c=this.props.valueGetter();if(null===c)return;let p=Number((0,a.Big)(c).plus(t));if((p<n||o<p)&&e!==i.ButtonType.IncDec)return this._updateValueByCalc(c);if(e===i.ButtonType.IncDec){if(p=this._calcByStep(c,t,n,r),o<p)return this._updateValueByCalc(o);if(p<n)return this._updateValueByCalc(n)}return this._updateValueByCalc(p)},this._updateValueByCalc=t=>{this._handlerValueInput(t),this.props.onValueChange(t,!0),this.props.calculatorUsedStat&&this.props.calculatorUsedStat()},this.state={valueInput:t.valueGetter()},this._handlerValueInput=this._handlerValueInput.bind(this)}render(){const{min:t,max:e,step:n,uiStep:a,withInput:l,targetEl:u,position:s,onFocus:c,onClose:i}=this.props;return o.createElement(r.PopupMenu,{isOpened:!0,onClose:i,position:s,doNotCloseOn:u,theme:f},o.createElement(_,{min:t,max:e,step:n,uiStep:a,withInput:l,reference:this._setCalcRef,valueInput:this.state.valueInput,onChangeValueInput:this._updateValueByCalc,onClick:this._calculatorStepHandler,onFocus:c,onClose:i}))}_calcByStep(t,e,n,o){const l=Math.sign(e),r=Math.abs(null!=o?o:e),u=new a.Big(t),s=u.minus(n).mod(e);let c=u.plus(l*r);return s.eq(0)||(c=c.plus((l>0?0:1)*r).minus(s)),c.toNumber()}_handlerValueInput(t){this.setState({valueInput:t})}}},21786:(t,e,n)=>{"use strict";n.d(e,{SplitThousandsFormatter:()=>l});var o=n(6867),a=n(74605);class l{constructor(t=" "){this._divider=t}format(t){const e=(0,o.splitThousands)(t,this._divider);return(0,a.isRtl)()?(0,a.startWithLTR)(e):e}parse(t){const e=(0,a.stripLTRMarks)(t).split(this._divider).join(""),n=Number(e);return isNaN(n)||/e/i.test(e)?{res:!1}:{res:!0,value:n,suggest:this.format(n)}}}},74971:(t,e,n)=>{"use strict";n.d(e,{PopupMenu:()=>c});var o=n(67294),a=n(73935),l=n(22165),r=n(11026),u=n(84206),s=n(18351);function c(t){const{controller:e,children:n,isOpened:c,closeOnClickOutside:i=!0,doNotCloseOn:p,onClickOutside:h,onClose:d,...m}=t,v=(0,o.useContext)(u.CloseDelegateContext),C=(0,s.useOutsideEvent)({handler:function(t){h&&h(t);if(!i)return;if(p&&t.target instanceof Node){const e=a.findDOMNode(p);if(e instanceof Node&&e.contains(t.target))return}d()},mouseDown:!0,touchStart:!0});return c?o.createElement(l.Portal,{top:"0",left:"0",right:"0",bottom:"0",pointerEvents:"none"},o.createElement("span",{ref:C,style:{pointerEvents:"auto"}},o.createElement(r.Menu,{...m,onClose:d,onScroll:function(e){const{onScroll:n}=t;n&&n(e)},customCloseDelegate:v,ref:e},n))):null}},71556:(t,e,n)=>{"use strict";function o(t,e,n={}){const o=Object.assign({},e);for(const a of Object.keys(e)){const l=n[a]||a;l in t&&(o[a]=[t[l],e[a]].join(" "))}return o}function a(t,e,n={}){return Object.assign({},t,o(t,e,n))}n.d(e,{weakComposeClasses:()=>o,mergeThemes:()=>a})},14897:t=>{
t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 8" width="16" height="8"><path fill="currentColor" d="M0 1.475l7.396 6.04.596.485.593-.49L16 1.39 14.807 0 7.393 6.122 8.58 6.12 1.186.08z"/></svg>'},33796:t=>{t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 23 23" width="23" height="23"><path fill="none" stroke="currentColor" stroke-width="2" d="M17.09 6.5A7.5 7.5 0 1 0 11.5 19a7.481 7.481 0 0 0 5.59-2.5"/></svg>'},47532:t=>{t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 23 23" width="23" height="23"><path fill="currentColor" stroke="none" d="M2 10h18v2H2z"/></svg>'},42662:t=>{t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 23 23" width="23" height="23"><g fill="currentColor" stroke="none"><path d="M3 10h18v2H3z"/><path d="M11 2h2v18h-2z"/></g></svg>'},89720:t=>{t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 23 23" width="23" height="23"><g fill="none"><path stroke="currentColor" stroke-width="2" d="M4 12.5A7.5 7.5 0 1 0 11.5 5h-6"/><path fill="currentColor" d="M3 5l4-4v8z"/></g></svg>'}}]);