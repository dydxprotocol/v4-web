(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[4153],{78443:e=>{e.exports={defaultsButtonText:"defaultsButtonText-3mn75BN0",defaultsButtonItem:"defaultsButtonItem-3mn75BN0",defaultsButtonIcon:"defaultsButtonIcon-3mn75BN0"}},50559:e=>{e.exports={themesButtonText:"themesButtonText-3nid3QQp",themesButtonIcon:"themesButtonIcon-3nid3QQp",defaultsButtonText:"defaultsButtonText-3nid3QQp",defaultsButtonItem:"defaultsButtonItem-3nid3QQp"}},55241:e=>{e.exports={slider:"slider-3RfwXbxu",inner:"inner-3RfwXbxu"}},34344:e=>{e.exports={scrollWrap:"scrollWrap-1KEqJy8_",tabsWrap:"tabsWrap-1KEqJy8_",tabs:"tabs-1KEqJy8_",withoutBorder:"withoutBorder-1KEqJy8_",tab:"tab-1KEqJy8_",withHover:"withHover-1KEqJy8_",headerBottomSeparator:"headerBottomSeparator-1KEqJy8_",fadeWithoutSlider:"fadeWithoutSlider-1KEqJy8_",withBadge:"withBadge-1KEqJy8_"}},16929:e=>{e.exports={tabs:"tabs-3I2ohC86",tab:"tab-3I2ohC86",noBorder:"noBorder-3I2ohC86",disabled:"disabled-3I2ohC86",active:"active-3I2ohC86",defaultCursor:"defaultCursor-3I2ohC86",slider:"slider-3I2ohC86",content:"content-3I2ohC86"}},43968:(e,t,a)=>{"use strict";a.d(t,{getTemplates:()=>o,setTemplates:()=>r,addTemplate:()=>l,startRemoveTemplate:()=>s,removeTemplate:()=>c,saveTemplate:()=>i,loadTemplate:()=>u,applyDefaults:()=>m});var n=a(99146);function o(e,t){return{type:n.GET_TEMPLATES,toolName:e,callback:t}}function r(e,t){return{type:n.SET_TEMPLATES,templates:t,toolName:e}}function l(e,t){return{type:n.ADD_TEMPLATE,templateName:t,toolName:e}}function s(e,t){return{type:n.START_REMOVE_TEMPLATE,templateName:t,toolName:e}}function c(e,t){return{type:n.REMOVE_TEMPLATE,templateName:t,toolName:e}}function i(e,t,a){return{type:n.SAVE_TEMPLATE,templateName:t,toolName:e,content:a}}function u(e,t,a){return{type:n.LOAD_TEMPLATE,toolName:e,templateName:t,callback:a}}function m(e,t){return{type:n.APPLY_DEFAULTS,model:e,source:t}}},99146:(e,t,a)=>{"use strict";function n(e){return"LINE_TOOL_TEMPLATE__"+e}a.d(t,{GET_TEMPLATES:()=>o,SET_TEMPLATES:()=>r,START_REMOVE_TEMPLATE:()=>l,REMOVE_TEMPLATE:()=>s,SAVE_TEMPLATE:()=>c,ADD_TEMPLATE:()=>i,LOAD_TEMPLATE:()=>u,APPLY_DEFAULTS:()=>m});const o=n("GET_TEMPLATES"),r=n("SET_TEMPLATES"),l=n("START_REMOVE_TEMPLATE"),s=n("REMOVE_TEMPLATE"),c=n("SAVE_TEMPLATE"),i=n("ADD_TEMPLATE"),u=n("LOAD_TEMPLATE"),m=n("APPLY_DEFAULTS")},96381:(e,t,a)=>{"use strict";a.d(t,{store:()=>y});var n=a(15857),o=a(30797),r=a(34857),l=a(16282),s=a(99146),c=a(14071),i=a(43968);function u(e,t){return t}var m=a(80816);const d=(0,c.getLogger)("Chart.LineToolTemplatesList");function p(e,t){return t}function*T(){for(;;){const{toolName:e,templateName:t,content:a}=p(s.SAVE_TEMPLATE,yield(0,r.take)(s.SAVE_TEMPLATE));try{yield(0,r.call)(m.backend.saveDrawingTemplate,e,t,a),yield(0,r.put)((0,i.addTemplate)(e,t))}catch(e){d.logWarn(e)}}}function*E(){for(;;){const{toolName:e,templateName:t}=p(s.START_REMOVE_TEMPLATE,yield(0,r.take)(s.START_REMOVE_TEMPLATE));try{yield(0,r.call)(m.backend.removeDrawingTemplate,e,t),yield(0,r.put)((0,i.removeTemplate)(e,t))}catch(e){d.logWarn(e)}}}
function*f(){const e=new Map;for(;;){const{toolName:a,callback:n}=p(s.GET_TEMPLATES,yield(0,r.take)(s.GET_TEMPLATES));e.has(a)?(0,l.ensureDefined)(e.get(a)).push(n):(e.set(a,[n]),yield(0,r.fork)(t,a))}function*t(t){try{const e=u(m.backend.getDrawingTemplates,yield(0,r.call)(m.backend.getDrawingTemplates,t));yield(0,r.put)((0,i.setTemplates)(t,e))}catch(e){d.logWarn(e)}(0,l.ensureDefined)(e.get(t)).forEach(e=>null==e?void 0:e()),e.delete(t)}}function*h(){for(;;){const{toolName:e,templateName:t,callback:a}=p(s.LOAD_TEMPLATE,yield(0,r.take)(s.LOAD_TEMPLATE));try{const n=u(m.backend.loadDrawingTemplate,yield(0,r.call)(m.backend.loadDrawingTemplate,e,t));a&&a(n)}catch(e){d.logWarn(e)}}}function*v(){for(;;){const{model:e,source:t}=p(s.APPLY_DEFAULTS,yield(0,r.take)(s.APPLY_DEFAULTS));try{yield(0,r.call)([e,e.restorePropertiesForSource],t)}catch(e){d.logWarn(e)}}}function*A(){yield(0,r.all)([(0,r.call)(f),(0,r.call)(T),(0,r.call)(E),(0,r.call)(h),(0,r.call)(v)])}const b={templates:{}};function _(e,t){return e.localeCompare(t,void 0,{numeric:!0})}function g(e=b,t){switch(t.type){case s.ADD_TEMPLATE:{const{toolName:a,templateName:n}=t;if(!e.templates[a].includes(n)){const t=[...e.templates[a],n].sort(_);return{...e,templates:{...e.templates,[a]:t}}}return e}case s.SET_TEMPLATES:{const{toolName:a,templates:n}=t;return{...e,templates:{...e.templates,[a]:[...n].sort(_)}}}case s.REMOVE_TEMPLATE:{const{toolName:a,templateName:n}=t;return{...e,templates:{...e.templates,[a]:e.templates[a].filter(e=>e!==n)}}}default:return e}}const y=function(){const e=(0,o.default)(),t=(0,n.createStore)(g,(0,n.applyMiddleware)(e));return e.run(A),t}()},16676:(e,t,a)=>{"use strict";a.d(t,{StudyDefaultsManager:()=>p});var n=a(67294),o=a(94184),r=a.n(o),l=a(21659),s=a(74245),c=a(82681),i=a(46299),u=a(63782),m=a(78443);const d={reset:(0,s.t)("Reset settings"),saveAsDefault:(0,s.t)("Save as default"),defaults:(0,s.t)("Defaults")};class p extends n.PureComponent{constructor(){super(...arguments),this._handleResetToDefaults=()=>{this.props.model.restorePropertiesForSource(this.props.source)},this._handleSaveAsDefaults=()=>{this.props.source.properties().saveDefaults()}}render(){const{mode:e}=this.props;return n.createElement(c.DisclosureMenu,{id:"study-defaults-manager",className:r()("normal"===e&&m.defaultsButtonText),hideArrowButton:"compact"===e,buttonChildren:this._getPlaceHolderItem("compact"===e)},n.createElement(i.PopupMenuItem,{className:m.defaultsButtonItem,isActive:!1,label:d.reset,onClick:this._handleResetToDefaults}),n.createElement(i.PopupMenuItem,{className:m.defaultsButtonItem,isActive:!1,label:d.saveAsDefault,onClick:this._handleSaveAsDefaults}))}_getPlaceHolderItem(e){return e?n.createElement(l.Icon,{className:m.defaultsButtonIcon,icon:u}):d.defaults}}},49297:(e,t,a)=>{"use strict";a.d(t,{FooterMenu:()=>m});var n=a(67294),o=a(74245),r=a(21659),l=a(82681),s=a(46403),c=a(50559),i=a(63782);function u(e){return e.isTabletWidth?n.createElement(r.Icon,{className:c.themesButtonIcon,icon:i}):n.createElement(n.Fragment,null,(0,o.t)("Template"))}
function m(e){return n.createElement(s.MatchMedia,{rule:"screen and (max-width: 768px)"},t=>n.createElement(l.DisclosureMenu,{className:!t&&c.themesButtonText,hideArrowButton:t,buttonChildren:n.createElement(u,{isTabletWidth:t})},e.children))}},50585:(e,t,a)=>{"use strict";a.d(t,{TemplateMenuItem:()=>i});var n=a(67294),o=a(46299),r=a(75380),l=a(51720),s=a(89505),c=a(50559);function i(e){const{name:t,onRemove:a,onClick:i}=e,[u,m]=(0,l.useHover)(),d=n.useCallback(()=>i(t),[i,t]),p=n.useCallback(()=>{a&&a(t)},[a,t]);return n.createElement("div",{...m},n.createElement(o.PopupMenuItem,{className:c.defaultsButtonItem,isActive:!1,label:t,onClick:d,toolbox:a&&n.createElement(r.RemoveButton,{hidden:!s.mobiletouch&&!u,onClick:p})}))}},35688:(e,t,a)=>{"use strict";a.d(t,{PropertiesEditorTab:()=>i});var n=a(67294),o=a(2822);const r={"Elliott Impulse Wave (12345)Degree":"normal","Elliott Triangle Wave (ABCDE)Degree":"normal","Elliott Triple Combo Wave (WXYXZ)Degree":"normal","Elliott Correction Wave (ABC)Degree":"normal","Elliott Double Combo Wave (WXY)Degree":"normal",BarsPatternMode:"normal",StudyInputSource:"normal"},l={TextText:"big",AnchoredTextText:"big",NoteText:"big",AnchoredNoteText:"big",CalloutText:"big",BalloonText:"big"};var s=a(59086),c=a(97372);function i(e){const{page:t,pageRef:a,tableKey:i}=e;return n.createElement(o.ControlCustomHeightContext.Provider,{value:l},n.createElement(o.ControlCustomWidthContext.Provider,{value:r},t&&n.createElement(s.PropertyTable,{reference:a,key:i},t.definitions.value().map(e=>n.createElement(c.Section,{key:e.id,definition:e})))))}},25882:(e,t,a)=>{"use strict";a.d(t,{FooterMenu:()=>A});var n=a(67294),o=a(37703),r=a(85452),l=a(74245),s=a(49972),c=a(49297),i=a(50585),u=a(81839),m=a(83969),d=a(66189),p=a(37229);var T=a(43968);const E=(0,o.connect)((function(e,t){const a=t.source.toolname;return{templates:e.templates[a]}}),(function(e){return{getTemplates:t=>e((0,T.getTemplates)(t)),loadTemplate:(t,a,n)=>{e((0,T.loadTemplate)(a.toolname,n,e=>t.applyLineToolTemplate(a,e,f)))},removeTemplate:(t,a)=>e((0,T.startRemoveTemplate)(t,a)),saveTemplate:(t,a,n)=>e((0,T.saveTemplate)(t,a,n)),applyDefaults:(t,a)=>e((0,T.applyDefaults)(t,a))}}))((function(e){const{model:t,source:a,templates:o=[],getTemplates:r}=e,s=a.toolname;(0,n.useEffect)(()=>(e.templates||r(s),()=>{}),[s]);const T=(0,n.useContext)(d.SlotContext);return n.createElement(c.FooterMenu,null,n.createElement(i.TemplateMenuItem,{onClick:function(){window.runOrSignIn(()=>{(0,m.showRename)({title:(0,l.t)("Save drawing template as"),text:(0,l.t)("Template name")+":",maxLength:64,onRename:({newValue:e,focusInput:t,dialogClose:a,innerManager:n})=>{if(-1!==o.indexOf(e)){const o=(0,l.t)("Drawing template '{name}' already exists. Do you really want to replace it?").format({name:e});(0,m.showConfirm)({text:o,onConfirm:({dialogClose:t})=>{h(e),t(),a()},onClose:t},n)}else h(e),a()}},T)},{source:"Save line tool template",sourceMeta:"Chart"})},name:(0,p.appendEllipsis)((0,l.t)("Save as"))}),n.createElement(i.TemplateMenuItem,{onClick:function(){
const{applyDefaults:n}=e;n(t,a)},name:(0,l.t)("Apply defaults")}),o.length>0&&n.createElement(n.Fragment,null,n.createElement(u.PopupMenuSeparator,null),o.map(e=>n.createElement(i.TemplateMenuItem,{key:e,name:e,onRemove:E,onClick:f}))));function E(t){const{removeTemplate:a}=e;window.runOrSignIn(()=>{const e=(0,l.t)("Do you really want to delete drawing template '{name}' ?").format({name:t});(0,m.showConfirm)({text:e,onConfirm:({dialogClose:e})=>{a(s,t),e()}},T)},{source:"Delete line tool template"})}function f(n){const{loadTemplate:o}=e;o(t,a,n)}function h(t){const a=JSON.stringify(e.source.template());e.saveTemplate(s,t,a)}})),f=new s.TranslatedString("apply drawing template",(0,l.t)("apply drawing template"));var h=a(96381);function v(e){const{model:t,source:a}=e;return n.createElement(c.FooterMenu,null,n.createElement(i.TemplateMenuItem,{onClick:function(){t.restorePropertiesForSource(a)},name:(0,l.t)("Apply Defaults")}))}function A(e){return(0,r.onWidget)()?n.createElement(v,{...e}):n.createElement(o.Provider,{store:h.store},n.createElement(E,{...e}))}},14711:(e,t,a)=>{"use strict";a.d(t,{DialogTabs:()=>T});var n=a(67294),o=a(94184),r=a(50774),l=a(71556),s=a(55241);const c=(0,l.mergeThemes)(r.DEFAULT_SLIDER_THEME,s);var i=a(14933),u=a(89505),m=a(34344);const d=m,p=(0,r.factory)((function(e){return n.createElement("div",{className:c.slider,ref:e.reference},n.createElement("div",{className:c.inner}))}));class T extends n.PureComponent{constructor(){super(...arguments),this._createClickHandler=e=>()=>{this.props.onSelect(e)}}render(){const{theme:e=d,hiddenBottomBorders:t,fadedSlider:a=!0,ScrollComponent:r=i.HorizontalScroll}=this.props,l=this._generateDialogTabs();return n.createElement("div",{className:o(e.scrollWrap)},!t&&n.createElement("div",{className:e.headerBottomSeparator}),n.createElement(r,{isVisibleFade:u.mobiletouch,isVisibleButtons:!u.mobiletouch,isVisibleScrollbar:!1,fadeClassName:o({[e.fadeWithoutSlider]:!a})},n.createElement("div",{className:e.tabsWrap},n.createElement(p,{className:o(e.tabs,t&&e.withoutBorder)},l))))}_generateDialogTabs(){const{activeTabId:e,tabs:t,theme:a=d}=this.props;return t.allIds.map(l=>{const s=e===l,c=t.byId[l].withNotificationsBadge;return n.createElement(r.SliderItem,{key:l,value:l,className:o(a.tab,!s&&a.withHover,c&&m.withBadge),isActive:s,onClick:this._createClickHandler(l)},t.byId[l].title)})}}},50774:(e,t,a)=>{"use strict";a.d(t,{DEFAULT_SLIDER_THEME:()=>s,SliderItem:()=>c,factory:()=>i,SliderRow:()=>u});var n=a(67294),o=a(94184),r=a(16282),l=a(16929);const s=l;function c(e){const t=o(e.className,l.tab,{[l.active]:e.isActive,[l.disabled]:e.isDisabled,[l.defaultCursor]:!!e.shouldUseDefaultCursor,[l.noBorder]:!!e.noBorder});return n.createElement("div",{className:t,onClick:e.onClick,ref:e.reference,"data-type":"tab-item","data-value":e.value,"data-name":"tab-item-"+e.value.toString().toLowerCase()},e.children)}function i(e){return class extends n.PureComponent{constructor(){super(...arguments),this.activeTab={current:null}}componentDidUpdate(){(0,
r.ensureNotNull)(this._slider).style.transition="transform 350ms",this._componentDidUpdate()}componentDidMount(){this._componentDidUpdate()}render(){const{className:t}=this.props,a=this._generateTabs();return n.createElement("div",{className:o(t,l.tabs),"data-name":this.props["data-name"]},a,n.createElement(e,{reference:e=>{this._slider=e}}))}_generateTabs(){return this.activeTab.current=null,n.Children.map(this.props.children,e=>{const t=e,a=Boolean(t.props.isActive),o={reference:e=>{a&&(this.activeTab.current=e),t.props.reference&&t.props.reference(e)}};return n.cloneElement(t,o)})}_componentDidUpdate(){const e=(0,r.ensureNotNull)(this._slider).style;if(this.activeTab.current){const t=this.activeTab.current.offsetWidth,a=this.activeTab.current.offsetLeft;e.transform=`translateX(${a}px)`,e.width=t+"px",e.opacity="1"}else e.opacity="0"}}}const u=i((function(e){return n.createElement("div",{className:l.slider,ref:e.reference})}))}}]);