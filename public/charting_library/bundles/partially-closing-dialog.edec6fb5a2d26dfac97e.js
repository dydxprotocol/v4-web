(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[5001],{340959:e=>{e.exports={scrollable:"scrollable-LaEx6V_s",content:"content-LaEx6V_s",input:"input-LaEx6V_s",endSlot:"endSlot-LaEx6V_s",message:"message-LaEx6V_s",estimation:"estimation-LaEx6V_s",label:"label-LaEx6V_s"}},648017:(e,t,n)=>{"use strict";n.r(t),n.d(t,{PartiallyClosingDialog:()=>v});var l=n(609838),o=n(50959),a=n(302946),i=n(960521),s=n(742554),r=n(370981),u=n(180185);const c=()=>{const[e,t]=(0,o.useState)(!window.navigator.onLine),n=e=>t("offline"===e.type);return(0,o.useEffect)((()=>(window.addEventListener("online",n),window.addEventListener("offline",n),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",n)}))),e};var m=n(587125),d=n(621317),p=n(391431),f=n(340959);function v(e){const{positionOrIndividualPosition:t,qtyFormatter:v,supportLots:g,qtyLabel:y,qtyStep:E,uiQtyStep:b,minQty:S,message:w,onClose:C,dialogActionHandler:L,onOpen:h}=e,x=(0,o.useMemo)((()=>Math.abs(t.qty)),[t.qty]),[_,q]=(0,o.useState)(!0),[Q,N]=(0,o.useState)(!1),[k,D]=(0,o.useState)(x),[V,O]=(0,o.useState)(!1),[B,M]=(0,o.useState)(!1),[P,A]=(0,o.useState)(),F=c(),T=!B&&null!==k&&k<x;(0,o.useEffect)((()=>{let e;const t=new i.Big(x),o=null!==k?new i.Big(k):null,a=o?.minus(S).mod(E);null===o?e=l.t(null,void 0,n(784830)):o.gt(t)?e=l.t(null,void 0,n(917138)):!o.eq(t)&&o.lt(S)?e=l.t(null,void 0,n(364144)).replace("{minQty}",String(S)):!o.eq(t)&&t.minus(o).lt(S)?e=l.t(null,void 0,n(979841)).replace("{minQty}",String(S)):o.eq(t)||a?.eq(0)||(e=l.t(null,void 0,n(568556)).replace("{step}",String(E))),M(V||void 0!==e),A(e)}),[V,k,x,E,S]),(0,o.useEffect)((()=>{F&&R()}),[F,R]);const z=(0,o.useMemo)((()=>null!==k?v.format(k):""),[k,v]),H=(0,o.useMemo)((()=>null!==k?v.format(new i.Big(x).minus(k).toNumber()):""),[k,x,v]),I=Q&&null!==k&&k<x?l.t(null,void 0,n(330285)):l.t(null,void 0,n(383236));return o.createElement(d.CreateConfirmDialog,{isOpen:_,isOpened:_,submitButtonDisabled:Q&&B,render:function(){const e=v.format(x),i=l.t(null,{context:"close_position_total",plural:"of {positionQty} lots",count:x},n(828781)).replace("{positionQty}",e),r=l.t(null,{context:"close_position_total",plural:"of {positionQty} units",count:x},n(655511)).replace("{positionQty}",e),u=l.t(null,{context:"close_position_total",plural:"of {positionQty}",count:x},n(608478)).replace("{positionQty}",`${e} ${y}`);let c=r;g&&(c=i);y&&(c=u);return o.createElement(s.TouchScrollContainer,{className:f.scrollable,onScroll:U},o.createElement("div",{className:f.content},o.createElement("div",{className:f.message},w),o.createElement(a.Checkbox,{name:"partially-close-checkbox",label:o.createElement("span",{className:f.label},l.t(null,void 0,n(219375))),checked:Q,onChange:K,disabled:!1,indeterminate:!1,labelPositionReverse:!1}),Q&&o.createElement("form",{onSubmit:$},o.createElement(m.NumberInput,{error:B,errorMessage:P,errorHandler:J,className:f.input,value:(0,p.applyRounding)(k,v),forceShowControls:!0,min:S,step:E,uiStep:b,onValueChange:j,onEmptyString:G,endSlot:o.createElement("p",{
className:f.endSlot},c),useFormatter:!1}),T&&o.createElement("div",{className:f.estimation},o.createElement("div",null,l.t(null,void 0,n(718806)).replace("{symbol}",t.symbol).replace("{quantity}",z)),o.createElement("div",null,l.t(null,void 0,n(353876)).replace("{leavingQty}",H))))))},onClose:R,title:l.t(null,void 0,n(383236)),onSubmit:$,onCancel:()=>{},onKeyDown:function(e){27===(0,u.hashFromEvent)(e)&&R()},dataName:"trading-partial-closing-dialog",backdrop:!1,submitOnEnterKey:!0,defaultActionOnClose:"none",submitButtonText:I,cancelButtonText:l.t(null,void 0,n(904543)),onOpen:h});function K(){N((e=>!e))}function R(){q(!1),L({status:!1}),C()}function $(){L(Q?null===k||B?{status:!1}:{status:!0,qty:k}:{status:!0,qty:x}),q(!1),C()}function j(e){D(e)}function G(){D(null)}function J(e){O(e)}function U(){r.globalCloseDelegate.fire()}}},621317:(e,t,n)=>{"use strict";n.d(t,{CreateConfirmDialog:()=>i});var l=n(50959),o=n(649719);const a=l.lazy((async()=>({default:(await Promise.all([n.e(7172),n.e(5480),n.e(9766),n.e(8222),n.e(5375),n.e(601),n.e(1389),n.e(6828),n.e(6605),n.e(2371),n.e(7819),n.e(4952),n.e(5789),n.e(3905),n.e(3566)]).then(n.bind(n,976669))).AdaptiveConfirmDialog}))),i=(0,o.withDialogLazyLoad)(a)}}]);