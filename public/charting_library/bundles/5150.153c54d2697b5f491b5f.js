(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[5150,766],{135267:e=>{e.exports={"textarea-container":"textarea-container-BQ5l96SC","change-highlight":"change-highlight-BQ5l96SC",focused:"focused-BQ5l96SC","resize-vertical":"resize-vertical-BQ5l96SC","resize-horizontal":"resize-horizontal-BQ5l96SC","resize-both":"resize-both-BQ5l96SC",textarea:"textarea-BQ5l96SC"}},537469:e=>{e.exports={radio:"radio-KZcDDz7S",input:"input-KZcDDz7S",box:"box-KZcDDz7S",reverse:"reverse-KZcDDz7S",label:"label-KZcDDz7S",wrapper:"wrapper-KZcDDz7S",noOutline:"noOutline-KZcDDz7S"}},625140:e=>{e.exports={wrap:"wrap-AfdFYQAU",thicknessItem:"thicknessItem-AfdFYQAU",checked:"checked-AfdFYQAU",radio:"radio-AfdFYQAU",bar:"bar-AfdFYQAU"}},695700:e=>{e.exports={"small-height-breakpoint":"screen and (max-height: 360px)",footer:"footer-PQhX1JKt",submitButton:"submitButton-PQhX1JKt",buttons:"buttons-PQhX1JKt"}},624830:e=>{e.exports={colorPickerWrap:"colorPickerWrap-KAmze9Wr",focused:"focused-KAmze9Wr",readonly:"readonly-KAmze9Wr",disabled:"disabled-KAmze9Wr","size-small":"size-small-KAmze9Wr","size-medium":"size-medium-KAmze9Wr","size-large":"size-large-KAmze9Wr","font-size-small":"font-size-small-KAmze9Wr","font-size-medium":"font-size-medium-KAmze9Wr","font-size-large":"font-size-large-KAmze9Wr","border-none":"border-none-KAmze9Wr",shadow:"shadow-KAmze9Wr","border-thin":"border-thin-KAmze9Wr","border-thick":"border-thick-KAmze9Wr","intent-default":"intent-default-KAmze9Wr","intent-success":"intent-success-KAmze9Wr","intent-warning":"intent-warning-KAmze9Wr","intent-danger":"intent-danger-KAmze9Wr","intent-primary":"intent-primary-KAmze9Wr","corner-top-left":"corner-top-left-KAmze9Wr","corner-top-right":"corner-top-right-KAmze9Wr","corner-bottom-right":"corner-bottom-right-KAmze9Wr","corner-bottom-left":"corner-bottom-left-KAmze9Wr",colorPicker:"colorPicker-KAmze9Wr",swatch:"swatch-KAmze9Wr",placeholderContainer:"placeholderContainer-KAmze9Wr",placeholder:"placeholder-KAmze9Wr",mixedColor:"mixedColor-KAmze9Wr",white:"white-KAmze9Wr",opacitySwatch:"opacitySwatch-KAmze9Wr",colorLine:"colorLine-KAmze9Wr",multiWidth:"multiWidth-KAmze9Wr",line:"line-KAmze9Wr",thicknessContainer:"thicknessContainer-KAmze9Wr",thicknessTitle:"thicknessTitle-KAmze9Wr"}},481851:e=>{e.exports={thicknessContainer:"thicknessContainer-NsJBpy5c",thicknessTitle:"thicknessTitle-NsJBpy5c"}},151567:e=>{e.exports={hasTooltip:"hasTooltip-_jOPqs8j",uppercase:"uppercase-_jOPqs8j"}},507697:e=>{e.exports={wrap:"wrap-CcYH2FIb"}},306815:e=>{e.exports={checkbox:"checkbox-mzBlcrjf",title:"title-mzBlcrjf"}},609896:e=>{e.exports={hintButton:"hintButton-BoIR13Nf"}},393925:e=>{e.exports={titleWrap:"titleWrap-IQolwY3b",title:"title-IQolwY3b"}},380072:e=>{e.exports={container:"container-gKn55QI9",sectionTitle:"sectionTitle-gKn55QI9",separator:"separator-gKn55QI9",customButton:"customButton-gKn55QI9"}},266454:e=>{e.exports={container:"container-jgT5uU0F",form:"form-jgT5uU0F",swatch:"swatch-jgT5uU0F",inputWrap:"inputWrap-jgT5uU0F",inputHash:"inputHash-jgT5uU0F",
input:"input-jgT5uU0F",buttonWrap:"buttonWrap-jgT5uU0F",hueSaturationWrap:"hueSaturationWrap-jgT5uU0F",saturation:"saturation-jgT5uU0F",hue:"hue-jgT5uU0F"}},592155:e=>{e.exports={hue:"hue-iMmREGnj",pointer:"pointer-iMmREGnj",pointerContainer:"pointerContainer-iMmREGnj"}},401034:e=>{e.exports={opacity:"opacity-uujjxY8O",opacitySlider:"opacitySlider-uujjxY8O",opacitySliderGradient:"opacitySliderGradient-uujjxY8O",pointer:"pointer-uujjxY8O",dragged:"dragged-uujjxY8O",opacityPointerWrap:"opacityPointerWrap-uujjxY8O",opacityInputWrap:"opacityInputWrap-uujjxY8O",opacityInput:"opacityInput-uujjxY8O",opacityInputPercent:"opacityInputPercent-uujjxY8O"}},153766:e=>{e.exports={saturation:"saturation-S_CtZIbU",pointer:"pointer-S_CtZIbU"}},361561:e=>{e.exports={swatches:"swatches-pNRFZrPx",swatch:"swatch-pNRFZrPx",hover:"hover-pNRFZrPx",empty:"empty-pNRFZrPx",white:"white-pNRFZrPx",selected:"selected-pNRFZrPx",contextItem:"contextItem-pNRFZrPx"}},536612:e=>{e.exports={dialog:"dialog-nnDbXk_L",rounded:"rounded-nnDbXk_L",shadowed:"shadowed-nnDbXk_L",fullscreen:"fullscreen-nnDbXk_L",darker:"darker-nnDbXk_L",backdrop:"backdrop-nnDbXk_L"}},419283:e=>{e.exports={"tablet-normal-breakpoint":"screen and (max-width: 768px)","tooltip-offset":"20px",dialog:"dialog-UExGRfA_",dragging:"dragging-UExGRfA_",dialogAnimatedAppearance:"dialogAnimatedAppearance-UExGRfA_",dialogAnimation:"dialogAnimation-UExGRfA_",dialogTooltip:"dialogTooltip-UExGRfA_"}},558213:(e,t,n)=>{"use strict";n.d(t,{Textarea:()=>C});var o,s=n(50959),r=n(497754),a=n(525388),i=n(383836),l=n(21778),c=n(603548),u=n(269842),p=n(1811),d=n(34735),h=n(102691),m=n(135267),g=n.n(m);!function(e){e.None="none",e.Vertical="vertical",e.Horizontal="horizontal",e.Both="both"}(o||(o={}));const v=s.forwardRef(((e,t)=>{const{id:n,title:o,tabIndex:a,containerTabIndex:i,role:l,inputClassName:c,autoComplete:u,autoFocus:p,cols:m,disabled:v,isFocused:f,form:_,maxLength:C,minLength:b,name:y,placeholder:E,readonly:S,required:T,rows:x,value:N,defaultValue:w,wrap:P,containerReference:k,onChange:D,onSelect:I,onFocus:A,onContainerFocus:M,onBlur:B,"aria-describedby":R,"aria-required":F,"aria-invalid":z,...O}=e,W={id:n,title:o,tabIndex:a,role:l,autoComplete:u,autoFocus:p,cols:m,disabled:v,form:_,maxLength:C,minLength:b,name:y,placeholder:E,readOnly:S,required:T,rows:x,value:N,defaultValue:w,wrap:P,onChange:D,onSelect:I,onFocus:A,onBlur:B,"aria-describedby":R,"aria-required":F,"aria-invalid":z};return s.createElement(d.ControlSkeleton,{...O,tabIndex:i,disabled:v,readonly:S,isFocused:f,ref:k,onFocus:M,middleSlot:s.createElement(h.MiddleSlot,null,s.createElement("textarea",{...W,className:r(g().textarea,c),ref:t}))})}));v.displayName="TextareaView";const f=(e,t,n)=>t?void 0:e?-1:n,_=(e,t,n)=>t?void 0:e?n:-1,C=s.forwardRef(((e,t)=>{e=(0,l.useControl)(e);const{className:n,disabled:d,autoSelectOnFocus:h,tabIndex:m=0,borderStyle:C,highlight:b,resize:y,containerReference:E=null,onFocus:S,onBlur:T,...x}=e,N=(0,s.useRef)(null),w=(0,s.useRef)(null),{isMouseDown:P,handleMouseDown:k,handleMouseUp:D}=(0,
c.useIsMouseDown)(),[I,A]=(0,i.useFocus)(),M=(0,u.createSafeMulticastEventHandler)(A.onFocus,(function(e){h&&!P.current&&(0,p.selectAllContent)(e.currentTarget)}),S),B=(0,u.createSafeMulticastEventHandler)(A.onBlur,T),R=void 0!==y&&y!==o.None,F=null!=C?C:R?b?"thick":"thin":void 0,z=null!=b?b:!R&&void 0;return s.createElement(v,{...x,className:r(g()["textarea-container"],R&&g()["change-highlight"],y&&y!==o.None&&g()[`resize-${y}`],I&&g().focused,n),disabled:d,isFocused:I,containerTabIndex:f(I,d,m),tabIndex:_(I,d,m),borderStyle:F,highlight:z,onContainerFocus:function(e){w.current===e.target&&null!==N.current&&N.current.focus()},onFocus:M,onBlur:B,onMouseDown:k,onMouseUp:D,ref:function(e){N.current=e,"function"==typeof t?t(e):t&&(t.current=e)},containerReference:(0,a.useMergedRefs)([E,w])})}));C.displayName="Textarea"},976669:(e,t,n)=>{"use strict";n.r(t),n.d(t,{AdaptiveConfirmDialog:()=>d});var o=n(50959),s=n(497754),r=n.n(s),a=n(805184),i=n(650151),l=n(509806),c=n(180185),u=n(533408),p=n(695700);class d extends o.PureComponent{constructor(){super(...arguments),this._dialogRef=o.createRef(),this._handleClose=()=>{const{defaultActionOnClose:e,onSubmit:t,onCancel:n,onClose:o}=this.props;switch(e){case"submit":t();break;case"cancel":n()}o()},this._handleCancel=()=>{this.props.onCancel(),this.props.onClose()},this._handleKeyDown=e=>{const{onSubmit:t,submitButtonDisabled:n,submitOnEnterKey:o}=this.props;13===(0,c.hashFromEvent)(e)&&o&&(e.preventDefault(),n||t())}}render(){const{render:e,onClose:t,onSubmit:n,onCancel:s,footerLeftRenderer:r,submitButtonText:a,submitButtonDisabled:i,defaultActionOnClose:l,submitOnEnterKey:c,...p}=this.props;return o.createElement(u.AdaptivePopupDialog,{...p,ref:this._dialogRef,onKeyDown:this._handleKeyDown,render:this._renderChildren(),onClose:this._handleClose})}focus(){(0,i.ensureNotNull)(this._dialogRef.current).focus()}_renderChildren(){return e=>{const{render:t,footerLeftRenderer:s,additionalButtons:i,submitButtonText:c,submitButtonDisabled:u,onSubmit:d,cancelButtonText:h,showCancelButton:m=!0,submitButtonClassName:g,cancelButtonClassName:v,buttonsWrapperClassName:f}=this.props;return o.createElement(o.Fragment,null,t(e),o.createElement("div",{className:p.footer},s&&s(e.isSmallWidth),o.createElement("div",{className:r()(p.buttons,f)},i,m&&o.createElement(a.Button,{className:v,name:"cancel",appearance:"stroke",onClick:this._handleCancel},null!=h?h:l.t(null,void 0,n(620036))),o.createElement("span",{className:p.submitButton},o.createElement(a.Button,{className:g,disabled:u,name:"submit",onClick:d,"data-name":"submit-button"},null!=c?c:l.t(null,void 0,n(468988)))))))}}}d.defaultProps={defaultActionOnClose:"submit",submitOnEnterKey:!0}},552315:(e,t,n)=>{"use strict";n.d(t,{ColorSelect:()=>x});var o=n(50959),s=n(497754),r=n.n(s),a=n(650151),i=n(180185),l=n(544377),c=n(383836),u=n(557630),p=n(230553);function d(e){const{button:t,children:n,className:s,onPopupClose:r,...d}=e,[h,m]=(0,o.useState)(!1),[g,v]=(0,o.useState)(!1),[f,_]=(0,c.useFocus)(),C=(0,o.useRef)(null)
;return o.createElement("div",{className:s},o.createElement("div",{tabIndex:e.disabled?void 0:-1,ref:C,onClick:b,onFocus:_.onFocus,onBlur:_.onBlur,onKeyDown:y},"function"==typeof t?t(g,f):t),o.createElement(l.PopupMenu,{isOpened:g,onClose:E,position:function(){const e=(0,a.ensureNotNull)(C.current).getBoundingClientRect();return{x:e.left,y:e.top+e.height}},doNotCloseOn:C.current,onKeyDown:y},o.createElement(p.MenuContext.Consumer,null,(e=>o.createElement(u.ColorPicker,{...d,onToggleCustom:m,menu:e}))),!h&&n));function b(){e.disabled||(v((e=>!e)),m(!1))}function y(e){if(27===(0,i.hashFromEvent)(e))g&&(e.preventDefault(),E())}function E(){b(),(0,a.ensureNotNull)(C.current).focus(),r&&r()}}var h=n(206397),m=n(602564),g=n(860184),v=n(509806),f=n(732834),_=n(625140);const C=(0,f.makeSwitchGroupItem)(class extends o.PureComponent{constructor(){super(...arguments),this._onChange=()=>{this.props.onChange&&this.props.onChange(this.props.value)}}render(){const{name:e,checked:t,value:n}=this.props,r=s(_.thicknessItem,{[_.checked]:t}),a=s(_.bar,{[_.checked]:t}),i={borderTopWidth:parseInt(n)};return o.createElement("div",{className:r},o.createElement("input",{type:"radio",className:_.radio,name:e,value:n,onChange:this._onChange,checked:t}),o.createElement("div",{className:a,style:i}," "))}});function b(e){const{name:t,values:n,selectedValues:s,onChange:r}=e,a=n.map(((e,t)=>o.createElement(C,{key:t,value:e.toString()}))),i=s.map((e=>e.toString()));return o.createElement("div",{className:_.wrap},o.createElement(f.SwitchGroup,{name:t,onChange:e=>{r(parseInt(e))},values:i},a))}var y=n(481851);const E=v.t(null,void 0,n(360142));function S(e){const{value:t,items:n,onChange:s}=e;return o.createElement("div",{className:y.thicknessContainer},o.createElement("div",{className:y.thicknessTitle},E),o.createElement(b,{name:"color_picker_thickness_select",onChange:s,values:n,selectedValues:"mixed"===t?[]:[t]}))}var T=n(624830);function x(e){const{className:t,selectOpacity:n=void 0!==e.opacity,thickness:s,color:a,disabled:i,opacity:l=1,onColorChange:c,onOpacityChange:u,onThicknessChange:p,thicknessItems:m,onPopupClose:g}=e,[v,f,_]=(0,h.useCustomColors)();return o.createElement(d,{className:t,disabled:i,color:"mixed"!==a?a:null,selectOpacity:n,opacity:l,selectCustom:!0,customColors:v,onColorChange:c,onOpacityChange:a?u:void 0,onAddColor:f,onRemoveCustomColor:_,button:function(e,t){const n=e||t,c=n?"primary":"default";return o.createElement("div",{className:r()(T.colorPickerWrap,T[`intent-${c}`],T["border-thin"],T["size-medium"],n&&T.highlight,n&&T.focused,i&&T.disabled),"data-role":"button","data-name":s?"color-with-thickness-select":"color-select"},o.createElement("div",{className:r()(T.colorPicker,i&&T.disabled)},a&&"mixed"!==a?function(){const e=N(a,l),t=l>=.95&&w(a);return o.createElement("div",{className:T.opacitySwatch},o.createElement("div",{style:{backgroundColor:e},className:r()(T.swatch,t&&T.white)}))}():o.createElement("div",{className:T.placeholderContainer},o.createElement("div",{className:"mixed"===a?T.mixedColor:T.placeholder
})),s&&function(){const e=a&&"mixed"!==a?N(a,l):void 0;if("mixed"===s)return o.createElement("div",{className:T.multiWidth},o.createElement("div",{style:{backgroundColor:e},className:T.line}),o.createElement("div",{style:{backgroundColor:e},className:T.line}),o.createElement("div",{style:{backgroundColor:e},className:T.line}));return o.createElement("span",{className:r()(T.colorLine,w(a)&&T.white),style:{height:s,backgroundColor:e}})}()),n&&o.createElement("span",{className:T.shadow}))},onPopupClose:g},s&&m&&o.createElement(S,{value:s,items:m,onChange:function(e){p&&p(e)}}))}function N(e,t){return e?(0,m.generateColor)(e,(0,m.alphaToTransparency)(t)):"#000000"}function w(e){return!!e&&e.toLowerCase()===g.white}},193315:(e,t,n)=>{"use strict";n.d(t,{SymbolInputsButton:()=>E});var o=n(50959),s=n(497754),r=n.n(s),a=n(509806),i=n(650151),l=n(753327),c=n(910549),u=n(484727),p=n(841919),d=n(386456),h=n(558323),m=n(27950),g=n(955261),v=n(720911),f=n(707002),_=n(32012),C=n(626800),b=n(151567);function y(e){const{symbol:t,onSymbolChanged:s,disabled:i,className:p}=e,[g,v]=(0,o.useState)(t),y=(0,o.useContext)(l.SlotContext),E=(0,o.useContext)(c.PopupContext);return o.createElement(m.EditButton,{value:g,onClick:function(){const e=function(e){const t=(0,f.tokenize)(e);return(0,_.isSpread)(t)}(g)?g:(0,C.safeShortName)(g),t=(0,d.getSymbolSearchCompleteOverrideFunction)();(0,h.showSymbolSearchItemsDialog)({onSearchComplete:e=>{t(e[0].symbol,e[0].result).then((e=>{s(e.symbol),v(e.name)}))},dialogTitle:a.t(null,void 0,n(423398)),defaultValue:e,manager:y,onClose:()=>{E&&E.focus()},showSpreadActions:u.enabled("show_spread_operators")&&u.enabled("studies_symbol_search_spread_operators")})},disabled:i,className:r()(p,u.enabled("uppercase_instrument_names")&&b.uppercase)})}function E(e){if("definition"in e){const{propType:t,properties:n,id:s,title:r="",solutionId:a}=e.definition,l=n[t],c=l.value()||"",u=e=>{l.setValue(e)};return o.createElement(g.CommonSection,{id:s,title:r,solutionId:a},o.createElement(v.CellWrap,null,o.createElement(y,{symbol:(0,i.ensureDefined)(c),onSymbolChanged:u})))}{const{study:t,value:n,input:{id:s,name:a},onChange:l,disabled:c,hasTooltip:u}=e,d=e=>{const n=(0,p.getInternalSymbolName)(e,t);l(n,s,a)};return o.createElement(y,{symbol:(0,i.ensureDefined)(n),onSymbolChanged:d,disabled:c,className:r()(u&&b.hasTooltip)})}}},558323:(e,t,n)=>{"use strict";n.d(t,{showSymbolSearchItemsDialog:()=>l});var o=n(50959),s=n(500962),r=n(753327),a=n(63192),i=n(229711);function l(e){const{initialMode:t="symbolSearch",autofocus:n=!0,defaultValue:l,showSpreadActions:c,selectSearchOnInit:u,onSearchComplete:p,dialogTitle:d,placeholder:h,fullscreen:m,initialScreen:g,wrapper:v,dialog:f,contentItem:_,onClose:C,footer:b,symbolTypes:y,searchInput:E,emptyState:S,hideMarkedListFlag:T,dialogWidth:x="auto",manager:N}=e;if(a.dialogsOpenerManager.isOpened("SymbolSearch")||a.dialogsOpenerManager.isOpened("ChangeIntervalDialog"))return;const w=document.createElement("div"),P=o.createElement(r.SlotContext.Provider,{value:null!=N?N:null
},o.createElement(i.SymbolSearchItemsDialog,{onClose:k,initialMode:t,defaultValue:l,showSpreadActions:c,hideMarkedListFlag:T,selectSearchOnInit:u,onSearchComplete:p,dialogTitle:d,placeholder:h,fullscreen:m,initialScreen:g,wrapper:v,dialog:f,contentItem:_,footer:b,symbolTypes:y,searchInput:E,emptyState:S,autofocus:n,dialogWidth:x}));function k(){s.unmountComponentAtNode(w),a.dialogsOpenerManager.setAsClosed("SymbolSearch"),C&&C()}return s.render(P,w),a.dialogsOpenerManager.setAsOpened("SymbolSearch"),{close:k}}},39290:(e,t,n)=>{"use strict";n.d(t,{createAdapter:()=>r});var o=n(232468),s=n(663890);function r(e){if((0,o.isLineTool)(e))return{isPine:()=>!1,isStandardPine:()=>!1,canOverrideMinTick:()=>!1,resolvedSymbolInfoBySymbol:()=>{throw new TypeError("Only study is supported.")},symbolsResolved:()=>{throw new TypeError("Only study is supported.")},parentSources:()=>{throw new TypeError("Only study is supported.")},getAllChildren:()=>[],sourceId:()=>{throw new TypeError("Only study is supported.")},inputs:()=>({}),parentSourceForInput:()=>{throw new TypeError("Only study is supported.")}};if((0,s.isStudy)(e))return e;if("isInputsStudy"in e)return e;throw new TypeError("Unsupported source type.")}},771586:(e,t,n)=>{"use strict";n.d(t,{useDefinitionProperty:()=>r});var o=n(50959),s=n(653898);const r=e=>{const t="property"in e?e.property:void 0,n="defaultValue"in e?e.defaultValue:e.property.value(),[r,a]=(0,o.useState)(t?t.value():n);(0,o.useEffect)((()=>{if(t){const n={};return a(t.value()),t.subscribe(n,(t=>{const n=t.value();e.handler&&e.handler(n),a(n)})),()=>t.unsubscribeAll(n)}return()=>{}}),[t]);return[r,e=>{if(void 0!==t){const n=t.value();s.logger.logNormal(`Changing property value from "${n}" to "${e}"`),t.setValue(e)}}]}},720911:(e,t,n)=>{"use strict";n.d(t,{CellWrap:()=>i});var o=n(50959),s=n(497754),r=n.n(s),a=n(507697);function i(e){return o.createElement("div",{className:r()(a.wrap,e.className)},e.children)}},76882:(e,t,n)=>{"use strict";n.d(t,{CheckableTitle:()=>c});var o=n(50959),s=n(302946),r=n(771586);function a(e){const{property:t,...n}=e,[a,i]=(0,r.useDefinitionProperty)({property:t}),l="mixed"===a;return o.createElement(s.Checkbox,{...n,name:"toggle-enabled",checked:l||a,indeterminate:l,onChange:function(){i("mixed"===a||!a)}})}var i=n(720911),l=n(306815);function c(e){const{property:t,disabled:n,title:s,className:r,name:c}=e,u=o.createElement("span",{className:l.title},s);return o.createElement(i.CellWrap,{className:r},t?o.createElement(a,{name:c,className:l.checkbox,property:t,disabled:n,label:u,labelAlignBaseline:!0}):u)}},955261:(e,t,n)=>{"use strict";n.d(t,{CommonSection:()=>a});var o=n(50959),s=n(835117),r=n(76882);n(609896);function a(e){const{id:t,offset:n,disabled:a,checked:i,title:l,children:c,solutionId:u}=e;return o.createElement(s.PropertyTable.Row,null,o.createElement(s.PropertyTable.Cell,{placement:"first",verticalAlign:"adaptive",offset:n,"data-section-name":t,colSpan:Boolean(c)?void 0:2,checkableTitle:!0},o.createElement(r.CheckableTitle,{name:`is-enabled-${t}`,title:l,disabled:a,
property:i}),u&&!Boolean(c)&&!1),Boolean(c)&&o.createElement(s.PropertyTable.Cell,{placement:"last","data-section-name":t},c,u&&!1))}},852830:(e,t,n)=>{"use strict";n.d(t,{GroupTitleSection:()=>i});var o=n(50959),s=n(835117),r=n(76882),a=n(393925);function i(e){return o.createElement(s.PropertyTable.Row,null,o.createElement(s.PropertyTable.Cell,{className:a.titleWrap,placement:"first",verticalAlign:"adaptive",colSpan:2,"data-section-name":e.name,checkableTitle:!0},o.createElement(r.CheckableTitle,{title:e.title,name:`is-enabled-${e.name}`,className:a.title})))}},653898:(e,t,n)=>{"use strict";n.d(t,{logger:()=>o});const o=(0,n(817808).getLogger)("Platform.GUI.PropertyDefinitionTrace")},886176:(e,t,n)=>{"use strict";n.d(t,{getTimezoneName:()=>o});n(871555);function o(e){const t=e.model().timezone();if("exchange"!==t)return t;const n=e.model().mainSeries().symbolInfo();return null==n?void 0:n.timezone}},63192:(e,t,n)=>{"use strict";n.d(t,{DialogsOpenerManager:()=>o,dialogsOpenerManager:()=>s});class o{constructor(){this._storage=new Map}setAsOpened(e,t){this._storage.set(e,t)}setAsClosed(e){this._storage.delete(e)}isOpened(e){return this._storage.has(e)}getDialogPayload(e){return this._storage.get(e)}}const s=new o},557630:(e,t,n)=>{"use strict";n.d(t,{ColorPicker:()=>M});var o=n(50959),s=n(497754),r=n.n(s),a=n(509806),i=n(724377),l=n(650151),c=n(601227),u=n(544377),p=n(192063);const d=o.createContext(void 0);var h=n(860184),m=n(535149),g=n(361561);function v(e){const{index:t,color:r,selected:i,onSelect:v}=e,[f,_]=(0,o.useState)(!1),C=(0,o.useContext)(d),b=(0,o.useRef)(null),y=Boolean(C)&&!c.CheckMobile.any();return o.createElement(o.Fragment,null,o.createElement("div",{ref:b,style:r?{color:r}:void 0,className:s(g.swatch,f&&g.hover,i&&g.selected,!r&&g.empty,String(r).toLowerCase()===h.white&&g.white),onClick:function(){v(r)},onContextMenu:y?E:void 0}),y&&o.createElement(u.PopupMenu,{isOpened:f,onClose:E,position:function(){const e=(0,l.ensureNotNull)(b.current).getBoundingClientRect();return{x:e.left,y:e.top+e.height+4}},onClickOutside:E},o.createElement(p.PopupMenuItem,{className:g.contextItem,label:a.t(null,void 0,n(854336)),icon:m,onClick:function(){E(),(0,l.ensureDefined)(C)(t)},dontClosePopup:!0})));function E(){_(!f)}}class f extends o.PureComponent{constructor(){super(...arguments),this._onSelect=e=>{const{onSelect:t}=this.props;t&&t(e)}}render(){const{colors:e,color:t,children:n}=this.props;if(!e)return null;const s=t?(0,i.parseRgb)(String(t)):void 0;return o.createElement("div",{className:g.swatches},e.map(((e,t)=>o.createElement(v,{key:String(e)+t,index:t,color:e,selected:s&&(0,i.areEqualRgb)(s,(0,i.parseRgb)(String(e))),onSelect:this._onSelect}))),n)}}var _=n(939075),C=n(805184);function b(e){const t=`Invalid RGB color: ${e}`;if(null===e)throw new Error(t);const n=e.match(/^#?([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i);if(null===n)throw new Error(t);const[,o,s,r]=n;if(!o||!s||!r)throw new Error(t);const a=parseInt(o,16)/255,i=parseInt(s,16)/255,l=parseInt(r,16)/255,c=Math.max(a,i,l),u=Math.min(a,i,l);let p
;const d=c,h=c-u,m=0===c?0:h/c;if(c===u)p=0;else{switch(c){case a:p=(i-l)/h+(i<l?6:0);break;case i:p=(l-a)/h+2;break;case l:p=(a-i)/h+4;break;default:p=0}p/=6}return{h:p,s:m,v:d}}var y=n(343370),E=n(153766);class S extends o.PureComponent{constructor(){super(...arguments),this._container=null,this._refContainer=e=>{this._container=e},this._handlePosition=e=>{const{hsv:{h:t},onChange:n}=this.props;if(!n)return;const o=(0,l.ensureNotNull)(this._container).getBoundingClientRect(),s=e.clientX-o.left,r=e.clientY-o.top;let a=s/o.width;a<0?a=0:a>1&&(a=1);let i=1-r/o.height;i<0?i=0:i>1&&(i=1),n({h:t,s:a,v:i})},this._mouseDown=e=>{window.addEventListener("mouseup",this._mouseUp),window.addEventListener("mousemove",this._mouseMove)},this._mouseUp=e=>{window.removeEventListener("mousemove",this._mouseMove),window.removeEventListener("mouseup",this._mouseUp),this._handlePosition(e)},this._mouseMove=(0,y.default)(this._handlePosition,100),this._handleTouch=e=>{this._handlePosition(e.nativeEvent.touches[0])}}render(){const{className:e,hsv:{h:t,s:n,v:s}}=this.props,a=`hsl(${360*t}, 100%, 50%)`;return o.createElement("div",{className:r()(E.saturation,e),style:{backgroundColor:a},ref:this._refContainer,onMouseDown:this._mouseDown,onTouchStart:this._handleTouch,onTouchMove:this._handleTouch},o.createElement("div",{className:E.pointer,style:{left:100*n+"%",top:100*(1-s)+"%"}}))}}var T=n(592155);class x extends o.PureComponent{constructor(){super(...arguments),this._container=null,this._refContainer=e=>{this._container=e},this._handlePosition=e=>{const{hsv:{s:t,v:n},onChange:o}=this.props;if(!o)return;const s=(0,l.ensureNotNull)(this._container).getBoundingClientRect();let r=(e.clientY-s.top)/s.height;r<0?r=0:r>1&&(r=1),o({h:r,s:t,v:n})},this._mouseDown=e=>{window.addEventListener("mouseup",this._mouseUp),window.addEventListener("mousemove",this._mouseMove)},this._mouseUp=e=>{window.removeEventListener("mousemove",this._mouseMove),window.removeEventListener("mouseup",this._mouseUp),this._handlePosition(e)},this._mouseMove=(0,y.default)(this._handlePosition,100),this._handleTouch=e=>{this._handlePosition(e.nativeEvent.touches[0])}}render(){const{className:e,hsv:{h:t}}=this.props;return o.createElement("div",{className:r()(T.hue,e)},o.createElement("div",{className:T.pointerContainer,ref:this._refContainer,onMouseDown:this._mouseDown,onTouchStart:this._handleTouch,onTouchMove:this._handleTouch},o.createElement("div",{className:T.pointer,style:{top:100*t+"%"}})))}}var N=n(266454);const w="#000000",P=a.t(null,{context:"Color Picker"},n(340276));class k extends o.PureComponent{constructor(e){super(e),this._handleHSV=e=>{const t=function(e){const{h:t,s:n,v:o}=e;let s,r,a;const i=Math.floor(6*t),l=6*t-i,c=o*(1-n),u=o*(1-l*n),p=o*(1-(1-l)*n);switch(i%6){case 0:s=o,r=p,a=c;break;case 1:s=u,r=o,a=c;break;case 2:s=c,r=o,a=p;break;case 3:s=c,r=u,a=o;break;case 4:s=p,r=c,a=o;break;case 5:s=o,r=c,a=u;break;default:s=0,r=0,a=0}return"#"+[255*s,255*r,255*a].map((e=>("0"+Math.round(e).toString(16)).replace(/.+?([a-f0-9]{2})$/i,"$1"))).join("")}(e)||w
;this.setState({color:t,inputColor:t.replace(/^#/,""),hsv:e}),this.props.onSelect(t)},this._handleInput=e=>{const t=e.currentTarget.value;try{const e=b(t),n=`#${t}`;this.setState({color:n,inputColor:t,hsv:e}),this.props.onSelect(n)}catch(e){this.setState({inputColor:t})}},this._handleAddColor=()=>this.props.onAdd(this.state.color);const t=e.color||w;this.state={color:t,inputColor:t.replace(/^#/,""),hsv:b(t)}}render(){const{color:e,hsv:t,inputColor:n}=this.state;return o.createElement("div",{className:N.container},o.createElement("div",{className:N.form},o.createElement("div",{className:N.swatch,style:{backgroundColor:e}}),o.createElement("div",{className:N.inputWrap},o.createElement("span",{className:N.inputHash},"#"),o.createElement("input",{type:"text",className:N.input,value:n,onChange:this._handleInput})),o.createElement("div",{className:N.buttonWrap},o.createElement(C.Button,{size:"s",onClick:this._handleAddColor},P))),o.createElement("div",{className:N.hueSaturationWrap},o.createElement(S,{className:N.saturation,hsv:t,onChange:this._handleHSV}),o.createElement(x,{className:N.hue,hsv:t,onChange:this._handleHSV})))}}var D=n(380072);const I=a.t(null,{context:"Color Picker"},n(453585)),A=a.t(null,{context:"Color Picker"},n(681865));class M extends o.PureComponent{constructor(e){super(e),this._handleAddColor=e=>{this.setState({isCustom:!1}),this._onToggleCustom(!1);const{onAddColor:t}=this.props;t&&t(e)},this._handleSelectColor=e=>{const{onColorChange:t}=this.props,{isCustom:n}=this.state;t&&t(e,n)},this._handleCustomClick=()=>{this.setState({isCustom:!0}),this._onToggleCustom(!0)},this._handleOpacity=e=>{const{onOpacityChange:t}=this.props;t&&t(e)},this.state={isCustom:!1}}componentDidUpdate(e,t){e.selectOpacity!==this.props.selectOpacity&&this.props.menu&&this.props.menu.update()}render(){const{color:e,opacity:t,selectCustom:n,selectOpacity:s,customColors:a,onRemoveCustomColor:i}=this.props,{isCustom:l}=this.state,c="number"==typeof t?t:1;return l?o.createElement(k,{color:e,onSelect:this._handleSelectColor,onAdd:this._handleAddColor}):o.createElement("div",{className:D.container},o.createElement(f,{colors:h.basic,color:e,onSelect:this._handleSelectColor}),o.createElement(f,{colors:h.extended,color:e,onSelect:this._handleSelectColor}),o.createElement("div",{className:D.separator}),o.createElement(d.Provider,{value:i},o.createElement(f,{colors:a,color:e,onSelect:this._handleSelectColor},n&&o.createElement("div",{className:r()(D.customButton,"apply-common-tooltip"),onClick:this._handleCustomClick,title:I}))),s&&o.createElement(o.Fragment,null,o.createElement("div",{className:D.sectionTitle},A),o.createElement(_.Opacity,{color:e,opacity:c,onChange:this._handleOpacity})))}_onToggleCustom(e){const{onToggleCustom:t}=this.props;t&&t(e)}}},939075:(e,t,n)=>{"use strict";n.d(t,{Opacity:()=>l});var o=n(50959),s=n(497754),r=n(650151),a=n(218954),i=n(401034);class l extends o.PureComponent{constructor(e){super(e),this._container=null,this._pointer=null,this._raf=null,this._refContainer=e=>{this._container=e},
this._refPointer=e=>{this._pointer=e},this._handlePosition=e=>{null===this._raf&&(this._raf=requestAnimationFrame((()=>{const t=(0,r.ensureNotNull)(this._container),n=(0,r.ensureNotNull)(this._pointer),o=t.getBoundingClientRect(),s=n.offsetWidth,i=e.clientX-s/2-o.left,l=(0,a.clamp)(i/(o.width-s),0,1);this.setState({inputOpacity:Math.round(100*l).toString()}),this.props.onChange(l),this._raf=null})))},this._onSliderClick=e=>{this._handlePosition(e.nativeEvent),this._dragSubscribe()},this._mouseUp=e=>{this.setState({isPointerDragged:!1}),this._dragUnsubscribe(),this._handlePosition(e)},this._mouseMove=e=>{this.setState({isPointerDragged:!0}),this._handlePosition(e)},this._onTouchStart=e=>{this._handlePosition(e.nativeEvent.touches[0])},this._handleTouch=e=>{this.setState({isPointerDragged:!0}),this._handlePosition(e.nativeEvent.touches[0])},this._handleTouchEnd=()=>{this.setState({isPointerDragged:!1})},this._handleInput=e=>{const t=e.currentTarget.value,n=Number(t)/100;this.setState({inputOpacity:t}),Number.isNaN(n)||n>1||this.props.onChange(n)},this.state={inputOpacity:Math.round(100*e.opacity).toString(),isPointerDragged:!1}}componentWillUnmount(){null!==this._raf&&(cancelAnimationFrame(this._raf),this._raf=null),this._dragUnsubscribe()}render(){const{color:e,opacity:t,hideInput:n}=this.props,{inputOpacity:r,isPointerDragged:a}=this.state,l={color:e||void 0};return o.createElement("div",{className:i.opacity},o.createElement("div",{className:i.opacitySlider,style:l,ref:this._refContainer,onMouseDown:this._onSliderClick,onTouchStart:this._onTouchStart,onTouchMove:this._handleTouch,onTouchEnd:this._handleTouchEnd},o.createElement("div",{className:i.opacitySliderGradient,style:{backgroundImage:`linear-gradient(90deg, transparent, ${e})`}}),o.createElement("div",{className:i.opacityPointerWrap},o.createElement("div",{className:s(i.pointer,a&&i.dragged),style:{left:100*t+"%"},ref:this._refPointer}))),!n&&o.createElement("div",{className:i.opacityInputWrap},o.createElement("input",{type:"text",className:i.opacityInput,value:r,onChange:this._handleInput}),o.createElement("span",{className:i.opacityInputPercent},"%")))}_dragSubscribe(){const e=(0,r.ensureNotNull)(this._container).ownerDocument;e&&(e.addEventListener("mouseup",this._mouseUp),e.addEventListener("mousemove",this._mouseMove))}_dragUnsubscribe(){const e=(0,r.ensureNotNull)(this._container).ownerDocument;e&&(e.removeEventListener("mousemove",this._mouseMove),e.removeEventListener("mouseup",this._mouseUp))}}},860184:(e,t,n)=>{"use strict";n.d(t,{white:()=>s,basic:()=>i,extended:()=>c});var o=n(676507);const s=o.colorsPalette["color-white"],r=["ripe-red","tan-orange","banana-yellow","iguana-green","minty-green","sky-blue","tv-blue","deep-blue","grapes-purple","berry-pink"],a=[200,300,400,500,600,700,800,900].map((e=>`color-cold-gray-${e}`));a.unshift("color-white"),a.push("color-black"),r.forEach((e=>{a.push(`color-${e}-500`)}));const i=a.map((e=>o.colorsPalette[e])),l=[];[100,200,300,400,700,900].forEach((e=>{r.forEach((t=>{l.push(`color-${t}-${e}`)}))}))
;const c=l.map((e=>o.colorsPalette[e]))},131537:(e,t,n)=>{"use strict";n.d(t,{Dialog:()=>c});var o=n(50959),s=n(497754),r=n(753327),a=n(763212),i=n(800417),l=n(536612);class c extends o.PureComponent{constructor(){super(...arguments),this._manager=new a.OverlapManager,this._handleSlot=e=>{this._manager.setContainer(e)}}render(){const{rounded:e=!0,shadowed:t=!0,fullscreen:n=!1,darker:a=!1,className:c,backdrop:u,containerTabIndex:p=-1}=this.props,d=s(c,l.dialog,e&&l.rounded,t&&l.shadowed,n&&l.fullscreen,a&&l.darker),h=(0,i.filterDataProps)(this.props),m=this.props.style?{...this._createStyles(),...this.props.style}:this._createStyles();return o.createElement(o.Fragment,null,o.createElement(r.SlotContext.Provider,{value:this._manager},u&&o.createElement("div",{onClick:this.props.onClickBackdrop,className:l.backdrop}),o.createElement("div",{...h,className:d,style:m,ref:this.props.reference,onFocus:this.props.onFocus,onMouseDown:this.props.onMouseDown,onMouseUp:this.props.onMouseUp,onClick:this.props.onClick,onKeyDown:this.props.onKeyDown,tabIndex:p,"aria-label":this.props.containerAriaLabel},this.props.children)),o.createElement(r.Slot,{reference:this._handleSlot}))}_createStyles(){const{bottom:e,left:t,width:n,right:o,top:s,zIndex:r,height:a}=this.props;return{bottom:e,left:t,right:o,top:s,zIndex:r,maxWidth:n,height:a}}}},910549:(e,t,n)=>{"use strict";n.d(t,{PopupContext:()=>o});const o=n(50959).createContext(null)},40766:(e,t,n)=>{"use strict";n.d(t,{PopupDialog:()=>E});var o=n(50959),s=n(497754),r=n(650151),a=n(131537),i=n(874485),l=n(923235),c=n(218954);function u(e,t,n,o){return e+t>o&&(e=o-t),e<n&&(e=n),e}function p(e){return{x:(0,c.clamp)(e.x,20,document.documentElement.clientWidth-20),y:(0,c.clamp)(e.y,20,window.innerHeight-20)}}function d(e){return{x:e.clientX,y:e.clientY}}function h(e){return{x:e.touches[0].clientX,y:e.touches[0].clientY}}class m{constructor(e,t,n={boundByScreen:!0}){this._drag=null,this._canBeTouchClick=!1,this._frame=null,this._onMouseDragStart=e=>{if(0!==e.button||this._isTargetNoDraggable(e))return;e.preventDefault(),document.addEventListener("mousemove",this._onMouseDragMove),document.addEventListener("mouseup",this._onMouseDragEnd);const t=p(d(e));this._dragStart(t)},this._onTouchDragStart=e=>{if(this._isTargetNoDraggable(e))return;this._canBeTouchClick=!0,e.preventDefault(),this._header.addEventListener("touchmove",this._onTouchDragMove,{passive:!1});const t=p(h(e));this._dragStart(t)},this._onMouseDragEnd=e=>{e.target instanceof Node&&this._header.contains(e.target)&&e.preventDefault(),document.removeEventListener("mousemove",this._onMouseDragMove),document.removeEventListener("mouseup",this._onMouseDragEnd),this._onDragStop()},this._onTouchDragEnd=e=>{this._header.removeEventListener("touchmove",this._onTouchDragMove),this._onDragStop(),this._canBeTouchClick&&(this._canBeTouchClick=!1,function(e){if(e instanceof SVGElement){const t=document.createEvent("SVGEvents");t.initEvent("click",!0,!0),e.dispatchEvent(t)}e instanceof HTMLElement&&e.click()}(e.target))},this._onMouseDragMove=e=>{
const t=p(d(e));this._dragMove(t)},this._onTouchDragMove=e=>{this._canBeTouchClick=!1,e.preventDefault();const t=p(h(e));this._dragMove(t)},this._onDragStop=()=>{this._drag=null,this._header.classList.remove("dragging")},this._dialog=e,this._header=t,this._options=n,this._header.addEventListener("mousedown",this._onMouseDragStart),this._header.addEventListener("touchstart",this._onTouchDragStart),this._header.addEventListener("touchend",this._onTouchDragEnd)}destroy(){null!==this._frame&&cancelAnimationFrame(this._frame),this._header.removeEventListener("mousedown",this._onMouseDragStart),document.removeEventListener("mouseup",this._onMouseDragEnd),this._header.removeEventListener("touchstart",this._onTouchDragStart),this._header.removeEventListener("touchend",this._onTouchDragEnd),document.removeEventListener("mouseleave",this._onMouseDragEnd)}updateOptions(e){this._options=e}_dragStart(e){const t=this._dialog.getBoundingClientRect();this._drag={startX:e.x,startY:e.y,finishX:e.x,finishY:e.y,dialogX:t.left,dialogY:t.top};const n=Math.round(t.left),o=Math.round(t.top);this._dialog.style.transform=`translate(${n}px, ${o}px)`,this._header.classList.add("dragging"),this._options.onDragStart&&this._options.onDragStart()}_dragMove(e){if(this._drag){if(this._drag.finishX=e.x,this._drag.finishY=e.y,null!==this._frame)return;this._frame=requestAnimationFrame((()=>{if(this._drag){const t=e.x-this._drag.startX,n=e.y-this._drag.startY;this._moveDialog(this._drag.dialogX+t,this._drag.dialogY+n)}this._frame=null}))}}_moveDialog(e,t){const n=this._dialog.getBoundingClientRect(),{boundByScreen:o}=this._options,s=u(e,n.width,o?0:-1/0,o?window.innerWidth:1/0),r=u(t,n.height,o?0:-1/0,o?window.innerHeight:1/0);this._dialog.style.transform=`translate(${Math.round(s)}px, ${Math.round(r)}px)`}_isTargetNoDraggable(e){return e.target instanceof Element&&null!==e.target.closest("[data-disable-drag]")}}const g={vertical:0};class v{constructor(e,t){this._frame=null,this._isFullscreen=!1,this._handleResize=()=>{null===this._frame&&(this._frame=requestAnimationFrame((()=>{this.recalculateBounds(),this._frame=null})))},this._dialog=e,this._guard=t.guard||g,this._calculateDialogPosition=t.calculateDialogPosition,this._initialHeight=e.style.height,window.addEventListener("resize",this._handleResize)}updateOptions(e){this._guard=e.guard||g,this._calculateDialogPosition=e.calculateDialogPosition}setFullscreen(e){this._isFullscreen!==e&&(this._isFullscreen=e,this.recalculateBounds())}centerAndFit(){const{x:e,y:t}=this.getDialogsTopLeftCoordinates(),n=this._calcAvailableHeight(),o=this._calcDialogHeight();if(n===o)if(this._calculateDialogPosition){const{left:e,top:t}=this._calculateDialogPosition(this._dialog,document.documentElement,this._guard);this._dialog.style.transform=`translate(${Math.round(e)}px, ${Math.round(t)}px)`}else this._dialog.style.height=o+"px";this._dialog.style.top="0px",this._dialog.style.left="0px",this._dialog.style.transform=`translate(${e}px, ${t}px)`}getDialogsTopLeftCoordinates(){
const{clientHeight:e,clientWidth:t}=document.documentElement,n=this._calcDialogHeight(),o=t/2-this._dialog.clientWidth/2,s=e/2-n/2;return{x:Math.round(o),y:Math.round(s)}}recalculateBounds(){const{clientHeight:e,clientWidth:t}=document.documentElement;if(this._isFullscreen)this._dialog.style.top="0px",this._dialog.style.left="0px",this._dialog.style.width="100%",this._dialog.style.height="100%",this._dialog.style.transform="none";else{const{vertical:n}=this._guard;if(this._calculateDialogPosition){const o=this._calculateDialogPosition(this._dialog,{clientWidth:t,clientHeight:e},{vertical:n}),{left:s,top:r}=o;this._dialog.style.transform=`translate(${Math.round(s)}px, ${Math.round(r)}px)`}else{this._dialog.style.width="",this._dialog.style.height="";const o=this._dialog.getBoundingClientRect(),s=e-2*n,r=u(o.left,o.width,0,t),a=u(o.top,o.height,n,e);this._dialog.style.top="0px",this._dialog.style.left="0px",this._dialog.style.transform=`translate(${Math.round(r)}px, ${Math.round(a)}px)`,this._dialog.style.height=s<o.height?s+"px":this._initialHeight}}}destroy(){window.removeEventListener("resize",this._handleResize),null!==this._frame&&(cancelAnimationFrame(this._frame),this._frame=null)}_calcDialogHeight(){const e=this._calcAvailableHeight();return e<this._dialog.clientHeight?e:this._dialog.clientHeight}_calcAvailableHeight(){return document.documentElement.clientHeight-2*this._guard.vertical}}var f=n(8361),_=n(910549),C=n(285089),b=n(419283);b["tooltip-offset"];class y extends o.PureComponent{constructor(e){super(e),this._dialog=null,this._cleanUpFunctions=[],this._prevActiveElement=null,this._handleDialogRef=e=>{const{reference:t}=this.props;this._dialog=e,"function"==typeof t&&t(e)},this._handleFocus=e=>{this._moveToTop()},this._handleMouseDown=e=>{this._moveToTop()},this._handleTouchStart=e=>{this._moveToTop()},this.state={canFitTooltip:!1}}render(){return o.createElement(_.PopupContext.Provider,{value:this},o.createElement(l.OutsideEvent,{mouseDown:!0,touchStart:!0,handler:this.props.onClickOutside},(e=>o.createElement("div",{ref:e,"data-outside-boundary-for":this.props.name,onFocus:this._handleFocus,onMouseDown:this._handleMouseDown,onTouchStart:this._handleTouchStart,"data-dialog-name":this.props["data-dialog-name"]},o.createElement(a.Dialog,{style:this._applyAnimationCSSVariables(),...this.props,reference:this._handleDialogRef,className:s(b.dialog,this.props.className)},!1,this.props.children)))))}componentDidMount(){const{draggable:e,boundByScreen:t,onDragStart:n}=this.props,o=(0,r.ensureNotNull)(this._dialog);if(e){const e=o.querySelector("[data-dragg-area]");if(e&&e instanceof HTMLElement){const s=new m(o,e,{boundByScreen:Boolean(t),onDragStart:n});this._cleanUpFunctions.push((()=>s.destroy())),this._drag=s}}this._prevActiveElement=document.activeElement,this.props.autofocus&&!o.contains(document.activeElement)&&o.focus(),(this._isFullScreen()||this.props.fixedBody)&&(0,C.setFixedBodyState)(!0);const{guard:s,calculateDialogPosition:a}=this.props
;if(this.props.resizeHandler)this._resize=this.props.resizeHandler;else{const e=new v(o,{guard:s,calculateDialogPosition:a});this._cleanUpFunctions.push((()=>e.destroy())),this._resize=e}this.props.isAnimationEnabled&&this.props.growPoint&&this._applyAppearanceAnimation(this.props.growPoint),this.props.centeredOnMount&&this._resize.centerAndFit(),this._resize.setFullscreen(this._isFullScreen()),this.props.shouldForceFocus&&o.focus()}componentDidUpdate(){if(this._resize){const{guard:e,calculateDialogPosition:t}=this.props;this._resize.updateOptions({guard:e,calculateDialogPosition:t}),this._resize.setFullscreen(this._isFullScreen())}this._drag&&this._drag.updateOptions({boundByScreen:Boolean(this.props.boundByScreen),onDragStart:this.props.onDragStart})}componentWillUnmount(){var e;if(this._prevActiveElement&&document.body.contains(this._prevActiveElement)&&(null===document.activeElement||document.activeElement===document.body||(null===(e=this._dialog)||void 0===e?void 0:e.contains(document.activeElement))))try{this._prevActiveElement.focus({preventScroll:!0})}catch(e){}for(const e of this._cleanUpFunctions)e();(this._isFullScreen()||this.props.fixedBody)&&(0,C.setFixedBodyState)(!1)}focus(){this._dialog&&this._dialog.focus()}centerAndFit(){this._resize&&this._resize.centerAndFit()}recalculateBounds(){this._resize&&this._resize.recalculateBounds()}_moveToTop(){null!==this.context&&this.context.moveToTop()}_applyAnimationCSSVariables(){return{"--animationTranslateStartX":null,"--animationTranslateStartY":null,"--animationTranslateEndX":null,"--animationTranslateEndY":null}}_applyAppearanceAnimation(e){if(this._resize&&this._dialog){const{x:t,y:n}=e,{x:o,y:s}=this._resize.getDialogsTopLeftCoordinates();this._dialog.style.setProperty("--animationTranslateStartX",`${t}px`),this._dialog.style.setProperty("--animationTranslateStartY",`${n}px`),this._dialog.style.setProperty("--animationTranslateEndX",`${o}px`),this._dialog.style.setProperty("--animationTranslateEndY",`${s}px`),this._dialog.classList.add(b.dialogAnimatedAppearance)}}_handleTooltipFit(){0}_isFullScreen(){return Boolean(this.props.fullscreen)}}y.contextType=f.PortalContext,y.defaultProps={boundByScreen:!0,draggable:!0,centeredOnMount:!0};const E=(0,i.makeOverlapable)(y)},206397:(e,t,n)=>{"use strict";n.d(t,{useCustomColors:()=>l});var o=n(50959),s=n(870122),r=n(559410);function a(e,t){(0,o.useEffect)((()=>(r.subscribe(e,t,null),()=>{r.unsubscribe(e,t,null)})),[e,t])}var i=n(724377);function l(){const[e,t]=(0,o.useState)((0,s.getJSON)("pickerCustomColors",[]));a("add_new_custom_color",(n=>t(c(n,e)))),a("remove_custom_color",(n=>t(u(n,e))));const n=(0,o.useCallback)((t=>{const n=t?(0,i.parseRgb)(t):null;e.some((e=>null!==e&&null!==n&&(0,i.areEqualRgb)((0,i.parseRgb)(e),n)))||(r.emit("add_new_custom_color",t),(0,s.setJSON)("pickerCustomColors",c(t,e)))}),[e]),l=(0,o.useCallback)((t=>{(t>=0||t<e.length)&&(r.emit("remove_custom_color",t),(0,s.setJSON)("pickerCustomColors",u(t,e)))}),[e]);return[e,n,l]}function c(e,t){const n=t.slice();return n.push(e),
n.length>29&&n.shift(),n}function u(e,t){return t.filter(((t,n)=>e!==n))}},923235:(e,t,n)=>{"use strict";n.d(t,{OutsideEvent:()=>s});var o=n(961174);function s(e){const{children:t,...n}=e;return t((0,o.useOutsideEvent)(n))}},874485:(e,t,n)=>{"use strict";n.d(t,{makeOverlapable:()=>r});var o=n(50959),s=n(8361);function r(e){return class extends o.PureComponent{render(){const{isOpened:t,root:n}=this.props;if(!t)return null;const r=o.createElement(e,{...this.props,zIndex:150});return"parent"===n?r:o.createElement(s.Portal,null,r)}}}},783852:e=>{e.exports={titleWrap:"titleWrap-_6CD9pJu",groupFooter:"groupFooter-_6CD9pJu"}},351424:e=>{e.exports={inlineRow:"inlineRow-hi3GkxTA"}},432850:e=>{e.exports={icon:"icon-siMviKkC"}},555386:e=>{e.exports={input:"input-dV7I8XN5",symbol:"symbol-dV7I8XN5",checkbox:"checkbox-dV7I8XN5",label:"label-dV7I8XN5",dropdownMenu:"dropdownMenu-dV7I8XN5",sessionStart:"sessionStart-dV7I8XN5",sessionEnd:"sessionEnd-dV7I8XN5",sessionInputContainer:"sessionInputContainer-dV7I8XN5",sessionDash:"sessionDash-dV7I8XN5",inputGroup:"inputGroup-dV7I8XN5",textarea:"textarea-dV7I8XN5",inlineGroup:"inlineGroup-dV7I8XN5",hasTooltip:"hasTooltip-dV7I8XN5"}},520374:e=>{e.exports={content:"content-mTbR5jYu",cell:"cell-mTbR5jYu",inner:"inner-mTbR5jYu",first:"first-mTbR5jYu",inlineCell:"inlineCell-mTbR5jYu",fill:"fill-mTbR5jYu",top:"top-mTbR5jYu",topCenter:"topCenter-mTbR5jYu",offset:"offset-mTbR5jYu",inlineRow:"inlineRow-mTbR5jYu",grouped:"grouped-mTbR5jYu",separator:"separator-mTbR5jYu",groupSeparator:"groupSeparator-mTbR5jYu",big:"big-mTbR5jYu",adaptive:"adaptive-mTbR5jYu",checkableTitle:"checkableTitle-mTbR5jYu"}},136341:e=>{e.exports={wrap:"wrap-BE2IgHEr",labelWrap:"labelWrap-BE2IgHEr",label:"label-BE2IgHEr",hasTooltip:"hasTooltip-BE2IgHEr"}},604406:(e,t,n)=>{"use strict";n.d(t,{splitThousands:()=>s});var o=n(150335);function s(e,t="&nbsp;"){let n=e+"";-1!==n.indexOf("e")&&(n=function(e){return(0,o.fixComputationError)(e).toFixed(10).replace(/\.?0+$/,"")}(Number(e)));const s=n.split(".");return s[0].replace(/\B(?=(\d{3})+(?!\d))/g,t)+(s[1]?"."+s[1]:"")}},188076:(e,t,n)=>{"use strict";n.d(t,{bind:()=>a,setter:()=>i});var o=n(50959),s=n(488082),r=n(886176);function a(e){var t;return t=class extends o.PureComponent{constructor(){super(...arguments),this._onChange=(e,t,n)=>{const{setValue:o}=this.context,{onChange:s}=this.props;i(o,s)(e,t,n)}}render(){const{input:t}=this.props,{values:n,model:s}=this.context;return o.createElement(e,{...this.props,value:n[t.id],tzName:(0,r.getTimezoneName)(s),onChange:this._onChange})}},t.contextType=s.PropertyContext,t}function i(e,t){return(n,o,s)=>{e(o,n,s),t&&t(n,o,s)}}},488082:(e,t,n)=>{"use strict";n.d(t,{PropertyContext:()=>c,PropertyContainer:()=>u});var o=n(50959),s=n(650151),r=n(509806),a=n(440097);const i=(0,n(817808).getLogger)("Platform.GUI.StudyInputPropertyContainer"),l=new a.TranslatedString("change {propertyName} property",r.t(null,void 0,n(18567))),c=o.createContext(null);class u extends o.PureComponent{constructor(e){super(e),this._setValue=(e,t,o)=>{
const{property:c,model:u}=this.props,p=(0,s.ensureDefined)(c.child(e));i.logNormal(`Changing property "${e}" value from "${c.value()}" to "${t}"`);const d=new a.TranslatedString(o,function(e){return r.t(e,{context:"input"},n(788601))}(o));u.setProperty(p,t,l.format({propertyName:d}))};const{property:t}=e,o={};t.childNames().forEach((e=>{const n=(0,s.ensureDefined)(t.child(e));o.hasOwnProperty(e)||(o[e]=n.value())})),this.state=o}componentDidMount(){const{property:e,onStudyInputChange:t}=this.props;e.childNames().forEach((n=>{(0,s.ensureDefined)(e.child(n)).subscribe(this,(e=>{const o=e.value();i.logNormal(`Property "${n}" updated to value "${o}"`),this.setState({[n]:o}),null==t||t(o,n)}))}))}componentWillUnmount(){const{property:e}=this.props;e.childNames().forEach((t=>{(0,s.ensureDefined)(e.child(t)).unsubscribeAll(this)}))}render(){const{study:e,model:t,children:n}=this.props,s={study:e,model:t,values:this.state,setValue:this._setValue};return o.createElement(c.Provider,{value:s},n)}}},814128:(e,t,n)=>{"use strict";n.d(t,{ModelContext:()=>s,bindModel:()=>r});var o=n(50959);const s=o.createContext(null);function r(e,t){return o.createElement(s.Consumer,null,(n=>n?o.createElement(e,{...Object.assign({model:n},t)}):null))}},775921:(e,t,n)=>{"use strict";n.d(t,{StylePropertyContext:()=>r,StylePropertyContainer:()=>a,bindPropertyContext:()=>i});var o=n(50959),s=n(814128);const r=o.createContext(null);class a extends o.PureComponent{constructor(){super(...arguments),this._setValue=(e,t,n)=>{const{model:o}=this.props;o.setProperty(e,t,n)}}componentDidMount(){const{property:e}=this.props;e.subscribe(this,(()=>this.forceUpdate()))}componentWillUnmount(){const{property:e}=this.props;e.unsubscribeAll(this)}render(){const e={setValue:this._setValue};return o.createElement(r.Provider,{value:e},this.props.children)}}function i(e,t){return(0,s.bindModel)((({model:n})=>o.createElement(a,{model:n,property:t.property},o.createElement(e,{...t}))),t)}},881958:(e,t,n)=>{"use strict";n.d(t,{InputTooltip:()=>h});var o=n(50959),s=n(497754),r=n.n(s),a=n(72571),i=n(744471),l=n(972535),c=n(432850),u=n(785508);function p(){document.removeEventListener("scroll",p),document.removeEventListener("touchstart",p),(0,i.hide)()}function d(e){l.mobiletouch&&((0,i.showOnElement)(e.currentTarget,{tooltipDelay:0}),document.addEventListener("scroll",p),document.addEventListener("touchstart",p))}function h(e){const{className:t,title:n}=e;return o.createElement(a.Icon,{icon:u,className:r()(t,"apply-common-tooltip",c.icon),title:n,onClick:d})}},298134:(e,t,n)=>{"use strict";n.d(t,{isGroup:()=>s,isInputInlines:()=>r,getInputGroups:()=>a});var o=n(650151);function s(e){return e.hasOwnProperty("groupType")}function r(e){return s(e)&&"inline"===e.groupType}function a(e){const t=[],n=new Map,s=new Map;return s.set(void 0,new Map),e.forEach((e=>{const{group:r,inline:a}=e;if(void 0!==r||void 0!==a)if(void 0!==r)if(void 0!==a)if(n.has(r)){const t=(0,o.ensureDefined)(n.get(r));let l;s.has(t)?l=(0,o.ensureDefined)(s.get(t)):(l=new Map,s.set(t,l)),
i(e,"inline",a,l,t.children)}else{const o={id:a,groupType:"inline",children:[e]},i={id:r,groupType:"group",children:[o]},l=new Map;l.set(a,o),s.set(i,l),n.set(r,i),t.push(i)}else i(e,"group",r,n,t);else{const n=(0,o.ensureDefined)(s.get(void 0));i(e,"inline",(0,o.ensureDefined)(a),n,t)}else t.push(e)})),t}function i(e,t,n,s,r){if(s.has(n))(0,o.ensureDefined)(s.get(n)).children.push(e);else{const o={id:n,groupType:t,children:[e]};s.set(n,o),r.push(o)}}},780894:(e,t,n)=>{"use strict";n.d(t,{InputRow:()=>G});var o=n(509806),s=n(50959),r=n(650151),a=n(939291),i=n(188838),l=n(599206),c=n(297442),u=n(497754),p=n.n(u),d=n(654936),h=n(188076),m=n(315612),g=n(555386);class v extends s.PureComponent{constructor(){super(...arguments),this._onChange=e=>{const{input:{id:t,name:n},onChange:o}=this.props;o(e.currentTarget.value,t,n)}}render(){const{input:{defval:e},value:t,disabled:n,onBlur:o,onKeyDown:r,hasTooltip:a}=this.props;return s.createElement(d.InputControl,{className:p()(g.input,a&&g.hasTooltip),value:void 0===t?e:t,onChange:this._onChange,onBlur:o,onKeyDown:r,disabled:n})}}const f=(0,m.debounced)(v),_=(0,h.bind)(f);var C=n(841919),b=n(835117);function y(e){const{className:t}=e,n=(0,s.useContext)(b.PropertyTable.InlineRowContext);return s.createElement("div",{className:u(g.inputGroup,n&&g.inlineGroup,t)},e.children)}var E=n(44807);function S(e=""){const[,t="",n="",o="",s=""]=Array.from(e.match(/^(\d\d)(\d\d)-(\d\d)(\d\d)/)||[]);return[`${t}:${n}`,`${o}:${s}`]}class T extends s.PureComponent{constructor(e){super(e),this._onStartPick=e=>{this.setState({startTime:e},this._onChange)},this._onEndPick=e=>{this.setState({endTime:e},this._onChange)},this._onChange=()=>{const{input:{id:e,name:t},onChange:n}=this.props,{startTime:o,endTime:s}=this.state;n(o.replace(":","")+"-"+s.replace(":",""),e,t)};const t=e.value||e.input.defval,[n,o]=S(t);this.state={prevValue:t,startTime:n,endTime:o}}render(){const{startTime:e,endTime:t}=this.state,{hasTooltip:n,disabled:o}=this.props;return s.createElement(y,{className:p()(n&&g.hasTooltip)},s.createElement("div",{className:g.sessionStart},s.createElement(E.TimeInput,{className:p()(g.input,g.sessionInputContainer),name:"start",value:(0,r.ensureDefined)(e),onChange:this._onStartPick,disabled:o}),s.createElement("span",{className:g.sessionDash}," — ")),s.createElement("div",{className:g.sessionEnd},s.createElement(E.TimeInput,{className:p()(g.input,g.sessionInputContainer),name:"end",value:(0,r.ensureDefined)(t),onChange:this._onEndPick,disabled:o})))}static getDerivedStateFromProps(e,t){if(e.value===t.prevValue)return t;const[n,o]=S(e.value);return{prevValue:e.value,startTime:n,endTime:o}}}const x=(0,h.bind)(T);var N=n(484727),w=n(898005),P=n(488082),k=n(917780);class D extends s.PureComponent{constructor(){super(...arguments),this._onChange=e=>{const{input:{id:t,name:n},onChange:o}=this.props;o(e,t,n)}}render(){const{input:{id:e,defval:t,options:r,optionsTitles:a},value:i,disabled:l,hasTooltip:c}=this.props,u=r.map((e=>{const t=a&&a[e]?a[e]:e;return{value:e,content:o.t(t,{context:"input"
},n(788601))}})),d=void 0!==i&&r.includes(i)?i:t;return s.createElement(k.Select,{id:e,className:p()(g.input,c&&g.hasTooltip),menuClassName:g.dropdownMenu,value:d,items:u,onChange:this._onChange,disabled:l})}}const I=(0,h.bind)(D);var A=n(39290),M=n(663890);const B={open:o.t(null,void 0,n(938466)),high:o.t(null,void 0,n(441615)),low:o.t(null,void 0,n(403919)),close:o.t(null,void 0,n(336962)),hl2:o.t(null,void 0,n(391815)),hlc3:o.t(null,void 0,n(640771)),ohlc4:o.t(null,void 0,n(212504)),hlcc4:o.t(null,void 0,n(209523))};class R extends s.PureComponent{render(){const{input:e}=this.props,{study:t,model:n}=this.context;let o={...B};delete o.hlcc4;const i=(0,A.createAdapter)(t);if(t&&this._isStudy(t)&&t.isChildStudy()){const t=(0,a.getInputValue)(i.inputs()[e.id]),n=i.parentSourceForInput(t);if((0,M.isStudy)(n)){const t=n.title(),s=w.StudyMetaInfo.getChildSourceInputTitles(e,n.metaInfo(),t);o={...o,...s}}}if(N.enabled("study_on_study")&&t&&this._isStudy(t)&&(t.isChildStudy()||w.StudyMetaInfo.canBeChild(t.metaInfo()))){const e=[t,...i.getAllChildren()];n.model().allStudies().filter((t=>t.canHaveChildren()&&!e.includes(t))).forEach((e=>{const t=e.title(!0,void 0,!0),n=e.id(),s=e.metaInfo(),a=s.styles,i=s.plots||[];if(1===i.length)o[n+"$0"]=t;else if(i.length>1){const e=i.reduce(((e,o,s)=>{if(!w.StudyMetaInfo.canPlotBeSourceOfChildStudy(o.type))return e;let i;try{i=(0,r.ensureDefined)((0,r.ensureDefined)(a)[o.id]).title}catch(e){i=o.id}return{...e,[`${n}$${s}`]:`${t}: ${i}`}}),{});o={...o,...e}}}))}const l={...e,type:"text",options:Object.keys(o),optionsTitles:o};return s.createElement(I,{...this.props,input:l})}_isStudy(e){return!e.hasOwnProperty("isInputsStudy")}}R.contextType=P.PropertyContext;var F=n(638273),z=n(382213);const O=void 0,W=["1","3","5","15","30","45","60","120","180","240","1D","1W","1M","3M","6M","12M"],L=["1S","5S","10S","15S","30S"];class K extends s.PureComponent{constructor(){super(...arguments),this._onChange=e=>{const{input:{id:t,name:n},onChange:o}=this.props;o(e,t,n)}}render(){const{input:e,value:t,disabled:r,hasTooltip:a}=this.props,i=F.Interval.parse(void 0===t?e.defval:t),l=i.isValid()?i.value():t,c=O?O.get().filter((e=>!F.Interval.parse(e).isRange())):[],u=(0,z.mergeResolutions)(W,(0,z.isSecondsEnabled)()?L:[],c);return u.unshift(""),s.createElement(k.Select,{id:e.id,className:p()(g.input,g.resolution,a&&g.hasTooltip),menuClassName:p()(g.dropdownMenu,g.resolution),items:(d=u,d.map((e=>({value:e,content:""===e?o.t(null,void 0,n(394551)):(0,z.getTranslatedResolutionModel)(e).hint})))),value:l,onChange:this._onChange,disabled:r});var d}}const V=(0,h.bind)(K);var j=n(438184),U=n(775921);class $ extends s.PureComponent{render(){return s.createElement(P.PropertyContext.Consumer,null,(e=>e?this._getColorInputWithContext(e):null))}_getColorInputWithContext(e){var t;const{input:{id:n},disabled:o,hasTooltip:r}=this.props,{model:a,study:i}=e;if("properties"in i||"tempProperties"in i){const e="properties"in i?i.properties().inputs[n]:null===(t=i.tempProperties)||void 0===t?void 0:t.inputs.child(n)
;return s.createElement(U.StylePropertyContainer,{model:a,property:e},s.createElement(j.ColorWithThicknessSelect,{className:p()(r&&g.hasTooltip),color:e,disabled:o}))}return null}}class Y extends s.PureComponent{render(){const{input:e,disabled:t,onChange:n,tzName:o,hasTooltip:r}=this.props;if((0,a.isStudyInputOptionsInfo)(e))return s.createElement(I,{input:e,disabled:t,onChange:n,hasTooltip:r});switch(e.type){case"integer":return s.createElement(i.IntegerInput,{input:e,disabled:t,onChange:n,hasTooltip:r});case"float":case"price":return s.createElement(l.FloatInput,{input:e,disabled:t,onChange:n,hasTooltip:r});case"bool":return s.createElement(c.BoolInput,{input:e,disabled:t,onChange:n,hasTooltip:r});case"text":return s.createElement(_,{input:e,disabled:t,onChange:n,hasTooltip:r});case"symbol":return s.createElement(C.SymbolInput,{input:e,disabled:t,onChange:n,hasTooltip:r});case"session":return s.createElement(x,{input:e,disabled:t,onChange:n,hasTooltip:r});case"source":return s.createElement(R,{input:e,disabled:t,onChange:n,hasTooltip:r});case"resolution":return s.createElement(V,{input:e,disabled:t,onChange:n,hasTooltip:r});case"time":default:return null;case"color":return s.createElement($,{input:e,disabled:t,onChange:n,hasTooltip:r})}}}var H=n(881958);class G extends s.PureComponent{render(){const{label:e,children:t,input:a,disabled:i,onChange:l,labelAlign:c,grouped:u,tooltip:p,offset:d}=this.props;return s.createElement(b.PropertyTable.Row,null,s.createElement(b.PropertyTable.Cell,{placement:"first",verticalAlign:c,grouped:u,offset:d},void 0!==e?e:o.t((0,r.ensureDefined)(a).name,{context:"input"},n(788601))),s.createElement(b.PropertyTable.Cell,{placement:"last",grouped:u},t||s.createElement(Y,{input:(0,r.ensureDefined)(a),onChange:l,disabled:i,hasTooltip:Boolean(p)}),p&&s.createElement(H.InputTooltip,{title:p})))}}},45720:(e,t,n)=>{"use strict";n.d(t,{InputsTabContent:()=>W});var o,s=n(50959),r=n(509806),a=n(488082),i=n(835117),l=n(732834),c=n(497754),u=n.n(c),p=n(537469),d=n.n(p);const h=(0,l.makeSwitchGroupItem)(((o=class extends s.PureComponent{constructor(){super(...arguments),this._onChange=()=>{this.props.onChange&&this.props.onChange(this.props.value)}}render(){const e=c(this.props.className,d().radio,{[d().reverse]:Boolean(this.props.labelPositionReverse)}),t=c(d().label,{[d().disabled]:this.props.disabled}),n=c(d().box,{[d().noOutline]:-1===this.props.tabIndex});let o=null;return this.props.label&&(o=s.createElement("span",{className:t},this.props.label)),s.createElement("label",{className:e},s.createElement("span",{className:d().wrapper,title:this.props.title},s.createElement("input",{id:this.props.id,tabIndex:this.props.tabIndex,autoFocus:this.props.autoFocus,role:this.props.role,className:d().input,type:"radio",name:this.props.name,checked:this.props.checked,disabled:this.props.disabled,value:this.props.value,onChange:this._onChange,ref:this.props.reference}),s.createElement("span",{className:n})),o)}}).defaultProps={value:"on"},o));var m=n(650151),g=n(841919),v=n(188076),f=n(881958),_=n(555386)
;function C(e){const{children:t,input:o,disabled:c,onChange:u,grouped:p,tooltip:d}=e,C=(0,s.useContext)(a.PropertyContext),{values:b,setValue:y}=(0,m.ensureNotNull)(C),E=b[o.id],[S,T]=(0,s.useState)(E?"another-symbol":"main-symbol"),[x,N]=(0,s.useState)(E);return(0,s.useEffect)((()=>{E&&N(E)}),[E]),s.createElement(l.SwitchGroup,{name:`symbol-source-${o.id}`,values:[S],onChange:function(e){T(e),"main-symbol"===e?(0,v.setter)(y)("",o.id,o.name):"another-symbol"===e&&x&&(0,v.setter)(y,u)(x,o.id,o.name)}},s.createElement(i.PropertyTable.Row,null,s.createElement(i.PropertyTable.Cell,{colSpan:2,placement:"first",grouped:p},s.createElement(h,{value:"main-symbol",className:_.checkbox,disabled:c,label:s.createElement("span",{className:_.label},r.t(null,{context:"input"},n(288046)))}))),s.createElement(i.PropertyTable.Row,null,s.createElement(i.PropertyTable.Cell,{placement:"first",grouped:p},s.createElement(h,{value:"another-symbol",className:_.checkbox,disabled:c,label:s.createElement("span",{className:_.label},r.t(null,{context:"input"},n(373755)))})),s.createElement(i.PropertyTable.Cell,{placement:"last",grouped:p},t||s.createElement(g.SymbolInput,{input:(0,m.ensureDefined)(o),onChange:u,disabled:c||"main-symbol"===S,hasTooltip:Boolean(d)}),d&&s.createElement(f.InputTooltip,{title:d}))))}var b=n(297442);class y extends s.PureComponent{render(){const{label:e,input:t,tooltip:n}=this.props;return s.createElement(i.PropertyTable.Row,null,s.createElement(i.PropertyTable.Cell,{placement:"first",colSpan:2},s.createElement(b.BoolInput,{label:e,input:t,hasTooltip:Boolean(n)}),n&&s.createElement(f.InputTooltip,{title:n})))}}var E=n(780894),S=n(558213),T=n(34735),x=n(315612);class N extends s.PureComponent{constructor(){super(...arguments),this._onChange=e=>{const{input:{id:t,name:n},onChange:o}=this.props;o(e.currentTarget.value,t,n)}}render(){const{input:{defval:e},value:t,disabled:n,onBlur:o,onKeyDown:r}=this.props;return s.createElement(S.Textarea,{className:u()(_.input,_.textarea,T.InputClasses.FontSizeMedium),value:void 0===t?e:t,onChange:this._onChange,onBlur:o,onKeyDown:r,disabled:n})}}const w=(0,x.debounced)(N),P=(0,v.bind)(w);var k=n(136341);function D(e){const{input:t,label:n,tooltip:o}=e;return s.createElement(i.PropertyTable.Row,null,s.createElement(i.PropertyTable.Cell,{placement:"first",colSpan:2,className:k.wrap},s.createElement("div",{className:k.labelWrap},s.createElement("span",{className:u()(k.label,o&&k.hasTooltip)},n),o&&s.createElement(f.InputTooltip,{title:o})),s.createElement(P,{input:t})))}function I(e){const{input:t,tooltip:o}=e;return"symbol"===t.type&&t.optional?s.createElement(C,{input:t,tooltip:o}):"bool"===t.type?s.createElement(y,{label:r.t(t.name,{context:"input"},n(788601)),input:t,tooltip:o}):"text_area"===t.type?s.createElement(D,{label:r.t(t.name,{context:"input"},n(788601)),input:t,tooltip:o}):s.createElement(E.InputRow,{labelAlign:function(e){switch(e){case"session":return"adaptive";case"time":return"topCenter";default:return}}(t.type),input:t,tooltip:o})}var A=n(852830),M=n(351424)
;function B(e){const{content:t}=e;let n;return s.createElement(i.PropertyTable.InlineRowContext.Provider,{value:!0},s.createElement("div",{className:M.inlineRow},t.children.map(((e,o)=>(void 0!==e.tooltip&&(n=e.tooltip),s.createElement(I,{key:e.id,input:e,tooltip:o===t.children.length-1?n:void 0}))))))}var R=n(298134),F=n(783852);function z(e){const{content:t}=e;return(0,R.isGroup)(t)?(0,R.isInputInlines)(t)?s.createElement(B,{content:t}):s.createElement(s.Fragment,null,s.createElement("div",{className:F.titleWrap},s.createElement(A.GroupTitleSection,{title:r.t(t.id,{context:"input"},n(788601)),name:t.id})),t.children.map((e=>(0,R.isGroup)(e)?s.createElement(B,{key:e.id,content:e}):s.createElement(I,{key:e.id,input:e,tooltip:e.tooltip}))),s.createElement("div",{className:F.groupFooter})):s.createElement(I,{input:t,tooltip:t.tooltip})}const O={offset:r.t(null,void 0,n(889298))};class W extends s.PureComponent{render(){const{reference:e,inputs:t,property:n,study:o,model:r,onStudyInputChange:a,className:l}=this.props,{offset:c,offsets:u}=n;return s.createElement(i.PropertyTable,{reference:e,className:l},s.createElement(L,{study:o,model:r,property:n.inputs,inputs:t,onStudyInputChange:a}),c&&this._createOffsetSection(c),u&&u.childNames().map((e=>{const t=u.childs()[e];return this._createOffsetSection(t)})))}_createOffsetSection(e){const t=e.childs();return s.createElement(L,{key:`offset_${t.title.value()}`,study:this.props.study,model:this.props.model,inputs:[K(t)],property:e})}}function L(e){const{study:t,model:n,inputs:o,property:r,onStudyInputChange:i}=e,l=o,c=(0,s.useMemo)((()=>(0,R.getInputGroups)(l)),[l]);return s.createElement(a.PropertyContainer,{property:r,study:t,model:n,onStudyInputChange:i},!1,c.map((e=>s.createElement(z,{key:e.id,content:e}))))}function K(e){return{id:"val",name:e.title.value()||O.offset,defval:e.val.value(),type:"integer",min:e.min.value(),max:e.max.value()}}},297442:(e,t,n)=>{"use strict";n.d(t,{BoolInputComponent:()=>c,BoolInput:()=>u});var o=n(50959),s=n(302946),r=n(497754),a=n.n(r),i=n(188076),l=n(555386);class c extends o.PureComponent{constructor(){super(...arguments),this._onChange=()=>{const{input:{id:e,name:t},value:n,onChange:o}=this.props;o(!n,e,t)}}render(){const{input:{defval:e},value:t,disabled:n,label:r,hasTooltip:i}=this.props,c=void 0===t?e:t;return o.createElement(s.Checkbox,{className:a()(l.checkbox,i&&l.hasTooltip),disabled:n,checked:c,onChange:this._onChange,label:o.createElement("span",{className:l.label},r),labelAlignBaseline:!0})}}const u=(0,i.bind)(c)},315612:(e,t,n)=>{"use strict";n.d(t,{debounced:()=>r});var o=n(50959);const s={blur:0,commit:0,change:1/0};function r(e,t=s){return class extends o.PureComponent{constructor(e){super(e),this._onChange=(e,n,o)=>{const s=t.change;s?(clearTimeout(this._timeout),this.setState({value:e},(()=>{s!==1/0&&(this._timeout=setTimeout((()=>this._flush()),s))}))):this._flush(e)},this._onBlur=()=>{this._debounce(t.blur);const{onBlur:e}=this.props;e&&e()},this._onKeyDown=e=>{13===e.keyCode&&this._debounce(t.commit)},this.state={
prevValue:e.value,value:e.value}}componentWillUnmount(){this._flush()}render(){const{value:t}=this.state;return o.createElement(e,{...this.props,value:t,onChange:this._onChange,onBlur:this._onBlur,onKeyDown:this._onKeyDown})}static getDerivedStateFromProps(e,t){return e.value===t.prevValue?t:{prevValue:e.value,value:e.value}}_debounce(e){e?(clearTimeout(this._timeout),e!==1/0&&(this._timeout=setTimeout((()=>this._flush()),e))):this.setState((e=>{this._flush(e.value)}))}_flush(e){const{input:{id:t,name:n},onChange:o}=this.props,{prevValue:s,value:r}=this.state;clearTimeout(this._timeout);const a=void 0!==e?e:r;void 0!==a&&a!==s&&o(a,t,n)}}}},599206:(e,t,n)=>{"use strict";n.d(t,{FloatInputComponent:()=>p,FloatInput:()=>d});var o=n(50959),s=n(497754),r=n.n(s),a=n(206929),i=n(188076),l=n(315612),c=n(555386);class u extends o.PureComponent{render(){const{hasTooltip:e}=this.props;return o.createElement(a.NumericInput,{...this.props,className:r()(c.input,e&&c.hasTooltip),stretch:!1})}}const p=(0,l.debounced)(u,{change:1/0,commit:0,blur:0}),d=(0,i.bind)(p)},188838:(e,t,n)=>{"use strict";n.d(t,{IntegerInputComponent:()=>p,IntegerInput:()=>d});var o=n(50959),s=n(497754),r=n.n(s),a=n(188076),i=n(315612),l=n(206929),c=n(555386);class u extends o.PureComponent{render(){const{hasTooltip:e}=this.props;return o.createElement(l.NumericInput,{...this.props,mode:"integer",className:r()(c.input,e&&c.hasTooltip),stretch:!1})}}const p=(0,i.debounced)(u,{change:1/0,commit:0,blur:0}),d=(0,a.bind)(p)},206929:(e,t,n)=>{"use strict";n.d(t,{NumericInput:()=>a});var o=n(50959),s=n(650151),r=n(587125);class a extends o.PureComponent{constructor(){super(...arguments),this._container=null,this._handleContainerRef=e=>this._container=e,this._onChange=(e,t)=>{const{input:{id:n,name:o},onChange:s,onBlur:r}=this.props;s(e,n,o),"step"===t&&r&&r()},this._onBlur=e=>{const{onBlur:t}=this.props;if(t){const n=(0,s.ensureNotNull)(this._container);n.contains(document.activeElement)||n.contains(e.relatedTarget)||t()}}}render(){const{input:{defval:e,min:t,max:n,step:s},value:a,disabled:i,onKeyDown:l,className:c,mode:u,stretch:p}=this.props;return o.createElement(r.NumberInput,{className:c,value:Number(void 0===a?e:a),min:t,max:n,step:s,mode:u,onBlur:this._onBlur,onValueChange:this._onChange,onKeyDown:l,disabled:i,containerReference:this._handleContainerRef,fontSizeStyle:"medium",roundByStep:!1,stretch:p})}}},841919:(e,t,n)=>{"use strict";n.d(t,{getInternalSymbolName:()=>c,SymbolInput:()=>p});var o=n(50959),s=n(650151),r=n(488082),a=n(188076),i=n(39290),l=n(193315);function c(e,t){const n=(0,i.createAdapter)(t).resolvedSymbolInfoBySymbol(e);return n&&(n.ticker||n.full_name)?n.ticker||n.full_name:e}function u(e,t){const n=(0,i.createAdapter)(t).resolvedSymbolInfoBySymbol(e);return null===n?e:n.name}const p=(0,a.bind)((function(e){const t=(0,o.useContext)(r.PropertyContext),{study:n}=(0,s.ensureNotNull)(t),{input:{defval:a},value:i}=e;return o.createElement(l.SymbolInputsButton,{...e,value:u(i||a||"",n),study:n})}))},438184:(e,t,n)=>{"use strict";n.d(t,{
ColorWithThicknessSelect:()=>v});var o=n(50959),s=n(724377),r=n(509806),a=n(440097),i=n(602564),l=n(775921),c=n(552315),u=n(76890),p=n(32133);const d=new a.TranslatedString("change thickness",r.t(null,void 0,n(195657))),h=new a.TranslatedString("change color",r.t(null,void 0,n(313066))),m=new a.TranslatedString("change opacity",r.t(null,void 0,n(717023))),g=[1,2,3,4];class v extends o.PureComponent{constructor(){super(...arguments),this._trackEventLabel=null,this._getTransparencyValue=()=>{const{transparency:e}=this.props;return e?e.value():0},this._getOpacityValue=()=>{const{color:e}=this.props,t=(0,u.getPropertyValue)(e);if(t)return(0,i.isHexColor)(t)?(0,i.transparencyToAlpha)(this._getTransparencyValue()):(0,s.parseRgba)(t)[3]},this._getColorValueInHex=()=>{const{color:e}=this.props,t=(0,u.getPropertyValue)(e);return t?(0,i.isHexColor)(t)?t:(0,s.rgbToHexString)((0,s.parseRgb)(t)):null},this._onThicknessChange=e=>{const{thickness:t}=this.props;void 0!==t&&this._setProperty(t,e,d)},this._onColorChange=e=>{const{color:t,isPaletteColor:n}=this.props,o=(0,u.getPropertyValue)(t);let r=0;o&&(r=(0,i.isHexColor)(o)?this._getTransparencyValue():(0,i.alphaToTransparency)((0,s.parseRgba)(o)[3])),this._setProperty(t,(0,i.generateColor)(String(e),r,!0),h),this._trackEventLabel="Plot color > "+(n?"Palette":"Single")},this._onOpacityChange=e=>{const{color:t}=this.props,n=(0,u.getPropertyValue)(t);this._setProperty(t,(0,i.generateColor)(n,(0,i.alphaToTransparency)(e),!0),m)},this._onPopupClose=()=>{this._trackEventLabel&&((0,p.trackEvent)("GUI","Study settings",this._trackEventLabel),this._trackEventLabel=null)}}componentWillUnmount(){this._onPopupClose()}render(){const{selectOpacity:e=!0,disabled:t,className:n}=this.props;return o.createElement(c.ColorSelect,{className:n,disabled:t,color:this._getColorValueInHex(),selectOpacity:e,opacity:this._getOpacityValue(),thickness:this._getThicknessValue(),thicknessItems:g,onColorChange:this._onColorChange,onOpacityChange:this._onOpacityChange,onThicknessChange:this._onThicknessChange,onPopupClose:this._onPopupClose})}_getThicknessValue(){const{thickness:e}=this.props;return e?(0,u.getPropertyValue)(e):void 0}_setProperty(e,t,n){const{setValue:o}=this.context;(0,u.setPropertyValue)(e,(e=>o(e,t,n)))}}v.contextType=l.StylePropertyContext},835117:(e,t,n)=>{"use strict";n.d(t,{PropertyTable:()=>l});var o=n(50959),s=n(497754),r=n(800417),a=n(520374);const i=o.createContext(!1);class l extends o.PureComponent{render(){return o.createElement("div",{ref:this.props.reference,className:s(a.content,this.props.className)},this.props.children)}}l.InlineRowContext=i,l.Row=function(e){const{children:t}=e;return(0,o.useContext)(i)?o.createElement("span",{className:a.inlineRow},t):o.createElement(o.Fragment,null,t)},l.Cell=function(e){const t=(0,
o.useContext)(i),n=s(a.cell,e.offset&&a.offset,e.grouped&&a.grouped,t&&a.inlineCell,"top"===e.verticalAlign&&a.top,"topCenter"===e.verticalAlign&&a.topCenter,"adaptive"===e.verticalAlign&&a.adaptive,e.checkableTitle&&a.checkableTitle,2===e.colSpan&&a.fill,"first"===e.placement&&2!==e.colSpan&&a.first,"last"===e.placement&&2!==e.colSpan&&a.last),l=(0,r.filterDataProps)(e);return o.createElement("div",{...l,className:n},o.createElement("div",{className:s(a.inner,e.className)},e.children))},l.Separator=function(e){return o.createElement(l.Row,null,o.createElement("div",{className:s(a.cell,a.separator,a.fill)}))},l.GroupSeparator=function(e){const t=e.size||0;return o.createElement(l.Row,null,o.createElement("div",{className:s(a.cell,a.groupSeparator,a.fill,1===t&&a.big)}))}},76890:(e,t,n)=>{"use strict";function o(e){return Array.isArray(e)?e[0].value():e.value()}function s(e,t){if(Array.isArray(e))for(const n of e)t(n);else t(e)}n.d(t,{getPropertyValue:()=>o,setPropertyValue:()=>s})},699958:(e,t,n)=>{"use strict";n.d(t,{SplitThousandsFormatter:()=>r});var o=n(604406),s=n(561626);class r{constructor(e=" "){this._divider=e}format(e){const t=(0,o.splitThousands)(e,this._divider);return(0,s.isRtl)()?(0,s.startWithLTR)(t):t}parse(e){const t=(0,s.stripLTRMarks)(e).split(this._divider).join(""),n=Number(t);return isNaN(n)||/e/i.test(t)?{res:!1}:{res:!0,value:n,suggest:this.format(n)}}}}}]);