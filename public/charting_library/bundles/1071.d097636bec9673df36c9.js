(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[1071],{470048:e=>{e.exports={wrapper:"wrapper-GZajBGIm",input:"input-GZajBGIm",box:"box-GZajBGIm",icon:"icon-GZajBGIm",noOutline:"noOutline-GZajBGIm","intent-danger":"intent-danger-GZajBGIm",check:"check-GZajBGIm",dot:"dot-GZajBGIm"}},869789:e=>{e.exports={checkbox:"checkbox-vyj6oJxw",reverse:"reverse-vyj6oJxw",label:"label-vyj6oJxw",baseline:"baseline-vyj6oJxw"}},354583:e=>{e.exports={checkbox:"checkbox-aOSYFxuH"}},309210:e=>{e.exports={icon:"icon-vDz9Zwc6",toolboxLabel:"toolboxLabel-vDz9Zwc6"}},408323:(e,t,n)=>{"use strict";n.d(t,{CheckboxInput:()=>u});var s=n(50959),o=n(497754),i=n(800417),r=n(72571),a=n(465890),l=n(470048),c=n.n(l);function u(e){const t=o(c().box,c()[`intent-${e.intent}`],{[c().check]:!Boolean(e.indeterminate),[c().dot]:Boolean(e.indeterminate),[c().noOutline]:-1===e.tabIndex}),n=o(c().wrapper,e.className);return s.createElement("span",{className:n,title:e.title,style:e.style},s.createElement("input",{id:e.id,tabIndex:e.tabIndex,className:c().input,type:"checkbox",name:e.name,checked:e.checked,disabled:e.disabled,value:e.value,autoFocus:e.autoFocus,role:e.role,onChange:function(){e.onChange&&e.onChange(e.value)},ref:e.reference,"aria-required":e["aria-required"],"aria-describedby":e["aria-describedby"],"aria-invalid":e["aria-invalid"],...(0,i.filterDataProps)(e)}),s.createElement("span",{className:t},s.createElement(r.Icon,{icon:a,className:c().icon})))}},302946:(e,t,n)=>{"use strict";n.d(t,{Checkbox:()=>c});var s=n(50959),o=n(497754),i=n(230789),r=n(408323),a=n(869789),l=n.n(a);class c extends s.PureComponent{render(){const{inputClassName:e,labelClassName:t,...n}=this.props,i=o(this.props.className,l().checkbox,{[l().reverse]:Boolean(this.props.labelPositionReverse),[l().baseline]:Boolean(this.props.labelAlignBaseline)}),a=o(l().label,t,{[l().disabled]:this.props.disabled});let c=null;return this.props.label&&(c=s.createElement("span",{className:a,title:this.props.title},this.props.label)),s.createElement("label",{className:i},s.createElement(r.CheckboxInput,{...n,className:e}),c)}}c.defaultProps={value:"on"};(0,i.makeSwitchGroupItem)(c)},72571:(e,t,n)=>{"use strict";n.d(t,{Icon:()=>o});var s=n(50959);const o=s.forwardRef(((e,t)=>{const{icon:n="",...o}=e;return s.createElement("span",{...o,ref:t,dangerouslySetInnerHTML:{__html:n}})}))},230789:(e,t,n)=>{"use strict";n.d(t,{SwitchGroup:()=>r,makeSwitchGroupItem:()=>a});var s=n(50959),o=n(174786);const i=(0,s.createContext)({getName:()=>"",getValues:()=>[],getOnChange:()=>o.default,subscribe:o.default,unsubscribe:o.default});class r extends s.PureComponent{constructor(e){super(e),this._subscriptions=new Set,this._getName=()=>this.props.name,this._getValues=()=>this.props.values,this._getOnChange=()=>this.props.onChange,this._subscribe=e=>{this._subscriptions.add(e)},this._unsubscribe=e=>{this._subscriptions.delete(e)},this.state={switchGroupContext:{getName:this._getName,getValues:this._getValues,getOnChange:this._getOnChange,subscribe:this._subscribe,
unsubscribe:this._unsubscribe}}}render(){return s.createElement(i.Provider,{value:this.state.switchGroupContext},this.props.children)}componentDidUpdate(e){this._notify(this._getUpdates(this.props.values,e.values))}_notify(e){this._subscriptions.forEach((t=>t(e)))}_getUpdates(e,t){return[...t,...e].filter((n=>t.includes(n)?!e.includes(n):e.includes(n)))}}function a(e){var t;return t=class extends s.PureComponent{constructor(){super(...arguments),this._onChange=e=>{this.context.getOnChange()(e)},this._onUpdate=e=>{e.includes(this.props.value)&&this.forceUpdate()}}componentDidMount(){this.context.subscribe(this._onUpdate)}render(){return s.createElement(e,{...this.props,name:this._getName(),onChange:this._onChange,checked:this._isChecked()})}componentWillUnmount(){this.context.unsubscribe(this._onUpdate)}_getName(){return this.context.getName()}_isChecked(){return this.context.getValues().includes(this.props.value)}},t.contextType=i,t}},111706:(e,t,n)=>{"use strict";function s(e){return 0===e.detail}n.d(t,{isKeyboardClick:()=>s})},273388:(e,t,n)=>{"use strict";function s(e){return t=>{e.forEach((e=>{"function"==typeof e?e(t):null!=e&&(e.current=t)}))}}function o(e){return s([e])}n.d(t,{isomorphicRef:()=>o,mergeRefs:()=>s})},921258:(e,t,n)=>{"use strict";n.d(t,{hoverMouseEventFilter:()=>i,useAccurateHover:()=>r,useHover:()=>o});var s=n(50959);function o(){const[e,t]=(0,s.useState)(!1);return[e,{onMouseOver:function(e){i(e)&&t(!0)},onMouseOut:function(e){i(e)&&t(!1)}}]}function i(e){return!e.currentTarget.contains(e.relatedTarget)}function r(e){const[t,n]=(0,s.useState)(!1);return(0,s.useEffect)((()=>{const t=t=>{if(null===e.current)return;const s=e.current.contains(t.target);n(s)};return document.addEventListener("mouseover",t),()=>document.removeEventListener("mouseover",t)}),[]),t}},661851:(e,t,n)=>{"use strict";n.d(t,{useObservable:()=>o});var s=n(50959);function o(e,t){const[n,o]=(0,s.useState)(t);return function(e,t){(0,s.useEffect)((()=>{const n=e.subscribe(t);return()=>n.unsubscribe()}),[e,t])}(e,o),n}},379266:(e,t,n)=>{"use strict";n.d(t,{PopupMenuItemToggle:()=>l});var s=n(50959),o=n(497754),i=n(192063),r=n(302946),a=n(354583);function l(e){const{isDisabled:t,hint:n,label:l,isChecked:c,checkboxClassName:u,labelClassName:d,indeterminate:m,...p}=e;return s.createElement(i.PopupMenuItem,{...p,isDisabled:t,shortcut:n,dontClosePopup:!0,labelRowClassName:d,label:s.createElement(r.Checkbox,{disabled:t,label:l,checked:c,indeterminate:m,className:o(a.checkbox,u)})})}},730743:(e,t,n)=>{"use strict";n.d(t,{calcSubMenuPos:()=>o});var s=n(710263);function o(e,t,n={x:0,y:10}){if(t){const{left:n,right:o,top:i}=t.getBoundingClientRect(),r=document.documentElement.clientWidth,a={x:n-e,y:i},l={x:o,y:i};return(0,s.isRtl)()?n<=e?l:a:r-o>=e?l:a}return n}},275583:e=>{e.exports={toggle:"toggle-NYDT3E70",label:"label-NYDT3E70"}},517327:e=>{e.exports={dropdownButton:"dropdownButton-NgHNzdZC",bigIcon:"bigIcon-NgHNzdZC"}},783806:(e,t,n)=>{"use strict";n.d(t,{TerminalDropdown:()=>V})
;var s=n(50959),o=n(509806),i=n(497754),r=n.n(i),a=n(601227),l=n(72571),c=n(518799),u=n(747633),d=n(192063),m=n(350299);const p=s.lazy((async()=>({default:(await Promise.all([n.e(580),n.e(4139),n.e(2108),n.e(2191),n.e(5145),n.e(855),n.e(6639),n.e(7194),n.e(4215),n.e(7653),n.e(766),n.e(2985)]).then(n.bind(n,432177))).ExportDataDialogImpl})));function b(e){return s.createElement(s.Suspense,{fallback:null},s.createElement(p,{...e}))}var h=n(661851),g=n(379266),v=n(624216),f=n(759339),x=n(189904),C=n(972535),y=n(823030),w=n(921258),E=n(730743);var k=n(930052),N=n(309210),I=n(379978);function M(e){return s.createElement(k.MatchMedia,{rule:"screen and (max-width: 430px)"},(t=>t||e.forceUseDrawer?s.createElement(O,{...e}):s.createElement(B,{...e})))}function _(e){const{toolboxLabel:t}=e;return s.createElement(d.PopupMenuItem,{toolbox:s.createElement(s.Fragment,null,t&&s.createElement("span",{className:N.toolboxLabel},t),s.createElement(l.Icon,{className:N.icon,icon:I})),suppressToolboxClick:!1,dontClosePopup:!0,...e})}function O(e){const{children:t,className:n,drawerClassName:o,menuItemTheme:i,label:r,icon:a,labelClassName:l,toolboxLabel:c}=e,[u,d]=(0,s.useState)(!1);return s.createElement(s.Fragment,null,s.createElement(_,{theme:i,label:r,toolboxLabel:c,icon:a,labelClassName:l,className:n,onClick:function(){d(!u)}}),u&&s.createElement(f.Drawer,{className:o,position:"Bottom",onClose:function(){d(!1)}},t))}function B(e){const{children:t,className:n,menuClassName:o,menuItemTheme:i,label:r,icon:a,labelClassName:l,toolboxLabel:c}=e,u=(0,s.useRef)((0,x.randomHash)()),d=(0,s.useRef)(null),{isMenuOpened:m,onTriggerClick:p,onTriggerMouseOver:b,onMenuClose:h,getPosition:g,onMenuMouseOver:f}=function(e,t,n={}){const o=s.useContext(y.SubmenuContext);s.useEffect((()=>null==o?void 0:o.registerSubmenu(e,a)),[e]);const i=Boolean((null==o?void 0:o.current)===e);return{isMenuOpened:i,onTriggerClick:function(){(C.mobiletouch||n.forceOpenOnClick)&&(null==o||o.setCurrent(i?null:e))},onMenuClose:function(){null==o||o.setCurrent(null)},getPosition:function(e){return(0,E.calcSubMenuPos)(e,t.current)},onMenuMouseOver:r,onTriggerMouseOver:r};function r(t){!C.mobiletouch&&(0,w.hoverMouseEventFilter)(t)&&(null==o||o.setCurrent(e))}function a(e){var n;return Boolean(null===(n=t.current)||void 0===n?void 0:n.contains(e))}}(u.current,d);return s.createElement(s.Fragment,null,s.createElement(_,{theme:i,label:r,toolboxLabel:c,icon:a,labelClassName:l,className:n,onClick:p,onMouseOver:b,reference:d,isHovered:m}),s.createElement(v.PopupMenu,{className:o,position:g,onClose:h,isOpened:m,doNotCloseOn:d.current,onMouseOver:f},t))}var D=n(275583);function P(e){const{labelClassName:t,summaryFieldsVisibilityInfo$:i,summaryFieldToggler:r,initialSummaryFieldsVisibilityInfo:l}=e,c=(0,h.useObservable)(i,l);return 0===c.size?s.createElement(s.Fragment,null):s.createElement(M,{label:o.t(null,void 0,n(522382)),labelClassName:t,forceUseDrawer:a.CheckMobile.any()},[...c.values()].map((e=>s.createElement(g.PopupMenuItemToggle,{key:e.id,className:D.toggle,
label:s.createElement("span",{className:D.label},e.id),isChecked:e.visible,onClick:()=>r(e.id)}))))}var F=n(517327),T=n(48008);function V(e){const{dataExportController:t,initialSummaryFieldsVisibilityInfo:i,summaryFieldToggler:p,summaryFieldsVisibilityInfo$:h,iconSize:g}=e,[v,f]=function(e){const{dataExportController:t,trackEvent:n}=e,[o,i]=(0,s.useState)(!1);return void 0===t?[()=>{},null]:[()=>i(!0),s.createElement(b,{isOpened:o,onClose:()=>i(!1),trackEvent:n,dataExportController:t})]}({dataExportController:t});return s.createElement(s.Fragment,null,s.createElement(c.ToolWidgetMenu,{arrow:!1,isDrawer:a.CheckMobile.any(),className:F.dropdownButton,content:s.createElement(u.ToolWidgetButton,{title:o.t(null,void 0,n(141610)),icon:s.createElement(l.Icon,{className:r()("big"===g&&F.bigIcon),icon:T})}),"data-name":"terminal-dropdown"},s.createElement(P,{labelClassName:F.label,summaryFieldToggler:p,summaryFieldsVisibilityInfo$:h,initialSummaryFieldsVisibilityInfo:i}),null!==f&&s.createElement(d.PopupMenuItem,{labelClassName:F.label,label:(0,m.appendEllipsis)(o.t(null,void 0,n(125769))),onClick:v})),f)}},407999:(e,t,n)=>{"use strict";n.d(t,{makeAccountManagerHeaderDropdownsProps:()=>m});var s=n(650151),o=n(481330),i=n(480802),r=n(752275),a=n(6835),l=n(637401);const c=(0,a.getLogger)("Trading.DataExport");class u{constructor(e,t){this._prefix=t,this._getDataExporters=e}tabs(){return[...this._getDataExporters()].map((([e,t])=>({value:e,content:t.title})))}async exportData(e){const{exporters:t,title:n}=(0,s.ensureDefined)(this._getDataExporters().get(e),"data exporter");try{const e=await Promise.all(t.map((({exportData:e})=>e())));e.forEach(((s,o)=>{const a=t[o].name,l=void 0===a||""===a?`${(0,i.default)(n)}${e.length>1?`-${o+1}`:""}`:(0,i.default)(a);let c="";if(0!==s.length){const e=[d(Object.keys(s[0]))];for(const t of s)e.push(d(Object.values(t)));c=e.join("\n")}(0,r.saveTextFile)(`${(0,i.default)(this._prefix)}-${l}-${(new Date).toISOString()}.csv`,c,"text/csv")}))}catch(e){c.logError((0,l.getLoggerMessage)(e))}}}function d(e){return e.map(r.escapeCSVValue).join(",")}async function m(e,t,n){const i=e.brokersList().filter((e=>!e.configFlags.isSuspended)),r=Promise.resolve(void 0),a=(0,s.ensureNotNull)(e.activeBroker()),l=await r,c=await a.accountsMetainfo(),d=a.accountManagerInfo();if(0===c.length)return;const m=c.map((e=>{var t;return{id:e.id,name:e.name,callBack:async()=>{e.id!==a.currentAccount()&&a.setCurrentAccount(e.id)},currency:""===e.currency?void 0:null!==(t=e.currency)&&void 0!==t?t:void 0}})),p=m.find((e=>e.id===a.currentAccount())),b=a.metainfo(),h=void 0!==l?(0,o.brokersListFromPlans)(i,l):void 0,g=void 0!==h?{title:d.accountTitle,brokerName:b.title,brokerId:b.id,logo:b.logoMiniUrl,logoBlack:b.logoMiniBlackUrl,actions:a.buttonDropdownActions(),trading:e,brokers:h,isBeta:b.isBeta,realtimeDataPermissionsConfig:b.realtimeDataPermissionsToggleConfig}:void 0,v={dataExportController:void 0!==n?new u(n,b.title):void 0,initialSummaryFieldsVisibilityInfo:t.fieldsVisibilityInfo(),
summaryFieldsVisibilityInfo$:t.fieldsVisibilityInfo$,summaryFieldToggler:t.toggleField};return{brokerDropdownProps:g,accountDropdownProps:{currentAccount:(0,s.ensureDefined)(p),accountsList:m,currentAccountUpdate:a.currentAccountUpdate,removeMargins:void 0===g},commonDropdownProps:v}}},241347:(e,t,n)=>{"use strict";n.r(t),n.d(t,{SummaryFieldsVisibilityManager:()=>o});var s=n(947488);class o{constructor(e,t){var n;this.toggleField=e=>{var t;const n=this._fieldsVisibilityInfo$.getValue(),s=new Map(n),o=s.get(e);void 0!==o&&(o.visible=!o.visible,this._fieldsVisibilityInfo$.next(s),null===(t=this._settingsGetter())||void 0===t||t.setSummaryFieldsVisibilityInfo(s))},this._settingsGetter=t;const o=null===(n=this._settingsGetter())||void 0===n?void 0:n.summaryFieldsVisibilityInfo();this._fieldsVisibilityInfo$=new s.BehaviorSubject(new Map(e.map((({text:e,isDefault:t})=>{var n,s,i;return[e,{id:e,visible:null===(i=null!==(s=null===(n=null==o?void 0:o.get(e))||void 0===n?void 0:n.visible)&&void 0!==s?s:t)||void 0===i||i}]})))),this.fieldsVisibilityInfo$=this._fieldsVisibilityInfo$.asObservable()}fieldsVisibilityInfo(){return this._fieldsVisibilityInfo$.getValue()}}},164530:(e,t,n)=>{"use strict";n.d(t,{BracketType:()=>s.BracketType,OrderOrPositionMessageType:()=>s.OrderOrPositionMessageType});n(282729);var s=n(656846)},48008:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" fill-rule="evenodd" d="M3 10a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm0 1a2 2 0 1 0 0-4 2 2 0 0 0 0 4zm6-1a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm0 1a2 2 0 1 0 0-4 2 2 0 0 0 0 4zm7-2a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm1 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0z"/></svg>'},465890:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 11 9" width="11" height="9" fill="none"><path stroke-width="2" d="M0.999878 4L3.99988 7L9.99988 1"/></svg>'},379978:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18" fill="none"><path stroke="currentColor" d="M8 5l3.5 3.5L8 12"/></svg>'}}]);