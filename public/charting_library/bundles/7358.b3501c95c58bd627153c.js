"use strict";(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[7358],{77538:(e,i,o)=>{o.d(i,{getSeriesStylePropertiesDefinitions:()=>Oe});var t=o(509806),n=o(440097),r=o(998001),l=o(210596),s=o.n(l),a=o(484727),c=o(896778),d=o(473331),u=o(652945);const p=new n.TranslatedString("change color bars based on previous close",t.t(null,void 0,o(829353))),h=new n.TranslatedString("change HLC bars",t.t(null,void 0,o(655740))),y=new n.TranslatedString("change bar up color",t.t(null,void 0,o(476804))),f=new n.TranslatedString("change bar down color",t.t(null,void 0,o(171816))),v=new n.TranslatedString("change thin bars",t.t(null,void 0,o(672886))),g=new n.TranslatedString("change line price source",t.t(null,void 0,o(17119))),S=new n.TranslatedString("change line type",t.t(null,void 0,o(70054))),P=new n.TranslatedString("change line color",t.t(null,void 0,o(687828))),w=new n.TranslatedString("change line width",t.t(null,void 0,o(669125))),b=new n.TranslatedString("change area price source",t.t(null,void 0,o(201316))),T=new n.TranslatedString("change area line color",t.t(null,void 0,o(200661))),m=new n.TranslatedString("change area line width",t.t(null,void 0,o(206610))),D=new n.TranslatedString("change area fill color",t.t(null,void 0,o(897008))),_=new n.TranslatedString("change baseline price source",t.t(null,void 0,o(156819))),C=new n.TranslatedString("change baseline top line color",t.t(null,void 0,o(268621))),k=new n.TranslatedString("change baseline top line width",t.t(null,void 0,o(535339))),$=new n.TranslatedString("change baseline bottom line color",t.t(null,void 0,o(104164))),M=new n.TranslatedString("change baseline bottom line width",t.t(null,void 0,o(438990))),L=new n.TranslatedString("change baseline fill top area color",t.t(null,void 0,o(112673))),I=new n.TranslatedString("change baseline fill bottom area color",t.t(null,void 0,o(273163))),B=new n.TranslatedString("change base level",t.t(null,void 0,o(831547))),W=new n.TranslatedString("change high-low body visibility",t.t(null,void 0,o(330033))),O=new n.TranslatedString("change high-low body color",t.t(null,void 0,o(281080))),V=new n.TranslatedString("change high-low borders visibility",t.t(null,void 0,o(279236))),E=new n.TranslatedString("change high-low border color",t.t(null,void 0,o(676885))),x=new n.TranslatedString("change high-low labels visibility",t.t(null,void 0,o(142981))),j=new n.TranslatedString("change high-low labels color",t.t(null,void 0,o(531937))),A=(new n.TranslatedString("change renko wick visibility",t.t(null,void 0,o(109473))),new n.TranslatedString("change renko wick up color",t.t(null,void 0,o(707747))),new n.TranslatedString("change renko wick down color",t.t(null,void 0,o(875986))),new n.TranslatedString("change the display of real prices on price scale (instead of Heiken-Ashi price)",t.t(null,void 0,o(639783))),new n.TranslatedString("change range thin bars",t.t(null,void 0,o(328143))),
new n.TranslatedString("change {candleType} body visibility",t.t(null,void 0,o(647202)))),N=new n.TranslatedString("change {candleType} up color",t.t(null,void 0,o(861118))),U=new n.TranslatedString("change {candleType} down color",t.t(null,void 0,o(136320))),F=new n.TranslatedString("change {candleType} border visibility",t.t(null,void 0,o(123986))),R=new n.TranslatedString("change {candleType} up border color",t.t(null,void 0,o(405464))),G=new n.TranslatedString("change {candleType} down border color",t.t(null,void 0,o(492330))),H=new n.TranslatedString("change {candleType} wick visibility",t.t(null,void 0,o(239987))),z=new n.TranslatedString("change {candleType} wick up color",t.t(null,void 0,o(445543))),Y=new n.TranslatedString("change {candleType} wick down color",t.t(null,void 0,o(660164))),J=new n.TranslatedString("change {chartType} up color",t.t(null,void 0,o(59414))),K=new n.TranslatedString("change {chartType} down color",t.t(null,void 0,o(685503))),q=new n.TranslatedString("change {chartType} projection bar up color",t.t(null,void 0,o(50453))),Q=new n.TranslatedString("change {chartType} projection bar down color",t.t(null,void 0,o(618465))),X=new n.TranslatedString("change {chartType} border bar up color",t.t(null,void 0,o(811107))),Z=new n.TranslatedString("change {chartType} border bar down color",t.t(null,void 0,o(179088))),ee=new n.TranslatedString("change {chartType} projection border bar up color",t.t(null,void 0,o(761250))),ie=new n.TranslatedString("change {chartType} projection border bar up color",t.t(null,void 0,o(761250))),oe=new n.TranslatedString("change column up color",t.t(null,void 0,o(985709))),te=new n.TranslatedString("change column down color",t.t(null,void 0,o(112155))),ne=new n.TranslatedString("change column price source",t.t(null,void 0,o(166890))),re=t.t(null,void 0,o(563243)),le=t.t(null,void 0,o(586953)),se=t.t(null,void 0,o(405536)),ae=t.t(null,void 0,o(587151)),ce=t.t(null,void 0,o(855314)),de=t.t(null,void 0,o(883760)),ue=t.t(null,void 0,o(872269)),pe=t.t(null,void 0,o(226458)),he=t.t(null,void 0,o(224248)),ye=t.t(null,void 0,o(158416)),fe=t.t(null,void 0,o(301277)),ve=t.t(null,void 0,o(457417)),ge=t.t(null,void 0,o(350430)),Se=t.t(null,void 0,o(986846)),Pe=t.t(null,void 0,o(658747)),we=t.t(null,void 0,o(111157)),be=t.t(null,void 0,o(683610)),Te=t.t(null,void 0,o(339667)),me=t.t(null,void 0,o(994089)),De=t.t(null,void 0,o(405704)),_e=(t.t(null,void 0,o(729881)),t.t(null,void 0,o(507445))),Ce=t.t(null,void 0,o(883760)),ke=t.t(null,void 0,o(872269)),$e=t.t(null,void 0,o(194420));function Me(e,i,o,t){return(0,r.createCheckablePropertyDefinition)({checked:(0,r.convertToDefinitionProperty)(e,i.barColorsOnPrevClose,p)},{id:`${o}${t}`,title:re})}function Le(e,i,o,t,n,l){const a=(0,c.createWVFromGetterAndSubscription)((()=>e.model().isInReplay.bind(e.model())()&&false),e.model().onInReplayStateChanged());return(0,r.createOptionsPropertyDefinition)({disabled:(0,r.convertFromReadonlyWVToDefinitionProperty)(a),option:(0,r.convertToDefinitionProperty)(e,i.priceSource,l)},{
id:`${t}${n}`,title:he,options:new(s())(o)})}function Ie(e,i,o,t){const n=(0,u.removeSpaces)(o.originalText());return[(0,r.createTwoColorsPropertyDefinition)({checked:(0,r.convertToDefinitionProperty)(e,i.drawBody,A.format({candleType:o})),color1:(0,r.getColorDefinitionProperty)(e,i.upColor,null,N.format({candleType:o})),color2:(0,r.getColorDefinitionProperty)(e,i.downColor,null,U.format({candleType:o}))},{id:`${t}Symbol${n}CandlesColor`,title:de}),(0,r.createTwoColorsPropertyDefinition)({checked:(0,r.convertToDefinitionProperty)(e,i.drawBorder,F.format({candleType:o})),color1:(0,r.getColorDefinitionProperty)(e,i.borderUpColor,null,R.format({candleType:o})),color2:(0,r.getColorDefinitionProperty)(e,i.borderDownColor,null,G.format({candleType:o}))},{id:`${t}Symbol${n}BordersColor`,title:ue}),(0,r.createTwoColorsPropertyDefinition)({checked:(0,r.convertToDefinitionProperty)(e,i.drawWick,H.format({candleType:o})),color1:(0,r.getColorDefinitionProperty)(e,i.wickUpColor,null,z.format({candleType:o})),color2:(0,r.getColorDefinitionProperty)(e,i.wickDownColor,null,Y.format({candleType:o}))},{id:`${t}Symbol${n}WickColors`,title:pe})]}function Be(e,i,o,t){const n=[];{const l=(0,u.removeSpaces)(o.originalText()),s=(0,r.createColorPropertyDefinition)({color:(0,r.getColorDefinitionProperty)(e,i.upColor,null,J.format({chartType:o}))},{id:`${t}Symbol${l}UpBars`,title:be}),a=(0,r.createColorPropertyDefinition)({color:(0,r.getColorDefinitionProperty)(e,i.downColor,null,K.format({chartType:o}))},{id:`${t}Symbol${l}DownBars`,title:Te}),c=(0,r.createColorPropertyDefinition)({color:(0,r.getColorDefinitionProperty)(e,i.upColorProjection,null,q.format({chartType:o}))},{id:`${t}Symbol${l}ProjectionUpBars`,title:me}),d=(0,r.createColorPropertyDefinition)({color:(0,r.getColorDefinitionProperty)(e,i.downColorProjection,null,Q.format({chartType:o}))},{id:`${t}Symbol${l}ProjectionDownBars`,title:De});n.push(s,a,c,d)}return n}function We(e,i,o,t){const n=[];{const l=(0,u.removeSpaces)(o.originalText()),s=(0,r.createTwoColorsPropertyDefinition)({color1:(0,r.getColorDefinitionProperty)(e,i.upColor,null,J.format({chartType:o})),color2:(0,r.getColorDefinitionProperty)(e,i.borderUpColor,null,X.format({chartType:o}))},{id:`${t}Symbol${l}UpBars`,title:be}),a=(0,r.createTwoColorsPropertyDefinition)({color1:(0,r.getColorDefinitionProperty)(e,i.downColor,null,K.format({chartType:o})),color2:(0,r.getColorDefinitionProperty)(e,i.borderDownColor,null,Z.format({chartType:o}))},{id:`${t}Symbol${l}DownBars`,title:Te}),c=(0,r.createTwoColorsPropertyDefinition)({color1:(0,r.getColorDefinitionProperty)(e,i.upColorProjection,null,q.format({chartType:o})),color2:(0,r.getColorDefinitionProperty)(e,i.borderUpColorProjection,null,ee.format({chartType:o}))},{id:`${t}Symbol${l}ProjectionUpBars`,title:me}),d=(0,r.createTwoColorsPropertyDefinition)({color1:(0,r.getColorDefinitionProperty)(e,i.downColorProjection,null,Q.format({chartType:o})),color2:(0,r.getColorDefinitionProperty)(e,i.borderDownColorProjection,null,ie.format({chartType:o}))},{
id:`${t}Symbol${l}ProjectionDownBars`,title:De});n.push(s,a,c,d)}return n}function Oe(e,i,l,c,u){switch(l){case 0:return function(e,i,o){return[Me(e,i,o,"SymbolBarStyleBarColorsOnPrevClose"),(0,r.createCheckablePropertyDefinition)({checked:(0,r.convertToDefinitionProperty)(e,i.dontDrawOpen,h)},{id:`${o}SymbolDontDrawOpen`,title:le}),(0,r.createColorPropertyDefinition)({color:(0,r.getColorDefinitionProperty)(e,i.upColor,null,y)},{id:`${o}SymbolUpColor`,title:se}),(0,r.createColorPropertyDefinition)({color:(0,r.getColorDefinitionProperty)(e,i.downColor,null,f)},{id:`${o}SymbolDownColor`,title:ae}),(0,r.createCheckablePropertyDefinition)({checked:(0,r.convertToDefinitionProperty)(e,i.thinBars,v)},{id:`${o}SymbolBarThinBars`,title:ce})]}(e,i.barStyle.childs(),u);case 1:return function(e,i,r){return[Me(e,i,r,"SymbolCandleStyleBarColorsOnPrevClose"),...Ie(e,i,new n.TranslatedString("candle",t.t(null,void 0,o(130792))),r)]}(e,i.candleStyle.childs(),u);case 2:return function(e,i,o,t,n){return[Le(e,i,o,n,"SymbolLinePriceSource",g),(0,r.createOptionsPropertyDefinition)({option:(0,r.convertToDefinitionProperty)(e,i.styleType,S)},{id:`${n}SymbolStyleType`,title:ye,options:new(s())(t)}),(0,r.createLinePropertyDefinition)({color:(0,r.getColorDefinitionProperty)(e,i.color,null,P),width:(0,r.convertToDefinitionProperty)(e,i.linewidth,w)},{id:`${n}SymbolLineStyle`,title:fe})]}(e,i.lineStyle.childs(),c.seriesPriceSources,c.lineStyleTypes,u);case 3:return function(e,i,o,t){return[Le(e,i,o,t,"SymbolAreaPriceSource",b),(0,r.createLinePropertyDefinition)({color:(0,r.getColorDefinitionProperty)(e,i.linecolor,null,T),width:(0,r.convertToDefinitionProperty)(e,i.linewidth,m)},{id:`${t}SymbolAreaLineStyle`,title:fe}),(0,r.createTwoColorsPropertyDefinition)({color1:(0,r.getColorDefinitionProperty)(e,i.color1,i.transparency,D),color2:(0,r.getColorDefinitionProperty)(e,i.color2,i.transparency,D)},{id:`${t}SymbolAreaFills`,title:Se})]}(e,i.areaStyle.childs(),c.seriesPriceSources,u);case 9:return Ie(e,i.hollowCandleStyle.childs(),new n.TranslatedString("hollow candles",t.t(null,void 0,o(375165))),u);case 10:return function(e,i,o,t){return[Le(e,i,o,t,"SymbolBaseLinePriceSource",_),(0,r.createLinePropertyDefinition)({color:(0,r.getColorDefinitionProperty)(e,i.topLineColor,null,C),width:(0,r.convertToDefinitionProperty)(e,i.topLineWidth,k)},{id:`${t}SymbolBaseLineTopLine`,title:ve}),(0,r.createLinePropertyDefinition)({color:(0,r.getColorDefinitionProperty)(e,i.bottomLineColor,null,$),width:(0,r.convertToDefinitionProperty)(e,i.bottomLineWidth,M)},{id:`${t}SymbolBaseLineBottomLine`,title:ge}),(0,r.createTwoColorsPropertyDefinition)({color1:(0,r.getColorDefinitionProperty)(e,i.topFillColor1,null,L),color2:(0,r.getColorDefinitionProperty)(e,i.topFillColor2,null,L)},{id:`${t}SymbolBaseLineTopFills`,title:Pe}),(0,r.createTwoColorsPropertyDefinition)({color1:(0,r.getColorDefinitionProperty)(e,i.bottomFillColor1,null,I),color2:(0,r.getColorDefinitionProperty)(e,i.bottomFillColor2,null,I)},{id:`${t}SymbolBaseLineBottomFills`,title:we}),(0,
r.createNumberPropertyDefinition)({value:(0,r.convertToDefinitionProperty)(e,i.baseLevelPercentage,B,[d.floor])},{id:`${t}SymbolBaseLevelPercentage`,title:_e,type:0,min:new(s())(0),max:new(s())(100),step:new(s())(1),unit:new(s())("%")})]}(e,i.baselineStyle.childs(),c.seriesPriceSources,u);case 13:return function(e,i,o,t){return[Le(e,i,o,t,"SymbolColumnPriceSource",ne),Me(e,i,t,"SymbolColumnStyleColumnColorsOnPrevClose"),(0,r.createColorPropertyDefinition)({color:(0,r.getColorDefinitionProperty)(e,i.upColor,null,oe)},{id:`${t}SymbolUpColor`,title:se}),(0,r.createColorPropertyDefinition)({color:(0,r.getColorDefinitionProperty)(e,i.downColor,null,te)},{id:`${t}SymbolDownColor`,title:ae})]}(e,i.columnStyle.childs(),c.seriesPriceSources,u)}if(12===l&&a.enabled("chart_style_hilo")){return function(e,i,o){return[(0,r.createColorPropertyDefinition)({checked:(0,r.convertToDefinitionProperty)(e,i.drawBody,W),color:(0,r.getColorDefinitionProperty)(e,i.color,null,O)},{id:`${o}SymbolBodiesColor`,title:Ce}),(0,r.createColorPropertyDefinition)({checked:(0,r.convertToDefinitionProperty)(e,i.showBorders,V),color:(0,r.getColorDefinitionProperty)(e,i.borderColor,null,E)},{id:`${o}SymbolBorderColor`,title:ke}),(0,r.createTextPropertyDefinition)({checked:(0,r.convertToDefinitionProperty)(e,i.showLabels,x),color:(0,r.getColorDefinitionProperty)(e,i.labelColor,null,j)},{id:`${o}SymbolLabels`,title:$e,isEditable:!1,isMultiLine:!1})]}(e,i.hiloStyle.childs(),u)}if(!i.hasOwnProperty("haStyle"))return[];if(c.isJapaneseChartsAvailable&&8===l){return function(e,i,r){const l=[];return l.push(Me(e,i,r,"SymbolHAStyleBarColorsOnPrevClose"),...Ie(e,i,new n.TranslatedString("Heikin Ashi",t.t(null,void 0,o(240530))),r)),l}(e,i.haStyle.childs(),u)}if(c.isJapaneseChartsAvailable&&a.enabled("japanese_chart_styles")){if(4===l||5===l||6===l||7===l||8===l)switch(l){case 4:return function(e,i,r){return[...We(e,i,new n.TranslatedString("renko",t.t(null,void 0,o(47500))),r)]}(e,i.renkoStyle.childs(),u);case 5:return Be(e,i.kagiStyle.childs(),new n.TranslatedString("kagi",t.t(null,void 0,o(932387))),u);case 6:return Be(e,i.pnfStyle.childs(),new n.TranslatedString("point & figure",t.t(null,void 0,o(77828))),u);case 7:return We(e,i.pbStyle.childs(),new n.TranslatedString("line break",t.t(null,void 0,o(259905))),u)}0}return[]}},17358:(e,i,o)=>{o.d(i,{SeriesPropertyDefinitionsViewModel:()=>ge,basePriceSources:()=>ye,lineStyleTypes:()=>fe,seriesPrecisionValues:()=>ve});var t=o(650151),n=o(509806),r=o(440097),l=o(484727),s=o(998001),a=o(865721),c=o(210596),d=o.n(c),u=o(632054),p=o(667342),h=o(77538),y=o(473331);const f=new r.TranslatedString("change {inputName} property",n.t(null,void 0,o(621547)));function v(e){return e.map((e=>({value:e,title:n.t(e,{context:"input"},o(788601))})))}function g(e,i,l,a,c,p,h){const g=[];return l.forEach((l=>{if(!function(e,i){return!e.isHidden&&(void 0===e.visible||function(e,i){if(!e)return!0;const o=e.split("==");return!(o.length<2)&&i[o[0]].value()===o[1]}(e.visible,i))}(l,a))return;const S=l.id;if(!a.hasOwnProperty(S))return
;const P=a[S],w=function(e,i){return"style"===e.id?"Box size assignment method":"boxSize"===e.id?"Box size":i.childs().name.value()}(l,c[S]),b=function(e){return n.t(e,{context:"input"},o(788601))}(w),T=new r.TranslatedString(w,b);if("options"in l){const i=(0,t.ensure)(l.options);g.push((0,s.createOptionsPropertyDefinition)({option:(0,s.convertToDefinitionProperty)(e,P,f.format({inputName:T}))},{id:`${h}${l.name}`,title:b,options:new(d())(v(i))}))}else if("integer"!==l.type){if("float"===l.type){let o;return o=function(e,i){return!((i===(0,u.chartStyleStudyId)(4)||i===(0,u.chartStyleStudyId)(6))&&"boxSize"===e||i===(0,u.chartStyleStudyId)(5)&&"reversalAmount"===e)}(S,i)||null===p.value()?new(d())(l.min):p,void g.push((0,s.createNumberPropertyDefinition)({value:(0,s.convertToDefinitionProperty)(e,P,f.format({inputName:T}))},{id:`${h}${l.name}`,title:b,type:1,min:o,max:new(d())(l.max),defval:l.defval}))}"text"!==l.type?"bool"!==l.type||g.push((0,s.createCheckablePropertyDefinition)({checked:(0,s.convertToDefinitionProperty)(e,P,f.format({inputName:T}))},{id:`${h}${l.name}`,title:b})):g.push((0,s.createTextPropertyDefinition)({text:(0,s.convertToDefinitionProperty)(e,P,f.format({inputName:T}))},{id:`${h}${l.name}`,title:b,isEditable:!0,isMultiLine:!1}))}else g.push((0,s.createNumberPropertyDefinition)({value:(0,s.convertToDefinitionProperty)(e,P,f.format({inputName:T}),[y.floor])},{id:`${h}${l.name}`,title:b,type:0,min:new(d())(l.min),max:new(d())(l.max),defval:l.defval}))})),g}var S=o(817808),P=o(448064),w=o(896778),b=o(96401),T=o(694568);const m=(0,S.getLogger)("Chart.Definitions.Series"),D=l.enabled("show_average_close_price_line_and_label"),_=l.enabled("pre_post_market_sessions"),C=new r.TranslatedString("change decimal places",n.t(null,void 0,o(71809))),k=new r.TranslatedString("change timezone",n.t(null,void 0,o(820505))),$=(new r.TranslatedString("adjust data for dividends",n.t(null,void 0,o(342390))),new r.TranslatedString("use settlement as close on daily interval",n.t(null,void 0,o(398402))),new r.TranslatedString("adjust for contract changes",n.t(null,void 0,o(399511))),new r.TranslatedString("change session",n.t(null,void 0,o(765303)))),M=new r.TranslatedString("change extended hours color",n.t(null,void 0,o(31317))),L=new r.TranslatedString("change pre market color",n.t(null,void 0,o(746257))),I=new r.TranslatedString("change post market color",n.t(null,void 0,o(449973))),B=new r.TranslatedString("change price line visibility",n.t(null,void 0,o(867761))),W=new r.TranslatedString("change price line color",n.t(null,void 0,o(177640))),O=new r.TranslatedString("change price line width",n.t(null,void 0,o(497322))),V=new r.TranslatedString("change previous close price line visibility",n.t(null,void 0,o(259883))),E=new r.TranslatedString("change previous close price line color",n.t(null,void 0,o(891183))),x=new r.TranslatedString("change previous close price line width",n.t(null,void 0,o(87631))),j=(new r.TranslatedString("change pre/post market price lines visibility",n.t(null,void 0,o(350393))),
new r.TranslatedString("change pre market line color",n.t(null,void 0,o(60852))),new r.TranslatedString("change post market line color",n.t(null,void 0,o(5969))),new r.TranslatedString("change bid and ask lines visibility",n.t(null,void 0,o(432311)))),A=new r.TranslatedString("change bid line color",n.t(null,void 0,o(436703))),N=new r.TranslatedString("change ask line color",n.t(null,void 0,o(129180))),U=new r.TranslatedString("change high and low price lines visibility",n.t(null,void 0,o(992556))),F=new r.TranslatedString("change high and low price line color",n.t(null,void 0,o(560944))),R=new r.TranslatedString("change high and low price line width",n.t(null,void 0,o(983708))),G=new r.TranslatedString("change average close price line visibility",n.t(null,void 0,o(498866))),H=new r.TranslatedString("change average close price line color",n.t(null,void 0,o(730385))),z=new r.TranslatedString("change average close price line width",n.t(null,void 0,o(568927))),Y=(n.t(null,void 0,o(909994)),n.t(null,void 0,o(25866))),J=(n.t(null,void 0,o(710989)),n.t(null,void 0,o(999983)),n.t(null,void 0,o(362521))),K=n.t(null,void 0,o(915107)),q=n.t(null,void 0,o(8094)),Q=n.t(null,void 0,o(947586)),X=(n.t(null,void 0,o(906350)),n.t(null,void 0,o(173947))),Z=n.t(null,void 0,o(587492)),ee=n.t(null,void 0,o(539280)),ie=n.t(null,void 0,o(330777)),oe=n.t(null,void 0,o(608136)),te=n.t(null,void 0,o(931691)),ne=n.t(null,void 0,o(710591)),re=n.t(null,void 0,o(94884)),le=n.t(null,void 0,o(822353)),se=n.t(null,void 0,o(127879)),ae=n.t(null,void 0,o(944673)),ce=n.t(null,void 0,o(302391)),de=n.t(null,void 0,o(204329)),ue=n.t(null,void 0,o(439292)),pe=n.t(null,void 0,o(470816)),he=[...function(e=15){const i=[];for(let o=0;o<=e;o++)i.push({priceScale:Math.pow(10,o),minMove:1,frac:!1});return i}(),{priceScale:2,minMove:1,frac:!0},{priceScale:4,minMove:1,frac:!0},{priceScale:8,minMove:1,frac:!0},{priceScale:16,minMove:1,frac:!0},{priceScale:32,minMove:1,frac:!0},{priceScale:64,minMove:1,frac:!0},{priceScale:128,minMove:1,frac:!0},{priceScale:320,minMove:1,frac:!0}],ye=[{title:ee,value:"open",id:"price-source-open"},{title:ie,value:"high",id:"price-source-high"},{title:oe,value:"low",id:"price-source-low"},{title:te,value:"close",id:"price-source-close"},{title:ne,value:"hl2",id:"price-source-hl2"},{title:re,value:"hlc3",id:"price-source-hlc3"},{title:le,value:"ohlc4",id:"price-source-ohlc4"}],fe=[{title:se,value:p.STYLE_LINE_TYPE_SIMPLE},{title:ae,value:p.STYLE_LINE_TYPE_MARKERS},{title:ce,value:p.STYLE_LINE_TYPE_STEP}];function ve(){const e=[{title:de,value:"default"}];for(let i=0;i<he.length;i++)e.push({title:`${he[i].minMove}/${he[i].priceScale}`,value:`${he[i].priceScale},${he[i].minMove},${he[i].frac}`});return e}class ge{constructor(e,i,o,t,n,r){this._definitions=null,this._inputsSubscriptions=null,this._isDestroyed=!1,this._propertyPages=null,this._seriesMinTickWV=null,this._sessionIdOptionsWV=new(d())([]),this._series=e,this._undoModel=i,this._model=this._undoModel.model(),this._propertyPageId=o,this._propertyPageName=t,
this._propertyPageIcon=n,this._timezonePropertyObj=r,this._series.onStyleChanged().subscribe(this,this._updateDefinitions),this._series.dataEvents().symbolResolved().subscribe(this,this._updateSeriesMinTickWV),this._series.dataEvents().symbolResolved().subscribe(this,this._updateSessionIdOptionsWV),this._updateSeriesMinTickWV(),this._updateSessionIdOptionsWV()}destroy(){null!==this._propertyPages&&this._propertyPages.forEach((e=>{(0,s.destroyDefinitions)(e.definitions.value())})),this._series.onStyleChanged().unsubscribe(this,this._updateDefinitions),this._series.dataEvents().symbolResolved().unsubscribeAll(this),this._unsubscribeInputsUpdate(),this._isDestroyed=!0}propertyPages(){return null===this._propertyPages?this._getDefinitions().then((e=>{var i;if(this._isDestroyed)throw new Error("SeriesPropertyDefinitionsViewModel already destroyed");return null===this._propertyPages&&(this._propertyPages=[{id:this._propertyPageId,title:this._propertyPageName,icon:this._propertyPageIcon,definitions:new(d())(e.definitions),visible:null!==(i=e.visible)&&void 0!==i?i:new(d())(!0).readonly()}]),this._propertyPages})):Promise.resolve(this._propertyPages)}_seriesMinTick(){const e=this._series.symbolInfo();return null!==e?e.minmov/e.pricescale:null}_updateSeriesMinTickWV(){null===this._seriesMinTickWV?this._seriesMinTickWV=new(d())(this._seriesMinTick()):this._seriesMinTickWV.setValue(this._seriesMinTick())}_updateSessionIdOptionsWV(){if(!_)return;const e=this._series.symbolInfo();if(null===e)return;const i=(e.subsessions||[]).filter((e=>!e.private)).map((e=>({title:(0,T.translateSessionDescription)(e.description),value:e.id})));this._sessionIdOptionsWV.setValue(i)}_updateDefinitions(){null!==this._definitions&&(0,s.destroyDefinitions)(this._definitions.definitions),this._definitions=null,this._unsubscribeInputsUpdate(),this._createSeriesDefinitions().then((e=>{if(this._isDestroyed)throw new Error("SeriesPropertyDefinitionsViewModel already destroyed");(0,t.ensureNotNull)(this._propertyPages)[0].definitions.setValue(e.definitions)}))}_getDefinitions(){return null===this._definitions?this._createSeriesDefinitions():Promise.resolve(this._definitions)}_unsubscribeInputsUpdate(){null!==this._inputsSubscriptions&&(this._inputsSubscriptions.forEach((e=>{e.unsubscribeAll(this)})),this._inputsSubscriptions=null)}_subscribeInputsUpdate(e,i){const o=[];e.forEach((e=>{if(void 0!==e.visible){const t=e.visible.split("==");if(2===t.length){const e=i[t[0]];-1===o.indexOf(e)&&(e.subscribe(this,this._updateDefinitions),o.push(e))}}})),o.length>0?this._inputsSubscriptions=o:this._inputsSubscriptions=null}_createSeriesDefinitions(){const e=this._series.properties().childs(),i=this._series.getInputsProperties(),r=this._series.getInputsInfoProperties(),l=e.style.value(),a=this._series.getStyleShortName();return new Promise((e=>{const o=(0,u.chartStyleStudyId)(l);null!==o?this._model.studyMetaInfoRepository().findById({type:"java",studyId:o}).then((o=>{if(this._isDestroyed)throw new Error("SeriesPropertyDefinitionsViewModel already destroyed")
;if(null!==this._definitions)return void e(null);const n=(0,t.ensureNotNull)(this._seriesMinTickWV),l=g(this._undoModel,o.id,o.inputs,i,r,n,a);this._subscribeInputsUpdate(o.inputs,i),e(l)})).catch((i=>{m.logWarn(`Find meta info for create series definitions with error - ${(0,P.errorToString)(i)}`),e(null)})):e(null)})).then((i=>{if(this._isDestroyed)throw new Error("SeriesPropertyDefinitionsViewModel already destroyed");if(null!==this._definitions)return this._definitions;const t=(0,h.getSeriesStylePropertiesDefinitions)(this._undoModel,e,l,{seriesPriceSources:ye,lineStyleTypes:fe,isJapaneseChartsAvailable:true},"mainSeries");null!==i&&t.push(...i);const r=(0,s.createOptionsPropertyDefinition)({option:(0,s.convertToDefinitionProperty)(this._undoModel,e.minTick,C)},{id:`${a}SymbolMinTick`,title:X,options:new(d())(ve())}),c=(0,s.createOptionsPropertyDefinition)({option:(0,s.convertToDefinitionProperty)(this._undoModel,this._timezonePropertyObj.property,k)},{id:`${a}SymbolTimezone`,title:Z,options:new(d())(this._timezonePropertyObj.values)});return this._definitions={definitions:[(0,s.createPropertyDefinitionsGeneralGroup)(t,"generalSymbolStylesGroup",(0,u.getTranslatedChartStyleName)(l)),(0,s.createPropertyDefinitionsGeneralGroup)(this._seriesPriceLinesDefinitions(a),"priceLinesGroup",n.t(null,void 0,o(131971))),(0,s.createPropertyDefinitionsGeneralGroup)([...this._seriesDataDefinitions(a),r,c],"dataModififcationGroup",n.t(null,void 0,o(181285)))]},this._definitions}))}_seriesDataDefinitions(e){const i=[];if(_){const o=this._series.sessionIdProxyProperty(),t=(0,b.combineWithFilteredUpdate)(((e,i)=>!i&&(0,u.symbolHasSeveralSessions)(this._series.symbolInfo())),((e,i)=>i||!e),this._series.symbolResolvingActive(),(0,w.createWVFromProperty)(this._series.isDWMProperty())),n=(0,s.createOptionsPropertyDefinition)({option:(0,s.convertToDefinitionProperty)(this._undoModel,o,$),visible:(0,s.convertFromReadonlyWVToDefinitionProperty)(t)},{id:"sessionId",title:Y,options:this._sessionIdOptionsWV});i.push(n);const r=this._model.sessions().graphicsInfo();let l=!1;r.backgrounds&&(l=void 0!==r.backgrounds.outOfSession);const a=l?this._createOutOfSessionDefinition(e):this._createPrePostMarketDefinition(e);i.push(a)}return i}_createOutOfSessionDefinition(e){const i=this._model.sessions().properties().childs().graphics.childs().backgrounds.childs().outOfSession.childs();return(0,s.createColorPropertyDefinition)({color:(0,s.getColorDefinitionProperty)(this._undoModel,i.color,i.transparency,M)},{id:`${e}SymbolExtendedHoursColors`,title:J})}_createPrePostMarketDefinition(e){const i=(0,b.combineWithFilteredUpdate)(((e,i)=>!i&&(0,u.symbolHasPreOrPostMarket)(this._series.symbolInfo())&&!(0,u.isRegularSessionId)(this._series.sessionIdProxyProperty().value())),((e,i)=>i||!e),this._series.symbolResolvingActive(),(0,
w.createWVFromProperty)(this._series.isDWMProperty())),o=this._model.sessions(),t=o.properties().childs().graphics.childs().backgrounds.childs().preMarket.childs(),n=o.properties().childs().graphics.childs().backgrounds.childs().postMarket.childs();return(0,s.createTwoColorsPropertyDefinition)({color1:(0,s.getColorDefinitionProperty)(this._undoModel,t.color,t.transparency,L),color2:(0,s.getColorDefinitionProperty)(this._undoModel,n.color,n.transparency,I),visible:(0,s.convertFromReadonlyWVToDefinitionProperty)(i)},{id:`${e}SymbolExtendedHoursColors`,title:J})}_seriesPriceLinesDefinitions(e){const i=[],o=this._series.properties().childs();if(this._series.hasClosePrice()){const t=(0,s.createLinePropertyDefinition)({checked:(0,s.convertToDefinitionProperty)(this._undoModel,o.showPriceLine,B),color:(0,s.getColorDefinitionProperty)(this._undoModel,o.priceLineColor,null,W),width:(0,s.convertToDefinitionProperty)(this._undoModel,o.priceLineWidth,O)},{id:`${e}SymbolLastValuePriceLine`,title:K});i.push(t)}if(this._series.hasClosePrice()){const t=(0,w.combineProperty)((e=>!e),this._series.isDWMProperty()),n=(0,s.createLinePropertyDefinition)({visible:(0,a.makeProxyDefinitionPropertyDestroyable)(t),checked:(0,s.convertToDefinitionProperty)(this._undoModel,o.showPrevClosePriceLine,V),color:(0,s.getColorDefinitionProperty)(this._undoModel,o.prevClosePriceLineColor,null,E),width:(0,s.convertToDefinitionProperty)(this._undoModel,o.prevClosePriceLineWidth,x)},{id:`${e}SymbolPrevClosePriceLine`,title:q});i.push(n)}const t=o.highLowAvgPrice.childs(),n=(0,s.createLinePropertyDefinition)({checked:(0,s.convertToDefinitionProperty)(this._undoModel,t.highLowPriceLinesVisible,U),color:(0,s.getColorDefinitionProperty)(this._undoModel,t.highLowPriceLinesColor,null,F),width:(0,s.convertToDefinitionProperty)(this._undoModel,t.highLowPriceLinesWidth,R)},{id:`${e}SymbolHighLowPriceLines`,title:ue});if(i.push(n),D){const o=(0,s.createLinePropertyDefinition)({checked:(0,s.convertToDefinitionProperty)(this._undoModel,t.averageClosePriceLineVisible,G),color:(0,s.getColorDefinitionProperty)(this._undoModel,t.averagePriceLineColor,null,H),width:(0,s.convertToDefinitionProperty)(this._undoModel,t.averagePriceLineWidth,z)},{id:`${e}SymbolAverageClosePriceLine`,title:pe});i.push(o)}if(this._model.hasCustomSource("bidask")){const t=o.bidAsk,n=(0,s.createTwoColorsPropertyDefinition)({checked:(0,s.convertToDefinitionProperty)(this._undoModel,t.childs().visible,j),color1:(0,s.getColorDefinitionProperty)(this._undoModel,t.childs().bidLineColor,null,A),color2:(0,s.getColorDefinitionProperty)(this._undoModel,t.childs().askLineColor,null,N)},{id:`${e}SymbolBidAskLines`,title:Q});i.push(n)}return i}}}}]);