(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[8354,9937],{61442:e=>{e.exports={button:"button-PYEOTd6i",disabled:"disabled-PYEOTd6i",hidden:"hidden-PYEOTd6i",icon:"icon-PYEOTd6i",dropped:"dropped-PYEOTd6i"}},811362:e=>{e.exports={wrapper:"wrapper-GZajBGIm",input:"input-GZajBGIm",view:"view-GZajBGIm",danger:"danger-GZajBGIm"}},4052:e=>{e.exports={box:"box-ywH2tsV_",noOutline:"noOutline-ywH2tsV_",disabled:"disabled-ywH2tsV_","intent-danger":"intent-danger-ywH2tsV_",checked:"checked-ywH2tsV_",check:"check-ywH2tsV_",icon:"icon-ywH2tsV_",dot:"dot-ywH2tsV_",disableActiveStyles:"disableActiveStyles-ywH2tsV_"}},865592:e=>{e.exports={checkbox:"checkbox-vyj6oJxw",reverse:"reverse-vyj6oJxw",label:"label-vyj6oJxw",baseline:"baseline-vyj6oJxw"}},78217:e=>{e.exports={pair:"pair-ocURKVwI",xxceptionallysmalldonotusebrv1023:"xxceptionallysmalldonotusebrv1023-ocURKVwI",xxxxsmall:"xxxxsmall-ocURKVwI",xxxsmall:"xxxsmall-ocURKVwI",xxsmall:"xxsmall-ocURKVwI",xsmall:"xsmall-ocURKVwI",small:"small-ocURKVwI",medium:"medium-ocURKVwI",large:"large-ocURKVwI",xlarge:"xlarge-ocURKVwI",xxlarge:"xxlarge-ocURKVwI",xxxlarge:"xxxlarge-ocURKVwI",logo:"logo-ocURKVwI",skeleton:"skeleton-ocURKVwI",empty:"empty-ocURKVwI"}},288276:e=>{e.exports={container:"container-WDZ0PRNh","container-xxsmall":"container-xxsmall-WDZ0PRNh","container-xsmall":"container-xsmall-WDZ0PRNh","container-small":"container-small-WDZ0PRNh","container-medium":"container-medium-WDZ0PRNh","container-large":"container-large-WDZ0PRNh","intent-default":"intent-default-WDZ0PRNh",focused:"focused-WDZ0PRNh",readonly:"readonly-WDZ0PRNh",disabled:"disabled-WDZ0PRNh","with-highlight":"with-highlight-WDZ0PRNh",grouped:"grouped-WDZ0PRNh","adjust-position":"adjust-position-WDZ0PRNh","first-row":"first-row-WDZ0PRNh","first-col":"first-col-WDZ0PRNh",stretch:"stretch-WDZ0PRNh","font-size-medium":"font-size-medium-WDZ0PRNh","font-size-large":"font-size-large-WDZ0PRNh","no-corner-top-left":"no-corner-top-left-WDZ0PRNh","no-corner-top-right":"no-corner-top-right-WDZ0PRNh","no-corner-bottom-right":"no-corner-bottom-right-WDZ0PRNh","no-corner-bottom-left":"no-corner-bottom-left-WDZ0PRNh","size-xxsmall":"size-xxsmall-WDZ0PRNh","size-xsmall":"size-xsmall-WDZ0PRNh","size-small":"size-small-WDZ0PRNh","size-medium":"size-medium-WDZ0PRNh","size-large":"size-large-WDZ0PRNh","intent-success":"intent-success-WDZ0PRNh","intent-warning":"intent-warning-WDZ0PRNh","intent-danger":"intent-danger-WDZ0PRNh","intent-primary":"intent-primary-WDZ0PRNh","border-none":"border-none-WDZ0PRNh","border-thin":"border-thin-WDZ0PRNh","border-thick":"border-thick-WDZ0PRNh",highlight:"highlight-WDZ0PRNh",shown:"shown-WDZ0PRNh"}},173405:e=>{e.exports={"inner-slot":"inner-slot-W53jtLjw",interactive:"interactive-W53jtLjw",icon:"icon-W53jtLjw","inner-middle-slot":"inner-middle-slot-W53jtLjw","before-slot":"before-slot-W53jtLjw","after-slot":"after-slot-W53jtLjw"}},527757:e=>{e.exports={arrow:"arrow-uDVcbwtB"}},917049:e=>{e.exports={description:"description-dQscsfnR","with-select":"with-select-dQscsfnR",
"description-strong":"description-strong-dQscsfnR","size-xsmall":"size-xsmall-dQscsfnR"}},303185:e=>{e.exports={"numbers-wrapper":"numbers-wrapper-KCq6gqzR","fake-numbers":"fake-numbers-KCq6gqzR",dots:"dots-KCq6gqzR","fake-numbers-inner":"fake-numbers-inner-KCq6gqzR",numbers:"numbers-KCq6gqzR",numbersOnTop:"numbersOnTop-KCq6gqzR",compact:"compact-KCq6gqzR","numbers-end-slot":"numbers-end-slot-KCq6gqzR",number:"number-KCq6gqzR","size-xsmall":"size-xsmall-KCq6gqzR","size-small":"size-small-KCq6gqzR","size-medium":"size-medium-KCq6gqzR","position-center":"position-center-KCq6gqzR","description-position-center":"description-position-center-KCq6gqzR",numbersRow:"numbersRow-KCq6gqzR",hideNumbers:"hideNumbers-KCq6gqzR"}},727456:e=>{e.exports={pagination:"pagination-iiQKH8Zr","pagination-group":"pagination-group-iiQKH8Zr",select:"select-iiQKH8Zr","compact-middle-slot":"compact-middle-slot-iiQKH8Zr"}},518561:e=>{e.exports={scrollWrap:"scrollWrap-FaOvTD2r"}},151810:e=>{e.exports={wrap:"wrap-vSb6C0Bj","wrap--horizontal":"wrap--horizontal-vSb6C0Bj",bar:"bar-vSb6C0Bj",barInner:"barInner-vSb6C0Bj","barInner--horizontal":"barInner--horizontal-vSb6C0Bj","bar--horizontal":"bar--horizontal-vSb6C0Bj"}},698110:e=>{e.exports={container:"container-yrIMi47q",title:"title-yrIMi47q",title_normal:"title_normal-yrIMi47q",icon:"icon-yrIMi47q",text:"text-yrIMi47q",text_large:"text_large-yrIMi47q",action:"action-yrIMi47q"}},667797:e=>{e.exports={menuWrap:"menuWrap-Kq3ruQo8",isMeasuring:"isMeasuring-Kq3ruQo8",scrollWrap:"scrollWrap-Kq3ruQo8",momentumBased:"momentumBased-Kq3ruQo8",menuBox:"menuBox-Kq3ruQo8",isHidden:"isHidden-Kq3ruQo8"}},121167:e=>{e.exports={squareTabButton:"squareTabButton-huvpscfz",selected:"selected-huvpscfz",disableActiveStateStyles:"disableActiveStateStyles-huvpscfz",disableFocusOutline:"disableFocusOutline-huvpscfz",xlarge:"xlarge-huvpscfz",tabHiddenContent:"tabHiddenContent-huvpscfz",medium:"medium-huvpscfz",small:"small-huvpscfz",xsmall:"xsmall-huvpscfz",fake:"fake-huvpscfz",content:"content-huvpscfz",tabContent:"tabContent-huvpscfz"}},535140:e=>{e.exports={arrowIcon:"arrowIcon-nV6fm1zO",dropped:"dropped-nV6fm1zO"}},550650:e=>{e.exports={"css-value-square-tabs-xsmall-gap":"4px","css-value-square-tabs-small-gap":"8px","css-value-square-tabs-medium-gap":"12px","css-value-square-tabs-xlarge-gap":"12px"}},558215:e=>{e.exports={"css-value-square-tabs-xsmall-gap":"4px","css-value-square-tabs-small-gap":"8px","css-value-square-tabs-medium-gap":"12px","css-value-square-tabs-xlarge-gap":"12px",scrollWrap:"scrollWrap-mf1FlhVw",enableScroll:"enableScroll-mf1FlhVw",squareTabs:"squareTabs-mf1FlhVw",content:"content-mf1FlhVw",xsmall:"xsmall-mf1FlhVw",squareTabButton:"squareTabButton-mf1FlhVw",endSlotWrap:"endSlotWrap-mf1FlhVw",small:"small-mf1FlhVw",medium:"medium-mf1FlhVw",xlarge:"xlarge-mf1FlhVw"}},333636:e=>{e.exports={"link-item":"link-item-eIA09f0e"}},632498:e=>{e.exports={"arrow-icon":"arrow-icon-NIrWNOPk",dropped:"dropped-NIrWNOPk","size-xsmall":"size-xsmall-NIrWNOPk","size-small":"size-small-NIrWNOPk",
"size-medium":"size-medium-NIrWNOPk","size-large":"size-large-NIrWNOPk","size-xlarge":"size-xlarge-NIrWNOPk"}},956406:e=>{e.exports={"underline-tab":"underline-tab-cfYYXvwA","disable-focus-outline":"disable-focus-outline-cfYYXvwA","enable-cursor-pointer":"enable-cursor-pointer-cfYYXvwA",selected:"selected-cfYYXvwA","disable-active-state-styles":"disable-active-state-styles-cfYYXvwA","size-xsmall":"size-xsmall-cfYYXvwA","size-small":"size-small-cfYYXvwA","size-medium":"size-medium-cfYYXvwA","size-large":"size-large-cfYYXvwA","size-xlarge":"size-xlarge-cfYYXvwA",fake:"fake-cfYYXvwA","margin-xsmall":"margin-xsmall-cfYYXvwA","margin-small":"margin-small-cfYYXvwA","margin-medium":"margin-medium-cfYYXvwA","margin-large":"margin-large-cfYYXvwA","margin-xlarge":"margin-xlarge-cfYYXvwA",collapse:"collapse-cfYYXvwA","ellipsis-children":"ellipsis-children-cfYYXvwA"}},898163:e=>{e.exports={"scroll-wrap":"scroll-wrap-SmxgjhBJ","size-xlarge":"size-xlarge-SmxgjhBJ","enable-scroll":"enable-scroll-SmxgjhBJ","underline-tabs":"underline-tabs-SmxgjhBJ","size-large":"size-large-SmxgjhBJ","size-medium":"size-medium-SmxgjhBJ","size-small":"size-small-SmxgjhBJ","size-xsmall":"size-xsmall-SmxgjhBJ","make-grid-column":"make-grid-column-SmxgjhBJ","stretch-tabs":"stretch-tabs-SmxgjhBJ","equal-tab-size":"equal-tab-size-SmxgjhBJ"}},150368:e=>{e.exports={underline:"underline-Pun8HxCz",center:"center-Pun8HxCz",corner:"corner-Pun8HxCz",disabled:"disabled-Pun8HxCz"}},148982:(e,t,s)=>{"use strict";s.d(t,{Caret:()=>u,CaretButton:()=>d});var i=s(50959),n=s(497754),o=s.n(n),r=s(878112),a=s(602948),l=s(61442);function c(e){const{isDropped:t}=e;return i.createElement(r.Icon,{className:o()(l.icon,t&&l.dropped),icon:a})}function u(e){const{className:t,disabled:s,isDropped:n}=e;return i.createElement("span",{className:o()(l.button,s&&l.disabled,t)},i.createElement(c,{isDropped:n}))}function d(e){const{className:t,tabIndex:s=-1,disabled:n,isDropped:r,...a}=e;return i.createElement("button",{...a,type:"button",tabIndex:s,disabled:n,className:o()(l.button,n&&l.disabled,t)},i.createElement(c,{isDropped:r}))}},408323:(e,t,s)=>{"use strict";s.d(t,{CheckboxInput:()=>c});var i=s(50959),n=s(497754),o=s(800417),r=s(611031),a=s(811362),l=s.n(a);function c(e){const t=n(l().wrapper,e.className);return i.createElement("span",{className:t,title:e.title,style:e.style},i.createElement("input",{id:e.id,tabIndex:e.tabIndex,className:n(e.intent&&l()[e.intent],l().input),type:"checkbox",name:e.name,checked:e.checked,disabled:e.disabled,value:e.value,autoFocus:e.autoFocus,role:e.role,onChange:function(){e.onChange?.(e.value)},ref:e.reference,"aria-required":e["aria-required"],"aria-describedby":e["aria-describedby"],"aria-invalid":e["aria-invalid"],...(0,o.filterDataProps)(e)}),i.createElement(r.CheckboxView,{className:l().view,indeterminate:e.indeterminate,checked:e.checked,disabled:e.disabled,intent:e.intent,tabIndex:e.tabIndex}))}},611031:(e,t,s)=>{"use strict";s.d(t,{CheckboxView:()=>c});var i=s(50959),n=s(497754),o=s(878112),r=s(465890),a=s(4052),l=s.n(a);function c(e){
const{indeterminate:t,checked:s,tabIndex:a,className:c,disabled:u,disableActiveStyles:d,intent:h,hideIcon:m,...p}=e,g=t||!s||m?"":r,b=n(l().box,l()[`intent-${h}`],!t&&l().check,!!t&&l().dot,-1===a&&l().noOutline,c,s&&l().checked,u&&l().disabled,d&&l().disableActiveStyles);return i.createElement("span",{className:b,...p},i.createElement(o.Icon,{icon:g,className:l().icon}))}},302946:(e,t,s)=>{"use strict";s.d(t,{Checkbox:()=>c,CheckboxView:()=>u.CheckboxView});var i=s(50959),n=s(497754),o=s(230789),r=s(408323),a=s(865592),l=s.n(a);class c extends i.PureComponent{render(){const{inputClassName:e,labelClassName:t,...s}=this.props,o=n(this.props.className,l().checkbox,{[l().reverse]:Boolean(this.props.labelPositionReverse),[l().baseline]:Boolean(this.props.labelAlignBaseline)}),a=n(l().label,t,{[l().disabled]:this.props.disabled});let c=null;return this.props.label&&(c=i.createElement("span",{className:a,title:this.props.title},this.props.label)),i.createElement("label",{className:o},i.createElement(r.CheckboxInput,{...s,className:e}),c)}}c.defaultProps={value:"on"};(0,o.makeSwitchGroupItem)(c);var u=s(611031)},72903:(e,t,s)=>{"use strict";s.d(t,{CircleLogoPair:()=>o});var i=s(50959),n=s(108937);function o(e){const{primaryLogoUrl:t,secondaryLogoUrl:s,size:o,className:a}=e;return i.createElement("span",{className:(0,n.getBlockStyleClasses)(o,a),title:e.title},i.createElement(r,{logoUrl:s,size:o}),i.createElement(r,{logoUrl:t,size:o}))}function r(e){const{logoUrl:t,size:s}=e,o=void 0!==t,[r,a]=(0,i.useState)(0),l=(0,i.useRef)(null),c=(0,n.getLogoStyleClasses)(s,r);return(0,i.useEffect)((()=>a(l.current?.complete??!o?2:1)),[o]),o&&3!==r?i.createElement("img",{ref:l,className:c,crossOrigin:"",src:t,alt:"",onLoad:()=>a(2),onError:()=>a(3)}):i.createElement("span",{className:c})}},108937:(e,t,s)=>{"use strict";s.d(t,{getBlockStyleClasses:()=>a,getLogoStyleClasses:()=>l});var i=s(497754),n=s(92318),o=s(78217),r=s.n(o);function a(e,t){return i(r().pair,r()[e],t)}function l(e,t=2,s=!0){return i(r().logo,r()[e],r().skeleton,n.skeletonTheme.wrapper,!s&&r().empty,1===t&&i(n.skeletonTheme.animated))}},331774:(e,t,s)=>{"use strict";function i(e){let t=0;return e.isTop&&e.isLeft||(t+=1),e.isTop&&e.isRight||(t+=2),e.isBottom&&e.isLeft||(t+=8),e.isBottom&&e.isRight||(t+=4),t}s.d(t,{getGroupCellRemoveRoundBorders:()=>i})},34735:(e,t,s)=>{"use strict";s.d(t,{ControlSkeleton:()=>_,InputClasses:()=>g});var i=s(50959),n=s(497754),o=s(650151),r=s(525388),a=s(800417),l=s(380327),c=s(331774);var u=s(288276),d=s.n(u);function h(e){let t="";return 0!==e&&(1&e&&(t=n(t,d()["no-corner-top-left"])),2&e&&(t=n(t,d()["no-corner-top-right"])),4&e&&(t=n(t,d()["no-corner-bottom-right"])),8&e&&(t=n(t,d()["no-corner-bottom-left"]))),t}function m(e,t,s,i){const{removeRoundBorder:o,className:r,intent:a="default",borderStyle:l="thin",size:u,highlight:m,disabled:p,readonly:g,stretch:b,noReadonlyStyles:f,isFocused:_}=e,v=h(o??(0,c.getGroupCellRemoveRoundBorders)(s))
;return n(d().container,d()[`container-${u}`],d()[`intent-${a}`],d()[`border-${l}`],u&&d()[`size-${u}`],v,m&&d()["with-highlight"],p&&d().disabled,g&&!f&&d().readonly,_&&d().focused,b&&d().stretch,t&&d().grouped,!i&&d()["adjust-position"],s.isTop&&d()["first-row"],s.isLeft&&d()["first-col"],r)}function p(e,t,s){const{highlight:i,highlightRemoveRoundBorder:o}=e;if(!i)return d().highlight;const r=h(o??(0,c.getGroupCellRemoveRoundBorders)(t));return n(d().highlight,d().shown,d()[`size-${s}`],r)}const g={FontSizeMedium:(0,o.ensureDefined)(d()["font-size-medium"]),FontSizeLarge:(0,o.ensureDefined)(d()["font-size-large"])},b={passive:!1};function f(e,t){const{style:s,id:n,role:o,onFocus:c,onBlur:u,onMouseOver:d,onMouseOut:h,onMouseDown:g,onMouseUp:f,onKeyDown:_,onClick:v,tabIndex:w,startSlot:C,middleSlot:y,endSlot:x,onWheel:S,onWheelNoPassive:E=null,size:P,tag:k="span",type:T}=e,{isGrouped:F,cellState:D,disablePositionAdjustment:I=!1}=(0,i.useContext)(l.ControlGroupContext),R=function(e,t=null,s){const n=(0,i.useRef)(null),o=(0,i.useRef)(null),r=(0,i.useCallback)((()=>{if(null===n.current||null===o.current)return;const[e,t,s]=o.current;null!==t&&n.current.addEventListener(e,t,s)}),[]),a=(0,i.useCallback)((()=>{if(null===n.current||null===o.current)return;const[e,t,s]=o.current;null!==t&&n.current.removeEventListener(e,t,s)}),[]),l=(0,i.useCallback)((e=>{a(),n.current=e,r()}),[]);return(0,i.useEffect)((()=>(o.current=[e,t,s],r(),a)),[e,t,s]),l}("wheel",E,b),M=k;return i.createElement(M,{type:T,style:s,id:n,role:o,className:m(e,F,D,I),tabIndex:w,ref:(0,r.useMergedRefs)([t,R]),onFocus:c,onBlur:u,onMouseOver:d,onMouseOut:h,onMouseDown:g,onMouseUp:f,onKeyDown:_,onClick:v,onWheel:S,...(0,a.filterDataProps)(e),...(0,a.filterAriaProps)(e)},C,y,x,i.createElement("span",{className:p(e,D,P)}))}f.displayName="ControlSkeleton";const _=i.forwardRef(f)},102691:(e,t,s)=>{"use strict";s.d(t,{AfterSlot:()=>d,BeforeSlot:()=>a,EndSlot:()=>u,MiddleSlot:()=>c,StartSlot:()=>l});var i=s(50959),n=s(497754),o=s(173405),r=s.n(o);function a(e){const{className:t,children:s}=e;return i.createElement("span",{className:n(r()["before-slot"],t)},s)}function l(e){const{className:t,interactive:s=!0,icon:o=!1,children:a}=e;return i.createElement("span",{className:n(r()["inner-slot"],s&&r().interactive,o&&r().icon,t)},a)}function c(e){const{className:t,children:s}=e;return i.createElement("span",{className:n(r()["inner-slot"],r()["inner-middle-slot"],t)},s)}function u(e){const{className:t,interactive:s=!0,icon:o=!1,children:a}=e;return i.createElement("span",{className:n(r()["inner-slot"],s&&r().interactive,o&&r().icon,t)},a)}function d(e){const{className:t,children:s}=e;return i.createElement("span",{className:n(r()["after-slot"],t)},s)}},813550:(e,t,s)=>{"use strict";s.d(t,{useForceUpdate:()=>n});var i=s(50959);const n=()=>{const[,e]=(0,i.useReducer)((e=>e+1),0);return e}},975228:(e,t,s)=>{"use strict";s.d(t,{hoverMouseEventFilter:()=>o,useAccurateHover:()=>r,useHover:()=>n});var i=s(50959);function n(){const[e,t]=(0,i.useState)(!1);return[e,{
onMouseOver:function(e){o(e)&&t(!0)},onMouseOut:function(e){o(e)&&t(!1)}}]}function o(e){return!e.currentTarget.contains(e.relatedTarget)}function r(e){const[t,s]=(0,i.useState)(!1);return(0,i.useEffect)((()=>{const t=t=>{if(null===e.current)return;const i=e.current.contains(t.target);s(i)};return document.addEventListener("mouseover",t),()=>document.removeEventListener("mouseover",t)}),[]),t}},252130:(e,t,s)=>{"use strict";s.d(t,{useIsMounted:()=>n});var i=s(50959);const n=()=>{const e=(0,i.useRef)(!1);return(0,i.useEffect)((()=>(e.current=!0,()=>{e.current=!1})),[]),e}},908783:(e,t,s)=>{"use strict";s.d(t,{useOutsideEvent:()=>r});var i=s(50959),n=s(855393),o=s(778199);function r(e){const{click:t,mouseDown:s,touchEnd:r,touchStart:a,handler:l,reference:c}=e,u=(0,i.useRef)(null),d=(0,i.useRef)("undefined"==typeof window?0:new window.CustomEvent("timestamp").timeStamp);return(0,n.useIsomorphicLayoutEffect)((()=>{const e={click:t,mouseDown:s,touchEnd:r,touchStart:a},i=c?c.current:u.current;return(0,o.addOutsideEventListener)(d.current,i,l,document,e)}),[t,s,r,a,l]),c||u}},823030:(e,t,s)=>{"use strict";s.d(t,{SubmenuContext:()=>n,SubmenuHandler:()=>o});var i=s(50959);const n=i.createContext(null);function o(e){const[t,s]=(0,i.useState)(null),o=(0,i.useRef)(null),r=(0,i.useRef)(new Map);return(0,i.useEffect)((()=>()=>{null!==o.current&&clearTimeout(o.current)}),[]),i.createElement(n.Provider,{value:{current:t,setCurrent:function(e){null!==o.current&&(clearTimeout(o.current),o.current=null);null===t?s(e):o.current=setTimeout((()=>{o.current=null,s(e)}),100)},registerSubmenu:function(e,t){return r.current.set(e,t),()=>{r.current.delete(e)}},isSubmenuNode:function(e){return Array.from(r.current.values()).some((t=>t(e)))}}},e.children)}},730654:(e,t,s)=>{"use strict";s.d(t,{Portal:()=>c,PortalContext:()=>u});var i=s(50959),n=s(632227),o=s(925931),r=s(801808),a=s(481564),l=s(682925);class c extends i.PureComponent{constructor(){super(...arguments),this._uuid=(0,o.nanoid)()}componentWillUnmount(){this._manager().removeWindow(this._uuid)}render(){const e=this._manager().ensureWindow(this._uuid,this.props.layerOptions);e.style.top=this.props.top||"",e.style.bottom=this.props.bottom||"",e.style.left=this.props.left||"",e.style.right=this.props.right||"",e.style.pointerEvents=this.props.pointerEvents||"";const t=this.props.className;return t&&("string"==typeof t?e.classList.add(t):e.classList.add(...t)),this.props.shouldTrapFocus&&!e.hasAttribute(a.FOCUS_TRAP_DATA_ATTRIBUTE)&&e.setAttribute(a.FOCUS_TRAP_DATA_ATTRIBUTE,"true"),this.props["aria-hidden"]&&e.setAttribute("aria-hidden","true"),n.createPortal(i.createElement(u.Provider,{value:this},this.props.children),e)}moveToTop(){this._manager().moveToTop(this._uuid)}_manager(){return null===this.context?(0,r.getRootOverlapManager)():this.context}}c.contextType=l.SlotContext;const u=i.createContext(null)},682925:(e,t,s)=>{"use strict";s.d(t,{Slot:()=>n,SlotContext:()=>o});var i=s(50959);class n extends i.Component{shouldComponentUpdate(){return!1}render(){
return i.createElement("div",{style:{position:"fixed",zIndex:150,left:0,top:0},ref:this.props.reference})}}const o=i.createContext(null)},230789:(e,t,s)=>{"use strict";s.d(t,{SwitchGroup:()=>r,makeSwitchGroupItem:()=>a});var i=s(50959),n=s(755883);const o=(0,i.createContext)({getName:()=>"",getValues:()=>[],getOnChange:()=>n.default,subscribe:n.default,unsubscribe:n.default});class r extends i.PureComponent{constructor(e){super(e),this._subscriptions=new Set,this._getName=()=>this.props.name,this._getValues=()=>this.props.values,this._getOnChange=()=>this.props.onChange,this._subscribe=e=>{this._subscriptions.add(e)},this._unsubscribe=e=>{this._subscriptions.delete(e)},this.state={switchGroupContext:{getName:this._getName,getValues:this._getValues,getOnChange:this._getOnChange,subscribe:this._subscribe,unsubscribe:this._unsubscribe}}}render(){return i.createElement(o.Provider,{value:this.state.switchGroupContext},this.props.children)}componentDidUpdate(e){this._notify(this._getUpdates(this.props.values,e.values))}_notify(e){this._subscriptions.forEach((t=>t(e)))}_getUpdates(e,t){return[...t,...e].filter((s=>t.includes(s)?!e.includes(s):e.includes(s)))}}function a(e){var t;return t=class extends i.PureComponent{constructor(){super(...arguments),this._onChange=e=>{this.context.getOnChange()(e)},this._onUpdate=e=>{e.includes(this.props.value)&&this.forceUpdate()}}componentDidMount(){this.context.subscribe(this._onUpdate)}render(){return i.createElement(e,{...this.props,name:this._getName(),onChange:this._onChange,checked:this._isChecked()})}componentWillUnmount(){this.context.unsubscribe(this._onUpdate)}_getName(){return this.context.getName()}_isChecked(){return this.context.getValues().includes(this.props.value)}},t.contextType=o,t}},801808:(e,t,s)=>{"use strict";s.d(t,{OverlapManager:()=>r,getRootOverlapManager:()=>l});var i=s(650151),n=s(481564);class o{constructor(){this._storage=[]}add(e){this._storage.push(e)}remove(e){this._storage=this._storage.filter((t=>e!==t))}has(e){return this._storage.includes(e)}getItems(){return this._storage}}class r{constructor(e=document){this._storage=new o,this._windows=new Map,this._index=0,this._document=e,this._container=e.createDocumentFragment()}setContainer(e){const t=this._container,s=null===e?this._document.createDocumentFragment():e;!function(e,t){Array.from(e.childNodes).forEach((e=>{e.nodeType===Node.ELEMENT_NODE&&t.appendChild(e)}))}(t,s),this._container=s}registerWindow(e){this._storage.has(e)||this._storage.add(e)}ensureWindow(e,t={position:"fixed",direction:"normal"}){const s=this._windows.get(e);if(void 0!==s)return s;this.registerWindow(e);const i=this._document.createElement("div");if(i.style.position=t.position,i.style.zIndex=this._index.toString(),i.dataset.id=e,void 0!==t.index){const e=this._container.childNodes.length;if(t.index>=e)this._container.appendChild(i);else if(t.index<=0)this._container.insertBefore(i,this._container.firstChild);else{const e=this._container.childNodes[t.index];this._container.insertBefore(i,e)}
}else"reverse"===t.direction?this._container.insertBefore(i,this._container.firstChild):this._container.appendChild(i);return this._windows.set(e,i),++this._index,i}unregisterWindow(e){this._storage.remove(e);const t=this._windows.get(e);void 0!==t&&(null!==t.parentElement&&t.parentElement.removeChild(t),this._windows.delete(e))}getZindex(e){const t=this.ensureWindow(e);return parseInt(t.style.zIndex||"0")}moveLastWindowToTop(){const e=this._storage.getItems(),t=e[e.length-1];t&&this.moveToTop(t)}moveToTop(e){if(this.getZindex(e)!==this._index){const t=this.ensureWindow(e);this._windows.forEach(((e,s)=>{e.hasAttribute(n.FOCUS_TRAP_DATA_ATTRIBUTE)&&e.setAttribute(n.FOCUS_TRAP_DATA_ATTRIBUTE,e===t?"true":"false")})),t.style.zIndex=(++this._index).toString()}}removeWindow(e){this.unregisterWindow(e)}}const a=new WeakMap;function l(e=document){const t=e.getElementById("overlap-manager-root");if(null!==t)return(0,i.ensureDefined)(a.get(t));{const t=new r(e),s=function(e){const t=e.createElement("div");return t.style.position="absolute",t.style.zIndex=150..toString(),t.style.top="0px",t.style.left="0px",t.id="overlap-manager-root",t}(e);return a.set(s,t),t.setContainer(s),e.body.appendChild(s),t}}var c;!function(e){e[e.BaseZindex=150]="BaseZindex"}(c||(c={}))},247465:(e,t,s)=>{"use strict";s.d(t,{isCancelled:()=>o,makeCancelable:()=>n});class i extends Error{constructor(){super("CancelToken")}}function n(e){let t=!1;return{promise:new Promise(((s,n)=>{e.then((e=>t?n(new i):s(e))),e.catch((e=>n(t?new i:e)))})),cancel(){t=!0}}}function o(e){return e instanceof i}},868333:(e,t,s)=>{"use strict";var i;s.d(t,{LogoSize:()=>i,getLogoUrlResolver:()=>r}),function(e){e[e.Medium=0]="Medium",e[e.Large=1]="Large"}(i||(i={}));class n{getSymbolLogoUrl(e){return e}getCountryFlagUrl(){return""}getCryptoLogoUrl(e){return e}getProviderLogoUrl(e){return e}getSourceLogoUrl(e){return e}getBlockchainContractLogoUrl(e){return e}}let o;function r(){return o||(o=new n),o}},285089:(e,t,s)=>{"use strict";s.d(t,{setFixedBodyState:()=>l});var i=s(735922);const n=()=>!window.matchMedia("(min-width: 768px)").matches,o=()=>!window.matchMedia("(min-width: 1280px)").matches;let r=0,a=!1;function l(e){const{body:t}=document,s=t.querySelector(".widgetbar-wrap");if(e&&1==++r){const e=(0,i.getCSSProperty)(t,"overflow"),n=(0,i.getCSSPropertyNumericValue)(t,"padding-right");"hidden"!==e.toLowerCase()&&t.scrollHeight>t.offsetHeight&&((0,i.setStyle)(s,"right",`${(0,i.getScrollbarWidth)()}px`),t.style.paddingRight=`${n+(0,i.getScrollbarWidth)()}px`,a=!0),t.classList.add("i-no-scroll")}else if(!e&&r>0&&0==--r&&(t.classList.remove("i-no-scroll"),a)){(0,i.setStyle)(s,"right","0px");let e=0;e=s?(l=(0,i.getContentWidth)(s),n()?0:o()?45:Math.min(Math.max(l,45),450)):0,t.scrollHeight<=t.clientHeight&&(e-=(0,i.getScrollbarWidth)()),t.style.paddingRight=(e<0?0:e)+"px",a=!1}var l}},73288:(e,t,s)=>{"use strict";s.d(t,{OverlayScrollContainer:()=>f});var i=s(50959),n=s(497754),o=s.n(n),r=s(431520),a=s(650151),l=s(822960);const c=s(151810);var u;!function(e){
e[e.Vertical=0]="Vertical",e[e.Horizontal=1]="Horizontal",e[e.HorizontalRtl=2]="HorizontalRtl"}(u||(u={}));const d={0:{isHorizontal:!1,isNegative:!1,sizePropName:"height",minSizePropName:"minHeight",startPointPropName:"top",currentMousePointPropName:"clientY",progressBarTransform:"translateY"},1:{isHorizontal:!0,isNegative:!1,sizePropName:"width",minSizePropName:"minWidth",startPointPropName:"left",currentMousePointPropName:"clientX",progressBarTransform:"translateX"},2:{isHorizontal:!0,isNegative:!0,sizePropName:"width",minSizePropName:"minWidth",startPointPropName:"right",currentMousePointPropName:"clientX",progressBarTransform:"translateX"}},h=40;function m(e){const{size:t,scrollSize:s,clientSize:n,scrollProgress:r,onScrollProgressChange:u,scrollMode:m,theme:p=c,onDragStart:g,onDragEnd:b,minBarSize:f=h}=e,_=(0,i.useRef)(null),v=(0,i.useRef)(null),[w,C]=(0,i.useState)(!1),y=(0,i.useRef)(0),{isHorizontal:x,isNegative:S,sizePropName:E,minSizePropName:P,startPointPropName:k,currentMousePointPropName:T,progressBarTransform:F}=d[m];(0,i.useEffect)((()=>{const e=(0,a.ensureNotNull)(_.current).ownerDocument;return w?(g&&g(),e&&(e.addEventListener("mousemove",U),e.addEventListener("mouseup",z))):b&&b(),()=>{e&&(e.removeEventListener("mousemove",U),e.removeEventListener("mouseup",z))}}),[w]);const D=t/s||0,I=n*D||0,R=Math.max(I,f),M=(t-R)/(t-I),N=s-t,A=S?-N:0,B=S?0:N,O=V((0,l.clamp)(r,A,B))||0;return i.createElement("div",{ref:_,className:o()(p.wrap,x&&p["wrap--horizontal"]),style:{[E]:t},onMouseDown:function(e){if(e.isDefaultPrevented())return;e.preventDefault();const t=L(e.nativeEvent,(0,a.ensureNotNull)(_.current)),s=Math.sign(t),i=(0,a.ensureNotNull)(v.current).getBoundingClientRect();y.current=s*i[E]/2;let n=Math.abs(t)-Math.abs(y.current);const o=V(N);n<0?(n=0,y.current=t):n>o&&(n=o,y.current=t-s*o);u(W(s*n)),C(!0)}},i.createElement("div",{ref:v,className:o()(p.bar,x&&p["bar--horizontal"]),style:{[P]:f,[E]:R,transform:`${F}(${O}px)`},onMouseDown:function(e){e.preventDefault(),y.current=L(e.nativeEvent,(0,a.ensureNotNull)(v.current)),C(!0)}},i.createElement("div",{className:o()(p.barInner,x&&p["barInner--horizontal"])})));function U(e){const t=L(e,(0,a.ensureNotNull)(_.current))-y.current;u(W(t))}function z(){C(!1)}function L(e,t){const s=t.getBoundingClientRect()[k];return e[T]-s}function V(e){return e*D*M}function W(e){return e/D/M}}var p=s(522224),g=s(518561);const b=8;function f(e){const{reference:t,className:s,containerHeight:o=0,containerWidth:a=0,contentHeight:l=0,contentWidth:c=0,scrollPosTop:u=0,scrollPosLeft:d=0,onVerticalChange:h,onHorizontalChange:f,visible:_}=e,[v,w]=(0,p.useHover)(),[C,y]=(0,i.useState)(!1),x=o<l,S=a<c,E=x&&S?b:0;return i.createElement("div",{...w,ref:t,className:n(s,g.scrollWrap),style:{visibility:_||v||C?"visible":"hidden"}},x&&i.createElement(m,{size:o-E,scrollSize:l-E,clientSize:o-E,scrollProgress:u,onScrollProgressChange:function(e){h&&h(e)},onDragStart:P,onDragEnd:k,scrollMode:0}),S&&i.createElement(m,{size:a-E,scrollSize:c-E,clientSize:a-E,scrollProgress:d,
onScrollProgressChange:function(e){f&&f(e)},onDragStart:P,onDragEnd:k,scrollMode:(0,r.isRtl)()?2:1}));function P(){y(!0)}function k(){y(!1)}}},662941:(e,t,s)=>{"use strict";s.d(t,{EmptyStateBlock:()=>l});var i=s(50959),n=s(497754),o=s.n(n),r=s(698110);function a(e){const{title:t,tagName:s,titleSize:n}=e,a=s||"strong";return i.createElement(a,{className:o()(r.title,r[`title_${n}`])},t)}const l=(0,i.forwardRef)((function(e,t){return i.createElement("div",{className:n(r.container,e.className),ref:t},i.createElement("div",{className:n(r.icon,e.iconClass)}),e.title&&i.createElement(a,{title:e.title,titleSize:e.titleSize,tagName:e.titleTagName}),e.text&&i.createElement("div",{className:n(r.text,"large"===e.textSize&&r.text_large)},e.text),e.action&&i.createElement("div",{className:r.action},e.action))}))},953517:(e,t,s)=>{"use strict";s.d(t,{useKeyboardActionHandler:()=>i.useKeyboardActionHandler,useKeyboardClose:()=>i.useKeyboardClose,useKeyboardEventHandler:()=>i.useKeyboardEventHandler,useKeyboardOpen:()=>i.useKeyboardOpen,useKeyboardToggle:()=>i.useKeyboardToggle});var i=s(865968)},585938:(e,t,s)=>{"use strict";s.d(t,{useForceUpdate:()=>i.useForceUpdate});var i=s(813550)},522224:(e,t,s)=>{"use strict";s.d(t,{hoverMouseEventFilter:()=>i.hoverMouseEventFilter,useAccurateHover:()=>i.useAccurateHover,useHover:()=>i.useHover});var i=s(975228)},737402:(e,t,s)=>{"use strict";s.d(t,{useSafeMatchMedia:()=>i.useSafeMatchMedia});var i=s(671129)},139043:(e,t,s)=>{"use strict";s.d(t,{useOverlayScroll:()=>l});var i=s(50959),n=s(650151),o=s(522224),r=s(601227);const a={onMouseOver:()=>{},onMouseOut:()=>{}};function l(e,t=r.CheckMobile.any()){const s=(0,i.useRef)(null),l=e||(0,i.useRef)(null),[c,u]=(0,o.useHover)(),[d,h]=(0,i.useState)({reference:s,containerHeight:0,containerWidth:0,contentHeight:0,contentWidth:0,scrollPosTop:0,scrollPosLeft:0,onVerticalChange:function(e){h((t=>({...t,scrollPosTop:e}))),(0,n.ensureNotNull)(l.current).scrollTop=e},onHorizontalChange:function(e){h((t=>({...t,scrollPosLeft:e}))),(0,n.ensureNotNull)(l.current).scrollLeft=e},visible:c}),m=(0,i.useCallback)((()=>{if(!l.current)return;const{clientHeight:e,scrollHeight:t,scrollTop:i,clientWidth:n,scrollWidth:o,scrollLeft:r}=l.current,a=s.current?s.current.offsetTop:0;h((s=>({...s,containerHeight:e-a,contentHeight:t-a,scrollPosTop:i,containerWidth:n,contentWidth:o,scrollPosLeft:r})))}),[]);function p(){h((e=>({...e,scrollPosTop:(0,n.ensureNotNull)(l.current).scrollTop,scrollPosLeft:(0,n.ensureNotNull)(l.current).scrollLeft})))}return(0,i.useEffect)((()=>{c&&m(),h((e=>({...e,visible:c})))}),[c]),(0,i.useEffect)((()=>{const e=l.current;return e&&e.addEventListener("scroll",p),()=>{e&&e.removeEventListener("scroll",p)}}),[l]),[d,t?a:u,l,m]}},683614:(e,t,s)=>{"use strict";s.d(t,{useVisibility:()=>n});var i=s(50959);function n(e,t,s){(0,i.useEffect)((()=>{const i=new IntersectionObserver((e=>{e[e.length-1].intersectionRatio<.25?s():t()}),{threshold:[0,.25,.5,.75,1],root:null,rootMargin:"0px"});return e.current&&i.observe(e.current),()=>i.disconnect()}),[])}},
930052:(e,t,s)=>{"use strict";s.d(t,{MatchMedia:()=>n});var i=s(50959);class n extends i.PureComponent{constructor(e){super(e),this._handleChange=()=>{this.forceUpdate()},this.state={query:window.matchMedia(this.props.rule)}}componentDidMount(){this._subscribe(this.state.query)}componentDidUpdate(e,t){this.state.query!==t.query&&(this._unsubscribe(t.query),this._subscribe(this.state.query))}componentWillUnmount(){this._unsubscribe(this.state.query)}render(){return this.props.children(this.state.query.matches)}static getDerivedStateFromProps(e,t){return e.rule!==t.query.media?{query:window.matchMedia(e.rule)}:null}_subscribe(e){e.addEventListener("change",this._handleChange)}_unsubscribe(e){e.removeEventListener("change",this._handleChange)}}},230553:(e,t,s)=>{"use strict";s.d(t,{MenuContext:()=>i});const i=s(50959).createContext(null)},510618:(e,t,s)=>{"use strict";s.d(t,{DEFAULT_MENU_THEME:()=>b,Menu:()=>_});var i=s(50959),n=s(497754),o=s.n(n),r=s(650151),a=s(822960),l=s(409174),c=s(753327),u=s(370981),d=s(801808),h=s(926032),m=s(823030),p=s(230553),g=s(667797);const b=g;var f;!function(e){e[e.IndentFromWindow=0]="IndentFromWindow"}(f||(f={}));class _ extends i.PureComponent{constructor(e){super(e),this._containerRef=null,this._scrollWrapRef=null,this._raf=null,this._scrollRaf=null,this._scrollTimeout=void 0,this._manager=new d.OverlapManager,this._hotkeys=null,this._scroll=0,this._handleContainerRef=e=>{this._containerRef=e,this.props.reference&&("function"==typeof this.props.reference&&this.props.reference(e),"object"==typeof this.props.reference&&(this.props.reference.current=e))},this._handleScrollWrapRef=e=>{this._scrollWrapRef=e,"function"==typeof this.props.scrollWrapReference&&this.props.scrollWrapReference(e),"object"==typeof this.props.scrollWrapReference&&(this.props.scrollWrapReference.current=e)},this._handleCustomRemeasureDelegate=()=>{this._resizeForced(),this._handleMeasure()},this._handleMeasure=({callback:e,forceRecalcPosition:t}={})=>{if(this.state.isMeasureValid&&!t)return;const{position:s}=this.props,i=(0,r.ensureNotNull)(this._containerRef);let n=i.getBoundingClientRect();const o=document.documentElement.clientHeight,l=document.documentElement.clientWidth,c=this.props.closeOnScrollOutsideOffset??0;let u=o-0-c;const d=n.height>u;if(d){(0,r.ensureNotNull)(this._scrollWrapRef).style.overflowY="scroll",n=i.getBoundingClientRect()}const{width:h,height:m}=n,p="function"==typeof s?s({contentWidth:h,contentHeight:m,availableWidth:l,availableHeight:o}):s,g=p?.indentFromWindow?.left??0,b=l-(p.overrideWidth??h)-(p?.indentFromWindow?.right??0),f=(0,a.clamp)(p.x,g,Math.max(g,b)),_=(p?.indentFromWindow?.top??0)+c,v=o-(p.overrideHeight??m)-(p?.indentFromWindow?.bottom??0);let w=(0,a.clamp)(p.y,_,Math.max(_,v));if(p.forbidCorrectYCoord&&w<p.y&&(u-=p.y-w,w=p.y),t&&void 0!==this.props.closeOnScrollOutsideOffset&&p.y<=this.props.closeOnScrollOutsideOffset)return void this._handleGlobalClose(!0);const C=p.overrideHeight??(d?u:void 0);this.setState({appearingMenuHeight:t?this.state.appearingMenuHeight:C,
appearingMenuWidth:t?this.state.appearingMenuWidth:p.overrideWidth,appearingPosition:{x:f,y:w},isMeasureValid:!0},(()=>{this.props.doNotRestorePosition||this._restoreScrollPosition(),e&&e()}))},this._restoreScrollPosition=()=>{const e=document.activeElement,t=(0,r.ensureNotNull)(this._containerRef);if(null!==e&&t.contains(e))try{e.scrollIntoView()}catch(e){}else(0,r.ensureNotNull)(this._scrollWrapRef).scrollTop=this._scroll},this._resizeForced=()=>{this.setState({appearingMenuHeight:void 0,appearingMenuWidth:void 0,appearingPosition:void 0,isMeasureValid:void 0})},this._resize=()=>{null===this._raf&&(this._raf=requestAnimationFrame((()=>{this.setState({appearingMenuHeight:void 0,appearingMenuWidth:void 0,appearingPosition:void 0,isMeasureValid:void 0}),this._raf=null})))},this._handleGlobalClose=e=>{this.props.onClose(e)},this._handleSlot=e=>{this._manager.setContainer(e)},this._handleScroll=()=>{this._scroll=(0,r.ensureNotNull)(this._scrollWrapRef).scrollTop},this._handleScrollOutsideEnd=()=>{clearTimeout(this._scrollTimeout),this._scrollTimeout=setTimeout((()=>{this._handleMeasure({forceRecalcPosition:!0})}),80)},this._handleScrollOutside=e=>{e.target!==this._scrollWrapRef&&(this._handleScrollOutsideEnd(),null===this._scrollRaf&&(this._scrollRaf=requestAnimationFrame((()=>{this._handleMeasure({forceRecalcPosition:!0}),this._scrollRaf=null}))))},this.state={}}componentDidMount(){this._handleMeasure({callback:this.props.onOpen});const{customCloseDelegate:e=u.globalCloseDelegate,customRemeasureDelegate:t}=this.props;e.subscribe(this,this._handleGlobalClose),t?.subscribe(null,this._handleCustomRemeasureDelegate),window.addEventListener("resize",this._resize);const s=null!==this.context;this._hotkeys||s||(this._hotkeys=h.createGroup({desc:"Popup menu"}),this._hotkeys.add({desc:"Close",hotkey:27,handler:()=>{this.props.onKeyboardClose&&this.props.onKeyboardClose(),this._handleGlobalClose()}})),this.props.repositionOnScroll&&window.addEventListener("scroll",this._handleScrollOutside,{capture:!0})}componentDidUpdate(){this._handleMeasure()}componentWillUnmount(){const{customCloseDelegate:e=u.globalCloseDelegate,customRemeasureDelegate:t}=this.props;e.unsubscribe(this,this._handleGlobalClose),t?.unsubscribe(null,this._handleCustomRemeasureDelegate),window.removeEventListener("resize",this._resize),window.removeEventListener("scroll",this._handleScrollOutside,{capture:!0}),this._hotkeys&&(this._hotkeys.destroy(),this._hotkeys=null),null!==this._raf&&(cancelAnimationFrame(this._raf),this._raf=null),null!==this._scrollRaf&&(cancelAnimationFrame(this._scrollRaf),this._scrollRaf=null),this._scrollTimeout&&clearTimeout(this._scrollTimeout)}render(){const{id:e,role:t,"aria-label":s,"aria-labelledby":n,"aria-activedescendant":r,"aria-hidden":a,"aria-describedby":u,"aria-invalid":d,children:h,minWidth:b,theme:f=g,className:_,maxHeight:w,onMouseOver:C,onMouseOut:y,onKeyDown:x,onFocus:S,onBlur:E}=this.props,{appearingMenuHeight:P,appearingMenuWidth:k,appearingPosition:T,isMeasureValid:F}=this.state,D={
"--ui-kit-menu-max-width":`${T&&T.x}px`,maxWidth:"calc(100vw - var(--ui-kit-menu-max-width) - 6px)"};return i.createElement(p.MenuContext.Provider,{value:this},i.createElement(m.SubmenuHandler,null,i.createElement(c.SlotContext.Provider,{value:this._manager},i.createElement("div",{id:e,role:t,"aria-label":s,"aria-labelledby":n,"aria-activedescendant":r,"aria-hidden":a,"aria-describedby":u,"aria-invalid":d,className:o()(_,f.menuWrap,!F&&f.isMeasuring),style:{height:P,left:T&&T.x,minWidth:b,position:"fixed",top:T&&T.y,width:k,...this.props.limitMaxWidth&&D},"data-name":this.props["data-name"],"data-tooltip-show-on-focus":this.props["data-tooltip-show-on-focus"],ref:this._handleContainerRef,onScrollCapture:this.props.onScroll,onContextMenu:l.preventDefaultForContextMenu,tabIndex:this.props.tabIndex,onMouseOver:C,onMouseOut:y,onKeyDown:x,onFocus:S,onBlur:E},i.createElement("div",{className:o()(f.scrollWrap,!this.props.noMomentumBasedScroll&&f.momentumBased),style:{overflowY:void 0!==P?"scroll":"auto",maxHeight:w},onScrollCapture:this._handleScroll,ref:this._handleScrollWrapRef},i.createElement(v,{className:f.menuBox},h)))),i.createElement(c.Slot,{reference:this._handleSlot})))}update(e){e?this._resizeForced():this._resize()}focus(e){this._containerRef?.focus(e)}blur(){this._containerRef?.blur()}}function v(e){const t=(0,r.ensureNotNull)((0,i.useContext)(m.SubmenuContext)),s=i.useRef(null);return i.createElement("div",{ref:s,className:e.className,onMouseOver:function(e){if(!(null!==t.current&&e.target instanceof Node&&(i=e.target,s.current?.contains(i))))return;var i;t.isSubmenuNode(e.target)||t.setCurrent(null)},"data-name":"menu-inner"},e.children)}_.contextType=m.SubmenuContext},28466:(e,t,s)=>{"use strict";s.d(t,{CloseDelegateContext:()=>o});var i=s(50959),n=s(370981);const o=i.createContext(n.globalCloseDelegate)},8361:(e,t,s)=>{"use strict";s.d(t,{Portal:()=>i.Portal,PortalContext:()=>i.PortalContext});var i=s(730654)},753327:(e,t,s)=>{"use strict";s.d(t,{Slot:()=>i.Slot,SlotContext:()=>i.SlotContext});var i=s(682925)},742554:(e,t,s)=>{"use strict";s.d(t,{TouchScrollContainer:()=>c});var i=s(50959),n=s(259142),o=s(650151),r=s(601227);const a=CSS.supports("overscroll-behavior","none");let l=0;const c=(0,i.forwardRef)(((e,t)=>{const{children:s,...o}=e,c=(0,i.useRef)(null);return(0,i.useImperativeHandle)(t,(()=>c.current)),(0,i.useLayoutEffect)((()=>{if(r.CheckMobile.iOS())return l++,null!==c.current&&(a?1===l&&(document.body.style.overscrollBehavior="none"):(0,n.disableBodyScroll)(c.current,{allowTouchMove:u(c)})),()=>{l--,null!==c.current&&(a?0===l&&(document.body.style.overscrollBehavior=""):(0,n.enableBodyScroll)(c.current))}}),[]),i.createElement("div",{ref:c,...o},s)}));function u(e){return t=>{const s=(0,o.ensureNotNull)(e.current),i=document.activeElement;return!s.contains(t)||null!==i&&s.contains(i)&&i.contains(t)}}},488831:(e,t,s)=>{"use strict";s.d(t,{UnderlineButtonTabs:()=>Z});var i,n=s(50959),o=s(497754),r=s.n(o),a=s(609838),l=s(429510),c=s(525388),u=s(269842),d=s(772069),h=s(984164),m=s(953517)
;!function(e){e.XSmall="xsmall",e.Small="small",e.Medium="medium",e.Large="large",e.XLarge="xlarge"}(i||(i={}));const p=(0,n.createContext)({size:"small",overflowBehaviour:void 0});var g=s(234539),b=s(956406);function f(e){const{size:t="xsmall",active:s,fake:i,enableActiveStateStyles:n,anchor:r=!1,hideFocusOutline:a=!1,equalTabSize:l,className:c,overflowBehaviour:u}=e;return o(b["underline-tab"],b[`size-${t}`],s&&b.selected,!n&&b["disable-active-state-styles"],a&&b["disable-focus-outline"],i&&b.fake,r&&b["enable-cursor-pointer"],l&&b[`margin-${t}`],"collapse"===u&&b.collapse,c)}const _=(0,n.forwardRef)(((e,t)=>{const{size:s,overflowBehaviour:i}=(0,n.useContext)(p),o=(0,n.useContext)(g.CustomBehaviourContext),{active:a,fake:l,className:c,enableActiveStateStyles:u=o.enableActiveStateStyles,hideFocusOutline:d=!1,equalTabSize:h,children:m,..._}=e;return n.createElement("button",{..._,ref:t,className:f({size:s,active:a,fake:l,enableActiveStateStyles:u,hideFocusOutline:d,equalTabSize:h,className:c,overflowBehaviour:i})},h&&"string"==typeof m?n.createElement("span",{className:r()(b["ellipsis-children"],"apply-overflow-tooltip")},m):m)}));_.displayName="UnderlineTabsBaseButton";const v=(0,n.forwardRef)(((e,t)=>{const{item:s,highlighted:i,handleItemRef:o,onClick:r,"aria-disabled":a,...l}=e,c=(0,n.useCallback)((()=>{r&&r(s)}),[r,s]),u=(0,n.useCallback)((e=>{o&&o(s,e),t&&"object"==typeof t?t.current=e:"function"==typeof t&&t(e)}),[s,o,t]);return n.createElement(_,{...l,id:s.id,onClick:c,ref:u},s.label)}));v.displayName="UnderlineButtonTab";var w=s(650151),C=s(192063),y=s(904925),x=s(878112),S=s(347531),E=s(602948),P=s(863509),k=s(168874),T=s(632498);function F(e){switch(e){case"xsmall":return S;case"small":return E;case"medium":case"large":return P;case"xlarge":return k}}function D(e){const{size:t,isDropped:s=!1}=e;return n.createElement(x.Icon,{icon:F(t),className:o(T["arrow-icon"],T[`size-${t}`],s&&T.dropped)})}var I=s(333636);const R=4,M=4;function N(e){const{size:t,disabled:s,isOpened:i,enableActiveStateStyles:o,hideFocusOutline:r,fake:a,items:l,buttonContent:u,buttonRef:d,isAnchorTabs:h,isHighlighted:m,onButtonClick:p,onItemClick:g,onClose:b}=e,f=(0,n.useRef)(null),v=(0,c.useMergedRefs)([d,f]),x=function(e,t){const s=(0,n.useRef)(B);return(0,n.useEffect)((()=>{const e=getComputedStyle((0,w.ensureNotNull)(t.current));s.current={xsmall:A(e,"xsmall"),small:A(e,"small"),medium:A(e,"medium"),large:A(e,"large"),xlarge:A(e,"xlarge")}}),[t]),(0,n.useCallback)((()=>{const i=(0,w.ensureNotNull)(t.current).getBoundingClientRect(),n=s.current[e];return{x:i.left,y:i.top+i.height+n+R,indentFromWindow:{top:M,bottom:M,left:M,right:M}}}),[t,e])}(t,f);return n.createElement(y.PopupMenuDisclosureView,{buttonRef:f,listboxTabIndex:-1,isOpened:i,onClose:b,listboxAria:{"aria-hidden":!0},popupPosition:x,button:n.createElement(_,{"aria-hidden":!0,disabled:s,active:i,onClick:p,ref:v,tabIndex:-1,enableActiveStateStyles:o,hideFocusOutline:r,fake:a},u,n.createElement(D,{size:t,isDropped:i})),popupChildren:l.map((e=>n.createElement(C.PopupMenuItem,{
key:e.id,className:h?I["link-item"]:void 0,onClick:g,onClickArg:e,isActive:m(e),label:e.label,isDisabled:e.disabled,link:"href"in e?e.href:void 0,rel:"rel"in e?e.rel:void 0,target:"target"in e?e.target:void 0,renderComponent:"renderComponent"in e?e.renderComponent:void 0,dontClosePopup:!0})))})}function A(e,t){return parseInt(e.getPropertyValue(`--ui-lib-underline-tabs-tab-margin-bottom-${t}`),10)}const B={xsmall:0,small:0,medium:0,large:0,xlarge:0};var O=s(799573),U=s(737402),z=s(586240),L=s(898163);function V(e){const{size:t,overflowBehaviour:s,className:i}=e;return o(L["scroll-wrap"],L[`size-${t}`],"scroll"===s&&L["enable-scroll"],i)}function W(){const[e,t]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{t(O.mobiletouch)}),[]),e}var H=s(290484),K=s(431520),q=s(150368),j=s.n(q);const $=100;function G(e){const{disabled:t,translateX:s,transitionDuration:i}=e,r=e.scale/100;return n.createElement("div",{className:o(j().underline,t&&j().disabled),style:{transform:`translateX(${s}px) scaleX(${r})`,transitionDuration:`${i}ms`}},n.createElement("div",{className:j().corner,style:{transform:`scaleX(${1/r})`}}),n.createElement("div",{className:j().center,style:{transform:`scaleX(${1-30/e.scale})`}}),n.createElement("div",{className:j().corner,style:{transform:`scaleX(${1/r})`}}))}function Z(e){const{id:t,items:i,activationType:o,orientation:g,disabled:b,moreButtonContent:f=a.t(null,void 0,s(437117)),size:_="small",onActivate:w,isActive:C,className:y,style:x,overflowBehaviour:S,enableActiveStateStyles:E,tablistLabelId:P,tablistLabel:k,"data-name":T="underline-tabs-buttons",stretchTabs:F,equalTabSize:D,defaultKeyboardFocus:I,stopPropagationIfKeyboardActionHandled:R,keyboardNavigationLoop:M,focusableItemAttributes:A}=e,B=W(),O=function(e){const t=(0,U.useSafeMatchMedia)(z["media-mf-phone-landscape"],!0),s=W();return e??(s||!t?"scroll":"collapse")}(S),q=(0,n.useRef)(!1),j=(0,n.useCallback)((e=>e.id),[]),Z="none"===O&&F,Y="none"===O&&D,X=E??!B,{visibleItems:Q,hiddenItems:J,containerRefCallback:ee,innerContainerRefCallback:te,moreButtonRef:se,setItemRef:ie}=(0,l.useCollapsible)(i,j,C),ne="collapse"===O?Q:i,oe="collapse"===O?J:[],re=(0,n.useCallback)((e=>oe.includes(e)),[oe]),ae=(0,n.useRef)(new Map),{isOpened:le,open:ce,close:ue,onButtonClick:de}=(0,d.useDisclosure)({id:t,disabled:b}),he=function(e="xsmall"){switch(e){case"xsmall":case"small":return 12;case"medium":return 16;case"large":case"xlarge":return 20}}(_),{tabsBindings:me,tablistBinding:pe,scrollWrapBinding:ge,onActivate:be,onHighlight:fe,isHighlighted:_e}=(0,h.useTabs)({id:t,items:[...ne,...oe],activationType:o,orientation:g,disabled:b,tablistLabelId:P,tablistLabel:k,onActivate:w,isActive:C,isCollapsed:re,isRtl:K.isRtl,itemsRefs:ae,isDisclosureOpened:le,defaultKeyboardFocus:I,stopPropagationIfKeyboardActionHandled:R,keyboardNavigationLoop:M,focusableItemAttributes:A,scrollIntoViewOptions:{additionalScroll:he}}),ve=i.find(C),we=oe.find(_e),Ce=(0,n.useCallback)((()=>{ve&&fe(ve)}),[fe,ve]),ye=(0,n.useCallback)((e=>me.find((t=>t.id===e.id))??{}),[me]),xe=(0,
n.useCallback)((()=>{ue(),Ce(),q.current=!0}),[ue,Ce]),Se=(0,n.useCallback)((()=>{we&&(be(we),fe(we,200))}),[be,fe,we]);ge.ref=(0,c.useMergedRefs)([ge.ref,ee]),pe.ref=(0,c.useMergedRefs)([pe.ref,te]),pe.onKeyDown=(0,u.createSafeMulticastEventHandler)((0,m.useKeyboardEventHandler)([(0,m.useKeyboardClose)(le,xe),(0,m.useKeyboardActionHandler)([13,32],Se,(0,n.useCallback)((()=>Boolean(we)),[we]))]),pe.onKeyDown);const Ee=(0,n.useCallback)((e=>{q.current=!0,de(e)}),[q,de]),Pe=(0,n.useCallback)((e=>{e&&be(e)}),[be]);(0,n.useEffect)((()=>{q.current?q.current=!1:(we&&!le&&ce(),!we&&le&&ue())}),[we,le,ce,ue]);const ke=function(e,t,s=[]){const[i,o]=(0,n.useState)(),r=(0,n.useRef)(),a=(0,n.useRef)(),l=e=>{const t=e.parentElement??void 0;if(void 0===t)return;const s=void 0===a.current||a.current===e?0:$;a.current=e;const{left:i,right:n,width:r}=e.getBoundingClientRect(),{left:l,right:c}=t.getBoundingClientRect(),u=(0,K.isRtl)()?n-c:i-l;o({translateX:u,scale:r,transitionDuration:s})};return(0,n.useEffect)((()=>{const e=(0,H.default)((e=>{const t=e[0].target;void 0!==t&&l(t)}),50);r.current=new ResizeObserver(e)}),[]),(0,n.useEffect)((()=>{if(void 0===t)return;const s=e.get(t);return void 0!==s?(l(s),r.current?.observe(s),()=>r.current?.disconnect()):void 0}),s),i}(ae.current,ve??we,[ve??we,ne,_,Z,O]);return n.createElement(p.Provider,{value:{size:_,overflowBehaviour:O}},n.createElement("div",{...ge,className:V({size:_,overflowBehaviour:O,className:y}),style:x,"data-name":T},n.createElement("div",{...pe,className:r()(L["underline-tabs"],{[L["make-grid-column"]]:Z||Y,[L["stretch-tabs"]]:Z,[L["equal-tab-size"]]:Y})},ne.map((e=>n.createElement(v,{...ye(e),key:e.id,item:e,onClick:be,enableActiveStateStyles:X,hideFocusOutline:B,ref:ie(j(e)),...e.dataId&&{"data-id":e.dataId},equalTabSize:Y}))),oe.map((e=>n.createElement(v,{...ye(e),ref:ie(j(e)),key:e.id,item:e,fake:!0}))),"collapse"===O&&n.createElement(N,{size:_,disabled:b,isOpened:le,items:oe,buttonContent:f,buttonRef:se,isHighlighted:_e,onButtonClick:Ee,onItemClick:Pe,onClose:ue,enableActiveStateStyles:X,hideFocusOutline:B,fake:0===oe.length}),ke?n.createElement(G,{...ke,disabled:b}):n.createElement("div",null))))}var Y=s(409245);function X(e){return n.createElement("a",{...(0,Y.renameRef)(e)})}(0,n.forwardRef)(((e,t)=>{const{size:s,overflowBehaviour:i}=(0,n.useContext)(p),o=(0,n.useContext)(g.CustomBehaviourContext),{item:r,highlighted:a,handleItemRef:l,onClick:c,active:u,fake:d,className:h,enableActiveStateStyles:m=o.enableActiveStateStyles,hideFocusOutline:b=!1,disabled:_,"aria-disabled":v,...w}=e,C=(0,n.useCallback)((e=>{v?e.preventDefault():c&&c(r)}),[c,v,r]),y=(0,n.useCallback)((e=>{l&&l(r,e),t&&"object"==typeof t?t.current=e:"function"==typeof t&&t(e)}),[r,l,t]),x=r.renderComponent??X;return n.createElement(x,{...w,id:r.id,"aria-disabled":v,onClick:C,reference:y,href:r.href,rel:r.rel,target:r.target,className:f({size:s,active:u,fake:d,enableActiveStateStyles:m,anchor:!0,hideFocusOutline:b,className:h,overflowBehaviour:i})},r.label)})).displayName="UnderlineAnchorTab"},
493173:(e,t,s)=>{"use strict";function i(e,t,s={}){return Object.assign({},e,function(e,t,s={}){const i=Object.assign({},t);for(const n of Object.keys(t)){const o=s[n]||n;o in e&&(i[n]=[e[o],t[n]].join(" "))}return i}(e,t,s))}s.d(t,{mergeThemes:()=>i})},190637:e=>{e.exports={wrapper:"wrapper-q2xHBwCG",labelWrapper:"labelWrapper-q2xHBwCG",labelAccountName:"labelAccountName-q2xHBwCG",labelInfo:"labelInfo-q2xHBwCG",accountBadge:"accountBadge-q2xHBwCG",summary:"summary-q2xHBwCG",dropdownButton:"dropdownButton-q2xHBwCG",hintPlaceholder:"hintPlaceholder-q2xHBwCG",content:"content-q2xHBwCG",popup:"popup-q2xHBwCG",singleItemDropdownWrapper:"singleItemDropdownWrapper-q2xHBwCG",accountName:"accountName-q2xHBwCG",currency:"currency-q2xHBwCG"}},314378:e=>{e.exports={wrapper:"wrapper-sS0Eevbl",popup:"popup-sS0Eevbl",brokerDropdownWrapper:"brokerDropdownWrapper-sS0Eevbl",brokerDropdownMobileWrapper:"brokerDropdownMobileWrapper-sS0Eevbl",betaBadgeWrapper:"betaBadgeWrapper-sS0Eevbl"}},86304:e=>{e.exports={headerWrapper:"headerWrapper-gktKXRGi",withoutDropdowns:"withoutDropdowns-gktKXRGi",brokerBlock:"brokerBlock-gktKXRGi",betaBadge:"betaBadge-gktKXRGi"}},265710:e=>{e.exports={accountSummaryField:"accountSummaryField-jRGFBLDP",value:"value-jRGFBLDP",titleContainer:"titleContainer-jRGFBLDP",title:"title-jRGFBLDP"}},616092:e=>{e.exports={accountSummaryRow:"accountSummaryRow-p0GW1i2G",addMargin:"addMargin-p0GW1i2G"}},429798:e=>{e.exports={count:"count-jY_kTdIW",tabs:"tabs-jY_kTdIW"}},47135:e=>{e.exports={accountManager:"accountManager-RYOkdllU",topPanel:"topPanel-RYOkdllU",secondaryPanel:"secondaryPanel-RYOkdllU",content:"content-RYOkdllU",page:"page-RYOkdllU",active:"active-RYOkdllU",popup:"popup-RYOkdllU",mobile:"mobile-RYOkdllU"}},922954:e=>{e.exports={pageContainer:"pageContainer-NWiOUge8"}},960658:e=>{e.exports={stretch:"stretch-jequK3xK"}},992607:e=>{e.exports={title:"title-qCE0lhBm",hidden:"hidden-qCE0lhBm"}},237589:e=>{e.exports={container:"container-UePCJPvY",sticky:"sticky-UePCJPvY"}},810973:e=>{e.exports={button:"button-mNpEpVYL"}},474756:e=>{e.exports={message:"message-p5eTSZ4Q"}},562082:e=>{e.exports={wrapper:"wrapper-oHlQhto0",buttons:"buttons-oHlQhto0",button:"button-oHlQhto0",editButton:"editButton-oHlQhto0"}},394715:e=>{e.exports={title:"title-DIAl4Kmu",titleContent:"titleContent-DIAl4Kmu",wrapper:"wrapper-DIAl4Kmu"}},736892:e=>{e.exports={container:"container-JKVA979k",logo:"logo-JKVA979k",gap:"gap-JKVA979k",tickerAndDescriptionWrapper:"tickerAndDescriptionWrapper-JKVA979k",textWrapper:"textWrapper-JKVA979k",title:"title-JKVA979k",description:"description-JKVA979k",tooltipIcon:"tooltipIcon-JKVA979k",messageInformer:"messageInformer-JKVA979k"}},993275:e=>{e.exports={title:"title-UBH3TM61"}},206402:e=>{e.exports={text:"text-8tRPX9tj"}},368960:e=>{e.exports={gray:"gray-Qz5vw9Wh",grey:"grey-Qz5vw9Wh",blue:"blue-Qz5vw9Wh",red:"red-Qz5vw9Wh",green:"green-Qz5vw9Wh",orange:"orange-Qz5vw9Wh"}},211853:e=>{e.exports={wrapper:"wrapper-scLCpJg_",currency:"currency-scLCpJg_"}},697978:e=>{e.exports={wrapper:"wrapper-HXba0ecm",
rightAligned:"rightAligned-HXba0ecm",tooltipIcon:"tooltipIcon-HXba0ecm"}},365335:e=>{e.exports={wrapper:"wrapper-ukE5gIkU",hiddenLabel:"hiddenLabel-ukE5gIkU",contentWrapper:"contentWrapper-ukE5gIkU",content:"content-ukE5gIkU",labelWrapper:"labelWrapper-ukE5gIkU",label:"label-ukE5gIkU",withPadding:"withPadding-ukE5gIkU",tooltipIcon:"tooltipIcon-ukE5gIkU"}},730402:e=>{e.exports={root:"root-Tu141ut0",tableHead:"tableHead-Tu141ut0",tableBody:"tableBody-Tu141ut0",table:"table-Tu141ut0",wrapper:"wrapper-Tu141ut0",headCell:"headCell-Tu141ut0",sortable:"sortable-Tu141ut0",headCellContent:"headCellContent-Tu141ut0",cell:"cell-Tu141ut0",capitalize:"capitalize-Tu141ut0",cellContent:"cellContent-Tu141ut0",rightAlignedCellContent:"rightAlignedCellContent-Tu141ut0",hideLabelOnMobile:"hideLabelOnMobile-Tu141ut0",hideCellOnMobile:"hideCellOnMobile-Tu141ut0",row:"row-Tu141ut0",highlightedRow:"highlightedRow-Tu141ut0",leftFixedColumn:"leftFixedColumn-Tu141ut0",rightFixedColumn:"rightFixedColumn-Tu141ut0",inactiveRow:"inactiveRow-Tu141ut0",tableWrapper:"tableWrapper-Tu141ut0",noBouncingScroll:"noBouncingScroll-Tu141ut0",tableWrapperEmpty:"tableWrapperEmpty-Tu141ut0",isScrolled:"isScrolled-Tu141ut0",emptyStateBlock:"emptyStateBlock-Tu141ut0",emptyStateRow:"emptyStateRow-Tu141ut0",emptyStateCell:"emptyStateCell-Tu141ut0",paginationWrapper:"paginationWrapper-Tu141ut0"}},927102:e=>{e.exports={scrollContainer:"scrollContainer-QUmwCARl",scrollWrapper:"scrollWrapper-QUmwCARl"}},70587:(e,t,s)=>{"use strict";s.r(t),s.d(t,{AccountManagerHeaderDropdowns:()=>y});var i=s(50959),n=s(497754),o=s.n(n),r=s(601227),a=s(628640),l=s(609838),c=s(528457),u=s(898237),d=s(723991),h=(s(603369),s(679864)),m=s(661851),p=s(190637);const g="Account Creation Dialog",b=l.t(null,void 0,s(271775));function f(e){return i.createElement(i.Fragment,null,i.createElement("span",null,e.name),!1)}function _(e){const{showSettings:t,showLabel:s,children:n}=e;return t||s?i.createElement("div",{className:p.wrapper},n):i.createElement(i.Fragment,null,n)}function v(e){const{name:t,currency:n}=e;return i.createElement(i.Fragment,null,i.createElement("span",{className:p.accountName},`${l.t(null,void 0,s(386511))}:${t}`),void 0!==n&&i.createElement("span",{className:p.currency},n))}function w(e){const{currentAccount$:t,accountsList:s,mode:n,accountSettingsInfo:a,createAccount:l,resetAccount:w,changeAccountSettings:C,deleteAccount:y,trackEvent:x,showErrorNotification:S,accountHintOptions:E}=e,P=(0,i.useRef)(null),{isOpen:k,onOpen:T,onClose:F}=(0,c.useRootPopoverOpenState)(P),D=(0,m.useObservable)(t);if(void 0===D)return i.createElement(i.Fragment,null);const I=0===n;if(1===s.length&&void 0===l)return i.createElement("span",{className:o()(p.content,I&&p.popup,p.singleItemDropdownWrapper)},i.createElement(v,{name:D.name,currency:D.currency}));const R=!1,M=Boolean(!1),N=(r.CheckMobile.any(),(0,i.useMemo)((()=>s.map((e=>i.createElement(d.PopoverItem,{key:e.id,title:f(e),onClick:()=>e.selectAccount(),rightSlot:e.currency||void 0,selected:D.id===e.id})))),[s,l,D,function(){
if(void 0===l)return;F(!0),showCreateAccountDialog({title:b,createAccountHandler:e=>(x(g,"Click Create account"),l(e)),accountSettingsInfoHandler:a,trackEvent:x,showErrorNotification:S})}]));return i.createElement(_,{showSettings:R,showLabel:M},i.createElement(u.LightButton,{showCaret:!0,isActive:k,isSelected:k,size:"medium","data-name":"account-selector",onClick:()=>{k?F(!0):T()},className:p.dropdownButton,variant:"quiet-primary",reference:P},i.createElement("span",{className:o()(p.content,I&&p.popup)},i.createElement(v,{name:D.name,currency:D.currency}),!1)),i.createElement(h.PopoverKeyboardNavigator,{closeOnEscape:!0,closeOnClickAway:!0,isOpen:k,onClose:F,"data-name":"account-dropdown",anchored:{type:"element",at:P}},N),R,M&&i.createElement(AccountLabel,{label:D.label,labelLink:D.labelLink,labelTooltipText:D.labelTooltipText}))}var C=s(314378);function y(e){const{brokerDropdownProps:t,accountDropdownProps:s,commonDropdownProps:n}=e,l=(r.CheckMobile.any(),0===s.mode);return i.createElement("div",{className:o()(C.wrapper,l&&C.popup)},l?i.createElement("span",{className:C.brokerDropdownWrapper},"Account Manager"):i.createElement(i.Fragment,null),i.createElement(w,{...s}),!l&&i.createElement(a.TerminalDropdown,{...n}))}},399890:(e,t,s)=>{"use strict";s.r(t),s.d(t,{AccountManager:()=>On});var i=s(609838),n=s(50959),o=s(632227),r=s(497754),a=s.n(r),l=s(650151),c=s(688401),u=s(601227),d=s(69111),h=s(440891),m=s(391431),p=s(529596);class g{constructor(e){this._delegates=e}subscribe(e,t,s){this._delegates.forEach((i=>i.subscribe(e,t,s)))}unsubscribe(e,t){this._delegates.forEach((s=>s.unsubscribe(e,t)))}unsubscribeAll(e){this._delegates.forEach((t=>t.unsubscribeAll(e)))}}var b=s(344557),f=s(441827),_=s(669874);function v(e){return 0!==e.qty||0!==e.longQty&&void 0!==e.longQty||0!==e.shortQty&&void 0!==e.shortQty}var w=s(247465);class C{constructor(e){this._isActive=!1,this._created=!1,this._started=!1,this._fullUpdateDelegate=null,this._partialUpdateDelegate=null,this._deleteUpdateDelegate=null,this._noMoreEntries=!1,this._isLoadingMore=!1,this._fullUpdateCancel=null,this._exportData=async()=>{const e=this._isActive;e||(this.start(),await this.setActive(!0));const t=await this._view.exportData();return e||await this.setActive(!1),t},this._viewVisibilityHandler=e=>{this._model.setActive(e)},this._sortingChangeHandler=e=>{this._updateModelSortingState(e)},this._sizeChangeHandler=()=>{this._updateModelSortingState({column:this._view.sortingColumn(),mode:this._view.sortingMode()})};const{idProperty:t,name:s,model:i,view:n,source:o,subscriptions:r,supportPagination:a}=e;this._idProperty=t,this._model=i,this._view=n,this._name=s,this._source=o,this._subscriptions=r,this._supportPagination=Boolean(a)}start(){this._started||(this._updateModelSortingState({column:this._view.sortingColumn(),mode:this._view.sortingMode()}),this._subscribeUpdates(),this._subscribeView(),this._started=!0)}stop(){this._started&&(this._unsubscribeUpdates(),this._unsubscribeView(),this.reset(),this._started=!1)}isStarted(){return this._started}
async setActive(e){(0,l.assert)(!e||this._started,"Should be started first"),this._isActive!==e&&(this._isActive=e,this._isActive&&!this._created&&await this._fullUpdate(),this._model.setActive(e))}isActive(){return this._isActive}reset(){this._isActive?this._fullUpdate():(this._deleteRows(),this._created=!1)}destroy(){this._unsubscribeUpdates(),this._unsubscribeView()}getDataExporter(){return{name:this._name,exportData:this._exportData}}highlightRowById(e){this._view.highlightRowById(e)}setRowInactiveById(e,t){this._view.setRowInactiveById(e,t)}setRowInactiveByFilter(e){this._view.setRowInactiveByFilter(e)}addFormatter(e){this._view.addFormatter(e)}addFormatters(e){for(const t of e)this.addFormatter(t)}isRowInViewport(e){return this._view.isRowInViewport(e)}setColumnAvailable(e,t){this._view.setColumnAvailable(e,t)}setRowLinkedByFilter(e){this._view.setRowLinkedByFilter(e)}setRowLinkedById(e,t){this._view.setRowLinkedById(e,t)}rowIdAtEvent(e){return this._view.rowIdAtEvent(e)}rowAtEvent(e){const t=this._view.rowIdAtEvent(e);if(void 0!==t)return this.rowById(t)}rowById(e){return this._model.data().get(e)}_update(e){return!!this._created&&(this._model.addRow(e),!0)}_deleteRow(e){this._created&&this._model.deleteRow(e)}_deleteRows(){this._model.deleteRows(),this._created=!1}_fullUpdate(){if(this._deleteRows(),this._noMoreEntries=!1,!this._isActive)return Promise.resolve();this._fullUpdateCancel&&this._fullUpdateCancel();const e=(0,w.makeCancelable)(this._source());return this._fullUpdateCancel=e.cancel,e.promise.then((e=>{this._fullUpdateCancel=null,this._model.addRows(e),this._created=!0,this._onCreated()})).catch((e=>{if(!(0,w.isCancelled)(e))throw e}))}_onCreated(){}_loadMoreIfBottomVisible(e){if(this._isLoadingMore||!e||this._noMoreEntries)return;const t=this._model.rows().length-1;if(-1===t)return;const s=this._model.rows()[t][this._idProperty];this._isLoadingMore=!0,this._source(s).then((e=>{0!==e.length?(this._model.addRows(e),this._isLoadingMore=!1):this._noMoreEntries=!0})).catch((()=>{this._isLoadingMore=!1}))}_subscribeView(){this._view.onSizeChange.subscribe(this,this._sizeChangeHandler),this._view.onTableVisibilityChange.subscribe(this,this._viewVisibilityHandler),this._view.onSortingChange.subscribe(this,this._sortingChangeHandler),this._supportPagination&&this._view.onBottomVisibilityChange.subscribe(this,this._loadMoreIfBottomVisible)}_unsubscribeView(){this._view.onSizeChange.unsubscribe(this,this._sizeChangeHandler),this._view.onTableVisibilityChange.unsubscribe(this,this._viewVisibilityHandler),this._view.onSortingChange.unsubscribe(this,this._sortingChangeHandler),this._view.onBottomVisibilityChange.unsubscribe(this,this._loadMoreIfBottomVisible)}_updateModelSortingState(e){const t=0!==this._view.size()||this._supportPagination?e.mode:null;this._model.setSortingState({column:null===t?void 0:e.column,mode:t})}_subscribeUpdates(){if(this._fullUpdateDelegate)throw new Error("should unsubscribe first");this._fullUpdateDelegate=this._subscriptions.fullUpdateDelegate,
this._fullUpdateDelegate.subscribe(this,this._fullUpdate),this._partialUpdateDelegate=this._subscriptions.rowUpdateDelegate,this._partialUpdateDelegate.subscribe(this,this._update),this._subscriptions.rowDeleteDelegate&&(this._deleteUpdateDelegate=this._subscriptions.rowDeleteDelegate,this._deleteUpdateDelegate.subscribe(this,this._deleteRow))}_unsubscribeUpdates(){this._fullUpdateDelegate&&(this._fullUpdateDelegate.unsubscribe(this,this._fullUpdate),delete this._fullUpdateDelegate),this._partialUpdateDelegate&&(this._partialUpdateDelegate.unsubscribe(this,this._update),delete this._partialUpdateDelegate),this._deleteUpdateDelegate&&(this._deleteUpdateDelegate.unsubscribe(this,this._deleteRow),delete this._deleteUpdateDelegate)}}var y=s(91679);class x{constructor(e,t){this._filterTabs=[],this._active=!1,this._count=new y.WatchedValue,this._content=e,this._id=t.id,this._name=t.name}setActive(e){this._active!==e&&(this._active=e,this._onActiveChanged(e))}isActive(){return this._active}reset(){}destroy(){}content(){return this._content}name(){return this._name}id(){return this._id||this._name}async contextItems(e){return[]}topline(){return null}activeFilterTabId(){return this._activeFilterTabId}filterTabs(){return this._filterTabs}count(){return this._count.readonly()}activateFilterTab(e){this._activeFilterTabId=e}_setCount(e){this._count.setValue(e)}_onActiveChanged(e){}}class S extends x{constructor(e,t,s){super(e,t),this._tableControllers=s}reset(){this._tableControllers.forEach((e=>e.reset())),super.reset()}destroy(){this._tableControllers.forEach((e=>e.destroy())),super.destroy()}getExporters(){const e=this._tableControllers.map((e=>e.getDataExporter()));return{title:this.name(),exporters:e}}contextRow(e){}_onActiveChanged(e){this._tableControllers.forEach((t=>t.setActive(e)))}}var E=s(290484),P=s(61121),k=s(329452);class T{constructor(e,t,s){this._calculateCounts=async e=>{if(e?.aborted)return;const t=await this._source();if(e?.aborted)return;const s=t.length;s!==this._count&&(this._count=s,this._countChanged.fire(s))},this._source=e,this._rowUpdateDelegate=t,this._fullUpdateDelegate=s??null,this._countChanged=new k.Delegate,this._abortController=new AbortController,this._calculateCounts=(0,P.respectLatest)(this._calculateCounts),this._calculateCountsDebounced=(0,E.default)((()=>this._calculateCounts(this._abortController.signal)),100)}countChanged(){return this._countChanged}start(){this._abortController=new AbortController,this._rowUpdateDelegate.subscribe(this,this._calculateCountsDebounced),this._fullUpdateDelegate?.subscribe(this,this._calculateCountsDebounced),this._calculateCounts(this._abortController.signal)}stop(){this._abortController.abort(),this._count=void 0,this._rowUpdateDelegate.unsubscribe(this,this._calculateCountsDebounced),this._fullUpdateDelegate?.unsubscribe(this,this._calculateCountsDebounced)}}var F=s(150335),D=s(637730),I=s(7888),R=s(389952);var M=s(41899),N=s(251940),A=s(172912),B=s(341086),O=s(863582),U=s(848062);const z=(0,s(592715).numDependencyFormatter)((e=>(0,
B.numberFormattersParsersChain)({chain:[(0,U.fixedNumberMagnitudeStep)({decimalPlaces:e}),(0,O.signumStep)({negativeSign:O.longMinusSign})]})));var L=s(431520),V=s(743003),W=s(525915),H=s(671129),K=s(403933),q=s(737563),j=s(72903),$=s(361701),G=s(252130),Z=s(683614),Y=s(585938),X=s(972535),Q=s(744471);function J(e){e.stopPropagation(),X.mobiletouch&&((0,Q.tooltipClickHandler)(e),document.addEventListener("touchend",(e=>e.preventDefault()),{once:!0}))}function ee(e){return{ariaLabel:e,tooltip:e,onClick:J}}function te(e){const{dependencies:t,customText:s}=e,i=(0,n.useRef)(null),o=(0,n.useRef)(void 0),r=(0,Y.useForceUpdate)(),a=(0,G.useIsMounted)(),l=(0,n.useCallback)((()=>{if(!a.current)return;if(null===i.current||i.current.offsetWidth>=i.current.scrollWidth)return o.current=void 0,void r();const e=s??i.current.textContent;null!==e&&e!==o.current&&(o.current=e,r())}),t);return(0,n.useEffect)((()=>l()),[l]),(0,Z.useVisibility)(i,(()=>l()),(()=>{})),[i,void 0!==o.current?ee(o.current):null]}var se=s(904664);const ie=i.t(null,void 0,s(521645));function ne(e){return{text:void 0!==e?.text&&""!==e.text?`${ie}\n\n${e.text}`:ie,type:e?.type===se.OrderOrPositionMessageType.Error?se.OrderOrPositionMessageType.Error:se.OrderOrPositionMessageType.Warning}}var oe=s(599016),re=s(474756);const ae={[oe.OrderOrPositionMessageType.Information]:"default",[oe.OrderOrPositionMessageType.Warning]:"warning",[oe.OrderOrPositionMessageType.Error]:"danger"},le={[oe.OrderOrPositionMessageType.Information]:"info",[oe.OrderOrPositionMessageType.Warning]:"exclamation",[oe.OrderOrPositionMessageType.Error]:"exclamation"};function ce(e){e.stopPropagation(),X.mobiletouch&&((0,Q.tooltipClickHandler)(e),document.addEventListener("touchend",(e=>e.preventDefault()),{once:!0}))}function ue(e){const{type:t,text:s,className:i,reference:o,...r}=e;return n.createElement("div",{className:a()(re.message,i)},n.createElement(q.IconQuestionInformation,{...r,ref:o,icon:le[t],intent:ae[t],ariaLabel:s,tooltip:s,onClick:ce}))}function de(e){return e.replace(/\s+/g," ")}function he(e,t){return(0,n.useMemo)((()=>t?`${de(e)} - ${de(t)}`:de(e)),[e,t])}var me=s(583882),pe=s(736892);function ge(e){const{symbol:t,brokerSymbol:s,message:i,isDelayed:o}=e,r=(0,me.useSymbolLogoAndDescription)(t),l=""!==t?i:ne(i),c=he(s,r?.description),[u,d]=te({dependencies:[s],customText:c}),[h,m]=te({dependencies:[r?.description],customText:c}),p=m??d;return n.createElement("div",{className:pe.container},n.createElement("span",{className:pe.logo},void 0!==r?.logoUrls&&r.logoUrls.length>1?n.createElement(j.CircleLogoPair,{primaryLogoUrl:r.logoUrls[0],secondaryLogoUrl:r.logoUrls[1],size:"xsmall"}):n.createElement($.CircleLogo,{logoUrl:r?.logoUrls?.[0],placeholderLetter:s?.[0],size:"xsmall"})),n.createElement("div",{className:pe.tickerAndDescriptionWrapper},n.createElement("div",{className:a()(pe.textWrapper,null===p&&pe.gap)},n.createElement("span",{className:pe.title,ref:u},s),void 0!==r?.description&&n.createElement("span",{className:pe.description,ref:h
},r.description)),null!==p&&n.createElement(q.IconQuestionInformation,{...p,icon:"info",className:pe.tooltipIcon}),!1,void 0!==l&&n.createElement(ue,{...l,className:pe.messageInformer})))}var be=s(394715);function fe(e){const{brokerSymbol:t,logoComponent:s,tooltipText:i}=e,o=(0,m.getSymbolNameOverFullname)(t);return n.createElement("div",{className:be.wrapper},s,n.createElement("div",{className:a()(be.title,"apply-common-tooltip"),"data-tooltip":i??o},n.createElement("span",{className:be.titleContent},o)))}function _e(e){const{brokerSymbol:t,symbol:s}=e,i=(0,me.useSymbolLogoAndDescription)(s),o=he(t,i?.description);return n.createElement(fe,{brokerSymbol:t,logoComponent:void 0!==i?.logoUrls&&i.logoUrls.length>1?n.createElement(j.CircleLogoPair,{primaryLogoUrl:i.logoUrls[0],secondaryLogoUrl:i.logoUrls[1],size:"xsmall"}):n.createElement($.CircleLogo,{logoUrl:i?.logoUrls?.[0],placeholderLetter:t?.[0],size:"xsmall"}),tooltipText:o})}var ve=s(993275);const we=h.enabled("show_symbol_logos")&&h.enabled("show_symbol_logo_in_account_manager");function Ce(e){const t=(0,H.useMatchMedia)(K.TradingLayoutBreakpoint.Mobile);return we?t?n.createElement(ge,{...e}):n.createElement(_e,{...e}):t?n.createElement("span",{className:ve.title},e.brokerSymbol):n.createElement(fe,{...e})}var ye=s(368960);function xe(e){return 1===e?ye.blue:ye.red}function Se(e){const{side:t}=e;return n.createElement("span",{className:xe(t)},(0,W.sideToText)(t))}function Ee(e){const{side:t}=e;return n.createElement("span",{className:xe(t)},(0,W.positionSideToText)(t))}var Pe=s(206402);function ke(e){const{value:t,noWrap:s}=e;return n.createElement("span",{className:a()(Pe.text,s&&Pe.noWrap)},t)}var Te=s(211853);function Fe(e){const{className:t,value:s,currency:i}=e;return n.createElement("span",{className:a()(Te.wrapper,t)},n.createElement("span",null,s),i&&n.createElement("span",{className:Te.currency},i))}function De(e){return e?` ${e}`:""}function Ie(e){const{priceFormatter:t,price:s,prevPrice:i}=e,n=t.format(s);if(void 0===i)return{same:n};const o=t.format(i),r=n.split("").findIndex(((e,t)=>e!==o[t]));if(-1===r)return{same:n};return{same:n.substring(0,r),differs:n.substring(r)}}function Re(e){const{price:t,prevPrice:s,currency:i,lastCharSup:o}=e,{same:r,differs:a}=Ie(e),l=function(e){const{differs:t,price:s,prevPrice:i,lastCharSup:o,same:r}=e;return void 0!==t&&void 0!==i?n.createElement(n.Fragment,null,r,n.createElement("span",{className:s>i?ye.green:ye.red},o?Me(t):t)):o?Me(r):(0,L.forceLTRStr)(r)}({differs:a,price:t,prevPrice:s,lastCharSup:o,same:r});return i?n.createElement(Fe,{value:l,currency:i}):n.createElement("span",null,l)}function Me(e){const t=/^([^]*)(\S)(\s*)$/.exec(e);return"0"===e||null===t?n.createElement(n.Fragment,null,(0,L.forceLTRStr)(e)):n.createElement(n.Fragment,null,t[1],n.createElement("sup",null,t[2]),void 0!==t[3]&&""!==t[3]&&n.createElement("sup",null,t[3]))}const Ne={3:ye.gray,6:ye.blue,5:ye.red,2:ye.green,1:ye.orange,4:void 0};function Ae(e){const{status:t}=e;return n.createElement("span",{className:Ne[t],style:{
textTransform:"capitalize"}},(0,m.orderStatusToText)(t))}var Be=s(960521);function Oe(e,t=2){if(!(0,m.isDefined)(e)||isNaN(e)||"number"!=typeof e)return"";const s=(0,Be.Big)(10).pow(-(t+1));return(0,L.forceLTRStr)((0,Be.Big)(e).abs().lt(s)?z(t).format(0):z(t).format(e))}function Ue(e){return new Be.Big(e).round(2)}function ze(e){return`${Ue(e).gt(0)?"+":""}${Oe(e)}`}function Le(e){const{profit:t,currency:s}=e;return(0,M.isNumber)(t)?(0,L.forceLTRStr)(ze(t)+De(s)):""}function Ve(e){const{profit:t,currency:s}=e;if(!(0,M.isNumber)(t))return n.createElement("span",null);const i=(0,L.forceLTRStr)(ze(t)),o=function(e){const t=Ue(e);return t.gt(0)?ye.green:t.lt(0)?ye.red:ye.grey}(t);return void 0===s?n.createElement("span",{className:o},i):n.createElement(Fe,{value:i,currency:s,className:o})}var We=s(989546);const He=new D.DateTimeFormatter,Ke=new class{constructor(){this._dateFormatter=new R.DateFormatter,this._timeFormatter=new I.TimeFormatter}format(e){const t=new Date(e.dateOrDateTime);let s=this._dateFormatter.format(t);return e.hasTime&&(s+=" "+this._timeFormatter.format(t)),s}formatLocal(e){const t=new Date(e.dateOrDateTime);let s=this._dateFormatter.formatLocal(t);return e.hasTime&&(s+=" "+this._timeFormatter.formatLocal(t)),s}},qe=i.t(null,void 0,s(351514)).toLowerCase(),je=i.t(null,void 0,s(381849)).toLowerCase();function $e({values:e}){return e.join("")}function Ge(e){const{values:[t,s],prevValues:[i]=[void 0],priceFormatter:n}=e;return(0,m.isDefined)(t)&&(0,M.isNumber)(t)?function(e){const{same:t,differs:s}=Ie(e),i=`${t}${s||""}`,n=De(e.currency);return(0,L.forceLTRStr)(i+n)}({price:t,prevPrice:i??void 0,priceFormatter:n,currency:s}):""}function Ze({values:[e]}){return{value:(0,m.isDefined)(e)&&!isNaN(e)?e:""}}const Ye=[{name:"symbol",formatElement:({values:[e,t,s,i]})=>n.createElement(Ce,{brokerSymbol:e,symbol:t,message:s,isDelayed:i}),formatText:({values:[e]})=>(0,m.getSymbolNameOverFullname)(e)},{name:"side",formatElement:({values:[e]})=>n.createElement(Se,{side:e}),formatText:({values:[e]})=>(0,W.sideToText)(e)},{name:"positionSide",formatElement:({values:[e]})=>n.createElement(Ee,{side:e}),formatText:({values:[e]})=>(0,W.positionSideToText)(e)},{name:"text",formatElement:e=>n.createElement(ke,{value:$e(e)}),formatText:$e},{name:"type",formatText:({values:[e,t,s]})=>(0,W.orderTypeToText)({orderType:e,parentId:t,stopType:s})},{name:"formatPrice",formatElement:({values:[e],priceFormatter:t,prevValues:[s]=[void 0]})=>(0,m.isDefined)(e)&&(0,m.isDefined)(t)?n.createElement(Re,{priceFormatter:t,price:e,prevPrice:s??void 0}):void 0,formatText:Ge,formatRaw:Ze,isPriceFormatterNeeded:!0},{name:"formatPriceForexSup",formatElement:({values:[e],priceFormatter:t,prevValues:[s]=[void 0]})=>(0,m.isDefined)(e)?n.createElement(Re,{priceFormatter:t,price:e,prevPrice:s??void 0,lastCharSup:t instanceof A.PriceFormatter&&t.hasForexAdditionalPrecision()}):void 0,formatText:Ge,formatRaw:Ze,isPriceFormatterNeeded:!0},{name:"formatPriceInCurrency",formatElement:({values:[e,t],priceFormatter:s,prevValues:[i]=[void 0]})=>(0,
m.isDefined)(e)?n.createElement(Re,{priceFormatter:s,price:e,prevPrice:i??void 0,currency:t}):void 0,formatText:Ge,formatRaw:({values:[e,t]})=>[{...Ze({values:[e]}),title:qe},{value:t||"",title:je}],isPriceFormatterNeeded:!0},{name:"status",formatElement:({values:[e]})=>(0,m.isDefined)(e)?n.createElement(Ae,{status:e}):void 0,formatText:({values:[e]})=>(0,m.isDefined)(e)?(0,V.capitalizeFirstLetter)((0,W.orderStatusToText)(e)):""},{name:"date",formatText:({values:[e]})=>(0,m.isDefined)(e)&&Je(e)?He.format(new Date(e)):""},{name:"localDate",formatText:({values:[e]})=>(0,m.isDefined)(e)&&Je(e)?He.formatLocal(new Date(e)):""},{name:"dateOrDateTime",formatText:({values:[e]})=>(0,m.isDefined)(e)&&Je(e.dateOrDateTime)?Ke.format(e):""},{name:"localDateOrDateTime",formatText:({values:[e]})=>(0,m.isDefined)(e)&&Je(e.dateOrDateTime)?Ke.formatLocal(e):""},{name:"fixed",formatText:({values:[e]})=>Oe(e),formatRaw:Ze},{name:"fixedInCurrency",formatElement:({values:[e,t]})=>(0,m.isDefined)(e)&&(0,m.isDefined)(t)?n.createElement(Fe,{value:Oe(e),currency:t}):Oe(e),formatText:({values:[e,t]})=>{const s=Oe(e),i=De(t);return s?(0,L.forceLTRStr)(s+i):s},requiredFieldsIndexes:[0]},{name:"variablePrecision",formatText:({values:[e]})=>!(0,m.isDefined)(e)||isNaN(e)?"":(0,L.forceLTRStr)(z().format((0,F.fixComputationError)(e))),formatRaw:Ze},{name:"pips",formatText:({values:[e]})=>Oe(e,1),formatRaw:Ze},{name:"integerSeparated",formatText:({values:[e]})=>(0,M.isNumber)(e)?(0,L.forceLTRStr)((0,We.quantityFormatter)({decimalPlaces:0}).format(e)):"",formatRaw:Ze},{name:"formatQuantity",formatText:({values:[e]})=>(0,M.isNumber)(e)?(0,L.forceLTRStr)(We.defaultQuantityFormatter.format(e)):"",formatRaw:Ze},{name:"profit",formatElement:({values:[e]})=>(0,m.isDefined)(e)?n.createElement(Ve,{profit:e}):void 0,formatText:({values:[e]})=>(0,m.isDefined)(e)?Le({profit:e}):"",formatRaw:Ze},{name:"profitInInstrumentCurrency",formatElement:({values:[e,t]})=>(0,m.isDefined)(e)?n.createElement(Ve,{profit:e,currency:t}):void 0,formatText:({values:[e,t]})=>(0,m.isDefined)(e)?Le({profit:e,currency:t}):"",formatRaw:({values:[e,t]})=>[{...Ze({values:[e]}),title:qe},{value:t||"",title:je}],requiredFieldsIndexes:[0]},{name:"percentage",formatText:({values:[e]})=>(0,M.isNumber)(e)?(0,L.forceLTRStr)((0,N.getPercentageFormatter)().format(e)):"",formatRaw:e=>({...Ze(e),title:"%"})},{name:"marginPercent",formatText:({values:[e]})=>(0,m.isDefined)(e)?isFinite(e)?e<.01?e+"%":(0,N.getPercentageFormatter)().format(e):"> 200%":"",formatRaw:({values:[e]})=>({value:isFinite(e)?Ze({values:[e]}).value:"",title:"%"})},{name:"empty",formatText:()=>""}],Xe={name:"default",formatText:$e};function Qe(e){return Ye.find((t=>t.name===e))??Xe}function Je(e){return"number"==typeof e?e>0:""!==e}var et=s(960658);function tt(e){const t=document.createElement("div");return t.style.position="relative",!1!==e?.stretch&&t.classList.add(et.stretch),t}var st=s(920057);function it(e){return void 0!==e.sortProp&&""!==e.sortProp?e.sortProp:e.dataFields.length>0?e.dataFields[0]:void 0}function nt(e,t){
return void 0===e&&void 0!==t?1:void 0!==e&&void 0===t?-1:void 0===e||void 0===t?0:e<t?1:e>t?-1:0}class ot{constructor(e){this.onRowsChanged=new k.Delegate,this.onRowChanged=new k.Delegate,this._rowsData=new Map,this._priceFormatters=new Map,this._rows=[],this._isActive=!1,this._sortingPostponed=!1,this._sortingMode=null;const{columns:t,options:s,priceFormatterGetter:i,reverse:n=!0}=e,{idProperty:o,defaultSortingParameters:r,group:a}=s;this._idProperty=o,this._reverse=n,this._defaultSortingInfo=void 0!==r?{sortingProperty:r.property,sortingMode:!1===r.asc?1:0}:void 0,this._group=a,this._priceFormatterGetter=i,this._sortAndGroupRowsThrottled=(0,st.default)((()=>{this._sortAndGroupRows(),this._update()}),1e3),this._columns=new Map(t.map((e=>[e.id,e])))}setActive(e){this._isActive=e,this._onTableStateChanged(e)}addRow(e){const t=e[this._idProperty];this._rowsData.has(t)?this._updateRow(t,e):(this._addRowData(e),this._sortAndGroupRowsThrottled.cancel(),this._sortAndGroupRows(),this._update())}addRows(e){for(const t of e){const e=t[this._idProperty];this._rowsData.has(e)?this._updateRowData(e,t):this._addRowData(t)}this._sortAndGroupRows(),this._update()}rows(){return this._rows}data(){return this._rowsData}deleteRow(e){const t=this._rowsData.get(e);void 0!==t&&(this._rowsData.delete(e),this._rows.splice(this._rows.indexOf(t),1),this._update())}deleteRows(){this._deleteRows(),this._update()}destroy(){this._sortAndGroupRowsThrottled.cancel(),this._deleteRows()}setSortingState(e){this._sortingColumn===e.column&&this._sortingMode===e.mode||(this._sortingColumn=e.column,this._sortingMode=e.mode,this._onSortingChange())}async resolvePriceFormatter(e){if(void 0!==this._priceFormatterGetter)try{const t=this._rowsData.get(e);if(void 0===t||void 0!==t.priceFormatter)return;t.priceFormatter=null;const s=this._priceFormatters.get(e);if(void 0!==s)return t.priceFormatter=s,void this._update();const i=await this._priceFormatterGetter(t);this._priceFormatters.set(e,i),t.priceFormatter=i,this._update()}catch{}}_deleteRows(){this._rowsData.clear(),this._rows=[]}_sortAndGroupRows(){this._isActive?this._rows.sort(((e,t)=>function(e){const{aRow:t,bRow:s,sortingMode:i,sortingProperty:n,groupDefiner:o}=e;let r=0;if(void 0!==o&&(r=nt(o(t),o(s))),0===r&&(r=t.isTotalRow?1:s.isTotalRow?-1:0),null===i||0!==r||void 0===n)return r;let a=t[n],l=s[n];return void 0!==a?.dateOrDateTime&&(a=a.dateOrDateTime,l=l?.dateOrDateTime??1/0),r=nt(a,l),0===i?-r:r}({aRow:e,bRow:t,groupDefiner:this._group,...this._getSortingInfo()}))):this._sortingPostponed=!0}_getSortingInfo(){const e=void 0!==this._sortingColumn?this._columns.get(this._sortingColumn):void 0,t=void 0!==e?it(e):void 0;return void 0!==t?{sortingProperty:t,sortingMode:this._sortingMode}:{sortingProperty:this._defaultSortingInfo?.sortingProperty,sortingMode:this._defaultSortingInfo?.sortingMode??null}}_onSortingChange(){this._sortAndGroupRowsThrottled.cancel(),null===this._sortingMode&&this._resetRowsOrder(),this._sortAndGroupRows(),this._update()}_resetRowsOrder(){
this._rows=[...this._rowsData.values()],this._reverse&&this._rows.reverse()}_onTableStateChanged(e){if(!e)return this._sortAndGroupRowsThrottled.cancel(),void(this._sortingPostponed=!0);this._update()}_update(){this._isActive&&(this._sortingPostponed&&(this._sortingPostponed=!1,this._sortAndGroupRows()),this.onRowsChanged.fire())}_updateRowData(e,t){const s=(0,l.ensureDefined)(this._rowsData.get(e)),{prevValue:i,priceFormatter:n,...o}=s;for(const e of Object.keys(s))delete s[e];Object.assign(s,t,{priceFormatter:n,prevValue:o}),this.onRowChanged.fire(e);const r=this._group?.(s)!==this._group?.(o),{sortingProperty:a}=this._getSortingInfo();(void 0!==a&&t[a]!==o[a]||r)&&this._sortAndGroupRowsThrottled()}_updateRow(e,t){this._updateRowData(e,t),this._update()}_addRowData({...e}){this._rowsData.set(e[this._idProperty],e),this._reverse?this._rows.unshift(e):this._rows.push(e)}}var rt,at,lt,ct=s(870122),ut=s(586240),dt=s(898237),ht=s(505357),mt=s(87523),pt=s(281670),gt=s(290556);function bt(e){switch(e){case"xsmall":return"xsmall";case"small":return"small";case"medium":return"medium";default:return}}!function(e){e.XSmall="xsmall",e.Small="small",e.Medium="medium"}(rt||(rt={})),function(e){e.Left="left",e.Center="center"}(at||(at={})),function(e){e.Prev="prev",e.Next="next"}(lt||(lt={}));var ft=s(878112),_t=s(527757);function vt(e){return n.createElement(dt.LightButton,{className:_t.arrow,variant:"secondary",color:"gray",onClick:e.onClick,startSlot:n.createElement(ft.Icon,{icon:(t=e.direction,s=e.size,"xsmall"===s?"prev"===t?gt:pt:"prev"===t?mt:ht)}),"aria-label":e.ariaLabel,disabled:e.disabled,reference:e.reference,tabIndex:e.tabIndex,size:e.size,iconOnly:!0});var t,s}var wt=s(303185);function Ct(e){const{pageNumber:t,currentPage:s,renderComponent:i,reference:o,getHref:r,getNumberAriaLabel:a,onClick:l,tabIndex:c,fallbackToDummyHref:u=!1,size:d}=e,{href:h,handleClick:m}=function(e){const{getHref:t,fallbackToDummyHref:s,pageNumber:i,onClick:o}=e,r=(0,n.useMemo)((()=>t?t(i):s?"#":void 0),[t,s,i]),a=(0,n.useCallback)((e=>{!s||r&&"#"!==r||e.preventDefault(),o&&o(e,i)}),[o,s,i,r]);return{href:r,handleClick:a}}({pageNumber:t,getHref:r,fallbackToDummyHref:u,onClick:l});return n.createElement(dt.LightAnchorButton,{className:wt.number,renderComponent:i,variant:t===s?"primary":"ghost",color:"gray",isSelected:t===s,"aria-current":t===s,reference:o,href:h,onClick:m,tabIndex:c,"aria-label":a?a(t):void 0,ellipsis:!1,size:bt(d)},t)}var yt=s(855393);var xt=s(708886),St=s(65160);function Et({lastPage:e,currentPage:t}){const s=(0,n.useMemo)((()=>function(e){const t=[];for(let s=1;s<=e;s++)t.push(s);return t}(e)),[e]),i=(0,n.useRef)(null),o=(0,n.useRef)(null),r=(0,n.useRef)(0),a=(0,n.useRef)(0),l=(0,n.useRef)(t),[c,u]=(0,n.useState)(!1),[d,h]=(0,n.useState)(0),[m,p]=(0,n.useState)(!1),[g,b]=(0,n.useState)(!1),f=(0,n.useCallback)((i=>[s[0],t,e].includes(i)),[s,t,e]);(0,yt.useIsomorphicLayoutEffect)((()=>{if(t===l.current)return;const i=l.current===s[0]&&t===e,n=l.current===e&&t===s[0];u(i||n),l.current=t}),[t,s,e]);const _=(0,
n.useCallback)((e=>{const i=e.widthsMap.get("number")??0,n=function(e){if(!e||!window)return-1;const t=window.getComputedStyle(e),s=t.getPropertyValue("--ui-lib-pagination-items-gap");if(""===s)return-1;return parseInt(s)}(o.current);let l=2*r.current+a.current;-1!==n&&(l-=n);const c=i+4,{dotsCount:u,...d}=function({currentPage:e,elements:t,containerWidth:s,elementWidth:i,dotsWidth:n,maxItemsCount:o}){if(t.length*i<=s&&t.length<=o)return{visible:[...t],hidden:[],dotsCount:0};const r=t.indexOf(e);let a=s-2*n-2*i,l=Math.min(Math.floor(a/i),o-4);const c=Math.floor((l-1)/2),u=l-c-1;return r-c-1<=0?(a=s-n-i,l=Math.min(Math.floor(a/i),o-2),{visible:[...t.slice(0,l),t[t.length-1]],hidden:t.slice(l,t.length-1),dotsCount:1}):r+u+1>=t.length-1?(a=s-n-i,l=Math.min(Math.floor(a/i),o-2),{visible:[t[0],...t.slice(t.length-l,t.length)],hidden:t.slice(1,t.length-l),dotsCount:1}):{visible:[t[0],...t.slice(r-c,r),e,...t.slice(r+1,r+u+1),t[t.length-1]],hidden:[...t.slice(1,r-c),...t.slice(r+u+1,t.length-1)],dotsCount:2}}({currentPage:t,elements:s,containerWidth:e.containerWidth-l,elementWidth:c,dotsWidth:e.moreButtonWidth,maxItemsCount:r.current>0?11:13}),g=e.moreButtonWidth*u,f=d.visible.length*c+l+(g+4);h(f),p(e.containerWidth-f<c);const _=d.visible.length*c+u*c-4,v=e.containerWidth-_;return b((!m||v>0&&v<c)&&0!==f),d}),[s,t]),v=(0,n.useCallback)((()=>{r.current=i.current?(0,St.outerWidth)(i.current,!0):0,a.current=o.current?(0,St.outerWidth)(o.current,!0):0}),[]),{containerRefCallback:w,moreButtonRef:C,innerContainerRefCallback:y,itemsRefs:x,setItemRef:S,hiddenItems:E,visibleItems:P}=(0,xt.useCollapsibleCommon)({itemsList:s,getItemId:Pt,calcVisibleAndHiddenItems:_,shouldKeepItemVisible:f,onMeasureCallback:v,forceUpdate:c});return{numbers:s,containerRefCallback:w,innerContainerRefCallback:y,itemsRefs:x,setItemRef:S,dotsRef:C,arrowButtonRef:i,endSlotRef:o,visible:P,hidden:E,contentWidth:d,shouldStretch:m,isReadyToShow:g}}function Pt(e){return"number"}var kt=s(612554);function Tt(e){const{className:t,lastPage:s,currentPage:i,withArrows:o,prevPageAriaLabel:r,nextPageAriaLabel:l,paginationAriaLabel:c,renderComponent:u,getHref:d,getNumberAriaLabel:h,onNumberClick:m,onPrevClick:p,onNextClick:g,endSlot:b,isCompact:f,bottomSlot:_,size:v,position:w}=e,{visible:C,numbers:y,containerRefCallback:x,innerContainerRefCallback:S,setItemRef:E,dotsRef:P,arrowButtonRef:k,endSlotRef:T,contentWidth:F,shouldStretch:D,isReadyToShow:I}=Et({lastPage:s,currentPage:i}),R=f&&D,M=bt(v),N=(0,kt.useFadeInContext)();return(0,n.useEffect)((()=>{I&&N()}),[I,N]),n.createElement("div",{className:a()(wt["numbers-wrapper"],t)},n.createElement("nav",{className:a()(wt.numbers,wt[`size-${v}`],f&&wt.numbersOnTop,R&&wt.compact,wt[`position-${w}`]),"aria-label":c},o&&n.createElement(vt,{onClick:p,ariaLabel:r,disabled:1===i,direction:"prev",size:M}),n.createElement("div",{className:a()(wt.numbersRow)},C.map(((e,t)=>n.createElement(n.Fragment,{key:e},1===t&&C[1]!==y[1]&&n.createElement(Ft,{size:v}),n.createElement(Ct,{pageNumber:e,renderComponent:u,currentPage:i,getHref:d,
onClick:m,getNumberAriaLabel:h,fallbackToDummyHref:!0,size:v}),t===C.length-2&&C[t]!==y[y.length-2]&&n.createElement(Ft,{size:v}))))),o&&n.createElement(vt,{onClick:g,ariaLabel:l,disabled:i===s,direction:"next",size:M}),n.createElement("div",{ref:T,className:wt["numbers-end-slot"]},b)),n.createElement("div",{"aria-hidden":!0,className:wt["fake-numbers"],ref:x},n.createElement("div",{className:wt["fake-numbers-inner"],ref:S},n.createElement(Ft,{reference:P,size:v}),n.createElement(Ct,{pageNumber:999,renderComponent:u,currentPage:i,reference:E("number"),tabIndex:-1,size:v}),o&&n.createElement(vt,{direction:"prev",reference:k,tabIndex:-1,size:M}))),n.createElement("div",{style:{width:`${F}px`},className:wt[`description-position-${w}`]},_))}function Ft(e){return n.createElement("span",{"aria-hidden":!0,className:a()(wt.dots,wt[`size-${e.size}`]),ref:e.reference},"")}var Dt=s(917049);function It(e){const{getDescriptionAriaLabel:t,getDescriptionChunks:s,itemsPerPage:i=0,totalAmountOfItems:o=0,currentPage:r,size:l,withSelect:c,isCompact:u}=e;if(!s)return null;const d=(r-1)*i+1;let h=d+i-1;h>o&&(h=o);const m=s(d,h,o),p=t?t(d,h,o):void 0;return n.createElement("div",{className:a()(Dt.description,Dt[`size-${l}`],(c||!u)&&Dt["with-select"]),"aria-label":p},m.map(((e,t)=>n.createElement(Rt,{...e,key:t}))))}function Rt(e){return e.isHighlighted?n.createElement("strong",{className:Dt["description-strong"]},e.text):n.createElement("span",null,e.text)}var Mt=s(727456);function Nt(e){const{select:t,getDescriptionAriaLabel:s,getDescriptionChunks:i,itemsPerPage:o,totalAmountOfItems:r,isCompact:l,className:c,size:u="medium",position:d="left",...h}=e,m={getDescriptionAriaLabel:s,getDescriptionChunks:i,itemsPerPage:o,totalAmountOfItems:r,currentPage:e.currentPage,size:u,withSelect:Boolean(t),isCompact:l},p=Boolean(i&&i(0,0,0).length),g=(0,H.useSafeMatchMedia)(ut["media-phone-vertical"]),b=(0,H.useSafeMatchMedia)(ut["media-extreme-thin"]),f=l??g,_=Boolean(f&&(t||p||b)),v=!f&&t,w=_&&t;return n.createElement("div",{className:a()(Mt.pagination,c)},n.createElement("div",{className:Mt["pagination-group"]},n.createElement(Tt,{...h,withArrows:!_,isCompact:_,endSlot:v?n.createElement("div",{className:Mt.select},t):void 0,bottomSlot:_?void 0:n.createElement(It,{...m}),size:u,position:d})),_&&n.createElement("div",{className:Mt["pagination-group"]},n.createElement(vt,{onClick:e.onPrevClick,ariaLabel:e.prevPageAriaLabel,disabled:1===e.currentPage,direction:"prev",size:bt(u)}),n.createElement("div",{className:Mt["compact-middle-slot"]},t||n.createElement(It,{...m})),n.createElement(vt,{onClick:e.onNextClick,ariaLabel:e.nextPageAriaLabel,disabled:e.currentPage===e.lastPage,direction:"next",size:bt(u)})),w&&n.createElement(It,{...m}))}var At,Bt,Ot,Ut,zt,Lt=s(930202),Vt=s(232295),Wt=s(515916),Ht=s(269103),Kt=s(628726),qt=(s(449194),s(924910)),jt=s(662941);!function(e){e[e.Mobile=0]="Mobile",e[e.Desktop=1]="Desktop"}(At||(At={})),function(e){e[e.Asc=0]="Asc",e[e.Desc=1]="Desc"}(Bt||(Bt={})),function(e){e.Settings="settings"}(Ot||(Ot={})),function(e){
e.Head="head"}(Ut||(Ut={})),function(e){e.Right="right",e.Left="left",e.Up="up",e.Down="down"}(zt||(zt={}));const $t="data-is-setting-button-focused",Gt="data-head-informer";var Zt=s(273388),Yt=s(224567),Xt=s(679864),Qt=s(685075),Jt=s(89489),es=s(240534),ts=s(297265),ss=s(753327),is=s(810973),ns=s(935495);const os=new es.WatchedValue(null).readonly(),rs=i.t(null,void 0,s(156194));function as(e){const{items:t,tabIndex:s,onCheck:i,overlapManagerWV:o,reference:r}=e,a=(0,n.useRef)(null),l=(0,ts.useWatchedValueReadonly)({watchedValue:o??os}),{anchorProps:c,popoverProps:u}=(0,Jt.useMenuAnchorProps)(),d=(0,n.useMemo)((()=>t.filter((e=>e.visible))),[t]);return(0,n.useImperativeHandle)(r,(()=>({focus:()=>{u.isOpen||a.current?.focus()}}))),n.createElement(ss.SlotContext.Provider,{value:l},n.createElement(Yt.Tooltip,{content:rs,isRtl:(0,L.isRtl)(),trigger:[Yt.Trigger.Hover,Yt.Trigger.Focus]},n.createElement(dt.LightButton,{...c,role:"button",reference:(0,Zt.mergeRefs)([c.reference,a]),className:is.button,startSlot:n.createElement(ft.Icon,{icon:ns}),"aria-label":rs,title:rs,onClick:function(e){e.stopPropagation(),c.onClick(e)},"data-name":"columns-filter-button",tabIndex:s,size:"xsmall",variant:"ghost",color:"gray",iconOnly:!0})),n.createElement(Xt.PopoverKeyboardNavigator,{role:"menu",anchored:{type:"element",at:u.anchorButtonRef},isOpen:u.isOpen,onClose:u.onClose,ariaLabelledby:u.anchorId,idOfContentWrapperElement:u.contentId,closeOnScrollOutside:!1,"data-name":"popup-menu-container"},t.map(((e,t)=>n.createElement(Qt.CheckboxPopoverItem,{key:`checkbox-${t}:${e.id}`,title:e.title,onClick:()=>i(e.id),checked:e.visible,ariaChecked:e.visible,disabled:1===d.length&&d[0].id===e.id,"data-name":`${e.id}-menu-item`,role:"menuitemcheckbox"})))))}var ls=s(237589);function cs(e){const{isSticky:t,...s}=e;return n.createElement("div",{className:a()(ls.container,t&&ls.sticky)},n.createElement(as,{...s}))}var us=s(298314),ds=s(116812),hs=s(469690),ms=s(128231),ps=s.n(ms),gs=s(697978),bs=s(730402);const fs="HeadCell",_s=.4,vs={"--head-cell-wrapper-tooltip-size":`${16}px`,"--head-cell-wrapper-tooltip-gap":`${5}px`};function ws(e){const{column:t,alignment:s,dispatch:i,onColumnsReordered:o,canBeReordered:r,informerText:l,focusedCell:c}=e,u=(0,n.useRef)(null),[{isDragging:d},h,m]=(0,ds.useDrag)((()=>({type:fs,item:{id:t.key},canDrag:()=>r,collect:e=>({isDragging:e.isDragging()})}))),[,p]=(0,hs.useDrop)((()=>({accept:fs,hover:(e,s)=>{if(e.id===t.key)return;const n=u.current?.getBoundingClientRect(),o=s.getClientOffset(),r=s.getDifferenceFromInitialOffset();void 0!==n&&null!==o&&null!==r&&function(e,t,s,i){const n=t-s,o=.4*(i-s);return e>0?n>o:n<o}(r.x,o.x,n.left,n.right)&&i({type:Kt.ActionType.ReorderColumns,columnKey:e.id,targetColumnKey:t.key})},drop:()=>{o()},canDrop:()=>r})));(0,n.useEffect)((()=>{r&&h(p(u)),m((0,us.getEmptyImage)(),{captureDraggingState:!0})}),[t]);const g=c?.columnKey===t.key&&"head"===c?.rowKeyValue;return n.createElement("div",{ref:u,className:a()(bs.wrapper,gs.wrapper,"right"===s&&gs.rightAligned),style:{...vs,
opacity:d?_s:1},onClick:function(){i({type:Kt.ActionType.UpdateSortDirection,columnKey:t.key},!0)}},n.createElement(ps(),{...e}),l&&n.createElement(q.IconQuestionInformation,{...ee(l),icon:"info",className:gs.tooltipIcon,tabIndex:g?0:-1,[Gt]:"true"}))}var Cs=s(327066),ys=s.n(Cs);function xs(e){const{visibilityHandler:t,...s}=e;return(0,n.useLayoutEffect)((()=>(t(s.rowKeyValue,!0),()=>t(s.rowKeyValue,!1))),[]),n.createElement(ys(),{...s})}function Ss(e,t){if(0===e.length)return[[t],[t.prevValue]];const[s,i]=e.reduce(((e,s)=>(e[0].push(t[s]),e[1].push(t.prevValue?.[s]),e)),[[],[]]);return[s,i]}const Es=(0,s(664682).memoize)(Qe);var Ps=s(365335);function ks(e){const{label:t,children:s,informerText:i}=e,o=void 0!==t;return n.createElement("div",{className:a()(Ps.wrapper,!o&&Ps.hiddenLabel)},o&&n.createElement("span",{className:Ps.labelWrapper},n.createElement("span",{className:Ps.label},t),i&&n.createElement(q.IconQuestionInformation,{...ee(i),icon:"info",className:Ps.tooltipIcon})),s&&n.createElement("span",{className:Ps.contentWrapper},n.createElement("span",{className:a()(Ps.content,o&&Ps.withPadding)},s)))}var Ts,Fs=s(394212),Ds=s(10170),Is=s(73288),Rs=s(139043);!function(e){e.Edit="edit",e.Close="close"}(Ts||(Ts={}));const Ms=(0,n.createContext)({lastActiveButtonIndex:null,setLastActiveButtonIndex:()=>{},moveCellFocus:()=>{}});function Ns(e){const{moveCellFocus:t,focusedCell:s,children:i}=e,[o,r]=(0,n.useState)(null);return n.createElement(Ms.Provider,{value:{lastActiveButtonIndex:o,setLastActiveButtonIndex:r,moveCellFocus:t,focusedCell:s}},i)}var As=s(927102);function Bs(e){const{columnsFilterItems:t,columnsFilterProps:s,tableProps:i,updateTableProps:o,tableWrapperAttributes:r,isMobile:a,moveCellFocus:l}=e,[c,u,d,h]=(0,Rs.useOverlayScroll)(),[m,p]=(0,n.useState)(0),g=(0,n.useRef)(null),b=(0,n.useCallback)((()=>({...r,...u,ref:d})),[r,d]);(0,n.useEffect)((()=>{const e=d.current;if(null!==e)return e.addEventListener("scroll",h),()=>e.removeEventListener("scroll",h)}),[r,h]);const f=(0,n.useMemo)((()=>n.createElement(Wt.Table,{...i,childComponents:{...i.childComponents,tableWrapper:{elementAttributes:b}},dispatch:o})),[b,o,i,a]);(0,n.useEffect)((()=>{if(null===g.current||null===d.current)return;const e=g.current.getBoundingClientRect().bottom-d.current.getBoundingClientRect().bottom|0;p(e)}),[i.paging]);const _={"--table-wrapper-scroll-bottom-offset":`${m}px`},v="settings"===i.focused?.cell?.columnKey&&"head"===i.focused?.cell?.rowKeyValue?0:-1;return n.createElement(n.Fragment,null,0!==t.length&&n.createElement(cs,{...s,tabIndex:v,items:t}),n.createElement("div",{className:As.scrollWrapper,ref:g,style:_},n.createElement(Fs.DndProvider,{backend:Ds.HTML5Backend},n.createElement(Ns,{moveCellFocus:l,focusedCell:i.focused?.cell},n.createElement(Is.OverlayScrollContainer,{...c,className:As.scrollContainer}),f))))}const Os={0:Kt.SortDirection.Ascend,1:Kt.SortDirection.Descend},Us=i.t(null,void 0,s(146018)),zs=h.enabled("show_symbol_logos")&&h.enabled("show_symbol_logo_in_account_manager");class Ls{constructor(e=0){
this._mode=e}value(){return this._mode}next(){switch(this._mode){case 0:this._mode=1;break;case 1:this._mode=null;break;case null:this._mode=0}return this._mode}reset(){this._mode=0}}function Vs({values:e}){return e.map((e=>null!=e?String(e):"")).join("").replace(/&nbsp;/g,"")}const Ws=new A.PriceFormatter;function Hs(e){return`Column ${e} metainfo`}function Ks(e,t){return!1===e.showZeroValues&&t.every((e=>0===e))}function qs(e){return i.t(null,{replace:{pageNumber:String(e)}},s(678158))}Vt.default.fieldDelimiter="";class js{constructor(e){this.onTableVisibilityChange=new k.Delegate,this.onBottomVisibilityChange=new k.Delegate,this.onSizeChange=new k.Delegate,this.onSortingChange=new k.Delegate,this._animationFrameId=0,this._isVisible=!1,this._rowsElements=new Map,this._rowsDisplayOptions=new Map,this._highlightTimeoutIds=new Map,this._formatters=new Map,this._visibleColumns=new Set,this._cellContentCaches=new WeakMap,this._hiddenFilterColumns=new Set,this._visibleRows=new Set,this._isScrolled=!1,this._isPaginationShown=!1,this._columnsFilterReference=null,this._goToNextPage=()=>{void 0!==this._tableProps.paging?.pageIndex&&this._updateTableProps((0,Ht.updatePageIndex)(this._tableProps.paging.pageIndex+1),!0)},this._goToPrevPage=()=>{void 0!==this._tableProps.paging?.pageIndex&&this._updateTableProps((0,Ht.updatePageIndex)(this._tableProps.paging.pageIndex-1),!0)},this._handlePageNumberClick=(e,t)=>{this._updateTableProps((0,Ht.updatePageIndex)(t-1),!0)},this._makeHeadCellAttributes=({column:{key:e}})=>{const t={columnKey:e,rowKeyValue:"head"},s="settings"===e,i=e===this._fixedTitleColumnId,n=!this._columnsMetainfo.get(e)?.notSortable,o=null!==document.activeElement?.closest(`.${bs.root}`)&&this._isCellFocused(t),r=this._makeTabIndex(t),l={className:a()(bs.headCell,n&&bs.sortable,s&&!this._isMobile&&bs.rightFixedColumn,i&&!this._isMobile&&bs.leftFixedColumn),tabIndex:r,"data-name":`${e}-column`,ref:e=>{if(!(o&&e&&e instanceof HTMLElement))return;if(s)return void this._columnsFilterReference?.focus();const t=e.querySelector(`[${Gt}]`);document.activeElement!==t&&(t instanceof HTMLElement?t.focus():e.focus())},onFocus:()=>{o||this._setCellFocus(t)},onKeyDown:n=>{switch((0,Lt.hashFromEvent)(n)){case 39:i&&n.preventDefault(),this._moveCellFocus(t,"right");break;case 37:s&&n.preventDefault(),this._moveCellFocus(t,"left");break;case 38:n.preventDefault();break;case 40:{n.preventDefault();const{data:t}=this._tableProps;if(void 0===t||0===t.length)break;const s=t[0].id;this._setCellFocus({columnKey:e,rowKeyValue:s});break}case 13:case 32:n.preventDefault(),this._delayedUpdateTableProps({type:Kt.ActionType.UpdateSortDirection,columnKey:e},!0)}}};return this._isMobile||(!s&&this._fixedColumns&&(l.width="50%"),s&&this._noSettingsColumn&&0===this._getAvailableColumnsFilterItems().length&&(l.style={display:"none"})),l},this._updateTableProps=(e,t)=>{switch(e.type){case Kt.ActionType.UpdateSortDirection:const t=this._columnsMetainfo.get(e.columnKey);if(void 0===t||t.notSortable||void 0===it(t))return
;this._handleSortingUpdate(e.columnKey);break;case Kt.ActionType.UpdatePageIndex:this._resetTableScrollState()}this._tableProps=(0,Wt.kaReducer)(this._tableProps,e),t?this._render(!0):this._update()},this._makeHeadCellContent=e=>{const{column:t}=e;if("settings"===t.key){const e=this._getAvailableColumnsFilterItems();if(0!==e.length){const t=this._isCellFocused({columnKey:"settings",rowKeyValue:"head"})?0:-1;return n.createElement(cs,{...this._columnsFilterProps,items:e,tabIndex:t})}}const s=this._columnsMetainfo.get(t.key);return void 0!==s?.help?n.createElement("span",{className:"apply-common-tooltip",title:s.help},t.title):t.title},this._makeTextContent=async e=>{const{row:t,columnId:s}=e,i=this._columnsMetainfo.get(s);if(void 0===i)return"";const[n,o]=Ss(i.dataFields,t);if(Ks(i,n))return"";const r=void 0!==i.formatter?this._formatters.get(i.formatter)?.formatRaw??this._formatters.get(i.formatter)?.formatText??Vs:Vs;return await this._model.resolvePriceFormatter(t[this._idProperty]),r({values:n,prevValues:i.highlightDiff?o:void 0,priceFormatter:t.priceFormatter??Ws})},this._makeCellContent=e=>{const{row:t,rowKeyValue:s,columnId:i}=e,o=this._columnsMetainfo.get(i);if(void 0===o)return;const[r,a]=Ss(o.dataFields,t);if(Ks(o,r))return n.createElement(n.Fragment,null);let l=Vs,c=!1;if(void 0!==o.formatter){const e=this._formatters.get(o.formatter);l=e?.formatElement??e?.formatText??l,c=Boolean(e?.isPriceFormatterNeeded)}const u=this._getCellContentCaches(t),d=u.get(o.id),h=t.priceFormatter??Ws;if(0!==o.dataFields.length&&void 0!==d&&d.priceFormatter===h&&this._isMobile===d.isMobile&&(0,M.deepEquals)(r,d.values)[0])return d.content;c&&this._model.resolvePriceFormatter(t[this._idProperty]);const m=l({values:r,prevValues:o.highlightDiff?a:void 0,priceFormatter:h}),p={columnKey:i,rowKeyValue:s},g="settings"===i&&void 0!==m&&"string"!=typeof m?n.cloneElement(m,{cell:p}):m;let b;if(this._isMobile){const e=zs&&"symbol"===o.formatter;b=n.createElement(ks,{label:!1===o.showLabelOnMobile||e?void 0:o.label,informerText:o.info},g)}else b=n.createElement(n.Fragment,null,g);return u.set(o.id,{values:r,content:b,priceFormatter:h,isMobile:this._isMobile}),b},this._makeRowContent=e=>n.createElement(xs,{...e,visibilityHandler:this._handleRowVisibilityChange}),this._handleRowVisibilityChange=(e,t)=>{t?this._visibleRows.add(e):this._visibleRows.delete(e)},this._makeRowAttributes=({rowKeyValue:e,rowData:t})=>{const s=this._rowsDisplayOptions.get(e);return{className:a()(bs.row,s?.isInactive&&bs.inactiveRow,this._isFirstRow(e)&&bs.withMargin),"data-row-id":e,"data-row-linked":s?.isLinked,ref:t=>this._setRowElement(e,t),onClick:(e,t)=>{this._rowEventsHandlers?.onClick?.(t.childProps.rowData)},onMouseEnter:(e,t)=>{this._rowEventsHandlers?.onMouseEnter?.(t.childProps.rowData)},onMouseLeave:(e,t)=>{this._rowEventsHandlers?.onMouseLeave?.(t.childProps.rowData)}}},this._setRowElement=(e,t)=>{this._rowsElements.set(e,t)},this._makeCellAttributes=({column:e,rowKeyValue:t,rowData:s})=>{const{title:i,key:n}=e,o={columnKey:n,rowKeyValue:t},r=(0,
l.ensureDefined)(this._columnsMetainfo.get(n),Hs(n)),c="settings"===n,u=n===this._fixedTitleColumnId,d=function(e,t){if(!1===e.showOnMobile)return!0;const[s]=Ss(e.dataFields,t),i=Es(e.formatter),n=t=>!1===e.showZeroValues&&0===t||""===t||null==t;return void 0!==i.requiredFieldsIndexes&&0!==i.requiredFieldsIndexes.length?i.requiredFieldsIndexes.some((s=>void 0===e.dataFields[s]||n(t[e.dataFields[s]]))):s.every(n)}(r,s),h=this._makeTabIndex(o),m=null!==document.activeElement?.closest(`.${bs.root}`)&&this._isCellFocused(o);return{className:a()(bs.cell,!1===r?.showLabelOnMobile&&!1,d&&bs.hideCellOnMobile,c&&!this._isMobile&&bs.rightFixedColumn,u&&!this._isMobile&&bs.leftFixedColumn),"data-label":i,tabIndex:h,ref:e=>{if(m&&e&&e instanceof HTMLElement){if(c){const t=e.querySelector(`[${$t}=true]`);if(document.activeElement===t)return;if(t instanceof HTMLElement)return void t.focus()}e.focus()}},onFocus:()=>{m||this._setCellFocus(o)},onKeyDown:e=>{switch((0,Lt.hashFromEvent)(e)){case 39:if(c){e.preventDefault();break}u&&e.preventDefault(),this._moveCellFocus(o,"right");break;case 37:if(c){e.preventDefault();if(e.currentTarget.querySelector(`[${$t}=true]`))break}this._moveCellFocus(o,"left");break;case 38:const i=this._tableProps.data?.findIndex((e=>e.id===t));if(0===i){this._setCellFocus({columnKey:n,rowKeyValue:"head"});break}this._moveCellFocusUp();break;case 40:this._moveCellFocusDown();break;case 13:case 32:if(c)break;e.preventDefault(),this._rowEventsHandlers?.onClick?.(s)}}}},this._makeCellContentAttributes=({column:e,rowData:t})=>{const{key:s}=e,i=(0,l.ensureDefined)(this._columnsMetainfo.get(s),Hs(s)),n=void 0!==i?.tooltipProperty?t[i.tooltipProperty]?.[i.id]:void 0;return{className:a()(bs.cellContent,"right"===i?.alignment&&!this._isMobile&&bs.rightAlignedCellContent,void 0!==n&&"apply-common-tooltip common-tooltip-html",!1!==i?.isCapitalize&&bs.capitalize),title:n}},this._makeTableWrapperAttributes=()=>({className:this._makeTableWrapperClassNames(),onScroll:this._onTableScroll,key:(0,qt.randomHashN)(5)}),this._onTableScroll=e=>{const t=Math.abs(e.currentTarget.scrollLeft)>0;t!==this._isScrolled&&(this._isScrolled=t,this._tableWrapperAttributes={...this._tableWrapperAttributes,className:this._makeTableWrapperClassNames()},this._render()),this._isSupportPagination&&this._checkBottomIsVisible(e.currentTarget)},this._resizeHandler=()=>{cancelAnimationFrame(this._animationFrameId),this._animationFrameId=requestAnimationFrame((()=>{const e=this._checkIsMobile();e!==this._isMobile&&(this._isMobile=e,this._visibleColumns.clear(),this._columnsVisibilityInfo=this._makeColumnsVisibilityInfo(),this._columnsFilterProps=this._makeColumnsFilterProps(),this._tableProps.columns=this._makeColumns(),this.onSizeChange.fire(),this._update.cancel(),this._render(!0))}))},this._updatePaginationShowingState=()=>{const e=this._checkIsPaginationShown();e!==this._isPaginationShown&&(this._isPaginationShown=e,e?this._tableProps.paging={enabled:!0,pageSize:this._pageSize,pageIndex:0}:delete this._tableProps.paging)},
this._saveColumnsOrder=()=>{this._trackEvent(this._id,"Reorder columns");const e=this._tableProps.columns.map((e=>e.key));this._getSettingsStorage()?.setTableColumnsOrder(this._id,e)},this._onRowsChanged=()=>{this._updatePaginationShowingState();const e=this._model.rows(),t=0===e.length;t&&this._resetTableScrollState();const s=this._tableProps?.focused?.cell;if(s&&"head"!==s.rowKeyValue){e.some((e=>e[this._idProperty]===s.rowKeyValue))||(void 0!==this._fixedTitleColumnId?this._setCellFocus({columnKey:this._fixedTitleColumnId,rowKeyValue:"head"}):this._clearFocused())}this._updateTableProps((0,Ht.updateData)(e),t)},this._moveCellFocus=(e,t)=>{const{columnKey:s,rowKeyValue:i}=e,{columns:n}=this._tableProps,o=n.findIndex((e=>e.key===s));let r;switch(t){case"right":for(let e=o+1;e<n.length;e++)if(n[e].visible){r=n[e];break}break;case"left":for(let e=o-1;e>=0;e--)if(n[e].visible){r=n[e];break}}void 0!==r&&this._setCellFocus({columnKey:r.key,rowKeyValue:i})},this._moveCellFocusUp=()=>{this._updateTableProps((0,Ht.moveFocusedUp)({}),!0)},this._moveCellFocusDown=()=>{this._updateTableProps((0,Ht.moveFocusedDown)({}),!0)},this._clearFocused=()=>{this._updateTableProps((0,Ht.clearFocused)(),!0)},this._setCellFocus=e=>{this._updateTableProps((0,Ht.setFocused)({cell:e}),!0)},this._makeTabIndex=e=>{const{columnKey:t,rowKeyValue:s}=e;if(void 0===this._tableProps.focused)return this._tableProps.columns[0].key===t?0:-1;const i=this._isCellFocused(e)?0:-1;if("settings"===t){const e=this._rowElementById(s),t=e?.querySelector(`[${$t}=true]`);return t||"head"===s?-1:i}if("head"===s){const e=this._columnsMetainfo.get(t)?.info;return e?-1:i}return i};const{id:t,model:o,title:r,className:c,container:u,columns:d,stickyMobileColumnsFilter:h,idProperty:m,overlapManager:p,fixedColumns:g,getSettingsStorage:b,rowEventsHandlers:f,trackEvent:_,fixedTitleColumnId:v,emptyStateMessage:w,supportPagination:C,pageSize:y,isScrollBouncingEnabled:x=!1}=e;this._id=t,this._title=r,this._model=o,this._fixedTitleColumnId=v,this._fixedColumns=g,this._pageSize=y,this._isScrollBouncingEnabled=x,this._sortingColumnKey=`${this._id}.sort.column`,this._sortingModeKey=`${this._id}.sort.mode`,this._container=u,this._idProperty=m,this._overlapManager=p,this._isStickyMobileColumnsFilter=h,this._isSupportPagination=C,this._columnsMetainfo=new Map(d.map((e=>[e.id,e]))),this._getSettingsStorage=b,this._trackEvent=_,this._rowEventsHandlers=f,this._emptyStateMessage=w??Us,C&&(this._checkBottomIsVisible=(0,E.default)(this._checkBottomIsVisible,100)),this._update=(0,st.default)(this._render,1e3),this._delayedUpdateTableProps=(0,E.default)(this._updateTableProps,100);const S=this._getSavedSortingParameters();this._sortingColumn=S?.columnId,this._sortingModeSwitcher=new Ls(void 0===S?null:S.mode),this._isMobile=this._checkIsMobile(),window.addEventListener("resize",this._resizeHandler);const P="IntersectionObserver"in window;P||(this._isVisible=!0),this._containerVisibilityObserver=P?new IntersectionObserver((e=>{e.forEach((({intersectionRatio:e})=>{this._isVisible=0!==e,
this._isVisible||this._resetTableScrollState(),this._render(!this._isVisible),this.onTableVisibilityChange.fire(this._isVisible)}))})):null,this._containerVisibilityObserver?.observe(this._container),this._columnsVisibilityInfo=this._makeColumnsVisibilityInfo(),this._columnsFilterProps=this._makeColumnsFilterProps(),this._tableWrapperAttributes=this._makeTableWrapperAttributes(),this._tableProps={data:this._model.rows(),columns:this._makeColumns(),dispatch:this._updateTableProps,rowKeyField:this._idProperty,sortingMode:Kt.SortingMode.SingleTripleStateRemote,childComponents:{rootDiv:{elementAttributes:()=>({className:bs.root})},pagingPages:{content:e=>{const{pageIndex:t,pagesCount:o}=e;var r;if(this._isPaginationShown&&void 0!==t&&void 0!==o)return n.createElement(Nt,{size:"xsmall",currentPage:t+1,onPrevClick:this._goToPrevPage,onNextClick:this._goToNextPage,onNumberClick:this._handlePageNumberClick,lastPage:o,paginationAriaLabel:(r=this._title,r?i.t(null,{replace:{tableName:r}},s(978152)):i.t(null,void 0,s(347498))),nextPageAriaLabel:i.t(null,void 0,s(941916)),prevPageAriaLabel:i.t(null,void 0,s(115557)),getNumberAriaLabel:qs})},elementAttributes:()=>({className:bs.paginationWrapper})},table:{elementAttributes:e=>({className:a()(bs.table,c),"data-selector":"table","data-name":`${t}-table`,role:"grid",tabIndex:-1,style:{borderCollapse:"separate",height:0===e.data?.length?"100%":void 0}})},tableBody:{elementAttributes:()=>({className:bs.tableBody}),content:e=>0===e.data.length?n.createElement("tr",{className:bs.emptyStateRow},n.createElement("td",{colSpan:this._getEmptyStateColspan(),className:bs.emptyStateCell},n.createElement(jt.EmptyStateBlock,{className:bs.emptyStateBlock,iconClass:"",text:this._emptyStateMessage}))):void 0},tableHead:{elementAttributes:()=>({className:bs.tableHead})},headRow:{elementAttributes:()=>({className:bs.headRow})},headCell:{elementAttributes:this._makeHeadCellAttributes,content:e=>{const t=this._columnsMetainfo.get(e.column.key);return n.createElement(ws,{...e,alignment:t?.alignment??"left",dispatch:this._delayedUpdateTableProps,onColumnsReordered:this._saveColumnsOrder,canBeReordered:!this._isMobile&&"settings"!==e.column.key&&e.column.key!==this._fixedTitleColumnId,informerText:t?.info,focusedCell:this._tableProps.focused?.cell})}},cell:{elementAttributes:this._makeCellAttributes},dataRow:{content:this._makeRowContent,elementAttributes:this._makeRowAttributes},cellText:{content:({column:e,rowKeyValue:t,rowData:s})=>this._makeCellContent({columnId:e.key,row:s,rowKeyValue:t}),elementAttributes:this._makeCellContentAttributes},headCellContent:{elementAttributes:()=>({className:bs.headCellContent}),content:this._makeHeadCellContent}}},this._render(),this._subscribeModel()}rowIdAtEvent(e){return function(e){if(void 0!==e.dataset.rowId)return e.dataset.rowId;let t=e.parentElement;for(;null!==t;){if(void 0!==t.dataset.rowId)return t.dataset.rowId;t=t.parentElement}}(e.target)}isRowInViewport(e){return this._visibleRows.has(e)}sortingColumn(){return this._sortingColumn}sortingMode(){
return this._sortingModeSwitcher.value()}size(){return this._isMobile?0:1}highlightRowById(e){const t=this._rowElementById(e);void 0!==t&&(clearTimeout(this._highlightTimeoutIds.get(e)),t.classList.remove(bs.highlightedRow),t.classList.add(bs.highlightedRow),this._highlightTimeoutIds.set(e,setTimeout((()=>{t.classList.remove(bs.highlightedRow)}),700)))}addFormatter(e){this._formatters.set(e.name,e)}setColumnAvailable(e,t){if(this._setColumnAvailableInFilter(e,t),t){const t=this._isMobile?".invisibleMobileColumns":".invisibleColumns";if(ct.getJSON(`${this._id}${t}`,[]).includes(e))return}this._setColumnVisibility(e,t)}setRowInactiveById(e,t){this._rowsDisplayOptions.get(e)?.isInactive!==t&&(this._setRowInactiveById(e,t),this._updateTableProps((0,Ht.updateRow)(this._model.data().get(e))))}setRowInactiveByFilter(e){this._model.data().forEach(((t,s)=>this._setRowInactiveById(s,e(t)))),this._updateTableProps((0,Ht.updateData)(this._model.rows()),!0)}setRowLinkedById(e,t){this._rowsDisplayOptions.get(e)?.isLinked!==t&&(this._setRowLinkedById(e,t),this._updateTableProps((0,Ht.updateRow)(this._model.data().get(e))))}setRowLinkedByFilter(e){this._model.data().forEach(((t,s)=>this._setRowLinkedById(s,e(t)))),this._updateTableProps((0,Ht.updateData)(this._model.rows()),!0)}destroy(){window.removeEventListener("resize",this._resizeHandler),cancelAnimationFrame(this._animationFrameId),this._unsubscribeModel(),this._containerVisibilityObserver?.disconnect(),o.unmountComponentAtNode(this._container)}async exportData(){const e=[...this._columnsVisibilityInfo.values()];return Promise.all(this._model.rows().map((async t=>{const s={};for(const{isVisible:i,label:n,id:o}of e){if(!i||"settings"===o)continue;const e=await this._makeTextContent({columnId:o,row:t}),r=e=>{s[n+(e.title?` (${e.title})`:"")]=e.value};Array.isArray(e)?e.forEach(r):e instanceof Object?r(e):s[n]=e||""}return s})))}_checkIsPaginationShown(){return void 0!==this._pageSize&&this._model.rows().length>this._pageSize}_setRowInactiveById(e,t){this._updateRowDisplayOptions(e,{isInactive:t})}_setRowLinkedById(e,t){this._updateRowDisplayOptions(e,{isLinked:t})}_rowElementById(e){return this._rowsElements.get(e)??void 0}_getEmptyStateColspan(){return this._noSettingsColumn&&0!==this._getAvailableColumnsFilterItems().length?this._visibleColumns.has("settings")?this._visibleColumns.size:this._visibleColumns.size+1:this._visibleColumns.size}_makeColumns(){const e=new Map;for(const[t,s]of this._columnsMetainfo){const{isVisible:i,isVisibleOnMobile:n,forceInvisible:o}=(0,l.ensureDefined)(this._columnsVisibilityInfo.get(t),Hs(t)),r={key:t,title:s.label,visible:(this._isMobile?n:i)&&!o,style:{minWidth:this._isMobile?void 0:80,maxWidth:this._isMobile?void 0:300}},a=this._sortingModeSwitcher.value();t===this._sortingColumn&&null!==a&&(r.sortDirection=Os[a]),e.set(r.key,r)}const t=this._getSavedColumnsOrder();return this._columnsMetainfo.has("settings")||(this._noSettingsColumn=!0,e.set("settings",{key:"settings",title:"",visible:!0}),this._columnsMetainfo.set("settings",{label:"",
id:"settings",alignment:"right",dataFields:[],formatter:"empty",notSortable:!0,showOnMobile:!1})),this._isMobile||void 0===t?[...e.values()]:this._reorderColumns(t,e)}_resetTableScrollState(){this._isScrolled=!1,this._tableWrapperAttributes=this._makeTableWrapperAttributes()}_render(e=!1){if(!e&&!this._isVisible)return;let t=[];this._isMobile&&0!==this._tableProps.data?.length&&(t=this._getAvailableColumnsFilterItems()),o.render(n.createElement(Bs,{tableProps:this._tableProps,updateTableProps:this._updateTableProps,columnsFilterItems:t,columnsFilterProps:this._columnsFilterProps,tableWrapperAttributes:this._tableWrapperAttributes,isMobile:this._isMobile,moveCellFocus:this._moveCellFocus}),this._container)}_updateRowDisplayOptions(e,t){const s=this._rowsDisplayOptions.get(e);this._rowsDisplayOptions.set(e,{...s,...t})}_handleSortingUpdate(e){e===this._sortingColumn?this._sortingModeSwitcher.next():(this._sortingColumn=e,this._sortingModeSwitcher.reset()),this._updateSortingColumnSettings(),this.onSortingChange.fire({column:e,mode:this._sortingModeSwitcher.value()})}_updateSortingColumnSettings(){const e=this._sortingModeSwitcher.value();if(null===e)return ct.remove(this._sortingColumnKey),void ct.remove(this._sortingModeKey);ct.setValue(this._sortingColumnKey,this._sortingColumn),ct.setValue(this._sortingModeKey,e)}_getSavedSortingParameters(){const e=ct.getValue(this._sortingColumnKey);if(void 0===e)return;return{columnId:e,mode:ct.getInt(this._sortingModeKey)??1}}_setColumnAvailableInFilter(e,t){t?this._hiddenFilterColumns.delete(e):this._hiddenFilterColumns.add(e)}_getCellContentCaches(e){let t=this._cellContentCaches.get(e);return void 0===t&&(t=new Map,this._cellContentCaches.set(e,t)),t}_makeColumnsVisibilityInfo(){const e=new Map,t=[...this._columnsMetainfo.values()].filter((e=>e.hideByDefault)).map((e=>e.id)),s=ct.getJSON(`${this._id}.invisibleColumns`,t),i=ct.getJSON(`${this._id}.invisibleMobileColumns`,t);return this._columnsMetainfo.forEach((t=>{const n=t.id===this._fixedTitleColumnId,o=s.includes(t.id)&&!n,r=i.includes(t.id)&&!n;(this._isMobile?r:o)?this._visibleColumns.delete(t.id):this._visibleColumns.add(t.id),e.set(t.id,{isVisible:!o,isVisibleOnMobile:!r,isAlwaysVisible:t.notHideable||n,id:t.id,label:t.label})})),e}_isFirstRow(e){return e===this._model.rows()[0]?.[this._idProperty]}_makeTableWrapperClassNames(){return a()(bs.tableWrapper,this._isScrolled&&!this._isMobile&&bs.isScrolled,!this._isScrollBouncingEnabled&&bs.noBouncingScroll)}_checkBottomIsVisible(e){const t=e.querySelector('[data-selector="table"]');if(null===t)return;const{bottom:s}=t.getBoundingClientRect(),i=window.innerHeight-s>=-100;this.onBottomVisibilityChange.fire(i)}_makeColumnsFilterProps(){const e=this._isCellFocused({columnKey:"settings",rowKeyValue:"head"})?0:-1;return{items:[...this._columnsVisibilityInfo.values()].filter((e=>"settings"!==e.id&&!e.isAlwaysVisible)).map((e=>({id:e.id,title:e.label,visible:(this._isMobile?e.isVisibleOnMobile:e.isVisible)&&!e.forceInvisible}))),onCheck:e=>this._toggleColumnVisibility(e),
reference:e=>this._columnsFilterReference=e,overlapManagerWV:this._overlapManager,isSticky:this._isStickyMobileColumnsFilter,tabIndex:e}}_toggleColumnVisibility(e){const t=!this._visibleColumns.has(e);this._setColumnVisibility(e,t);const s=`${this._id}${this._isMobile?".invisibleMobileColumns":".invisibleColumns"}`,i=new Set(ct.getJSON(s,[]));t?i.delete(e):i.add(e),ct.setJSON(s,[...i])}_setColumnVisibility(e,t){t?this._visibleColumns.add(e):this._visibleColumns.delete(e);const s=this._columnsVisibilityInfo.get(e);void 0!==s&&(this._isMobile?this._columnsVisibilityInfo.set(e,{...s,isVisibleOnMobile:t&&!s.forceInvisible}):this._columnsVisibilityInfo.set(e,{...s,isVisible:t&&!s.forceInvisible}),this._columnsFilterProps=this._makeColumnsFilterProps()),this._updateTableProps({type:t?Kt.ActionType.ShowColumn:Kt.ActionType.HideColumn,columnKey:e},!0)}_getAvailableColumnsFilterItems(){return this._columnsFilterProps.items.filter((e=>!this._hiddenFilterColumns.has(e.id)))}_checkIsMobile(){return window.matchMedia(K.TradingLayoutBreakpoint.Mobile).matches}_subscribeModel(){this._model.onRowsChanged.subscribe(this,this._onRowsChanged)}_unsubscribeModel(){this._model.onRowsChanged.unsubscribe(this,this._onRowsChanged)}_reorderColumns(e,t){const s=new Map(t),i=s.get("settings");s.delete("settings");const n=[],o=void 0!==this._fixedTitleColumnId?s.get(this._fixedTitleColumnId):void 0;void 0!==o&&(n.push(o),s.delete(o.key));for(const t of e){const e=s.get(t);void 0!==e&&(n.push(e),s.delete(t))}return n.push(...s.values()),void 0!==i&&n.push(i),n}_getSavedColumnsOrder(){return this._getSettingsStorage()?.tableColumnsOrder(this._id)}_isCellFocused(e){return this._tableProps?.focused?.cell?.columnKey===e?.columnKey&&this._tableProps?.focused?.cell?.rowKeyValue===e?.rowKeyValue}}var $s=s(992607);class Gs extends S{constructor(e){const t=tt(),s=[],i=[],n=[],o=[],r=1===e.tables.length,a=[];e.tables.forEach((l=>{const c=tt({stretch:r}),u=tt({stretch:r}),d=new ot({options:l.options,priceFormatterGetter:l.priceFormatterFn,reverse:l.flags?.reverse,columns:l.columns}),h=new js({id:l.id,model:d,container:u,columns:l.columns,idProperty:l.options.idProperty,className:l.options.className,stickyMobileColumnsFilter:!0,overlapManager:e.overlapManager,fixedColumns:l.flags?.fixedColumns,getSettingsStorage:e.getTableSettingsStorage,rowEventsHandlers:l.rowEventsHandlers,trackEvent:e.trackEvent,supportPagination:l.flags?.supportPagination,isScrollBouncingEnabled:!r});if(l.title){const e=function(e){const t=document.createElement("h3");return t.classList.add($s.title,$s.hidden),t.textContent=e,t}(l.title);c.appendChild(e),o.push(e)}c.appendChild(u),t.appendChild(c);const m=new C({idProperty:l.options.idProperty,name:l.title||void 0,model:d,view:h,source:l.source,subscriptions:l.subscriptions,supportPagination:l.flags?.supportPagination});if(i.push(d),n.push(h),s.push(m),m.addFormatters(l.formatters.concat(Ye)),m.start(),e.displayCounterInTab){const e=new T(l.source,l.subscriptions.rowUpdateDelegate);a.push(e)}}));const l={id:e.id,name:e.title}
;super(t,l,s),this._tableCounters=[],this._tableViewModels=i,this._tableViews=n,this._titleElements=o,e.displayCounterInTab&&(this._tableCounters=a,this._subscribeUpdates())}destroy(){this._unsubscribeUpdates(),this._tableViewModels.forEach((e=>e.destroy())),this._tableViews.forEach((e=>e.destroy())),super.destroy()}_onActiveChanged(e){super._onActiveChanged(e),e&&setTimeout((()=>{for(const e of this._titleElements)e.classList.remove($s.hidden)}))}_onCountChanged(e){this._setCount(e)}_subscribeUpdates(){this._tableCounters.forEach((e=>{e.start(),e.countChanged().subscribe(this,this._onCountChanged)}))}_unsubscribeUpdates(){this._tableCounters.forEach((e=>{e.stop(),e.countChanged().unsubscribe(this,this._onCountChanged)}))}}const Zs={1:ye.red,0:ye.green};function Ys(e){const{text:t,notificationType:s}=e,i=void 0!==s?Zs[s]:void 0;return n.createElement("span",{className:i},t)}const Xs="notificationType",Qs={name:Xs,formatText:Xe.formatText,formatElement:({values:[e,t]})=>n.createElement(Ys,{text:e,notificationType:t})},Js=[{label:i.t(null,void 0,s(312806)),id:"time",dataFields:["time"],formatter:"localDate"},{label:i.t(null,void 0,s(570198)),id:"title",dataFields:["title","type"],formatter:Xs,isCapitalize:!1},{label:i.t(null,void 0,s(770320)),id:"text",dataFields:["text"],isCapitalize:!1}];class ei extends S{constructor(e,t,s){super(e,t,s),s.forEach((e=>e.addFormatters(t.formatters.concat(Ye))))}}class ti extends ei{constructor(e){const t=tt(),s="id",i=new ot({options:{idProperty:s,defaultSortingParameters:e.initialSorting},priceFormatterGetter:e.priceFormatterFn,columns:e.columns}),n=new js({id:e.id,title:e.title,model:i,container:t,columns:e.columns,idProperty:s,overlapManager:e.overlapManager,getSettingsStorage:e.getTableSettingsStorage,rowEventsHandlers:e.tableRowEventsHandlers,trackEvent:e.trackEvent,fixedTitleColumnId:e.fixedTitleColumnId,pageSize:void 0===e.overlapManager?100:20}),o=new(e.tableController??C)({idProperty:s,model:i,view:n,source:e.source,subscriptions:e.subscriptions});super(t,{id:e.id,name:e.title,formatters:e.formatters},[o]),this._tableViewModel=i,this._tableView=n,o.start()}destroy(){this._tableViewModel.destroy(),this._tableView.destroy(),super.destroy()}}var si,ii=s(588714),ni=s(562082),oi=s(610600),ri=s(552019);!function(e){e[e.Delay=0]="Delay",e[e.Informer=1]="Informer",e[e.Edit=2]="Edit",e[e.Close=3]="Close"}(si||(si={}));di((function(e){return n.createElement(DelayedDataStatus,{...e,role:"button"})}));const ai=di((function(e){return n.createElement(ue,{...e})})),li=di((function(e){const{reference:t,closeFn:o,closeTitle:r,...a}=e;return n.createElement(ii.ClickableIconButton,{...a,ref:t,colorClassName:ni.button,title:r??i.t(null,{context:"position"},s(744074)),icon:ri,onClick:e=>{e.stopPropagation(),o()},"data-name":"close-settings-cell-button"})})),ci=di((function(e){const{reference:t,editFn:o,editTitle:r,...l}=e;return n.createElement(ii.ClickableIconButton,{...l,ref:t,colorClassName:a()(ni.button,ni.editButton),title:r??i.t(null,void 0,s(223912)),icon:oi,onClick:e=>{
e.stopPropagation(),o()},"data-name":"edit-settings-cell-button"})}));function ui(e){const{closeFn:t,closeTitle:s,editFn:i,editTitle:o,message:r,symbol:a,showDelayButton:l,showCloseButton:c,showEditButton:u,cell:d}=e,h=void 0!==r,m=!1,[p,g]=(0,n.useState)(-1),[b,f]=(0,n.useState)(!1),_=(0,G.useIsMounted)(),v=(0,n.useRef)([]),{lastActiveButtonIndex:w,setLastActiveButtonIndex:C,moveCellFocus:y,focusedCell:x}=(0,n.useContext)(Ms);(0,n.useEffect)((()=>{if(-1!==p)return;const e=v.current.findIndex((e=>void 0!==e));-1!==e&&g(e)}),[m,h,u,c]),(0,n.useEffect)((()=>{null!==w&&w!==p&&void 0!==v.current[w]&&g(w)}),[w]);const S=x?.columnKey===d?.columnKey&&x?.rowKeyValue===d?.rowKeyValue,E=void 0!==t,P=void 0!==i;function k(e){void 0!==v.current[e]&&(v.current[e]?.focus(),g(e),C(e))}const T=(0,n.useCallback)(((e,t,s)=>{v.current[t]=s&&null!==e?e:void 0}),[]);const F={isCellFocused:S,focusedButtonIndex:p,setFocusedButtonIndex:g,setLastActiveButtonIndex:C};return n.createElement("span",{className:ni.wrapper,onKeyDown:function(e){const t=v.current;switch((0,Lt.hashFromEvent)(e)){case 39:e.preventDefault();for(let e=p+1;e<t.length;e++)if(void 0!==t[e]){k(e);break}break;case 37:{e.preventDefault();let s=!1;for(let e=p-1;e>=0;e--)if(void 0!==t[e]){k(e),s=!0;break}s||void 0===d||y(d,"left");break}case 32:1===p&&e.preventDefault()}}},m,h&&n.createElement(ai,{...F,...r,reference:e=>T(e,1,!0),buttonIndex:1}),(c||u)&&n.createElement("div",{className:ni.buttons},u&&n.createElement(ci,{...F,reference:e=>T(e,2,P),disabled:!P||b,editFn:P?async function(){try{f(!0),await(i?.())}finally{_.current&&(f(!1),k(p))}}:()=>{},editTitle:o,buttonIndex:2}),c&&n.createElement(li,{...F,reference:e=>T(e,3,E),disabled:!E||b,closeFn:E?async function(){try{f(!0),await(t?.())}finally{_.current&&(f(!1),k(p))}}:()=>{},closeTitle:s,buttonIndex:3})))}function di(e){return t=>{const{buttonIndex:s,isCellFocused:i,focusedButtonIndex:o,setFocusedButtonIndex:r,setLastActiveButtonIndex:a,...l}=t,c=i&&o===s?0:-1;return n.createElement(e,{...l,tabIndex:c,onFocus:function(){a(s)},[$t]:`${o===s}`})}}const hi={2:"orderstatus-filled",1:"orderstatus-cancelled",6:"orderstatus-working",3:"orderstatus-inactive",4:"orderstatus-placing",5:"orderstatus-rejected"};function mi(e){return hi[e]}class pi{constructor(e,t,s,i){this._calculateCounts=async e=>{if(e?.aborted)return;const t=await this._source();if(e?.aborted)return;const s=new Set,i={};for(const{id:e}of this._ordersFilterTabs)i[e]=0;for(const e of t){if(s.has(e.id))continue;s.add(e.id),i["orderstatustatus-all"]=(0,l.ensureDefined)(i["orderstatustatus-all"])+1;const t=mi(e.status);void 0!==i[t]&&(i[t]=(0,l.ensureDefined)(i[t])+1)}this._countChanged.fire(i);for(const{id:e,count:t}of this._ordersFilterTabs)t.setValue(i[e])},this._source=e,this._orderUpdateDelegate=t,this._fullUpdateDelegate=s,this._ordersFilterTabs=i,this._abortController=new AbortController,this._countChanged=new k.Delegate,this._calculateCounts=(0,P.respectLatest)(this._calculateCounts),this._calculateCountsDebounced=(0,
E.default)((()=>this._calculateCounts(this._abortController.signal)),100)}countChanged(){return this._countChanged}start(){this._abortController=new AbortController,this._orderUpdateDelegate.subscribe(this,this._calculateCountsDebounced),this._fullUpdateDelegate.subscribe(this,this._calculateCountsDebounced),this._calculateCounts(this._abortController.signal)}stop(){this._abortController.abort(),this._ordersFilterTabs.forEach((({count:e})=>e.setValue(0))),this._orderUpdateDelegate.unsubscribe(this,this._calculateCountsDebounced),this._fullUpdateDelegate.unsubscribe(this,this._calculateCountsDebounced)}}class gi{constructor(e,t,s,i){this.filterFullUpdateDelegate=new k.Delegate,this.filterObjectUpdateDelegate=new k.Delegate,this.filterObjectDeleteDelegate=new k.Delegate,this._filteredObjects=[],this._requestsCount=0,this._started=!1,this._objectsRequest=null,this._source=e,this._objectUpdateDelegate=t,this._objectDeleteDelegate=s,this._fullUpdateDelegate=i}start(){this._requestsCount++;const e=this._source,t=this._objectsRequest||Promise.resolve([]);this._objectsRequest=t.then((()=>e())).then((e=>{const t=e.filter((e=>this._satisfy(e)));return this._requestsCount--,this._requestsCount||(this.stop(),this._filteredObjects=t,this._objectsRequest=null,this._objectUpdateDelegate.subscribe(this,this._onObjectUpdated),this._objectDeleteDelegate&&this._objectDeleteDelegate.subscribe(this,this._onObjectDeleted),this._fullUpdateDelegate.subscribe(this,this._onFullUpdate),this._started=!0),t.slice(0)}))}stop(){this._objectUpdateDelegate.unsubscribe(this,this._onObjectUpdated),this._fullUpdateDelegate.unsubscribe(this,this._onFullUpdate),this._objectDeleteDelegate&&this._objectDeleteDelegate.unsubscribe(this,this._onObjectDeleted),this._filteredObjects=[],this._started=!1}isStarted(){return this._started}filterSource(){return this._objectsRequest?this._objectsRequest:Promise.resolve(this._filteredObjects.slice(0))}_satisfy(e){throw new Error("should be implemented")}_onFullUpdate(){this.stop(),this.start(),this.filterFullUpdateDelegate.fire()}_onObjectDeleted(e){const t=this._filteredObjects.find((t=>t.id===e));t&&this.filterObjectDeleteDelegate.fire(t.id)}_onObjectUpdated(e){const t=this._filteredObjects.find((t=>t.id===e.id)),s=t?this._filteredObjects.indexOf(t):-1;this._satisfy(e)?(t?this._filteredObjects[s]=e:this._filteredObjects.push(e),this.filterObjectUpdateDelegate.fire(e)):t&&(this.filterObjectDeleteDelegate.fire(t.id),this._filteredObjects.splice(s,1))}}class bi extends gi{constructor(e,t,s,i){super(e,t,s,i),this._filterStatus=null}setFilterStatus(e){this._filterStatus=e,this.isStarted()&&(this.stop(),this.start())}filterStatus(){return this._filterStatus}_satisfy(e){return!this._filterStatus||e.status===this._filterStatus}}class fi extends gi{constructor(e,t,s,i,n){super(e,t,s,i),this._filter=n}_satisfy(e){return this._filter(e)}}class _i{constructor(e,t,s){this._orders=[],this._source=e,this._rowUpdateDelegate=t,this._fullUpdateDelegate=s,this._orders=[],this._statusChanged=new k.Delegate}statusChanged(){
return this._statusChanged}start(){this._source().then((e=>{this._orders=e.map((e=>Object.assign({},e))),this._rowUpdateDelegate.subscribe(this,this._onRowUpdated),this._fullUpdateDelegate.subscribe(this,this._onFullUpdate)}))}stop(){this._fullUpdateDelegate.unsubscribe(this,this._onFullUpdate),this._rowUpdateDelegate.unsubscribe(this,this._onRowUpdated),this._orders=[]}_onFullUpdate(){this.stop(),this.start()}_onRowUpdated(e){const t=this._orders.find((({id:t})=>t===e.id));t?.status!==e.status&&(void 0!==t?t.status=e.status:this._orders.push(Object.assign({},e)),this._statusChanged.fire(e))}}class vi extends C{constructor(e){super(e),this._onLinkingBound=this._onLinking.bind(this),c.linking.proSymbol.subscribe(this._onLinkingBound)}destroy(){c.linking.proSymbol.unsubscribe(this._onLinkingBound),super.destroy()}_update(e){if(!super._update(e))return!1;const t=c.linking.proSymbol.value();return this.setRowLinkedById(e.id,t===e.symbol),!0}_onCreated(){this.setRowLinkedByFilter((e=>e.symbol===c.linking.proSymbol.value()))}_onLinking(e){this.setRowLinkedByFilter((t=>t.symbol===e))}}class wi extends vi{constructor(e){super(e),this._title=e.title,this._getFilterStatus=e.filterStatusGetter,this._isAlwaysActive=e.isAlwaysActive}fullUpdate(){return this._fullUpdate()}getDataExporter(){const e=super.getDataExporter(),t=this._getFilterStatus(),n=null!==t?(0,m.orderStatusToText)(t):i.t(null,void 0,s(580066));return e.name=`${this._title} ${n}`,e}_update(e){return!!super._update(e)&&(this.setRowInactiveById(e.id,!this._filterByStatus(e.status)),!0)}_onCreated(){super._onCreated(),this.setRowInactiveByFilter((e=>!this._filterByStatus(e.status)))}_filterByStatus(e){return this._isAlwaysActive||null!==this._getFilterStatus()||(0,m.isOrderActive)(e)}}const Ci=["formatPrice","formatPriceForexSup"],yi="orderSettings",xi="Orders Page";function Si(e,t){return{id:e,label:t,count:new y.WatchedValue(0)}}class Ei extends S{constructor(e){const t=e.formatters||[],o=new fi(e.source,e.subscriptions.rowUpdateDelegate,null,e.subscriptions.fullUpdateDelegate,e.filter),r=function(e){const t=[Si("orderstatustatus-all",i.t(null,void 0,s(580066)))],n=e.map((e=>Si(mi(e),(0,V.capitalizeFirstLetter)((0,m.orderStatusToText)(e)))));return t.concat(n)}(e.possibleOrderStatuses),a=new pi(o.filterSource.bind(o),o.filterObjectUpdateDelegate,o.filterFullUpdateDelegate,r),l=new bi(o.filterSource.bind(o),o.filterObjectUpdateDelegate,o.filterObjectDeleteDelegate,o.filterFullUpdateDelegate),c=e.subscriptions.fullUpdateDelegate;e.source=l.filterSource.bind(l),e.subscriptions.rowUpdateDelegate=l.filterObjectUpdateDelegate,e.subscriptions.rowDeleteDelegate=l.filterObjectDeleteDelegate,e.subscriptions.fullUpdateDelegate=l.filterFullUpdateDelegate;const u=tt(),d="id",h={group:e=>+(0,m.isOrderActive)(e.status),idProperty:d,defaultSortingParameters:e.initialSorting},p=e.columns.map((e=>Ci.includes(e.formatter)?{...e,showZeroValues:!1}:e)),g=[...p,{label:"",id:"settings",alignment:"right",dataFields:[],formatter:yi,notSortable:!0,showOnMobile:!1}],b=new ot({columns:g,
priceFormatterGetter:e.priceFormatterFn,options:h}),f=new js({id:e.tableId,title:e.title,model:b,className:"orders",container:u,columns:g,idProperty:d,overlapManager:e.overlapManager,getSettingsStorage:e.getTableSettingsStorage,rowEventsHandlers:e.tableRowEventsHandlers,trackEvent:e.trackEvent,fixedTitleColumnId:"symbol",pageSize:void 0===e.overlapManager?100:20}),v={id:e.id,name:e.title},w=new wi({idProperty:d,title:e.title,model:b,view:f,source:e.source,subscriptions:e.subscriptions,filterStatusGetter:()=>this._ordersFilter.filterStatus(),isAlwaysActive:e.isAlwaysActive});super(u,v,[w]),this._tableViewModel=b,this._tableView=f,this._tableController=w,this._globalFullUpdateDelegate=c,this._statusWatcher=new _i(o.filterSource.bind(o),o.filterObjectUpdateDelegate,o.filterFullUpdateDelegate),this._orderPreFilter=o,this._ordersFilter=l,this._ordersFilterCountsUpdater=a,this._possibleOrderStatuses=e.possibleOrderStatuses,this._columns=p,this._pendingOrdersByStatuses={},this._configFlags=e.configFlags,this._trackEvent=e.trackEvent,this._closeFn=t=>(e.trackEvent(xi,"Cancel Order"),e.cancelFn(t)),this._editFn=(t,s,i,n)=>(e.trackEvent(xi,"Edit Order"),e.modifyFn(t,s,i,n));const C={name:yi,formatElement:({values:[t]})=>{const o=""!==t.symbol,r=this._isPlacingOrderCancellingDisabled(t.status),a=(0,m.isOrderActive)(t.status),l=!o||!a,c=l&&r?void 0:()=>this._closeFn(t.id),u=l||!(0,m.isModifyOrderSupported)(t,this._configFlags)?void 0:()=>this._editFn(t),d=o?t.message:ne(t.message);return n.createElement(ui,{closeFn:c,closeTitle:i.t(null,void 0,s(904543)),editFn:u,editTitle:(0,_.appendEllipsis)(i.t(null,void 0,s(567710))),message:d,symbol:t.symbol,showDelayButton:o&&t.isDelayed,showCloseButton:!e.isAlwaysActive&&(a||!r),showEditButton:!e.isAlwaysActive&&(0,m.isBrokerSupportOrderModification)(this._configFlags)&&a})},formatText:()=>""};w.addFormatters([...Ye,C,...t]),this._filterTabs=r,this._subscribeUpdates()}destroy(){this._unsubscribeUpdates(),this._tableViewModel.destroy(),this._tableView.destroy(),super.destroy()}async contextItems(e){const t=this._tableController.rowIdAtEvent(e);if(void 0===t)return[];const n=this._tableController.rowById(t);if(void 0===n||""===n.symbol)return[];const o=[];return(0,m.isModifyOrderSupported)(n,this._configFlags)&&o.push({text:(0,_.appendEllipsis)(i.t(null,void 0,s(567710))),enabled:(0,m.isOrderActive)(n.status),action:()=>this._editFn(n)}),o.push({text:i.t(null,void 0,s(895931)),enabled:(0,m.isOrderActive)(n.status)||!this._isPlacingOrderCancellingDisabled(n.status),action:()=>this._closeFn(t)}),o}contextRow(e){return this._tableController.rowAtEvent(e)}activateFilterTab(e){if(this._activeFilterTabId===e)return;const t=void 0===this._activeFilterTabId;super.activateFilterTab(e);const s=function(e){return Pi[e]}(e);this._ordersFilter.setFilterStatus(s),this._columns.forEach((e=>{void 0!==e.supportedStatusFilters&&this._tableController.setColumnAvailable(e.id,e.supportedStatusFilters.includes(s??0))})),t||(this._trackEvent(xi,"Order status filter",null!==s?(0,m.orderStatusToText)(s):void 0),
this._tableController.fullUpdate().then((()=>{if(null===s)return void(this._pendingOrdersByStatuses={});const e=this._pendingOrdersByStatuses[s];void 0!==e&&(e.forEach((e=>this._tableController.highlightRowById(e))),e.clear())})))}_subscribeUpdates(){this._tableController.start(),this._orderPreFilter.start(),this._ordersFilter.start(),this._statusWatcher.start(),this._statusWatcher.statusChanged().subscribe(this,this._onStatusChange),this._ordersFilterCountsUpdater.start(),this._ordersFilterCountsUpdater.countChanged().subscribe(this,this._onCountChanged),this._globalFullUpdateDelegate.subscribe(this,this._onGlobalFullUpdate)}_unsubscribeUpdates(){this._tableController.stop(),this._orderPreFilter.stop(),this._ordersFilter.stop(),this._statusWatcher.stop(),this._statusWatcher.statusChanged().unsubscribe(this,this._onStatusChange),this._ordersFilterCountsUpdater.stop(),this._ordersFilterCountsUpdater.countChanged().unsubscribe(this,this._onCountChanged),this._globalFullUpdateDelegate.unsubscribe(this,this._onGlobalFullUpdate)}_onGlobalFullUpdate(){this._pendingOrdersByStatuses={}}_onCountChanged(e){const t=(e[mi(6)]??0)+(e[mi(3)]??0);this._setCount(t)}_onStatusChange(e){null!==this._ordersFilter.filterStatus()&&4!==e.status&&(this._possibleOrderStatuses.forEach((t=>{this._pendingOrdersByStatuses[t]?.delete(e.id)})),this._pendingOrdersByStatuses[e.status]||(this._pendingOrdersByStatuses[e.status]=new Set),this._pendingOrdersByStatuses[e.status]?.add(e.id),setTimeout((()=>{this._ordersFilter.filterStatus()===e.status&&this._tableController.isRowInViewport(e.id)&&this._tableController.highlightRowById(e.id)}),0))}_isPlacingOrderCancellingDisabled(e){return!this._configFlags.supportPlacingOrderCancelling||4!==e}}const Pi={"orderstatus-filled":2,"orderstatus-cancelled":1,"orderstatus-working":6,"orderstatus-inactive":3,"orderstatus-placing":4,"orderstatus-rejected":5,"orderstatustatus-all":null};var ki,Ti,Fi=s(922954);class Di{constructor(e,t,s){this._calculateCounts=async e=>{if(e?.aborted)return;const t=await this._source();if(e?.aborted)return;const s=t.filter(v).length;s!==this._count&&(this._count=s,this._countChanged.fire(s))},this._source=e,this._rowUpdateDelegate=t,this._fullUpdateDelegate=s,this._countChanged=new k.Delegate,this._abortController=new AbortController,this._calculateCounts=(0,P.respectLatest)(this._calculateCounts),this._calculateCountsDebounced=(0,E.default)((()=>this._calculateCounts(this._abortController.signal)),100)}countChanged(){return this._countChanged}start(){this._abortController=new AbortController,this._rowUpdateDelegate.subscribe(this,this._calculateCountsDebounced),this._fullUpdateDelegate.subscribe(this,this._calculateCountsDebounced),this._calculateCounts(this._abortController.signal)}stop(){this._abortController.abort(),this._count=void 0,this._rowUpdateDelegate.unsubscribe(this,this._calculateCountsDebounced),this._fullUpdateDelegate.unsubscribe(this,this._calculateCountsDebounced)}}!function(e){e[e.IndividualPositions=0]="IndividualPositions",e[e.NetPositions=1]="NetPositions"
}(ki||(ki={})),function(e){e.IndividualPositions="individual-positions",e.NetPositions="net-positions"}(Ti||(Ti={}));const Ii="Trading.PositionsTable.Filter",Ri=["formatPrice","formatPriceForexSup"],Mi=i.t(null,void 0,s(563654)),Ni=i.t(null,void 0,s(394948)),Ai=i.t(null,void 0,s(568355)),Bi=i.t(null,void 0,s(685581)),Oi="positionSettings",Ui="individualPositionSettings",zi={1:"net-positions",0:"individual-positions"};function Li(e){const{id:t,name:s,content:i,source:n,subscriptions:o,columns:r,priceFormatterFn:a,rowEventsHandlers:l,overlapManager:c,getTableSettingsStorage:u,trackEvent:d}=e,h="id",m=new ot({priceFormatterGetter:a,columns:r,options:{idProperty:h}}),p=new js({id:t,model:m,title:s,className:"positions",container:i,columns:r,idProperty:h,getSettingsStorage:u,overlapManager:c,fixedTitleColumnId:"symbol",rowEventsHandlers:l,trackEvent:d,emptyStateMessage:Bi,pageSize:void 0===c?100:20});return{model:m,view:p,controller:new Vi({idProperty:h,name:s,model:m,view:p,source:n,subscriptions:o})}}class Vi extends vi{_update(e){return v(e)?super._update(e):(this._deleteRow(e.id),!0)}}class Wi extends S{constructor(e){const t=function(){const e=document.createElement("div");return e.classList.add(Fi.pageContainer),e}(),o={id:"positions",name:Mi},r=tt(),a=e.positions.columns.map((e=>Ri.includes(e.formatter)?{...e,showZeroValues:!1}:e));a.push({label:"",id:"settings",alignment:"right",dataFields:["id","message","symbol","isDelayed"],formatter:Oi,notSortable:!0,showOnMobile:!1});const c=Li({id:e.brokerId+".positions",name:e.individualPositions?Ni:Mi,content:r,source:e.positions.source,subscriptions:Object.assign({},e.positions.subscriptions,{fullUpdateDelegate:e.fullUpdateDelegate}),columns:a,priceFormatterFn:e.priceFormatterFn,overlapManager:e.overlapManager,getTableSettingsStorage:e.getTableSettingsStorage,rowEventsHandlers:e.tableRowEventsHandlers,trackEvent:e.trackEvent});t.appendChild(r);const u=[c.controller];let d,h=null;if(e.individualPositions){const s=e.individualPositions.columns.map((e=>Ri.includes(e.formatter)?{...e,showZeroValues:!1}:e));s.push({label:"",id:"settings",alignment:"right",dataFields:["id","message","canBeClosed","symbol","isDelayed"],formatter:Ui,notSortable:!0,showOnMobile:!1}),h=tt(),d=Li({id:e.brokerId+".individualPositions",name:Ai,content:h,source:e.individualPositions.source,subscriptions:Object.assign({},e.individualPositions.subscriptions,{fullUpdateDelegate:e.fullUpdateDelegate}),columns:s,priceFormatterFn:e.priceFormatterFn,overlapManager:e.overlapManager,getTableSettingsStorage:e.getTableSettingsStorage,rowEventsHandlers:e.tableRowEventsHandlers,trackEvent:e.trackEvent}),t.appendChild(h),u.push(d.controller)}super(t,o,u),this._positionsTableContainer=r,this._individualPositionsTableContainer=h,this._positionsTableController=c.controller,this._positionsTableViewModel=c.model,this._positionsTableView=c.view,this._individualPositionsTableController=d?.controller,this._individualPositionsTableViewModel=d?.model,this._individualPositionsTableView=d?.view,
null!==e.individualPositions&&(this._filterTabs=[],this._filterTabs[0]={id:"individual-positions",label:Ai,count:new y.WatchedValue(0)},this._filterTabs[1]={id:"net-positions",label:Ni,count:new y.WatchedValue(0)});const p=e.formatters||[];this._fullUpdateDelegate=e.fullUpdateDelegate,this._posSubscriptions=e.positions.subscriptions,this._checkSupportIndividualPositions=e.checkSupportIndividualPositions,this._checkPositionReverseSupport=e.checkPositionReverseSupport,this._trackEvent=e.trackEvent,this._storeFunctions(e);const g={name:Oi,formatElement:({values:[t,o,r,a]})=>{const l=""===r,c=l||null===this._closePositionFn?void 0:this._closePositionFn.bind(null,t),u=l||null===this._editPositionFn||!1===(0,m.isModifyPositionBracketsSupported)(e.configFlags)?void 0:this._editPositionFn.bind(null,t),d=l?ne(o):o;return n.createElement(ui,{closeFn:c,closeTitle:i.t(null,{context:"position"},s(744074)),editFn:u,editTitle:(0,_.appendEllipsis)(i.t(null,void 0,s(324927))),message:d,symbol:r,showDelayButton:!l&&a,showCloseButton:null!==this._closePositionFn,showEditButton:null!==this._editPositionFn})},formatText:()=>""};if(this._positionsTableController.addFormatters([g,...Ye,...p]),e.individualPositions){const t={name:Ui,formatElement:({values:[e,t,o,r,a]})=>{const l=""===r,c=l||null===this._closeIndividualPositionFn||!o?void 0:this._closeIndividualPositionFn.bind(null,e),u=l||null===this._editIndividualPositionFn?void 0:this._editIndividualPositionFn.bind(null,e);return n.createElement(ui,{closeFn:c,closeTitle:i.t(null,{context:"position"},s(744074)),editFn:u,editTitle:(0,_.appendEllipsis)(i.t(null,void 0,s(324927))),message:t,symbol:r,showDelayButton:!l&&a,showEditButton:null!==this._editIndividualPositionFn,showCloseButton:null!==this._closeIndividualPositionFn})},formatText:()=>""};(0,l.ensure)(this._individualPositionsTableController).addFormatters([t,...Ye,...p]),this._individualPositionsFilterCounter=new Di(e.individualPositions.source,e.individualPositions.subscriptions.countUpdateDelegate,this._fullUpdateDelegate)}else this._individualPositionsFilterCounter=null;this._positionsFilterCounter=new Di(e.positions.source,this._posSubscriptions.countUpdateDelegate,this._fullUpdateDelegate),this._subscribeUpdates();const b=ct.getInt(Ii,0);this._activeFilterTabId=this._checkSupportIndividualPositions()?zi[b]:"net-positions",this._selectPage(this._activeFilterTabId)}async contextItems(e){const t=this._activeTableController(),n=t.rowIdAtEvent(e);if(void 0===n)return[];const o=(0,l.ensureDefined)(t.rowById(n));if(""===o.symbol)return[];const r=[];if("individual-positions"===this._activeFilterTabId)return this._editIndividualPositionFn&&r.push({text:(0,_.appendEllipsis)(i.t(null,void 0,s(324927))),action:this._editIndividualPositionFn.bind(null,n)}),this._closeIndividualPositionFn&&o.canBeClosed&&r.push({text:i.t(null,void 0,s(759783)),action:this._closeIndividualPositionFn.bind(null,n)}),r;this._editPositionFn&&r.push({text:(0,_.appendEllipsis)(i.t(null,void 0,s(324927))),action:this._editPositionFn.bind(null,n)}),
this._closePositionFn&&r.push({text:i.t(null,void 0,s(759783)),action:this._closePositionFn.bind(null,n)});const a=await this._checkPositionReverseSupport(o.symbol);return this._reversePositionFn&&a&&r.push({text:i.t(null,void 0,s(898818)),action:this._reversePositionFn.bind(null,n)}),r}contextRow(e){return this._activeTableController().rowAtEvent(e)}destroy(){this._unsubscribeUpdates(),this._positionsTableViewModel.destroy(),this._positionsTableView.destroy(),this._individualPositionsTableViewModel?.destroy(),this._individualPositionsTableView?.destroy(),super.destroy()}activateFilterTab(e){super.activateFilterTab(e),this._selectPage(e)}_onActiveChanged(e){e?this._activeTableController().setActive(!0):(this._positionsTableController.setActive(!1),this._individualPositionsTableController&&this._individualPositionsTableController.setActive(!1))}_onPositionsCountChanged(e){this._setCount(e),this._filterTabs[1]?.count.setValue(e)}_onIndividualPositionsCountChanged(e){this._filterTabs[0]?.count.setValue(e)}_activeTableController(){return this._checkSupportIndividualPositions()&&"individual-positions"===this._activeFilterTabId?(0,l.ensure)(this._individualPositionsTableController):this._positionsTableController}_subscribeUpdates(){this._positionsFilterCounter.start(),this._positionsFilterCounter.countChanged().subscribe(this,this._onPositionsCountChanged),this._individualPositionsFilterCounter&&(this._individualPositionsFilterCounter.start(),this._individualPositionsFilterCounter.countChanged().subscribe(this,this._onIndividualPositionsCountChanged)),this._fullUpdateDelegate.subscribe(this,this._stopIndividualPositionsControllerIfNeeded)}_unsubscribeUpdates(){this._positionsFilterCounter.stop(),this._positionsFilterCounter.countChanged().unsubscribe(this,this._onPositionsCountChanged),this._individualPositionsFilterCounter&&(this._individualPositionsFilterCounter.stop(),this._individualPositionsFilterCounter.countChanged().unsubscribe(this,this._onIndividualPositionsCountChanged)),this._fullUpdateDelegate.unsubscribe(this,this._stopIndividualPositionsControllerIfNeeded)}_stopIndividualPositionsControllerIfNeeded(){this.isActive()&&this._checkSupportIndividualPositions()||this._individualPositionsTableController?.stop()}_selectPage(e){const t="net-positions"===e;t?this._positionsTableController.start():this._individualPositionsTableController?.start(),this._positionsTableContainer.classList.toggle("js-hidden",!t),this._individualPositionsTableContainer?.classList.toggle("js-hidden",t),this._positionsTableController.setActive(t),this._individualPositionsTableController?.setActive(!t),ct.setValue(Ii,t?1:0)}_storeFunctions(e){const t="Positions Page",s=e.positions.closeFn;this._closePositionFn=s?e=>(this._trackEvent(t,"Close Position"),s(e)):null;const i=e.positions.editFn;this._editPositionFn=i?e=>(this._trackEvent(t,"Edit Position"),i(e)):null;const n=e.positions.reverseFn;this._reversePositionFn=n?e=>(this._trackEvent(t,"Reverse Position"),n(e)):null;const o=e.individualPositions;if(o){const e=o.closeFn
;this._closeIndividualPositionFn=e?s=>(this._trackEvent(t,"Close Individual position"),e(s)):null;const s=o.editFn;this._editIndividualPositionFn=s?e=>(this._trackEvent(t,"Edit Individual position"),s(e)):null}}}var Hi=s(661851),Ki=s(834073),qi=s(265710);function ji(e){const{wValue:t,formatter:s,text:i,informerMessage:o}=e,r=(0,ts.useWatchedValueReadonly)({watchedValue:t}),a=(0,n.useMemo)((()=>{const e=Qe(s??"fixed");return e.isPriceFormatterNeeded?Xe:e}),[s]),l=(0,n.useMemo)((()=>function(e,t){const s=(e.formatElement??e.formatText)({values:Array.isArray(t)?t:[t]});return"string"!=typeof s?s:s.replace(/&nbsp;/g,"")}(a,r)),[a,r]);return void 0===l?n.createElement(n.Fragment,null):n.createElement("div",{className:qi.accountSummaryField},n.createElement("div",{className:qi.titleContainer},n.createElement("span",{className:qi.title},i),o&&n.createElement(Ki.TradingInformer,{informerMessage:o})),n.createElement("div",{className:qi.value},l))}var $i=s(616092);function Gi(e){const{summaryFields:t,displayMode:s}=e;return 0===t.length?n.createElement(n.Fragment,null):n.createElement("div",{className:r(0===s&&$i.addMargin,$i.accountSummaryRow)},t.map((e=>n.createElement(ji,{...e,key:e.text}))))}var Zi=s(70587),Yi=s(86304);function Xi(e){const{brokerDropdownProps:t,accountDropdownProps:s,commonDropdownProps:i,summaryFieldsVisibilityManager:o,summaryFields:a,displayMode:l,isBetaBroker:c}=e,u=(0,Hi.useObservable)(o.fieldsVisibilityInfo$,o.fieldsVisibilityInfo()),d=a.flatMap((e=>u.get(e.text)?.visible?e:[])),h=void 0!==s&&void 0!==i,m=0!==d.length;return h||m?n.createElement("div",{className:r(Yi.headerWrapper,!h&&Yi.withoutDropdowns)},h&&n.createElement("div",{className:Yi.brokerBlock},n.createElement(Zi.AccountManagerHeaderDropdowns,{brokerDropdownProps:t,accountDropdownProps:s,commonDropdownProps:i}),!1),m&&n.createElement(Gi,{summaryFields:d,displayMode:l})):n.createElement(n.Fragment,null)}var Qi=s(628370),Ji=s(796160);function en(e){const{element:t}=e;return n.createElement("div",{ref:e=>{null!==e&&(e.contains(t)||(null!==e.firstChild&&e.removeChild(e.firstChild),e.append(t)))}})}var tn=s(414823),sn=s(488831),nn=s(429798);const on=nn.tabs;function rn(e){const{id:t,label:s,count:i,isActive:o}=e,r=(0,ts.useWatchedValueReadonly)({watchedValue:i}),l=0!==r&&void 0!==r?` ${r}`:"";return n.createElement("span",{"data-account-manager-tab-id":t},s,n.createElement("span",{className:a()(!o&&nn.count)},l))}function an(e){const{pages:t,onActivate:s,defaultActiveTabId:i}=e,[o,r]=(0,n.useState)(i);return(0,n.useEffect)((()=>{s({id:o})}),[o,s]),n.createElement(sn.UnderlineButtonTabs,{id:(0,tn.createDomId)("account-manager-tabs"),className:on,overflowBehaviour:"scroll",size:"xsmall",isActive:({id:e})=>e===o,items:t.map((e=>function(e,t){const s=e.id();return{id:s,label:n.createElement(rn,{id:s,label:e.name(),count:e.count(),isActive:s===t})}}(e,o))),onActivate:({id:e})=>r(e)})}var ln,cn=s(540801),un=s(865679),dn=s(234539);!function(e){e.XSmall="xsmall",e.Small="small",e.Medium="medium",e.XLarge="xlarge"}(ln||(ln={}));const hn=(0,
n.createContext)("small");s(737402);var mn=s(558215);function pn({endSlot:e,children:t,className:s,"aria-hidden":i}){return n.createElement("span",{"aria-hidden":i,className:s},t&&n.createElement("span",{className:mn.content},t),e&&n.createElement("span",{className:mn.endSlotWrap},e))}var gn=s(121167);const bn=(0,n.forwardRef)(((e,t)=>{const s=n.useContext(hn),i=(0,n.useContext)(dn.CustomBehaviourContext),{id:o,active:a,fake:l,theme:c=gn,enableActiveStateStyles:u=i.enableActiveStateStyles,hideFocusOutline:d=!1,endSlot:h,children:m,...p}=e;return n.createElement("button",{...p,id:o,ref:t,className:r(c.squareTabButton,a&&c.selected,c[s],l&&c.fake,!u&&c.disableActiveStateStyles,d&&c.disableFocusOutline)},n.createElement(pn,{endSlot:h,className:gn.tabContent},m),n.createElement(pn,{"aria-hidden":!0,endSlot:h,className:gn.tabHiddenContent},m))}));bn.displayName="SquareTabButton";const fn=(0,n.forwardRef)(((e,t)=>{const{item:s,highlighted:i,handleItemRef:o,onClick:r,...a}=e,l=(0,n.useCallback)((()=>{r&&r(s)}),[r,s]),c=(0,n.useCallback)((e=>{o&&o(s,e),(0,Zt.isomorphicRef)(t)(e)}),[s,o,t]);return n.createElement(bn,{...a,id:s.id,onClick:l,ref:c,endSlot:s.endSlot,"aria-label":"radio"===a.role?s.label:void 0},s.label)}));fn.displayName="SquareTab";var _n=s(525388),vn=s(904925),wn=s(192063),Cn=s(602948),yn=s(535140);function xn(e){const{isDropped:t=!1}=e;return n.createElement(ft.Icon,{icon:Cn,className:r(yn.arrowIcon,t&&yn.dropped)})}function Sn(e){const{disabled:t,isOpened:s,hideFocusOutline:i,fake:o,items:r,buttonContent:a,buttonRef:l,buttonTheme:c,isHighlighted:u,onButtonClick:d,onItemClick:h,onClose:m}=e,p=(0,n.useRef)(null),g=(0,_n.useMergedRefs)([l,p]);return n.createElement(vn.PopupMenuDisclosureView,{buttonRef:p,listboxTabIndex:-1,isOpened:s,onClose:m,listboxAria:{"aria-hidden":!0},button:n.createElement(bn,{"aria-hidden":!0,disabled:t,active:s,onClick:d,ref:g,tabIndex:-1,theme:c,hideFocusOutline:i,fake:o},a,n.createElement(xn,{isDropped:s})),popupChildren:r.map((e=>n.createElement(wn.PopupMenuItem,{key:e.id,onClick:h,onClickArg:e,isActive:u(e),label:e.label,isDisabled:e.disabled,dontClosePopup:!0})))})}const En=(0,s(493173).mergeThemes)(gn,mn);var Pn=s(550650);function kn(e){const{disabled:t,moreButtonContent:o=()=>i.t(null,void 0,s(437117)),size:a="small",theme:l=En,className:c,style:u,"data-name":d,"aria-controls":h,isRadioGroup:m}=e,p=parseInt(Pn[`css-value-square-tabs-${a}-gap`]),{enableActiveStateStyles:g,moreButtonRef:b,setItemRef:f,getBindings:_,handleMoreButtonClick:v,handleCollapsedItemClick:w,scrollWrapBinding:C,overflowBehaviour:y,tablistBinding:x,visibleTabs:S,hiddenTabs:E,handleActivate:P,isMobileTouch:k,getItemId:T,isDisclosureOpened:F,isHighlighted:D,closeDisclosure:I}=(0,un.useTabsMainHandlers)(cn.TabNames.SquareButtonTabs,e,{isRtl:L.isRtl,scrollIntoViewOptions:{additionalScroll:p},isRadioGroup:m});return n.createElement(hn.Provider,{value:a},n.createElement("div",{...C,className:r(l.scrollWrap,"scroll"===y&&l.enableScroll,c),style:u,"data-name":d},n.createElement("div",{...x,
className:r(l.squareTabs,l[a])},S.map((e=>{const{"aria-disabled":t,...s}=_(e)??{};return n.createElement(fn,{...s,key:e.id,item:e,onClick:()=>P(e),theme:l,enableActiveStateStyles:g,hideFocusOutline:k,ref:f(T(e)),...e.dataId&&{"data-id":e.dataId},"aria-controls":h})})),E.map((e=>{const{"aria-disabled":t,...s}=_(e)??{};return n.createElement(fn,{...s,key:e.id,item:e,theme:l,enableActiveStateStyles:g,fake:!0,"aria-controls":h})})),n.createElement(Sn,{disabled:t,isOpened:F,items:E,buttonContent:o({hiddenTabs:E}),buttonRef:b,buttonTheme:l,isHighlighted:D,onButtonClick:v,onItemClick:w,onClose:I,hideFocusOutline:k,fake:0===E.length}))))}function Tn(e){const{"data-name":t="square-tabs-buttons",...s}=e;return n.createElement(kn,{...s,"data-name":t})}function Fn(e){const{id:t,items:s,onActivate:i,defaultActiveFilterTabId:o}=e,[r,a]=(0,n.useState)(o??(0,l.ensureDefined)(s[0]?.id,"AccountManagerPageFilterTabs item"));return(0,n.useEffect)((()=>{i({id:r})}),[r,i]),n.createElement(Tn,{id:(0,tn.createDomId)("account-manager-page-filter-tabs",t),className:on,onActivate:e=>a(e.id),isActive:e=>e.id===r,size:"xsmall",overflowBehaviour:"scroll",items:s.map((e=>({id:e.id,label:n.createElement(rn,{...e,isActive:e.id===r})})))})}var Dn=s(685014),In=s(634369),Rn=s(47135);const Mn=[6,3,2,1,5],Nn=[2,1,5],An="data-account-manager-page-id";function Bn(e){return`[${An}="${e}"]`}class On{constructor(e){this._showContextMenu=async e=>{e.preventDefault();let t=await this._contextItems(e);void 0!==t&&(h.enabled("property_pages")||(t=t.slice(0,-1)),p.ContextMenuManager.showMenu((0,m.convertActionDescriptionsToActions)(t),function(e){const t=e instanceof MouseEvent?e:e.touches[0];return{clientX:t.clientX,clientY:t.clientY}}(e),void 0,{menuName:"AccountManagerContextMenu"}))},this._activateTab=({id:e})=>{if(e===this._currentTabId)return;if(void 0!==this._currentTabId){const e=this._container.querySelector(Bn(this._currentTabId));e?.classList.remove(Rn.active)}(0,l.ensureNotNull)(this._container.querySelector(Bn(e)),"Page to activate").classList.add(Rn.active),this._currentTabId=e,this._attachFilter(),this._trading.trackEvent("Bottom Panel",`Select ${e} page`),this._updatePagesActiveStatuses()};const{broker:t,bridge:s,mode:i,summaryFieldsVisibilityManager:n,overlapManager:o}=e;this._adapter=(0,l.ensureNotNull)(t),this._bridge=s,this._container=s.container,this._mode=i,this._overlapManager=o,this._summaryFieldsVisibilityManager=n,this._pages=[],this._trading=(0,l.ensureNotNull)((0,b.tradingService)()),this._info=this._adapter.accountManagerInfo(),this._dispatch=this.bindContextMenu(),this._renderTemplate()}async priceFormatter(e){return e.symbol?this._trading.formatter(e.symbol):null}remove(){for(this._unmountComponentBySelector(".js-account-manager-header"),this._unmountComponentBySelector(".js-top-panel"),this._unmountComponentBySelector(".js-secondary-panel"),this._unsubscribe(),this._pages.forEach((e=>e.destroy())),this.unbindContextMenu();this._container.firstChild;)this._container.removeChild(this._container.firstChild)}bindContextMenu(){
return u.CheckMobile.isIPad()?this._bindLongPressMenu():0===this._mode?this._bindTapMenu():this._bindContextMenu()}unbindContextMenu(){null!==this._dispatch&&(this._dispatch(),this._dispatch=null)}static async create(e){const t=new On(e);return await t._create(),t._subscribe(),t._fullUpdate(),t}_bindContextMenu(){return this._container.addEventListener("contextmenu",this._showContextMenu),()=>this._container.removeEventListener("contextmenu",this._showContextMenu)}_bindLongPressMenu(){let e;const t=t=>{clearTimeout(e),e=setTimeout((()=>this._showContextMenu(t)),400)},s=()=>clearTimeout(e);return this._container.addEventListener("touchstart",t),this._container.addEventListener("touchend",s),this._container.addEventListener("touchmove",s),()=>{clearTimeout(e),this._container.removeEventListener("touchstart",t),this._container.removeEventListener("touchend",s),this._container.removeEventListener("touchmove",s)}}_bindTapMenu(){const e=e=>{void 0!==this._currentPage().contextRow(e)&&this._showContextMenu(e)},t=e=>{e.preventDefault()};return this._container.addEventListener("click",e),this._container.addEventListener("contextmenu",t),()=>{this._container.removeEventListener("click",e),this._container.removeEventListener("contextmenu",t)}}_unmountComponentBySelector(e){const t=this._container.querySelector(e);null!==t&&o.unmountComponentAtNode(t)}_ensuredCurrentTabId(){return(0,l.ensureDefined)(this._currentTabId,"Current tab id")}_initializeTabs(){this._activateTab({id:this._pages[0].id()}),o.render(n.createElement(an,{pages:this._pages,defaultActiveTabId:this._ensuredCurrentTabId(),onActivate:this._activateTab}),(0,l.ensureNotNull)(this._container.querySelector(".js-top-panel"),"AccountManagerTabs container"))}_linkTableRowSymbol(e){0!==this._mode&&void 0!==e.symbol&&""!==e.symbol&&c.linking.setSymbolAndLogInitiator(e.symbol,"account manager")}_onTableRowClick(e,t,s){const i=e;0!==this._mode&&""!==i.symbol&&(c.linking.proSymbol.value()!==i.symbol?c.linking.setSymbolAndLogInitiator(i.symbol,"account manager"):t.setSelectedItem({id:i.id,type:s}))}_onTableRowMouseEnter(e,t,s){const i=e;0!==this._mode&&c.linking.proSymbol.value()===i.symbol&&t.setHoveredItem({id:i.id,type:s})}_onTableRowMouseLeave(e,t){const s=e;0!==this._mode&&c.linking.proSymbol.value()===s.symbol&&t.dropHoveredItem()}_makeTableRowEventsHandlers(e,t){return{onClick:s=>this._onTableRowClick(s,e,t),onMouseEnter:s=>this._onTableRowMouseEnter(s,e,t),onMouseLeave:t=>this._onTableRowMouseLeave(t,e)}}async _getPages(){const e=this._adapter.metainfo().id,t=this._adapter.accountManagerInfo(),o=this._adapter.metainfo().configFlags,r=this._getPagesAvailabilityInfo(),a=(0,l.ensureNotNull)(this._trading.brokerCommandsUI()),c={},u=await this._trading.tradedItemsChartCollectionFacade(),d=void 0!==t.customFormatters?t.customFormatters.map((({name:e,formatText:t,formatElement:s,isPriceFormatterNeeded:i})=>void 0===s?{name:e,formatText:t}:{name:e,formatText:t,formatElement:e=>{const t=s(e);return t instanceof window.parent.Element?n.createElement(en,{element:t}):t},
isPriceFormatterNeeded:i})):[];if(r.positions){const s=this._makeTableRowEventsHandlers(u,Ji.TradedItemType.Position),i=async e=>{const t=await this._adapter.getSymbolSpecificTradingOptions(e);return Boolean(t?.supportReversePosition)};c.positionPage={ctor:Wi,ctorArguments:{brokerId:e,formatters:d,tableRowEventsHandlers:s,priceFormatterFn:this.priceFormatter.bind(this),checkSupportIndividualPositions:()=>!0===o.supportPositionNetting,checkPositionReverseSupport:i,positions:{source:()=>this._adapter.positions().then((e=>e.filter((e=>v(e))))),closeFn:a.closePosition.bind(a),editFn:o.supportPositionBrackets?a.editPositionBrackets.bind(a):null,reverseFn:o.supportReversePosition?a.reversePosition.bind(a):null,columns:(0,l.ensureDefined)(t.positionColumns),subscriptions:{rowUpdateDelegate:new g([this._adapter.positionPartialUpdate,this._adapter.positionUpdate]),countUpdateDelegate:this._adapter.positionUpdate,plSubscription:this._adapter.subscribePL.bind(this._adapter)}},individualPositions:o.supportPositionNetting?{source:()=>this._adapter.individualPositions().then((e=>e.filter((e=>0!==e.qty)))),closeFn:o.supportCloseIndividualPosition?a.closeIndividualPosition.bind(a):null,editFn:o.supportIndividualPositionBrackets?(0,l.ensureDefined)(a.editIndividualPositionBrackets).bind(a):null,reverseFn:null,columns:(0,l.ensureDefined)(t.individualPositionColumns||t.positionColumns),subscriptions:{rowUpdateDelegate:new g([this._adapter.individualPositionPartialUpdate,this._adapter.individualPositionUpdate]),countUpdateDelegate:this._adapter.individualPositionUpdate,plSubscription:this._adapter.subscribePL.bind(this._adapter)}}:null,fullUpdateDelegate:new g([this._adapter.currentAccountUpdate,this._adapter.positionsFullUpdate,this._adapter.individualPositionsFullUpdate]),overlapManager:this._overlapManager,getTableSettingsStorage:this._trading.getBrokerTradingSettingsStorage,trackEvent:this._trading.trackEvent,configFlags:o}}}const h=this._adapter.orders.bind(this._adapter),m=this._makeTableRowEventsHandlers(u,Ji.TradedItemType.Order);c.orderPage={ctor:Ei,ctorArguments:{id:"orders",title:i.t(null,void 0,s(652280)),source:h,cancelFn:a.cancelOrder.bind(a),modifyFn:a.modifyOrder.bind(a),columns:t.orderColumns,tableId:e+".orders",tableRowEventsHandlers:m,formatters:d,priceFormatterFn:this.priceFormatter.bind(this),subscriptions:{fullUpdateDelegate:new g([this._adapter.currentAccountUpdate,this._adapter.ordersFullUpdate]),rowUpdateDelegate:new g([this._adapter.orderPartialUpdate,this._adapter.orderUpdate]),orderUpdateDelegate:this._adapter.orderUpdate},possibleOrderStatuses:Mn.filter((e=>!t.possibleOrderStatuses||-1!==t.possibleOrderStatuses.indexOf(e))),filter:()=>!0,initialSorting:t.orderColumnsSorting,configFlags:o,overlapManager:this._overlapManager,getTableSettingsStorage:this._trading.getBrokerTradingSettingsStorage,trackEvent:this._trading.trackEvent}};const p=this._adapter.ordersHistory.bind(this._adapter);return r.history&&(c.historyPage={ctor:Ei,ctorArguments:{id:"history",title:i.t(null,void 0,s(641249)),
source:()=>Promise.all([h(),p()]).then((e=>[].concat(...e))),cancelFn:a.cancelOrder.bind(a),modifyFn:a.modifyOrder.bind(a),columns:(0,l.ensureDefined)(t.historyColumns),tableId:e+".history",tableRowEventsHandlers:m,formatters:d,priceFormatterFn:this.priceFormatter.bind(this),subscriptions:{fullUpdateDelegate:this._adapter.currentAccountUpdate,rowUpdateDelegate:new g([this._adapter.orderPartialUpdate,this._adapter.orderUpdate]),orderUpdateDelegate:this._adapter.orderUpdate},possibleOrderStatuses:Nn.filter((e=>!t.possibleOrderStatuses||-1!==t.possibleOrderStatuses.indexOf(e))),filter:e=>![3,4,6].includes(e.status),initialSorting:t.historyColumnsSorting,isAlwaysActive:!0,configFlags:o,overlapManager:this._overlapManager,getTableSettingsStorage:this._trading.getBrokerTradingSettingsStorage,trackEvent:this._trading.trackEvent}}),c.customPages=t.pages.map((t=>{const s=t.tables.map((s=>({id:`${e}.${t.id}.${s.id}`,title:s.title||"",columns:s.columns,source:s.getData,options:{className:"balances",idProperty:"id",defaultSortingParameters:s.initialSorting},formatters:d,priceFormatterFn:this.priceFormatter.bind(this),subscriptions:{fullUpdateDelegate:this._adapter.currentAccountUpdate,rowUpdateDelegate:s.changeDelegate,rowDeleteDelegate:s.deleteDelegate},flags:s.flags,rowEventsHandlers:s.flags?.supportLinking?{onClick:this._linkTableRowSymbol}:void 0})));return{ctor:Gs,ctorArguments:{id:t.id,title:t.title,tables:s,displayMode:this._mode,overlapManager:this._overlapManager,getTableSettingsStorage:this._trading.getBrokerTradingSettingsStorage,trackEvent:this._trading.trackEvent,displayCounterInTab:t.displayCounterInTab}}})),r.notifications&&(c.notificationsPage={ctor:ti,ctorArguments:{id:"notifications-log",title:i.t(null,void 0,s(371250)),source:()=>Promise.resolve(this._trading.getNotifications()),columns:Js,formatters:[Qs],priceFormatterFn:this.priceFormatter.bind(this),subscriptions:{fullUpdateDelegate:this._trading.onNotificationsChanged,rowUpdateDelegate:this._trading.onNewNotification},overlapManager:this._overlapManager,initialSorting:{property:"time",asc:!1},getTableSettingsStorage:this._trading.getBrokerTradingSettingsStorage,trackEvent:this._trading.trackEvent}}),c}_getPagesAvailabilityInfo(){const e=this._adapter.metainfo().configFlags;return{positions:Boolean(e.supportPositions),orders:!0,history:Boolean(e.supportOrdersHistory),tradeHistory:Boolean(e.supportTradeHistoryTabInAccountManager),notifications:Boolean(h.enabled("show_trading_notifications_history")&&e.showNotificationsLog)}}_renderTemplate(){const e=this._getPagesAvailabilityInfo(),t=Object.values(e).filter((e=>e)).length+this._adapter.accountManagerInfo().pages.length,s=(0,l.ensureNotNull)((0,f.parseHtmlElement)(((e=0,t)=>`<div class="${a()(Rn.accountManager,0===t&&Rn.popup)}">\n\t\t\t\t<div class="js-account-manager-header"></div>\n\t\t\t\t<div class="${Rn.topPanel} js-top-panel"></div>\n\t\t\t\t<div class="${Rn.secondaryPanel} js-secondary-panel"></div>\n\t\t\t\t<div class="${Rn.content}">\n\t\t\t\t\t${`<div class="${a()(Rn.page,(0,
d.isOnMobileAppPage)("any")&&Rn.mobile)} js-page"></div>`.repeat(e)}\n\t\t\t\t</div>\n\t\t\t</div>`)(t,this._mode)));this._container.appendChild(s)}async _create(){const e=await this._getPages();for(const t of Object.values(e))if(Array.isArray(t)){const e=t.map((e=>new e.ctor(e.ctorArguments)));this._pages.push(...e)}else this._pages.push(new t.ctor(t.ctorArguments));const t=this._container.querySelectorAll(".js-page");this._pages.forEach(((e,s)=>{t[s].innerHTML="",t[s].appendChild(e.content()),t[s].setAttribute(An,e.id())})),this._initializeTabs(),this._render()}async _render(){let e;1===this._mode&&(e=await(0,Qi.makeAccountManagerHeaderDropdownsProps)(this._trading,this._summaryFieldsVisibilityManager,1,(()=>this._getDataExporters()))),o.render(n.createElement(Xi,{...e,summaryFields:this._info.summary,summaryFieldsVisibilityManager:this._summaryFieldsVisibilityManager,isBetaBroker:this._adapter.metainfo().isBeta,displayMode:this._mode}),this._container.querySelector(".js-account-manager-header"))}_getDataExporters(){const e=new Map;for(const t of this._pages){const s=t.getExporters();e.set(s.title,s)}return e}_subscribe(){const e=e=>{e?this._updatePagesActiveStatuses():this._pages.forEach((e=>e.setActive(!1)))};this._bridge.visible.subscribe(e,{callWithLast:!0}),this._dispatchVisibilityHandler=()=>this._bridge.visible.unsubscribe(e)}_updatePagesActiveStatuses(){const e=this._currentPage().id();for(const t of this._pages)t.setActive(1===this._adapter.connectionStatus()&&t.id()===e)}_attachFilter(){const e=this._currentPage(),t=e.filterTabs(),s=(0,l.ensureNotNull)(this._container.querySelector(".js-secondary-panel"),"Filter container");0===t.length?o.unmountComponentAtNode(s):o.render(n.createElement(Fn,{key:e.id(),id:e.id(),onActivate:({id:t})=>e.activateFilterTab(t),defaultActiveFilterTabId:e.activeFilterTabId(),items:t}),s)}_fullUpdate(){this._pages.forEach((e=>e.reset()))}_unsubscribe(){this._dispatchVisibilityHandler&&(this._dispatchVisibilityHandler(),delete this._dispatchVisibilityHandler)}_currentPage(){const e=this._ensuredCurrentTabId();return(0,l.ensureDefined)(this._pages.find((t=>t.id()===e)),"Current page")}async _contextItems(e){const t=this._currentPage().contextRow(e);if(void 0===t)return;const n="Bottom Panel Context Menu",o=await this._currentPage().contextItems(e);if(this._info&&this._info.contextMenuActions)return this._info.contextMenuActions(e,o);const r={separator:!0},a=[],l=t.symbol;if(l)if(1===this._mode){0!==o.length&&a.push(r);const e=await this._trading.makeNewOrderContextMenuAction(l,n);a.push(e)}else 0!==o.length&&a.push(r),a.push({text:i.t(null,void 0,s(469435)).replace("{symbol}",l),icon:Dn,action:()=>{this._trading.trackEvent(n,"Open chart"),c.linking.setSymbolAndLogInitiator(l,"account manager"),this._trading.tradingPanelPopup.hide()}});else;return h.enabled("property_pages")&&(0!==o.length&&a.push(r),a.push({text:(0,_.appendEllipsis)(i.t(null,void 0,s(855527))),icon:In,action:()=>{this._trading.trackEvent(n,"Trading Properties"),this._trading.showTradingProperties()}})),o.concat(a)
}}},583882:(e,t,s)=>{"use strict";s.d(t,{useSymbolLogoAndDescription:()=>o});s(868333);var i=s(50959),n=s(334529);function o(e){{let t=[];const s=function(e,t=!0){const[s,o]=(0,i.useState)(null===e?{completed:!0,invalid:!0,quotes:null,symbol:e}:{completed:!1,invalid:!1,quotes:null,symbol:e});return(0,i.useEffect)((()=>{if(null===e)return void o({completed:!0,invalid:!0,quotes:null,symbol:e});o({completed:!1,invalid:!1,quotes:null,symbol:e});const s=(0,n.getQuoteSessionInstance)("full"),i=()=>{s.unsubscribe("useSymbolQuotes",e,r)},r=s=>{const{values:n,complete:r,status:a}=s;o({invalid:"error"===a,quotes:{...n},completed:void 0!==r||"error"===a,symbol:e}),void 0===r&&"error"!==a||t&&i()};return s.subscribe("useSymbolQuotes",e,r),()=>{i()}}),[e]),s}(e,!1),o=s.quotes;return o&&(o.logoid?t=[o.logoid]:o["currency-logoid"]&&o["base-currency-logoid"]&&(t=[o["base-currency-logoid"],o["currency-logoid"]])),{logoUrls:t,description:o?.description}}}},796160:(e,t,s)=>{"use strict";var i;s.d(t,{TradedItemType:()=>i}),function(e){e[e.Position=0]="Position",e[e.Order=1]="Order"}(i||(i={}))},935495:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18" fill="none"><path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd" d="m4 4h-2v10h2zm-2-1c-.55228 0-1 .44772-1 1v10c0 .5523.44772 1 1 1h2c.55228 0 1-.4477 1-1v-10c0-.55228-.44772-1-1-1zm8 1h-2v10h2zm-2-1c-.55228 0-1 .44772-1 1v10c0 .5523.44772 1 1 1h2c.5523 0 1-.4477 1-1v-10c0-.55228-.4477-1-1-1zm6 1h2v10h-2zm-1 0c0-.55228.4477-1 1-1h2c.5523 0 1 .44772 1 1v10c0 .5523-.4477 1-1 1h-2c-.5523 0-1-.4477-1-1z"/></svg>'},552019:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" d="M13.35 5.35a.5.5 0 0 0-.7-.7L9 8.29 5.35 4.65a.5.5 0 1 0-.7.7L8.29 9l-3.64 3.65a.5.5 0 0 0 .7.7L9 9.71l3.65 3.64a.5.5 0 0 0 .7-.7L9.71 9l3.64-3.65z"/></svg>'},610600:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" d="M11.44 3.34a1.5 1.5 0 0 1 2.12 0l1.09 1.09a1.5 1.5 0 0 1 0 2.12l-7 7a1.5 1.5 0 0 1-1.06.44H4V11.4c0-.4.16-.78.44-1.06l7-7Zm1.41.7a.5.5 0 0 0-.7 0l-.7.7 1.8 1.79.69-.7a.5.5 0 0 0 0-.7l-1.09-1.08Zm-.3 3.2-1.8-1.8-5.6 5.6a.5.5 0 0 0-.15.36v1.59h1.59a.5.5 0 0 0 .35-.15l5.6-5.6Z"/></svg>'},290556:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" d="m3.83 8.51.28.34 3.5 4 .76-.66L5.6 9.02H14v-1H5.6l2.78-3.17-.76-.66-3.5 4-.28.33Z"/></svg>'},281670:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" d="m14.16 8.5-.28.34-3.5 4-.76-.66L12.4 9H4V8h8.4L9.62 4.84l.76-.66 3.5 4 .28.33Z"/></svg>'},863509:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" d="M3.57 7.85 9 12.62l5.43-4.77-1.32-1.5L9 9.95l-4.11-3.6-1.32 1.5Z"/></svg>'},317140:e=>{
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><path fill="currentColor" d="m16.47 7.47 1.06 1.06L12.06 14l5.47 5.47-1.06 1.06L9.94 14l6.53-6.53Z"/></svg>'},685014:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><path fill="currentColor" fill-rule="evenodd" d="M8 5.5h12A2.5 2.5 0 0 1 22.5 8v12a2.5 2.5 0 0 1-2.5 2.5H8A2.5 2.5 0 0 1 5.5 20V8A2.5 2.5 0 0 1 8 5.5zM4 8a4 4 0 0 1 4-4h12a4 4 0 0 1 4 4v12a4 4 0 0 1-4 4H8a4 4 0 0 1-4-4V8zm15.49 5.07a.75.75 0 1 0-.98-1.14l-2.97 2.55-2.51-2.51a.75.75 0 0 0-1.02-.04l-3.5 3a.75.75 0 1 0 .98 1.14l2.97-2.55 2.51 2.51c.28.28.72.3 1.02.04l3.5-3z"/></svg>'},87523:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><path fill="currentColor" d="M11.42 7.52 6.02 14l5.4 6.48 1.16-.96-3.98-4.77H21v-1.5H8.6l3.98-4.77-1.16-.96Z"/></svg>'},505357:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><path fill="currentColor" d="m16.58 7.52 5.4 6.48-5.4 6.48-1.16-.96 3.98-4.77H7v-1.5h12.4l-3.98-4.77 1.16-.96Z"/></svg>'},168874:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><path fill="currentColor" d="m14 18.41-6.7-6.7 1.4-1.42 5.3 5.3 5.3-5.3 1.4 1.41-6.7 6.71Z"/></svg>'},465890:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 11 9" width="11" height="9" fill="none"><path stroke="currentColor" stroke-width="2" d="M0.999878 4L3.99988 7L9.99988 1"/></svg>'}}]);