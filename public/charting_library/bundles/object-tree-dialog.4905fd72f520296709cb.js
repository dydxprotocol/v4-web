(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[4862],{75831:e=>{e.exports={itemRow:"itemRow-1SBAfF8E",favoriteButton:"favoriteButton-1SBAfF8E",active:"active-1SBAfF8E",selected:"selected-1SBAfF8E",mobile:"mobile-1SBAfF8E",itemInfo:"itemInfo-1SBAfF8E",title:"title-1SBAfF8E",details:"details-1SBAfF8E",itemInfoWithPadding:"itemInfoWithPadding-1SBAfF8E",favorite:"favorite-1SBAfF8E",removeButton:"removeButton-1SBAfF8E"}},7279:e=>{e.exports={title:"title-3eZ-_4gp",empty:"empty-3eZ-_4gp",image:"image-3eZ-_4gp",contentList:"contentList-3eZ-_4gp"}},47937:e=>{e.exports={dialog:"dialog-3q1-PXu-",button:"button-3q1-PXu-"}},69560:e=>{e.exports={favorite:"favorite-I_fAY9V2",disabled:"disabled-I_fAY9V2",active:"active-I_fAY9V2",checked:"checked-I_fAY9V2"}},15169:e=>{e.exports={button:"button-3B9fDLtm",disabled:"disabled-3B9fDLtm",active:"active-3B9fDLtm",hidden:"hidden-3B9fDLtm"}},93500:(e,t,i)=>{"use strict";async function s(e,t,i){let s;for(let n=0;n<t;++n)try{return await e(s)}catch(e){s=e,await i(n)}throw s}async function n(e,t){return s(e,t,()=>Promise.resolve())}i.d(t,{getAllSourcesIcons:()=>h,loadAllSourcesIcons:()=>d});const o=(0,i(14071).getLogger)("DataSourcesIcons");let a=null;function r(){const e=i.c[78726];return e?Promise.resolve(e.exports.lineToolsIcons):i.e(1890).then(i.bind(i,78726)).then(e=>e.lineToolsIcons)}function l(){const e=i.c[87304];return e?Promise.resolve(e.exports.SERIES_ICONS):i.e(3718).then(i.bind(i,87304)).then(e=>e.SERIES_ICONS)}let c=null;function d(){return null===c&&(c=function(){const e=n(r,2).then(e=>e).catch(e=>(o.logWarn(e),{})),t=n(l,2).then(e=>e).catch(e=>(o.logWarn(e),{}));return Promise.all([e,t])}()),c.then(e=>(a={linetool:e[0],series:e[1]},a))}function h(){return a}},47497:(e,t,i)=>{"use strict";i.d(t,{DialogContentItem:()=>h});var s=i(67294),n=i(94184),o=i.n(n),a=i(85452),r=i(85779),l=i(75380);function c(e){const{url:t,...i}=e;return t?s.createElement("a",{...i,href:t}):s.createElement("div",{...i})}var d=i(75831);function h(e){const{title:t,subtitle:i,removeBtnLabel:n,onClick:h,onClickFavorite:u,onClickRemove:p,isActive:v,isSelected:g,isFavorite:w,isMobile:_=!1,showFavorite:f=!0,...b}=e;return s.createElement(c,{...b,className:o()(d.itemRow,v&&!g&&d.active,_&&d.mobile,g&&d.selected),onClick:m.bind(null,h),"data-role":"list-item","data-active":v},f&&u&&s.createElement(r.FavoriteButton,{className:o()(d.favoriteButton,w&&d.favorite,a.CheckMobile.any()&&d.mobile),isActive:v&&!g,isFilled:w,onClick:m.bind(null,u),"data-name":"list-item-favorite-button","data-favorite":w}),s.createElement("div",{className:o()(d.itemInfo,!f&&d.itemInfoWithPadding)},s.createElement("div",{className:o()(d.title,v&&!g&&d.active,_&&d.mobile),"data-name":"list-item-title"},t),s.createElement("div",{className:o()(d.details,v&&!g&&d.active,_&&d.mobile)},i)),s.createElement(l.RemoveButton,{className:d.removeButton,isActive:v&&!g,onClick:m.bind(null,p),"data-name":"list-item-remove-button",title:n}))}function m(e,t){t.defaultPrevented||(t.preventDefault(),e(t))}},46640:(e,t,i)=>{"use strict"
;i.d(t,{ManageDrawings:()=>M});var s=i(67294),n=i(16282),o=i(21659),a=i(38606),r=i(69878),l=i(74245),c=i(49972),d=i(14071),h=i(32420),m=i(47497),u=i(90592),p=i(79225),v=i(97641),g=i(14232),w=i(7279);(0,d.getLogger)("Chart.ManageDrawings");const _=new c.TranslatedString("remove all line tools for {symbol}",(0,l.t)("remove all line tools for {symbol}")),f=e=>(0,l.t)("{drawingsCount} drawing",{plural:"{drawingsCount} drawings",count:e}).format({drawingsCount:e.toString()}),b=(0,l.t)("Remove all drawings for this symbol"),C=(0,l.t)("No drawings yet");class M extends s.PureComponent{constructor(e){super(e),this._totalCount=0,this._model=null,this._symbolDrawingsMap=null,this._storageContentLoadingPromise=null,this._onItemClick=e=>{""!==e&&(this.props.chartWidget.setSymbol(e),null!==this._model&&this.setState({currentSymbol:e}),this.props.onClose&&this.props.onClose())},this._onRemove=async e=>{if(this._model&&this._symbolDrawingsMap){const t=this._symbolDrawingsMap.get(e);if(t){const i=Array.from(t).map(e=>(0,n.ensureNotNull)(this._model).model().dataSourceForId(e)).filter(u.notNull);i.length>0&&this._model.removeSources(i,!1,_.format({symbol:e})),this._updateItems()}}},this._updateItems=async()=>{if(null!==this._model){const e=await this._getItems(this._model.model().dataSources());this.setState({items:e})}},this._updateTheme=()=>{const e=r.watchedTheme.value();this.setState({theme:e})},this.state={currentSymbol:null,items:null,theme:r.watchedTheme.value()}}componentDidMount(){this.props.chartWidget.withModel(this,async()=>{this._model=this.props.chartWidget.model(),this._model.model().dataSourceCollectionChanged().subscribe(this,this._updateItems);const e=await this._getItems(this._model.model().dataSources());this.setState({currentSymbol:this._model.mainSeries().symbol(),items:e},()=>{var e,t;return null===(t=(e=this.props).onInitialized)||void 0===t?void 0:t.call(e)})}),r.watchedTheme.subscribe(this._updateTheme)}componentWillUnmount(){r.watchedTheme.unsubscribe(this._updateTheme),null!==this._model&&this._model.model().dataSourceCollectionChanged().unsubscribe(this,this._updateItems)}render(){const{isMobile:e}=this.props,{currentSymbol:t,items:i}=this.state,n=this._symbolDrawingsMap?this._symbolDrawingsMap.size:0,o=`${a=n,(0,l.t)("{symbolsCount} symbol",{plural:"{symbolsCount} symbols",context:"symbols_and_drawings_count",count:a}).format({symbolsCount:a.toString()})} ${(e=>(0,l.t)("with {drawingsCount} drawing",{plural:"with {drawingsCount} drawings",context:"symbols_and_drawings_count",count:e}).format({drawingsCount:e.toString()}))(this._totalCount)}`;var a;return s.createElement(s.Fragment,null,s.createElement("div",{className:w.title},o),null===i||0===i.length?this._renderEmptyContent():i.map(i=>s.createElement(m.DialogContentItem,{key:i.symbol,title:i.symbol,subtitle:f(i.drawingsCount),removeBtnLabel:b,isActive:i.symbol===t,isMobile:e,onClick:this._onItemClick.bind(this,i.symbol),onClickRemove:this._onRemove.bind(this,i.symbol),showFavorite:!1})))}_renderEmptyContent(){
const{theme:e}=this.state,t=e===a.StdTheme.Dark?g:v;return null===this._symbolDrawingsMap?s.createElement(p.Spinner,null):s.createElement("div",{className:w.empty},s.createElement(o.Icon,{className:w.image,icon:t}),s.createElement("span",null,C))}async _getStorageContent(){return new Map}async _getItems(e){const t=[],i=this._getSymbolDrawingsMap(e);return(await this._getStorageContent()).forEach((e,t)=>{const s=i.get(t)||new Set;e.forEach(e=>s.add(e)),i.set(t,s)}),this._symbolDrawingsMap=i,this._totalCount=0,this._symbolDrawingsMap.forEach((e,i)=>{t.push({symbol:i,drawingsCount:e.size}),this._totalCount=this._totalCount+e.size}),t.sort((e,t)=>e.drawingsCount===t.drawingsCount?e.symbol.localeCompare(t.symbol):e.drawingsCount>t.drawingsCount?-1:1)}_getSymbolDrawingsMap(e){const t=new Map;return e.forEach(e=>{var i;if((0,h.isLineTool)(e)&&e.showInObjectTree()){const s=null!==(i=e.symbol())&&void 0!==i?i:"",n=t.get(s)||new Set;n.add(e.id()),t.set(s,n)}}),t}}},56283:(e,t,i)=>{"use strict";i.r(t),i.d(t,{ObjectTreeDialogRenderer:()=>E});var s=i(67294),n=i(73935),o=i(93500),a=i(54664),r=i(36393),l=i(46403),c=i(74245),d=i(94459),h=i(4311),m=i(46640);var u=i(36604),p=i(71176),v=i(10384),g=i(47937);class w extends s.PureComponent{constructor(e){super(e),this._isMounted=!1,this._dialogRef=s.createRef(),this._renderChildren=e=>s.createElement(_,{isSmallTablet:e,viewModel:this.props.viewModel}),this._handleMediaChange=()=>{this.state.showDrawer&&!window.matchMedia(h.DialogBreakpoints.TabletSmall).matches&&this.setState({showDrawer:!1})},this._onManageDrawings=e=>{throw new Error("not supported")},this._closeDrawer=()=>{this.setState({showDrawer:!1})},this._handleContextMenuOpened=e=>{this.setState({isContextMenuOpened:e})},this._matchMedia=window.matchMedia(h.DialogBreakpoints.TabletSmall),this.state={showDrawer:!1,showDialog:!1,isContextMenuOpened:!1}}componentDidMount(){this._isMounted=!0,this._matchMedia.addListener(this._handleMediaChange),this.props.viewModel.isContextMenuOpened().subscribe(this._handleContextMenuOpened)}componentWillUnmount(){this._isMounted=!1,this._matchMedia.removeListener(this._handleMediaChange),this.props.viewModel.isContextMenuOpened().unsubscribe(this._handleContextMenuOpened)}render(){return s.createElement(s.Fragment,null,s.createElement(l.MatchMedia,{rule:h.DialogBreakpoints.TabletSmall},e=>s.createElement(d.AdaptivePopupDialog,{additionalElementPos:"after",additionalHeaderElement:!1,className:g.dialog,dataName:"object-tree-dialog",isOpened:!0,onClickOutside:this.state.showDialog||e||this.state.isContextMenuOpened?()=>{}:this.props.onClose,onClose:this.props.onClose,ref:this._dialogRef,render:()=>this._renderChildren(e),title:(0,c.t)("Object tree"),showSeparator:!0})),s.createElement(r.DrawerManager,null,this.state.showDrawer&&s.createElement(a.Drawer,{onClose:this._closeDrawer,position:"Bottom"},s.createElement(m.ManageDrawings,{onClose:this._closeDrawer,chartWidget:this.props.activeChartWidget,isMobile:!0}))))}}function _(e){const{isSmallTablet:t,viewModel:i}=e,n=(0,s.useMemo)(()=>({size:t?1:0,
smallSizeTreeNodeAction:0}),[t]);return s.createElement(v.SizeContext.Provider,{value:n},s.createElement(u.ObjectTree,{nodeRenderer:p.NodeRenderer,showHeader:!1,viewModel:i,isDialog:!0}))}var f=i(63795),b=i(56417),C=i(49501),M=i(8361);class E extends M.DialogRenderer{constructor(){super(),this._handleClose=()=>{n.unmountComponentAtNode(this._container),this._setVisibility(!1),null!==this._viewModel&&(this._viewModel.destroy(),this._viewModel=null)};const e=(0,f.service)(b.CHART_WIDGET_COLLECTION_SERVICE);this._activeChartWidget=e.activeChartWidget.value(),this._viewModel=new C.ObjectTree(e.activeChartWidget)}hide(){this._handleClose()}isVisible(){return this.visible().value()}show(){(0,o.loadAllSourcesIcons)().then(()=>{null!==this._viewModel&&(n.render(s.createElement(w,{onClose:this._handleClose,viewModel:this._viewModel,activeChartWidget:this._activeChartWidget}),this._container),this._setVisibility(!0))})}}},85779:(e,t,i)=>{"use strict";i.d(t,{FavoriteButton:()=>h});var s=i(74245),n=i(67294),o=i(94184),a=i(21659),r=i(64626),l=i(1579),c=i(69560);const d={add:(0,s.t)("Add to favorites"),remove:(0,s.t)("Remove from favorites")};function h(e){const{className:t,isFilled:i,isActive:s,onClick:h,...m}=e;return n.createElement(a.Icon,{...m,className:o(c.favorite,"apply-common-tooltip",i&&c.checked,s&&c.active,t),icon:i?r:l,onClick:h,title:i?d.remove:d.add})}},51720:(e,t,i)=>{"use strict";i.d(t,{hoverMouseEventFilter:()=>o,useAccurateHover:()=>a,useHover:()=>n});var s=i(67294);function n(){const[e,t]=(0,s.useState)(!1);return[e,{onMouseOver:function(e){o(e)&&t(!0)},onMouseOut:function(e){o(e)&&t(!1)}}]}function o(e){return!e.currentTarget.contains(e.relatedTarget)}function a(e){const[t,i]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{const t=t=>{if(null===e.current)return;const s=e.current.contains(t.target);i(s)};return document.addEventListener("mouseover",t),()=>document.removeEventListener("mouseover",t)},[]),t}},75380:(e,t,i)=>{"use strict";i.d(t,{RemoveButton:()=>d});var s=i(74245),n=i(67294),o=i(94184),a=i(21659),r=i(53797),l=i(15169);const c={remove:(0,s.t)("Remove")};function d(e){const{className:t,isActive:i,onClick:s,title:d,hidden:h,"data-name":m="remove-button",...u}=e;return n.createElement(a.Icon,{...u,"data-name":m,className:o(l.button,"apply-common-tooltip",i&&l.active,h&&l.hidden,t),icon:r,onClick:s,title:d||c.remove})}},79225:(e,t,i)=>{"use strict";i.d(t,{Spinner:()=>a});var s=i(67294),n=i(94184),o=i(30722);i(11739);function a(e){const t=n(e.className,"tv-spinner","tv-spinner--shown","tv-spinner--size_"+o.spinnerSizeMap[e.size||o.DEFAULT_SIZE]);return s.createElement("div",{className:t,style:e.style,role:"progressbar"},s.createElement("div",{className:"tv-spinner__spinner-layer"},s.createElement("div",{className:"tv-spinner__background tv-spinner__width_element"}),s.createElement("div",{className:"tv-spinner__circle-clipper tv-spinner__width_element tv-spinner__circle-clipper--left"}),s.createElement("div",{className:"tv-spinner__circle-clipper tv-spinner__width_element tv-spinner__circle-clipper--right"
})))}},14232:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="-10 -10 120 120" width="120" height="120" fill="none"><g clip-path="url(#a00y35lj1)"><path fill="#2A2E39" d="M16.01 71.1c10.54 13.42 34.92 11.86 54.46-3.48s26.85-38.65 16.3-52.08C76.25 2.12 51.87 3.68 32.33 19.02c-9.2 7.22-15.68 16.2-18.87 25.09-.68 1.88-2.57 3.05-4.53 3.48a9.7 9.7 0 0 0-3.96 1.85C.5 52.94-.09 59.64 3.64 64.4a11.24 11.24 0 0 0 7.82 4.31 6.2 6.2 0 0 1 4.55 2.4z"/><path fill="#1848CC" d="M28.3 35.56c1.8 3.42 12.08 10.65 25.62 16.88 6.36 2.93 12.38 5.3 17.37 6.93a172.7 172.7 0 0 0-18-12.68c-14.59-9.1-24.97-12.4-24.97-12.4-.18.3-.19.72-.01 1.27z"/><path stroke="#B2B5BE" stroke-width="1.5" d="M86.25 71.4c-.19.28-.54.53-1.17.69-.63.15-1.48.19-2.56.08-2.14-.22-5-1-8.4-2.28-6.78-2.57-15.53-7.13-24.64-13.06-9.12-5.93-16.82-12.1-21.92-17.25-2.55-2.59-4.41-4.89-5.48-6.76a7.79 7.79 0 0 1-.96-2.37c-.12-.64-.03-1.06.16-1.35.2-.3.54-.55 1.17-.7a7.8 7.8 0 0 1 2.56-.08c2.14.22 5 1 8.4 2.28 6.78 2.57 15.53 7.12 24.65 13.06 9.1 5.93 16.81 12.1 21.9 17.25 2.56 2.58 4.43 4.89 5.5 6.76.53.94.84 1.73.95 2.37.12.64.03 1.06-.16 1.35z"/><path stroke="#B2B5BE" stroke-linecap="round" stroke-width="1.5" d="M28.96 34.63c1.99.57 4.47 1.55 7.3 2.86l12.2 6.52a193.2 193.2 0 0 1 6.66 4.15c10.56 6.88 19.12 13.86 22.97 18.45"/><path stroke="#B2B5BE" stroke-width="1.5" d="M83.79 65.59c6.77-14.14 1.41-32-13.05-41.42-14.46-9.41-32.96-7.09-43.15 4.83M74.96 21.24a6.08 6.08 0 0 1-2.58 2.3c-.9.39-1.69.35-2.23 0-.54-.36-.9-1.05-.9-2.04a6.08 6.08 0 0 1 1.05-3.29 6.07 6.07 0 0 1 2.58-2.29c.9-.4 1.69-.35 2.23 0s.9 1.05.9 2.04c.01.98-.32 2.17-1.05 3.28z"/><path stroke="#B2B5BE" stroke-linecap="round" stroke-width="1.5" d="M42.7 23.62c1.25-.3 4.56-1.3 8.92-1.3M80.14 84.07C76.5 84.03 64.4 84 50 84s-26.5.03-30.14.07M24.7 59.33l5.77 5.32M32.05 56.05l.84 3.28"/></g><defs><clipPath id="a00y35lj1"><path fill="#fff" d="M0 0h100v100H0V0z"/></clipPath></defs></svg>'},97641:e=>{
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="-10 -10 120 120" width="120" height="120" fill="none"><g clip-path="url(#avi4cgf11)"><path fill="#F0F3FA" d="M16.01 71.1c10.54 13.42 34.92 11.86 54.46-3.48s26.85-38.65 16.3-52.08C76.25 2.12 51.87 3.68 32.33 19.02c-9.2 7.22-15.68 16.2-18.87 25.09-.68 1.88-2.57 3.05-4.53 3.48a9.7 9.7 0 0 0-3.96 1.85C.5 52.94-.09 59.64 3.64 64.4a11.24 11.24 0 0 0 7.82 4.31 6.2 6.2 0 0 1 4.55 2.4z"/><path fill="url(#bvi4cgf11)" d="M28.3 35.56c1.8 3.42 12.08 10.65 25.62 16.88 6.36 2.93 12.38 5.3 17.37 6.93a172.7 172.7 0 0 0-18-12.68c-14.59-9.1-24.97-12.4-24.97-12.4-.18.3-.19.72-.01 1.27z"/><path stroke="#1E222D" stroke-width="1.5" d="M86.25 71.4c-.19.28-.54.53-1.17.69-.63.15-1.48.19-2.56.08-2.14-.22-5-1-8.4-2.28-6.78-2.57-15.53-7.13-24.64-13.06-9.12-5.93-16.82-12.1-21.92-17.25-2.55-2.59-4.41-4.89-5.48-6.76a7.79 7.79 0 0 1-.96-2.37c-.12-.64-.03-1.06.16-1.35.2-.3.54-.55 1.17-.7a7.8 7.8 0 0 1 2.56-.08c2.14.22 5 1 8.4 2.28 6.78 2.57 15.53 7.12 24.65 13.06 9.1 5.93 16.81 12.1 21.9 17.25 2.56 2.58 4.43 4.89 5.5 6.76.53.94.84 1.73.95 2.37.12.64.03 1.06-.16 1.35z"/><path stroke="#1E222D" stroke-linecap="round" stroke-width="1.5" d="M28.96 34.63c1.99.57 4.47 1.55 7.3 2.86l12.2 6.52a193.2 193.2 0 0 1 6.66 4.15c10.56 6.88 19.12 13.86 22.97 18.45"/><path stroke="#1E222D" stroke-width="1.5" d="M83.79 65.59c6.77-14.14 1.41-32-13.05-41.42-14.46-9.41-32.96-7.09-43.15 4.83M74.96 21.24a6.08 6.08 0 0 1-2.58 2.3c-.9.39-1.69.35-2.23 0-.54-.36-.9-1.05-.9-2.04a6.08 6.08 0 0 1 1.05-3.29 6.07 6.07 0 0 1 2.58-2.29c.9-.4 1.69-.35 2.23 0s.9 1.05.9 2.04c.01.98-.32 2.17-1.05 3.28z"/><path stroke="#1E222D" stroke-linecap="round" stroke-width="1.5" d="M42.7 23.62c1.25-.3 4.56-1.3 8.92-1.3M80.14 84.07C76.5 84.03 64.4 84 50 84s-26.5.03-30.14.07M24.7 59.33l5.77 5.32M32.05 56.05l.84 3.28"/></g><defs><linearGradient gradientUnits="userSpaceOnUse" x1="49.73" x2="49.73" y1="34.29" y2="59.37" id="bvi4cgf11"><stop stop-color="#2962FF"/><stop offset="1" stop-color="#2962FF"/></linearGradient><clipPath id="avi4cgf11"><path fill="#fff" d="M0 0h100v100H0V0z"/></clipPath></defs></svg>'},64626:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18" fill="none"><path fill="currentColor" d="M9 1l2.35 4.76 5.26.77-3.8 3.7.9 5.24L9 13l-4.7 2.47.9-5.23-3.8-3.71 5.25-.77L9 1z"/></svg>'},1579:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18" fill="none"><path stroke="currentColor" d="M9 2.13l1.903 3.855.116.236.26.038 4.255.618-3.079 3.001-.188.184.044.259.727 4.237-3.805-2L9 12.434l-.233.122-3.805 2.001.727-4.237.044-.26-.188-.183-3.079-3.001 4.255-.618.26-.038.116-.236L9 2.13z"/></svg>'}}]);